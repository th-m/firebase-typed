!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t="undefined"!=typeof globalThis?globalThis:t||self).firebase=e()}(this,function(){"use strict";function r(t){if("string"!=typeof t&&(t=String(t)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(t))throw new TypeError("Invalid character in header field name");return t.toLowerCase()}function i(t){return"string"!=typeof t&&(t=String(t)),t}function t(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return d&&(t[Symbol.iterator]=function(){return t}),t}function s(e){this.map={},e instanceof s?e.forEach(function(t,e){this.append(e,t)},this):Array.isArray(e)?e.forEach(function(t){this.append(t[0],t[1])},this):e&&Object.getOwnPropertyNames(e).forEach(function(t){this.append(t,e[t])},this)}function o(t){if(t.bodyUsed)return Promise.reject(new TypeError("Already read"));t.bodyUsed=!0}function a(n){return new Promise(function(t,e){n.onload=function(){t(n.result)},n.onerror=function(){e(n.error)}})}function e(t){var e=new FileReader,n=a(e);return e.readAsArrayBuffer(t),n}function n(t){if(t.slice)return t.slice(0);var e=new Uint8Array(t.byteLength);return e.set(new Uint8Array(t)),e.buffer}function u(){return this.bodyUsed=!1,this._initBody=function(t){if(this._bodyInit=t)if("string"==typeof t)this._bodyText=t;else if(v&&Blob.prototype.isPrototypeOf(t))this._bodyBlob=t;else if(y&&FormData.prototype.isPrototypeOf(t))this._bodyFormData=t;else if(p&&URLSearchParams.prototype.isPrototypeOf(t))this._bodyText=t.toString();else if(g&&v&&b(t))this._bodyArrayBuffer=n(t.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer]);else{if(!g||!ArrayBuffer.prototype.isPrototypeOf(t)&&!_(t))throw new Error("unsupported BodyInit type");this._bodyArrayBuffer=n(t)}else this._bodyText="";this.headers.get("content-type")||("string"==typeof t?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):p&&URLSearchParams.prototype.isPrototypeOf(t)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},v&&(this.blob=function(){var t=o(this);if(t)return t;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?o(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(e)}),this.text=function(){var t,e,n,r=o(this);if(r)return r;if(this._bodyBlob)return t=this._bodyBlob,e=new FileReader,n=a(e),e.readAsText(t),n;if(this._bodyArrayBuffer)return Promise.resolve(function(t){for(var e=new Uint8Array(t),n=new Array(e.length),r=0;r<e.length;r++)n[r]=String.fromCharCode(e[r]);return n.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},y&&(this.formData=function(){return this.text().then(h)}),this.json=function(){return this.text().then(JSON.parse)},this}function c(t,e){var n,r,i=(e=e||{}).body;if(t instanceof c){if(t.bodyUsed)throw new TypeError("Already read");this.url=t.url,this.credentials=t.credentials,e.headers||(this.headers=new s(t.headers)),this.method=t.method,this.mode=t.mode,i||null==t._bodyInit||(i=t._bodyInit,t.bodyUsed=!0)}else this.url=String(t);if(this.credentials=e.credentials||this.credentials||"omit",!e.headers&&this.headers||(this.headers=new s(e.headers)),this.method=(n=e.method||this.method||"GET",r=n.toUpperCase(),-1<w.indexOf(r)?r:n),this.mode=e.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&i)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(i)}function h(t){var i=new FormData;return t.trim().split("&").forEach(function(t){var e,n,r;t&&(n=(e=t.split("=")).shift().replace(/\+/g," "),r=e.join("=").replace(/\+/g," "),i.append(decodeURIComponent(n),decodeURIComponent(r)))}),i}function l(t,e){e=e||{},this.type="default",this.status=void 0===e.status?200:e.status,this.ok=200<=this.status&&this.status<300,this.statusText="statusText"in e?e.statusText:"OK",this.headers=new s(e.headers),this.url=e.url||"",this._initBody(t)}var f,p,d,v,y,g,m,b,_,w,E;(f="undefined"!=typeof self?self:void 0).fetch||(p="URLSearchParams"in f,d="Symbol"in f&&"iterator"in Symbol,v="FileReader"in f&&"Blob"in f&&function(){try{return new Blob,!0}catch(t){return!1}}(),y="FormData"in f,(g="ArrayBuffer"in f)&&(m=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],b=function(t){return t&&DataView.prototype.isPrototypeOf(t)},_=ArrayBuffer.isView||function(t){return t&&-1<m.indexOf(Object.prototype.toString.call(t))}),s.prototype.append=function(t,e){t=r(t),e=i(e);var n=this.map[t];this.map[t]=n?n+","+e:e},s.prototype.delete=function(t){delete this.map[r(t)]},s.prototype.get=function(t){return t=r(t),this.has(t)?this.map[t]:null},s.prototype.has=function(t){return this.map.hasOwnProperty(r(t))},s.prototype.set=function(t,e){this.map[r(t)]=i(e)},s.prototype.forEach=function(t,e){for(var n in this.map)this.map.hasOwnProperty(n)&&t.call(e,this.map[n],n,this)},s.prototype.keys=function(){var n=[];return this.forEach(function(t,e){n.push(e)}),t(n)},s.prototype.values=function(){var e=[];return this.forEach(function(t){e.push(t)}),t(e)},s.prototype.entries=function(){var n=[];return this.forEach(function(t,e){n.push([e,t])}),t(n)},d&&(s.prototype[Symbol.iterator]=s.prototype.entries),w=["DELETE","GET","HEAD","OPTIONS","POST","PUT"],c.prototype.clone=function(){return new c(this,{body:this._bodyInit})},u.call(c.prototype),u.call(l.prototype),l.prototype.clone=function(){return new l(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new s(this.headers),url:this.url})},l.error=function(){var t=new l(null,{status:0,statusText:""});return t.type="error",t},E=[301,302,303,307,308],l.redirect=function(t,e){if(-1===E.indexOf(e))throw new RangeError("Invalid status code");return new l(null,{status:e,headers:{location:t}})},f.Headers=s,f.Request=c,f.Response=l,f.fetch=function(n,i){return new Promise(function(r,t){var e=new c(n,i),o=new XMLHttpRequest;o.onload=function(){var t,i,e={status:o.status,statusText:o.statusText,headers:(t=o.getAllResponseHeaders()||"",i=new s,t.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach(function(t){var e,n=t.split(":"),r=n.shift().trim();r&&(e=n.join(":").trim(),i.append(r,e))}),i)};e.url="responseURL"in o?o.responseURL:e.headers.get("X-Request-URL");var n="response"in o?o.response:o.responseText;r(new l(n,e))},o.onerror=function(){t(new TypeError("Network request failed"))},o.ontimeout=function(){t(new TypeError("Network request failed"))},o.open(e.method,e.url,!0),"include"===e.credentials?o.withCredentials=!0:"omit"===e.credentials&&(o.withCredentials=!1),"responseType"in o&&v&&(o.responseType="blob"),e.headers.forEach(function(t,e){o.setRequestHeader(e,t)}),o.send(void 0===e._bodyInit?null:e._bodyInit)})},f.fetch.polyfill=!0);var I="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function T(t,e){return t(e={exports:{}},e.exports),e.exports}function S(t){return t&&t.Math==Math&&t}function C(t){try{return!!t()}catch(t){return!0}}function N(t){return"object"==typeof t?null!==t:"function"==typeof t}function A(t){return V?j.createElement(t):{}}function k(t){if(!N(t))throw TypeError(String(t)+" is not an object");return t}function O(t,e){if(!N(t))return t;var n,r;if(e&&"function"==typeof(n=t.toString)&&!N(r=n.call(t)))return r;if("function"==typeof(n=t.valueOf)&&!N(r=n.call(t)))return r;if(!e&&"function"==typeof(n=t.toString)&&!N(r=n.call(t)))return r;throw TypeError("Can't convert object to primitive value")}function R(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}function P(e,n){try{G(M,e,n)}catch(t){M[e]=n}return n}function D(t,e){return Q.call(t,e)}function x(t){return"Symbol("+String(void 0===t?"":t)+")_"+(++Y+X).toString(36)}function L(t){return D(Z,t)||($&&D(tt,t)?Z[t]=tt[t]:Z[t]=et("Symbol."+t)),Z[t]}var M=S("object"==typeof globalThis&&globalThis)||S("object"==typeof window&&window)||S("object"==typeof self&&self)||S("object"==typeof I&&I)||Function("return this")(),F=!1,U=!C(function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}),j=M.document,V=N(j)&&N(j.createElement),q=!U&&!C(function(){return 7!=Object.defineProperty(A("div"),"a",{get:function(){return 7}}).a}),B=Object.defineProperty,W={f:U?B:function(t,e,n){if(k(t),e=O(e,!0),k(n),q)try{return B(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(t[e]=n.value),t}},G=U?function(t,e,n){return W.f(t,e,R(1,n))}:function(t,e,n){return t[e]=n,t},H="__core-js_shared__",K=M[H]||P(H,{}),z=T(function(t){(t.exports=function(t,e){return K[t]||(K[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.6.5",mode:"global",copyright:"Â© 2020 Denis Pushkarev (zloirock.ru)"})}),Q={}.hasOwnProperty,Y=0,X=Math.random(),$=!!Object.getOwnPropertySymbols&&!C(function(){return!String(Symbol())}),J=$&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,Z=z("wks"),tt=M.Symbol,et=J?tt:tt&&tt.withoutSetter||x,nt={};nt[L("toStringTag")]="z";var rt="[object z]"===String(nt),it=Function.toString;"function"!=typeof K.inspectSource&&(K.inspectSource=function(t){return it.call(t)});function ot(t){return gt[t]||(gt[t]=x(t))}var st,at,ut,ct,ht,lt,ft,pt,dt=K.inspectSource,vt=M.WeakMap,yt="function"==typeof vt&&/native code/.test(dt(vt)),gt=z("keys"),mt={},bt=M.WeakMap;ft=yt?(st=new bt,at=st.get,ut=st.has,ct=st.set,ht=function(t,e){return ct.call(st,t,e),e},lt=function(t){return at.call(st,t)||{}},function(t){return ut.call(st,t)}):(pt=ot("state"),mt[pt]=!0,ht=function(t,e){return G(t,pt,e),e},lt=function(t){return D(t,pt)?t[pt]:{}},function(t){return D(t,pt)});function _t(t){return It.call(t).slice(8,-1)}var wt={set:ht,get:lt,has:ft,enforce:function(t){return ft(t)?lt(t):ht(t,{})},getterFor:function(n){return function(t){var e;if(!N(t)||(e=lt(t)).type!==n)throw TypeError("Incompatible receiver, "+n+" required");return e}}},Et=T(function(t){var e=wt.get,a=wt.enforce,u=String(String).split("String");(t.exports=function(t,e,n,r){var i=!!r&&!!r.unsafe,o=!!r&&!!r.enumerable,s=!!r&&!!r.noTargetGet;"function"==typeof n&&("string"!=typeof e||D(n,"name")||G(n,"name",e),a(n).source=u.join("string"==typeof e?e:"")),t!==M?(i?!s&&t[e]&&(o=!0):delete t[e],o?t[e]=n:G(t,e,n)):o?t[e]=n:P(e,n)})(Function.prototype,"toString",function(){return"function"==typeof this&&e(this).source||dt(this)})}),It={}.toString,Tt=L("toStringTag"),St="Arguments"==_t(function(){return arguments}()),Ct=rt?_t:function(t){var e,n,r;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),Tt))?n:St?_t(e):"Object"==(r=_t(e))&&"function"==typeof e.callee?"Arguments":r},Nt=rt?{}.toString:function(){return"[object "+Ct(this)+"]"};rt||Et(Object.prototype,"toString",Nt,{unsafe:!0});function At(t){return isNaN(t=+t)?0:(0<t?Ht:Gt)(t)}function kt(t){if(null==t)throw TypeError("Can't call method on "+t);return t}function Ot(a){return function(t,e){var n,r,i=String(kt(t)),o=At(e),s=i.length;return o<0||s<=o?a?"":void 0:(n=i.charCodeAt(o))<55296||56319<n||o+1===s||(r=i.charCodeAt(o+1))<56320||57343<r?a?i.charAt(o):n:a?i.slice(o,o+2):r-56320+(n-55296<<10)+65536}}function Rt(t){return $t(kt(t))}function Pt(t){return"function"==typeof t?t:void 0}function Dt(t,e){return arguments.length<2?Pt(te[t])||Pt(M[t]):te[t]&&te[t][e]||M[t]&&M[t][e]}function xt(t){return 0<t?ee(At(t),9007199254740991):0}function Lt(c){return function(t,e,n){var r,i,o,s=Rt(t),a=xt(s.length),u=(r=a,(i=At(n))<0?ne(i+r,0):re(i,r));if(c&&e!=e){for(;u<a;)if((o=s[u++])!=o)return!0}else for(;u<a;u++)if((c||u in s)&&s[u]===e)return c||u||0;return!c&&-1}}function Mt(t,e){var n,r=Rt(t),i=0,o=[];for(n in r)!D(mt,n)&&D(r,n)&&o.push(n);for(;e.length>i;)D(r,n=e[i++])&&(~ie(o,n)||o.push(n));return o}function Ft(t,e){for(var n=ce(e),r=W.f,i=Zt.f,o=0;o<n.length;o++){var s=n[o];D(t,s)||r(t,s,i(e,s))}}function Ut(t,e){var n=fe[le(t)];return n==de||n!=pe&&("function"==typeof e?C(e):!!e)}function jt(t,e){var n,r,i,o,s=t.target,a=t.global,u=t.stat,c=a?M:u?M[s]||P(s,{}):(M[s]||{}).prototype;if(c)for(n in e){if(i=e[n],r=t.noTargetGet?(o=ye(c,n))&&o.value:c[n],!ve(a?n:s+(u?".":"#")+n,t.forced)&&void 0!==r){if(typeof i==typeof r)continue;Ft(i,r)}(t.sham||r&&r.sham)&&G(i,"sham",!0),Et(c,n,i,t)}}function Vt(t){return Object(kt(t))}var qt,Bt,Wt,Gt=Math.ceil,Ht=Math.floor,Kt={codeAt:Ot(!1),charAt:Ot(!0)},zt={}.propertyIsEnumerable,Qt=Object.getOwnPropertyDescriptor,Yt={f:Qt&&!zt.call({1:2},1)?function(t){var e=Qt(this,t);return!!e&&e.enumerable}:zt},Xt="".split,$t=C(function(){return!Object("z").propertyIsEnumerable(0)})?function(t){return"String"==_t(t)?Xt.call(t,""):Object(t)}:Object,Jt=Object.getOwnPropertyDescriptor,Zt={f:U?Jt:function(t,e){if(t=Rt(t),e=O(e,!0),q)try{return Jt(t,e)}catch(t){}if(D(t,e))return R(!Yt.f.call(t,e),t[e])}},te=M,ee=Math.min,ne=Math.max,re=Math.min,ie={includes:Lt(!0),indexOf:Lt(!1)}.indexOf,oe=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],se=oe.concat("length","prototype"),ae={f:Object.getOwnPropertyNames||function(t){return Mt(t,se)}},ue={f:Object.getOwnPropertySymbols},ce=Dt("Reflect","ownKeys")||function(t){var e=ae.f(k(t)),n=ue.f;return n?e.concat(n(t)):e},he=/#|\.prototype\./,le=Ut.normalize=function(t){return String(t).replace(he,".").toLowerCase()},fe=Ut.data={},pe=Ut.NATIVE="N",de=Ut.POLYFILL="P",ve=Ut,ye=Zt.f,ge=!C(function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype}),me=ot("IE_PROTO"),be=Object.prototype,_e=ge?Object.getPrototypeOf:function(t){return t=Vt(t),D(t,me)?t[me]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?be:null},we=L("iterator"),Ee=!1;[].keys&&("next"in(Wt=[].keys())?(Bt=_e(_e(Wt)))!==Object.prototype&&(qt=Bt):Ee=!0),null==qt&&(qt={}),D(qt,we)||G(qt,we,function(){return this});function Ie(){}function Te(t){return"<script>"+t+"</"+Re+">"}var Se,Ce={IteratorPrototype:qt,BUGGY_SAFARI_ITERATORS:Ee},Ne=Object.keys||function(t){return Mt(t,oe)},Ae=U?Object.defineProperties:function(t,e){k(t);for(var n,r=Ne(e),i=r.length,o=0;o<i;)W.f(t,n=r[o++],e[n]);return t},ke=Dt("document","documentElement"),Oe="prototype",Re="script",Pe=ot("IE_PROTO"),De=function(){try{Se=document.domain&&new ActiveXObject("htmlfile")}catch(t){}var t,e;De=Se?function(t){t.write(Te("")),t.close();var e=t.parentWindow.Object;return t=null,e}(Se):((e=A("iframe")).style.display="none",ke.appendChild(e),e.src=String("javascript:"),(t=e.contentWindow.document).open(),t.write(Te("document.F=Object")),t.close(),t.F);for(var n=oe.length;n--;)delete De[Oe][oe[n]];return De()};mt[Pe]=!0;function xe(t,e,n){t&&!D(t=n?t:t.prototype,Ve)&&je(t,Ve,{configurable:!0,value:e})}function Le(){return this}function Me(){return this}function Fe(t,e,n,r,i,o,s){var a,u,c;function h(t){if(t===i&&m)return m;if(!He&&t in y)return y[t];switch(t){case"keys":case ze:case Qe:return function(){return new n(this,t)}}return function(){return new n(this)}}u=r,c=e+" Iterator",(a=n).prototype=Ue(Be,{next:R(1,u)}),xe(a,c,!1),qe[c]=Le;var l,f,p,d=e+" Iterator",v=!1,y=t.prototype,g=y[Ke]||y["@@iterator"]||i&&y[i],m=!He&&g||h(i),b="Array"==e&&y.entries||g;if(b&&(l=_e(b.call(new t)),Ge!==Object.prototype&&l.next&&(_e(l)!==Ge&&(We?We(l,Ge):"function"!=typeof l[Ke]&&G(l,Ke,Me)),xe(l,d,!0))),i==ze&&g&&g.name!==ze&&(v=!0,m=function(){return g.call(this)}),y[Ke]!==m&&G(y,Ke,m),qe[e]=m,i)if(f={values:h(ze),keys:o?m:h("keys"),entries:h(Qe)},s)for(p in f)!He&&!v&&p in y||Et(y,p,f[p]);else jt({target:e,proto:!0,forced:He||v},f);return f}var Ue=Object.create||function(t,e){var n;return null!==t?(Ie[Oe]=k(t),n=new Ie,Ie[Oe]=null,n[Pe]=t):n=De(),void 0===e?n:Ae(n,e)},je=W.f,Ve=L("toStringTag"),qe={},Be=Ce.IteratorPrototype,We=Object.setPrototypeOf||("__proto__"in{}?function(){var n,r=!1,t={};try{(n=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(t,[]),r=t instanceof Array}catch(t){}return function(t,e){return k(t),function(t){if(!N(t)&&null!==t)throw TypeError("Can't set "+String(t)+" as a prototype")}(e),r?n.call(t,e):t.__proto__=e,t}}():void 0),Ge=Ce.IteratorPrototype,He=Ce.BUGGY_SAFARI_ITERATORS,Ke=L("iterator"),ze="values",Qe="entries",Ye=Kt.charAt,Xe="String Iterator",$e=wt.set,Je=wt.getterFor(Xe);Fe(String,"String",function(t){$e(this,{type:Xe,string:String(t),index:0})},function(){var t,e=Je(this),n=e.string,r=e.index;return r>=n.length?{value:void 0,done:!0}:(t=Ye(n,r),e.index+=t.length,{value:t,done:!1})});var Ze={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},tn=L("unscopables"),en=Array.prototype;null==en[tn]&&W.f(en,tn,{configurable:!0,value:Ue(null)});function nn(t){en[tn][t]=!0}var rn="Array Iterator",on=wt.set,sn=wt.getterFor(rn),an=Fe(Array,"Array",function(t,e){on(this,{type:rn,target:Rt(t),index:0,kind:e})},function(){var t=sn(this),e=t.target,n=t.kind,r=t.index++;return!e||r>=e.length?{value:t.target=void 0,done:!0}:"keys"==n?{value:r,done:!1}:"values"==n?{value:e[r],done:!1}:{value:[r,e[r]],done:!1}},"values");qe.Arguments=qe.Array,nn("keys"),nn("values"),nn("entries");var un,cn=L("iterator"),hn=L("toStringTag"),ln=an.values;for(un in Ze){var fn=M[un],pn=fn&&fn.prototype;if(pn){if(pn[cn]!==ln)try{G(pn,cn,ln)}catch(Fu){pn[cn]=ln}if(pn[hn]||G(pn,hn,un),Ze[un])for(var dn in an)if(pn[dn]!==an[dn])try{G(pn,dn,an[dn])}catch(Fu){pn[dn]=an[dn]}}}function vn(t,e,n){for(var r in e)Et(t,r,e[r],n);return t}function yn(t){var e=Dt(t),n=W.f;U&&e&&!e[Tn]&&n(e,Tn,{configurable:!0,get:function(){return this}})}function gn(t){if("function"!=typeof t)throw TypeError(String(t)+" is not a function");return t}function mn(t,e,n){if(!(t instanceof e))throw TypeError("Incorrect "+(n?n+" ":"")+"invocation");return t}function bn(t){return void 0!==t&&(qe.Array===t||Cn[Sn]===t)}function _n(r,i,t){if(gn(r),void 0===i)return r;switch(t){case 0:return function(){return r.call(i)};case 1:return function(t){return r.call(i,t)};case 2:return function(t,e){return r.call(i,t,e)};case 3:return function(t,e,n){return r.call(i,t,e,n)}}return function(){return r.apply(i,arguments)}}function wn(t){if(null!=t)return t[Nn]||t["@@iterator"]||qe[Ct(t)]}function En(e,t,n,r){try{return r?t(k(n)[0],n[1]):t(n)}catch(t){var i=e.return;throw void 0!==i&&k(i.call(e)),t}}var In=M.Promise,Tn=L("species"),Sn=L("iterator"),Cn=Array.prototype,Nn=L("iterator"),An=T(function(t){function p(t,e){this.stopped=t,this.result=e}(t.exports=function(t,e,n,r,i){var o,s,a,u,c,h,l,f=_n(e,n,r?2:1);if(i)o=t;else{if("function"!=typeof(s=wn(t)))throw TypeError("Target is not iterable");if(bn(s)){for(a=0,u=xt(t.length);a<u;a++)if((c=r?f(k(l=t[a])[0],l[1]):f(t[a]))&&c instanceof p)return c;return new p(!1)}o=s.call(t)}for(h=o.next;!(l=h.call(o)).done;)if("object"==typeof(c=En(o,f,l.value,r))&&c&&c instanceof p)return c;return new p(!1)}).stop=function(t){return new p(!0,t)}}),kn=L("iterator"),On=!1;try{var Rn=0,Pn={next:function(){return{done:!!Rn++}},return:function(){On=!0}};Pn[kn]=function(){return this},Array.from(Pn,function(){throw 2})}catch(Fu){}function Dn(t,e){if(!e&&!On)return!1;var n=!1;try{var r={};r[kn]=function(){return{next:function(){return{done:n=!0}}}},t(r)}catch(t){}return n}function xn(t,e){var n,r=k(t).constructor;return void 0===r||null==(n=k(r)[Bn])?e:gn(n)}function Ln(t){var e;Jn.hasOwnProperty(t)&&(e=Jn[t],delete Jn[t],e())}function Mn(t){return function(){Ln(t)}}function Fn(t){Ln(t.data)}function Un(t){M.postMessage(t+"",Hn.protocol+"//"+Hn.host)}var jn,Vn,qn,Bn=L("species"),Wn=Dt("navigator","userAgent")||"",Gn=/(iphone|ipod|ipad).*applewebkit/i.test(Wn),Hn=M.location,Kn=M.setImmediate,zn=M.clearImmediate,Qn=M.process,Yn=M.MessageChannel,Xn=M.Dispatch,$n=0,Jn={},Zn="onreadystatechange";Kn&&zn||(Kn=function(t){for(var e=[],n=1;n<arguments.length;)e.push(arguments[n++]);return Jn[++$n]=function(){("function"==typeof t?t:Function(t)).apply(void 0,e)},jn($n),$n},zn=function(t){delete Jn[t]},"process"==_t(Qn)?jn=function(t){Qn.nextTick(Mn(t))}:Xn&&Xn.now?jn=function(t){Xn.now(Mn(t))}:Yn&&!Gn?(qn=(Vn=new Yn).port2,Vn.port1.onmessage=Fn,jn=_n(qn.postMessage,qn,1)):!M.addEventListener||"function"!=typeof postMessage||M.importScripts||C(Un)||"file:"===Hn.protocol?jn=Zn in A("script")?function(t){ke.appendChild(A("script"))[Zn]=function(){ke.removeChild(this),Ln(t)}}:function(t){setTimeout(Mn(t),0)}:(jn=Un,M.addEventListener("message",Fn,!1)));var tr,er,nr,rr,ir,or,sr,ar,ur={set:Kn,clear:zn},cr=Zt.f,hr=ur.set,lr=M.MutationObserver||M.WebKitMutationObserver,fr=M.process,pr=M.Promise,dr="process"==_t(fr),vr=cr(M,"queueMicrotask"),yr=vr&&vr.value;yr||(tr=function(){var t,e;for(dr&&(t=fr.domain)&&t.exit();er;){e=er.fn,er=er.next;try{e()}catch(t){throw er?rr():nr=void 0,t}}nr=void 0,t&&t.enter()},rr=dr?function(){fr.nextTick(tr)}:lr&&!Gn?(ir=!0,or=document.createTextNode(""),new lr(tr).observe(or,{characterData:!0}),function(){or.data=ir=!ir}):pr&&pr.resolve?(sr=pr.resolve(void 0),ar=sr.then,function(){ar.call(sr,tr)}):function(){hr.call(M,tr)});function gr(t){var n,r;this.promise=new t(function(t,e){if(void 0!==n||void 0!==r)throw TypeError("Bad Promise constructor");n=t,r=e}),this.resolve=gn(n),this.reject=gn(r)}function mr(t,e){if(k(t),N(e)&&e.constructor===t)return e;var n=Ir.f(t);return(0,n.resolve)(e),n.promise}function br(t){try{return{error:!1,value:t()}}catch(t){return{error:!0,value:t}}}var _r,wr,Er=yr||function(t){var e={fn:t,next:void 0};nr&&(nr.next=e),er||(er=e,rr()),nr=e},Ir={f:function(t){return new gr(t)}},Tr=M.process,Sr=Tr&&Tr.versions,Cr=Sr&&Sr.v8;Cr?wr=(_r=Cr.split("."))[0]+_r[1]:Wn&&(!(_r=Wn.match(/Edge\/(\d+)/))||74<=_r[1])&&(_r=Wn.match(/Chrome\/(\d+)/))&&(wr=_r[1]);function Nr(t){var e;return!(!N(t)||"function"!=typeof(e=t.then))&&e}function Ar(l,f,p){var d;f.notified||(f.notified=!0,d=f.reactions,Er(function(){for(var t=f.value,e=1==f.state,n=0;d.length>n;){var r,i,o,s=d[n++],a=e?s.ok:s.fail,u=s.resolve,c=s.reject,h=s.domain;try{a?(e||(2===f.rejection&&ri(l,f),f.rejection=1),!0===a?r=t:(h&&h.enter(),r=a(t),h&&(h.exit(),o=!0)),r===s.promise?c(Gr("Promise-chain cycle")):(i=Nr(r))?i.call(r,u,c):u(r)):c(t)}catch(t){h&&!o&&h.exit(),c(t)}}f.reactions=[],f.notified=!1,p&&!f.rejection&&ei(l,f)}))}function kr(t,e,n){var r,i;$r?((r=Hr.createEvent("Event")).promise=e,r.reason=n,r.initEvent(t,!1,!0),M.dispatchEvent(r)):r={promise:e,reason:n},(i=M["on"+t])?i(r):t===Jr&&function(t,e){var n=M.console;n&&n.error&&(1===arguments.length?n.error(t):n.error(t,e))}("Unhandled promise rejection",n)}function Or(e,n,r,i){return function(t){e(n,r,t,i)}}function Rr(t,e,n,r){e.done||(e.done=!0,r&&(e=r),e.value=n,e.state=2,Ar(t,e,!0))}var Pr,Dr,xr,Lr,Mr=wr&&+wr,Fr=ur.set,Ur=L("species"),jr="Promise",Vr=wt.get,qr=wt.set,Br=wt.getterFor(jr),Wr=In,Gr=M.TypeError,Hr=M.document,Kr=M.process,zr=Dt("fetch"),Qr=Ir.f,Yr=Qr,Xr="process"==_t(Kr),$r=!!(Hr&&Hr.createEvent&&M.dispatchEvent),Jr="unhandledrejection",Zr=ve(jr,function(){if(!(dt(Wr)!==String(Wr))){if(66===Mr)return!0;if(!Xr&&"function"!=typeof PromiseRejectionEvent)return!0}if(51<=Mr&&/native code/.test(Wr))return!1;function t(t){t(function(){},function(){})}var e=Wr.resolve(1);return(e.constructor={})[Ur]=t,!(e.then(function(){})instanceof t)}),ti=Zr||!Dn(function(t){Wr.all(t).catch(function(){})}),ei=function(n,r){Fr.call(M,function(){var t,e=r.value;if(ni(r)&&(t=br(function(){Xr?Kr.emit("unhandledRejection",e,n):kr(Jr,n,e)}),r.rejection=Xr||ni(r)?2:1,t.error))throw t.value})},ni=function(t){return 1!==t.rejection&&!t.parent},ri=function(t,e){Fr.call(M,function(){Xr?Kr.emit("rejectionHandled",t):kr("rejectionhandled",t,e.value)})},ii=function(n,r,t,e){if(!r.done){r.done=!0,e&&(r=e);try{if(n===t)throw Gr("Promise can't be resolved itself");var i=Nr(t);i?Er(function(){var e={done:!1};try{i.call(t,Or(ii,n,e,r),Or(Rr,n,e,r))}catch(t){Rr(n,e,t,r)}}):(r.value=t,r.state=1,Ar(n,r,!1))}catch(t){Rr(n,{done:!1},t,r)}}};Zr&&(Wr=function(t){mn(this,Wr,jr),gn(t),Pr.call(this);var e=Vr(this);try{t(Or(ii,this,e),Or(Rr,this,e))}catch(t){Rr(this,e,t)}},(Pr=function(){qr(this,{type:jr,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=vn(Wr.prototype,{then:function(t,e){var n=Br(this),r=Qr(xn(this,Wr));return r.ok="function"!=typeof t||t,r.fail="function"==typeof e&&e,r.domain=Xr?Kr.domain:void 0,n.parent=!0,n.reactions.push(r),0!=n.state&&Ar(this,n,!1),r.promise},catch:function(t){return this.then(void 0,t)}}),Dr=function(){var t=new Pr,e=Vr(t);this.promise=t,this.resolve=Or(ii,t,e),this.reject=Or(Rr,t,e)},Ir.f=Qr=function(t){return t===Wr||t===xr?new Dr:Yr(t)},"function"==typeof In&&(Lr=In.prototype.then,Et(In.prototype,"then",function(t,e){var n=this;return new Wr(function(t,e){Lr.call(n,t,e)}).then(t,e)},{unsafe:!0}),"function"==typeof zr&&jt({global:!0,enumerable:!0,forced:!0},{fetch:function(t){return mr(Wr,zr.apply(M,arguments))}}))),jt({global:!0,wrap:!0,forced:Zr},{Promise:Wr}),xe(Wr,jr,!1),yn(jr),xr=Dt(jr),jt({target:jr,stat:!0,forced:Zr},{reject:function(t){var e=Qr(this);return e.reject.call(void 0,t),e.promise}}),jt({target:jr,stat:!0,forced:Zr},{resolve:function(t){return mr(this,t)}}),jt({target:jr,stat:!0,forced:ti},{all:function(t){var a=this,e=Qr(a),u=e.resolve,c=e.reject,n=br(function(){var r=gn(a.resolve),i=[],o=0,s=1;An(t,function(t){var e=o++,n=!1;i.push(void 0),s++,r.call(a,t).then(function(t){n||(n=!0,i[e]=t,--s||u(i))},c)}),--s||u(i)});return n.error&&c(n.value),e.promise},race:function(t){var n=this,r=Qr(n),i=r.reject,e=br(function(){var e=gn(n.resolve);An(t,function(t){e.call(n,t).then(r.resolve,i)})});return e.error&&i(e.value),r.promise}}),jt({target:"Promise",stat:!0},{allSettled:function(t){var a=this,e=Ir.f(a),u=e.resolve,n=e.reject,r=br(function(){var r=gn(a.resolve),i=[],o=0,s=1;An(t,function(t){var e=o++,n=!1;i.push(void 0),s++,r.call(a,t).then(function(t){n||(n=!0,i[e]={status:"fulfilled",value:t},--s||u(i))},function(t){n||(n=!0,i[e]={status:"rejected",reason:t},--s||u(i))})}),--s||u(i)});return r.error&&n(r.value),e.promise}});var oi=!!In&&C(function(){In.prototype.finally.call({then:function(){}},function(){})});jt({target:"Promise",proto:!0,real:!0,forced:oi},{finally:function(e){var n=xn(this,Dt("Promise")),t="function"==typeof e;return this.then(t?function(t){return mr(n,e()).then(function(){return t})}:e,t?function(t){return mr(n,e()).then(function(){throw t})}:e)}}),"function"!=typeof In||In.prototype.finally||Et(In.prototype,"finally",Dt("Promise").prototype.finally);te.Promise;var si=wt.set,ai=wt.getterFor("AggregateError"),ui=function(t,e){var n=this;if(!(n instanceof ui))return new ui(t,e);We&&(n=We(new Error(e),_e(n)));var r=[];return An(t,r.push,r),U?si(n,{errors:r,type:"AggregateError"}):n.errors=r,void 0!==e&&G(n,"message",String(e)),n};ui.prototype=Ue(Error.prototype,{constructor:R(5,ui),message:R(5,""),name:R(5,"AggregateError")}),U&&W.f(ui.prototype,"errors",{get:function(){return ai(this).errors},configurable:!0}),jt({global:!0},{AggregateError:ui}),jt({target:"Promise",stat:!0},{try:function(t){var e=Ir.f(this),n=br(t);return(n.error?e.reject:e.resolve)(n.value),e.promise}});var ci="No one promise resolved";jt({target:"Promise",stat:!0},{any:function(t){var u=this,e=Ir.f(u),c=e.resolve,h=e.reject,n=br(function(){var r=gn(u.resolve),i=[],o=0,s=1,a=!1;An(t,function(t){var e=o++,n=!1;i.push(void 0),s++,r.call(u,t).then(function(t){n||a||(a=!0,c(t))},function(t){n||a||(n=!0,i[e]=t,--s||h(new(Dt("AggregateError"))(i,ci)))})}),--s||h(new(Dt("AggregateError"))(i,ci))});return n.error&&h(n.value),e.promise}});function hi(t,e){var n;return di(t)&&("function"==typeof(n=t.constructor)&&(n===Array||di(n.prototype))||N(n)&&null===(n=n[vi]))&&(n=void 0),new(void 0===n?Array:n)(0===e?0:e)}function li(p){var d=1==p,v=2==p,y=3==p,g=4==p,m=6==p,b=5==p||m;return function(t,e,n,r){for(var i,o,s=Vt(t),a=$t(s),u=_n(e,n,3),c=xt(a.length),h=0,l=r||hi,f=d?l(t,c):v?l(t,0):void 0;h<c;h++)if((b||h in a)&&(o=u(i=a[h],h,s),p))if(d)f[h]=o;else if(o)switch(p){case 3:return!0;case 5:return i;case 6:return h;case 2:yi.call(f,i)}else if(g)return!1;return m?-1:y||g?g:f}}function fi(t){throw t}function pi(t,e){if(D(bi,t))return bi[t];var n=[][t],r=!!D(e=e||{},"ACCESSORS")&&e.ACCESSORS,i=D(e,0)?e[0]:fi,o=D(e,1)?e[1]:void 0;return bi[t]=!!n&&!C(function(){if(r&&!U)return 1;var t={length:-1};r?mi(t,1,{enumerable:!0,get:fi}):t[1]=1,n.call(t,i,o)})}var di=Array.isArray||function(t){return"Array"==_t(t)},vi=L("species"),yi=[].push,gi={forEach:li(0),map:li(1),filter:li(2),some:li(3),every:li(4),find:li(5),findIndex:li(6)},mi=Object.defineProperty,bi={},_i=gi.find,wi="find",Ei=!0,Ii=pi(wi);wi in[]&&Array(1)[wi](function(){Ei=!1}),jt({target:"Array",proto:!0,forced:Ei||!Ii},{find:function(t,e){return _i(this,t,1<arguments.length?e:void 0)}}),nn(wi);function Ti(t,e,n){return _n(Si,M[t].prototype[e],n)}var Si=Function.call,Ci=(Ti("Array","find"),gi.findIndex),Ni="findIndex",Ai=!0,ki=pi(Ni);Ni in[]&&Array(1)[Ni](function(){Ai=!1}),jt({target:"Array",proto:!0,forced:Ai||!ki},{findIndex:function(t,e){return Ci(this,t,1<arguments.length?e:void 0)}}),nn(Ni);function Oi(t,e,n){var r=O(e);r in t?W.f(t,r,R(0,n)):t[r]=n}Ti("Array","findIndex");var Ri=!Dn(function(t){Array.from(t)});jt({target:"Array",stat:!0,forced:Ri},{from:function(t,e,n){var r,i,o,s,a,u,c=Vt(t),h="function"==typeof this?this:Array,l=arguments.length,f=1<l?e:void 0,p=void 0!==f,d=wn(c),v=0;if(p&&(f=_n(f,2<l?n:void 0,2)),null==d||h==Array&&bn(d))for(i=new h(r=xt(c.length));v<r;v++)u=p?f(c[v],v):c[v],Oi(i,v,u);else for(a=(s=d.call(c)).next,i=new h;!(o=a.call(s)).done;v++)u=p?En(s,f,[o.value,v],!0):o.value,Oi(i,v,u);return i.length=v,i}});te.Array.from;var Pi,Di,xi=gi.some,Li=!!(Di=[]["some"])&&C(function(){Di.call(null,Pi||function(){throw 1},1)}),Mi=pi("some");jt({target:"Array",proto:!0,forced:!Li||!Mi},{some:function(t,e){return xi(this,t,1<arguments.length?e:void 0)}});Ti("Array","some");function Fi(t){return N(t)&&D($i,Ct(t))}var Ui,ji="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView,Vi=W.f,qi=M.Int8Array,Bi=qi&&qi.prototype,Wi=M.Uint8ClampedArray,Gi=Wi&&Wi.prototype,Hi=qi&&_e(qi),Ki=Bi&&_e(Bi),zi=Object.prototype,Qi=(zi.isPrototypeOf,L("toStringTag")),Yi=x("TYPED_ARRAY_TAG"),Xi=ji&&!!We&&"Opera"!==Ct(M.opera),$i={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8};for(Ui in $i)M[Ui]||(Xi=!1);if((!Xi||"function"!=typeof Hi||Hi===Function.prototype)&&(Hi=function(){throw TypeError("Incorrect invocation")},Xi))for(Ui in $i)M[Ui]&&We(M[Ui],Hi);if((!Xi||!Ki||Ki===zi)&&(Ki=Hi.prototype,Xi))for(Ui in $i)M[Ui]&&We(M[Ui].prototype,Ki);if(Xi&&_e(Gi)!==Ki&&We(Gi,Ki),U&&!D(Ki,Qi))for(Ui in Vi(Ki,Qi,{get:function(){return N(this)?this[Yi]:void 0}}),$i)M[Ui]&&G(M[Ui],Yi,Ui);function Ji(){return ro.call(so(this))}var Zi=function(t){if(Fi(t))return t;throw TypeError("Target is not a typed array")},to=function(t,e,n){if(U){if(n)for(var r in $i){var i=M[r];i&&D(i.prototype,t)&&delete i.prototype[t]}Ki[t]&&!n||Et(Ki,t,!n&&Xi&&Bi[t]||e)}},eo=L("iterator"),no=M.Uint8Array,ro=an.values,io=an.keys,oo=an.entries,so=Zi,ao=to,uo=no&&no.prototype[eo],co=!!uo&&("values"==uo.name||null==uo.name);ao("entries",function(){return oo.call(so(this))}),ao("keys",function(){return io.call(so(this))}),ao("values",Ji,!co),ao(eo,Ji,!co);var ho=Object.assign,lo=Object.defineProperty,fo=!ho||C(function(){if(U&&1!==ho({b:1},ho(lo({},"a",{enumerable:!0,get:function(){lo(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return 1;var t={},e={},n=Symbol(),r="abcdefghijklmnopqrst";return t[n]=7,r.split("").forEach(function(t){e[t]=t}),7!=ho({},t)[n]||Ne(ho({},e)).join("")!=r})?function(t,e){for(var n=Vt(t),r=arguments.length,i=1,o=ue.f,s=Yt.f;i<r;)for(var a,u=$t(arguments[i++]),c=o?Ne(u).concat(o(u)):Ne(u),h=c.length,l=0;l<h;)a=c[l++],U&&!s.call(u,a)||(n[a]=u[a]);return n}:ho;jt({target:"Object",stat:!0,forced:Object.assign!==fo},{assign:fo});te.Object.assign;function po(a){return function(t){for(var e,n=Rt(t),r=Ne(n),i=r.length,o=0,s=[];o<i;)e=r[o++],U&&!vo.call(n,e)||s.push(a?[e,n[e]]:n[e]);return s}}var vo=Yt.f,yo={entries:po(!0),values:po(!1)},go=yo.entries;jt({target:"Object",stat:!0},{entries:function(t){return go(t)}});te.Object.entries;var mo=yo.values;jt({target:"Object",stat:!0},{values:function(t){return mo(t)}});te.Object.values;function bo(t){if(N(e=t)&&(void 0!==(n=e[wo])?!!n:"RegExp"==_t(e)))throw TypeError("The method doesn't accept regular expressions");var e,n;return t}function _o(e){var n=/./;try{"/./"[e](n)}catch(t){try{return n[Eo]=!1,"/./"[e](n)}catch(t){}}return!1}var wo=L("match"),Eo=L("match");jt({target:"String",proto:!0,forced:!_o("includes")},{includes:function(t,e){return!!~String(kt(this)).indexOf(bo(t),1<arguments.length?e:void 0)}});Ti("String","includes");var Io,To=Zt.f,So="".startsWith,Co=Math.min,No=_o("startsWith"),Ao=!(No||(!(Io=To(String.prototype,"startsWith"))||Io.writable));jt({target:"String",proto:!0,forced:!Ao&&!No},{startsWith:function(t,e){var n=String(kt(this));bo(t);var r=xt(Co(1<arguments.length?e:void 0,n.length)),i=String(t);return So?So.call(n,i,r):n.slice(r,r+i.length)===i}});Ti("String","startsWith");jt({target:"String",proto:!0},{repeat:"".repeat||function(t){var e=String(kt(this)),n="",r=At(t);if(r<0||r==1/0)throw RangeError("Wrong number of repetitions");for(;0<r;(r>>>=1)&&(e+=e))1&r&&(n+=e);return n}});Ti("String","repeat");var ko,Oo=L("species"),Ro=L("isConcatSpreadable"),Po=9007199254740991,Do="Maximum allowed index exceeded",xo=51<=Mr||!C(function(){var t=[];return t[Ro]=!1,t.concat()[0]!==t}),Lo=(ko="concat",51<=Mr||!C(function(){var t=[];return(t.constructor={})[Oo]=function(){return{foo:1}},1!==t[ko](Boolean).foo}));jt({target:"Array",proto:!0,forced:!xo||!Lo},{concat:function(t){for(var e,n,r,i=Vt(this),o=hi(i,0),s=0,a=-1,u=arguments.length;a<u;a++)if(function(t){if(!N(t))return!1;var e=t[Ro];return void 0!==e?!!e:di(t)}(r=-1===a?i:arguments[a])){if(n=xt(r.length),Po<s+n)throw TypeError(Do);for(e=0;e<n;e++,s++)e in r&&Oi(o,s,r[e])}else{if(Po<=s)throw TypeError(Do);Oi(o,s++,r)}return o.length=s,o}});function Mo(t){var e=te.Symbol||(te.Symbol={});D(e,t)||zo(e,t,{value:Ko.f(t)})}function Fo(t,e){var n=us[t]=Ue(ns[$o]);return Zo(n,{type:Xo,tag:t,description:e}),U||(n.description=e),n}function Uo(e,t){k(e);var n=Rt(t),r=Ne(n).concat(bs(n));return Qo(r,function(t){U&&!ms.call(n,t)||gs(e,t,n[t])}),e}function jo(t,e){var n=Rt(t),r=O(e,!0);if(n!==es||!D(us,r)||D(cs,r)){var i=is(n,r);return!i||!D(us,r)||D(n,Yo)&&n[Yo][r]||(i.enumerable=!0),i}}function Vo(t){var e=ss(Rt(t)),n=[];return Qo(e,function(t){D(us,t)||D(mt,t)||n.push(t)}),n}var qo,Bo=ae.f,Wo={}.toString,Go="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],Ho={f:function(t){return Go&&"[object Window]"==Wo.call(t)?function(t){try{return Bo(t)}catch(t){return Go.slice()}}(t):Bo(Rt(t))}},Ko={f:L},zo=W.f,Qo=gi.forEach,Yo=ot("hidden"),Xo="Symbol",$o="prototype",Jo=L("toPrimitive"),Zo=wt.set,ts=wt.getterFor(Xo),es=Object[$o],ns=M.Symbol,rs=Dt("JSON","stringify"),is=Zt.f,os=W.f,ss=Ho.f,as=Yt.f,us=z("symbols"),cs=z("op-symbols"),hs=z("string-to-symbol-registry"),ls=z("symbol-to-string-registry"),fs=z("wks"),ps=M.QObject,ds=!ps||!ps[$o]||!ps[$o].findChild,vs=U&&C(function(){return 7!=Ue(os({},"a",{get:function(){return os(this,"a",{value:7}).a}})).a})?function(t,e,n){var r=is(es,e);r&&delete es[e],os(t,e,n),r&&t!==es&&os(es,e,r)}:os,ys=J?function(t){return"symbol"==typeof t}:function(t){return Object(t)instanceof ns},gs=function(t,e,n){t===es&&gs(cs,e,n),k(t);var r=O(e,!0);return k(n),D(us,r)?(n.enumerable?(D(t,Yo)&&t[Yo][r]&&(t[Yo][r]=!1),n=Ue(n,{enumerable:R(0,!1)})):(D(t,Yo)||os(t,Yo,R(1,{})),t[Yo][r]=!0),vs(t,r,n)):os(t,r,n)},ms=function(t){var e=O(t,!0),n=as.call(this,e);return!(this===es&&D(us,e)&&!D(cs,e))&&(!(n||!D(this,e)||!D(us,e)||D(this,Yo)&&this[Yo][e])||n)},bs=function(t){var e=t===es,n=ss(e?cs:Rt(t)),r=[];return Qo(n,function(t){!D(us,t)||e&&!D(es,t)||r.push(us[t])}),r};$||(Et((ns=function(t){if(this instanceof ns)throw TypeError("Symbol is not a constructor");var e=arguments.length&&void 0!==t?String(t):void 0,n=x(e),r=function(t){this===es&&r.call(cs,t),D(this,Yo)&&D(this[Yo],n)&&(this[Yo][n]=!1),vs(this,n,R(1,t))};return U&&ds&&vs(es,n,{configurable:!0,set:r}),Fo(n,e)})[$o],"toString",function(){return ts(this).tag}),Et(ns,"withoutSetter",function(t){return Fo(x(t),t)}),Yt.f=ms,W.f=gs,Zt.f=jo,ae.f=Ho.f=Vo,ue.f=bs,Ko.f=function(t){return Fo(L(t),t)},U&&(os(ns[$o],"description",{configurable:!0,get:function(){return ts(this).description}}),Et(es,"propertyIsEnumerable",ms,{unsafe:!0}))),jt({global:!0,wrap:!0,forced:!$,sham:!$},{Symbol:ns}),Qo(Ne(fs),function(t){Mo(t)}),jt({target:Xo,stat:!0,forced:!$},{for:function(t){var e=String(t);if(D(hs,e))return hs[e];var n=ns(e);return hs[e]=n,ls[n]=e,n},keyFor:function(t){if(!ys(t))throw TypeError(t+" is not a symbol");if(D(ls,t))return ls[t]},useSetter:function(){ds=!0},useSimple:function(){ds=!1}}),jt({target:"Object",stat:!0,forced:!$,sham:!U},{create:function(t,e){return void 0===e?Ue(t):Uo(Ue(t),e)},defineProperty:gs,defineProperties:Uo,getOwnPropertyDescriptor:jo}),jt({target:"Object",stat:!0,forced:!$},{getOwnPropertyNames:Vo,getOwnPropertySymbols:bs}),jt({target:"Object",stat:!0,forced:C(function(){ue.f(1)})},{getOwnPropertySymbols:function(t){return ue.f(Vt(t))}}),rs&&(qo=!$||C(function(){var t=ns();return"[null]"!=rs([t])||"{}"!=rs({a:t})||"{}"!=rs(Object(t))}),jt({target:"JSON",stat:!0,forced:qo},{stringify:function(t,e,n){for(var r,i=[t],o=1;o<arguments.length;)i.push(arguments[o++]);if((N(r=e)||void 0!==t)&&!ys(t))return di(e)||(e=function(t,e){if("function"==typeof r&&(e=r.call(this,t,e)),!ys(e))return e}),i[1]=e,rs.apply(null,i)}})),ns[$o][Jo]||G(ns[$o],Jo,ns[$o].valueOf),xe(ns,Xo),mt[Yo]=!0,Mo("asyncIterator");var _s,ws,Es,Is,Ts,Ss,Cs=W.f,Ns=M.Symbol;!U||"function"!=typeof Ns||"description"in Ns.prototype&&void 0===Ns().description||(_s={},Ft(ws=function(t){var e=arguments.length<1||void 0===t?void 0:String(t),n=this instanceof ws?new Ns(e):void 0===e?Ns():Ns(e);return""===e&&(_s[n]=!0),n},Ns),(Es=ws.prototype=Ns.prototype).constructor=ws,Is=Es.toString,Ts="Symbol(test)"==String(Ns("test")),Ss=/^Symbol\((.*)\)[^)]+$/,Cs(Es,"description",{configurable:!0,get:function(){var t=N(this)?this.valueOf():this,e=Is.call(t);if(D(_s,t))return"";var n=Ts?e.slice(7,-1):e.replace(Ss,"$1");return""===n?void 0:n}}),jt({global:!0,forced:!0},{Symbol:ws})),Mo("hasInstance"),Mo("isConcatSpreadable"),Mo("iterator"),Mo("match"),Mo("matchAll"),Mo("replace"),Mo("search"),Mo("species"),Mo("split"),Mo("toPrimitive"),Mo("toStringTag"),Mo("unscopables"),xe(Math,"Math",!0),xe(M.JSON,"JSON",!0);te.Symbol;Mo("asyncDispose"),Mo("dispose"),Mo("observable"),Mo("patternMatch"),Mo("replaceAll");Ko.f("iterator");function As(u,t,e){function n(t){var n=p[t];Et(p,t,"add"==t?function(t){return n.call(this,0===t?0:t),this}:"delete"==t?function(t){return!(h&&!N(t))&&n.call(this,0===t?0:t)}:"get"==t?function(t){return h&&!N(t)?void 0:n.call(this,0===t?0:t)}:"has"==t?function(t){return!(h&&!N(t))&&n.call(this,0===t?0:t)}:function(t,e){return n.call(this,0===t?0:t,e),this})}var r,i,o,s,a,c=-1!==u.indexOf("Map"),h=-1!==u.indexOf("Weak"),l=c?"set":"add",f=M[u],p=f&&f.prototype,d=f,v={};return ve(u,"function"!=typeof f||!(h||p.forEach&&!C(function(){(new f).entries().next()})))?(d=e.getConstructor(t,u,c,l),Rs.REQUIRED=!0):ve(u,!0)&&(i=(r=new d)[l](h?{}:-0,1)!=r,o=C(function(){r.has(1)}),s=Dn(function(t){new f(t)}),a=!h&&C(function(){for(var t=new f,e=5;e--;)t[l](e,e);return!t.has(-0)}),s||(((d=t(function(t,e){mn(t,d,u);var n,r,i,o,s,a=(n=new f,r=t,i=d,We&&"function"==typeof(o=r.constructor)&&o!==i&&N(s=o.prototype)&&s!==i.prototype&&We(n,s),n);return null!=e&&An(e,a[l],a,c),a})).prototype=p).constructor=d),(o||a)&&(n("delete"),n("has"),c&&n("get")),(a||i)&&n(l),h&&p.clear&&delete p.clear),v[u]=d,jt({global:!0,forced:d!=f},v),xe(d,u),h||e.setStrong(d,u,c),d}function ks(t,e,n){var r,i,o,s,a=arguments.length,u=1<a?e:void 0;return gn(this),(r=void 0!==u)&&gn(u),null==t?new this:(i=[],r?(o=0,s=_n(u,2<a?n:void 0,2),An(t,function(t){i.push(s(t,o++))})):An(t,i.push,i),new this(i))}var Os=!C(function(){return Object.isExtensible(Object.preventExtensions({}))}),Rs=T(function(t){function n(t){e(t,r,{value:{objectID:"O"+ ++i,weakData:{}}})}var e=W.f,r=x("meta"),i=0,o=Object.isExtensible||function(){return!0},s=t.exports={REQUIRED:!1,fastKey:function(t,e){if(!N(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!D(t,r)){if(!o(t))return"F";if(!e)return"E";n(t)}return t[r].objectID},getWeakData:function(t,e){if(!D(t,r)){if(!o(t))return!0;if(!e)return!1;n(t)}return t[r].weakData},onFreeze:function(t){return Os&&s.REQUIRED&&o(t)&&!D(t,r)&&n(t),t}};mt[r]=!0}),Ps=(Rs.REQUIRED,Rs.fastKey,Rs.getWeakData,Rs.onFreeze,W.f),Ds=Rs.fastKey,xs=wt.set,Ls=wt.getterFor,Ms={getConstructor:function(t,n,r,i){function o(t,e,n){var r,i,o=a(t),s=u(t,e);return s?s.value=n:(o.last=s={index:i=Ds(e,!0),key:e,value:n,previous:r=o.last,next:void 0,removed:!1},o.first||(o.first=s),r&&(r.next=s),U?o.size++:t.size++,"F"!==i&&(o.index[i]=s)),t}var s=t(function(t,e){mn(t,s,n),xs(t,{type:n,index:Ue(null),first:void 0,last:void 0,size:0}),U||(t.size=0),null!=e&&An(e,t[i],t,r)}),a=Ls(n),u=function(t,e){var n,r=a(t),i=Ds(e);if("F"!==i)return r.index[i];for(n=r.first;n;n=n.next)if(n.key==e)return n};return vn(s.prototype,{clear:function(){for(var t=a(this),e=t.index,n=t.first;n;)n.removed=!0,n.previous&&(n.previous=n.previous.next=void 0),delete e[n.index],n=n.next;t.first=t.last=void 0,U?t.size=0:this.size=0},delete:function(t){var e,n,r=a(this),i=u(this,t);return i&&(e=i.next,n=i.previous,delete r.index[i.index],i.removed=!0,n&&(n.next=e),e&&(e.previous=n),r.first==i&&(r.first=e),r.last==i&&(r.last=n),U?r.size--:this.size--),!!i},forEach:function(t,e){for(var n,r=a(this),i=_n(t,1<arguments.length?e:void 0,3);n=n?n.next:r.first;)for(i(n.value,n.key,this);n&&n.removed;)n=n.previous},has:function(t){return!!u(this,t)}}),vn(s.prototype,r?{get:function(t){var e=u(this,t);return e&&e.value},set:function(t,e){return o(this,0===t?0:t,e)}}:{add:function(t){return o(this,t=0===t?0:t,t)}}),U&&Ps(s.prototype,"size",{get:function(){return a(this).size}}),s},setStrong:function(t,e,n){var r=e+" Iterator",i=Ls(e),o=Ls(r);Fe(t,e,function(t,e){xs(this,{type:r,target:t,state:i(t),kind:e,last:void 0})},function(){for(var t=o(this),e=t.kind,n=t.last;n&&n.removed;)n=n.previous;return t.target&&(t.last=n=n?n.next:t.state.first)?"keys"==e?{value:n.key,done:!1}:"values"==e?{value:n.value,done:!1}:{value:[n.key,n.value],done:!1}:{value:t.target=void 0,done:!0}},n?"entries":"values",!n,!0),yn(e)}};As("Map",function(e){return function(t){return e(this,arguments.length?t:void 0)}},Ms),te.Map;jt({target:"Map",stat:!0},{from:ks});function Fs(){for(var t=arguments.length,e=new Array(t);t--;)e[t]=arguments[t];return new this(e)}jt({target:"Map",stat:!0},{of:Fs});function Us(){for(var t,e=k(this),n=gn(e.delete),r=!0,i=0,o=arguments.length;i<o;i++)t=n.call(e,arguments[i]),r=r&&t;return!!r}jt({target:"Map",proto:!0,real:!0,forced:F},{deleteAll:function(){return Us.apply(this,arguments)}});function js(t){return Map.prototype.entries.call(t)}jt({target:"Map",proto:!0,real:!0,forced:F},{every:function(t,e){var n=k(this),r=js(n),i=_n(t,1<arguments.length?e:void 0,3);return!An(r,function(t,e){if(!i(e,t,n))return An.stop()},void 0,!0,!0).stopped}}),jt({target:"Map",proto:!0,real:!0,forced:F},{filter:function(t,e){var n=k(this),r=js(n),i=_n(t,1<arguments.length?e:void 0,3),o=new(xn(n,Dt("Map"))),s=gn(o.set);return An(r,function(t,e){i(e,t,n)&&s.call(o,t,e)},void 0,!0,!0),o}}),jt({target:"Map",proto:!0,real:!0,forced:F},{find:function(t,e){var n=k(this),r=js(n),i=_n(t,1<arguments.length?e:void 0,3);return An(r,function(t,e){if(i(e,t,n))return An.stop(e)},void 0,!0,!0).result}}),jt({target:"Map",proto:!0,real:!0,forced:F},{findKey:function(t,e){var n=k(this),r=js(n),i=_n(t,1<arguments.length?e:void 0,3);return An(r,function(t,e){if(i(e,t,n))return An.stop(t)},void 0,!0,!0).result}}),jt({target:"Map",stat:!0},{groupBy:function(t,n){var r=new this;gn(n);var i=gn(r.has),o=gn(r.get),s=gn(r.set);return An(t,function(t){var e=n(t);i.call(r,e)?o.call(r,e).push(t):s.call(r,e,[t])}),r}});jt({target:"Map",proto:!0,real:!0,forced:F},{includes:function(i){return An(js(k(this)),function(t,e){if((n=e)===(r=i)||n!=n&&r!=r)return An.stop();var n,r},void 0,!0,!0).stopped}}),jt({target:"Map",stat:!0},{keyBy:function(t,e){var n=new this;gn(e);var r=gn(n.set);return An(t,function(t){r.call(n,e(t),t)}),n}}),jt({target:"Map",proto:!0,real:!0,forced:F},{keyOf:function(n){return An(js(k(this)),function(t,e){if(e===n)return An.stop(t)},void 0,!0,!0).result}}),jt({target:"Map",proto:!0,real:!0,forced:F},{mapKeys:function(t,e){var n=k(this),r=js(n),i=_n(t,1<arguments.length?e:void 0,3),o=new(xn(n,Dt("Map"))),s=gn(o.set);return An(r,function(t,e){s.call(o,i(e,t,n),e)},void 0,!0,!0),o}}),jt({target:"Map",proto:!0,real:!0,forced:F},{mapValues:function(t,e){var n=k(this),r=js(n),i=_n(t,1<arguments.length?e:void 0,3),o=new(xn(n,Dt("Map"))),s=gn(o.set);return An(r,function(t,e){s.call(o,t,i(e,t,n))},void 0,!0,!0),o}}),jt({target:"Map",proto:!0,real:!0,forced:F},{merge:function(t){for(var e=k(this),n=gn(e.set),r=0;r<arguments.length;)An(arguments[r++],n,e,!0);return e}}),jt({target:"Map",proto:!0,real:!0,forced:F},{reduce:function(n,t){var r=k(this),e=js(r),i=arguments.length<2,o=i?void 0:t;if(gn(n),An(e,function(t,e){o=i?(i=!1,e):n(o,e,t,r)},void 0,!0,!0),i)throw TypeError("Reduce of empty map with no initial value");return o}}),jt({target:"Map",proto:!0,real:!0,forced:F},{some:function(t,e){var n=k(this),r=js(n),i=_n(t,1<arguments.length?e:void 0,3);return An(r,function(t,e){if(i(e,t,n))return An.stop()},void 0,!0,!0).stopped}}),jt({target:"Map",proto:!0,real:!0,forced:F},{update:function(t,e,n){var r=k(this),i=arguments.length;gn(e);var o=r.has(t);if(!o&&i<3)throw TypeError("Updating absent value");var s=o?r.get(t):gn(2<i?n:void 0)(t,r);return r.set(t,e(s,t,r)),r}});function Vs(t,e,n){var r,i=k(this),o=2<arguments.length?n:void 0;if("function"!=typeof e&&"function"!=typeof o)throw TypeError("At least one callback required");return i.has(t)?(r=i.get(t),"function"==typeof e&&(r=e(r),i.set(t,r))):"function"==typeof o&&(r=o(),i.set(t,r)),r}jt({target:"Map",proto:!0,real:!0,forced:F},{upsert:Vs}),jt({target:"Map",proto:!0,real:!0,forced:F},{updateOrInsert:Vs});As("Set",function(e){return function(t){return e(this,arguments.length?t:void 0)}},Ms),te.Set;jt({target:"Set",stat:!0},{from:ks}),jt({target:"Set",stat:!0},{of:Fs});jt({target:"Set",proto:!0,real:!0,forced:F},{addAll:function(){return function(){for(var t=k(this),e=gn(t.add),n=0,r=arguments.length;n<r;n++)e.call(t,arguments[n]);return t}.apply(this,arguments)}}),jt({target:"Set",proto:!0,real:!0,forced:F},{deleteAll:function(){return Us.apply(this,arguments)}});function qs(t){return Set.prototype.values.call(t)}jt({target:"Set",proto:!0,real:!0,forced:F},{every:function(t,e){var n=k(this),r=qs(n),i=_n(t,1<arguments.length?e:void 0,3);return!An(r,function(t){if(!i(t,t,n))return An.stop()},void 0,!1,!0).stopped}}),jt({target:"Set",proto:!0,real:!0,forced:F},{difference:function(t){var e=k(this),n=new(xn(e,Dt("Set")))(e),r=gn(n.delete);return An(t,function(t){r.call(n,t)}),n}}),jt({target:"Set",proto:!0,real:!0,forced:F},{filter:function(t,e){var n=k(this),r=qs(n),i=_n(t,1<arguments.length?e:void 0,3),o=new(xn(n,Dt("Set"))),s=gn(o.add);return An(r,function(t){i(t,t,n)&&s.call(o,t)},void 0,!1,!0),o}}),jt({target:"Set",proto:!0,real:!0,forced:F},{find:function(t,e){var n=k(this),r=qs(n),i=_n(t,1<arguments.length?e:void 0,3);return An(r,function(t){if(i(t,t,n))return An.stop(t)},void 0,!1,!0).result}}),jt({target:"Set",proto:!0,real:!0,forced:F},{intersection:function(t){var e=k(this),n=new(xn(e,Dt("Set"))),r=gn(e.has),i=gn(n.add);return An(t,function(t){r.call(e,t)&&i.call(n,t)}),n}}),jt({target:"Set",proto:!0,real:!0,forced:F},{isDisjointFrom:function(t){var e=k(this),n=gn(e.has);return!An(t,function(t){if(!0===n.call(e,t))return An.stop()}).stopped}}),jt({target:"Set",proto:!0,real:!0,forced:F},{isSubsetOf:function(t){var e=function(t){var e=wn(t);if("function"!=typeof e)throw TypeError(String(t)+" is not iterable");return k(e.call(t))}(this),n=k(t),r=n.has;return"function"!=typeof r&&(n=new(Dt("Set"))(t),r=gn(n.has)),!An(e,function(t){if(!1===r.call(n,t))return An.stop()},void 0,!1,!0).stopped}}),jt({target:"Set",proto:!0,real:!0,forced:F},{isSupersetOf:function(t){var e=k(this),n=gn(e.has);return!An(t,function(t){if(!1===n.call(e,t))return An.stop()}).stopped}}),jt({target:"Set",proto:!0,real:!0,forced:F},{join:function(t){var e=k(this),n=qs(e),r=void 0===t?",":String(t),i=[];return An(n,i.push,i,!1,!0),i.join(r)}}),jt({target:"Set",proto:!0,real:!0,forced:F},{map:function(t,e){var n=k(this),r=qs(n),i=_n(t,1<arguments.length?e:void 0,3),o=new(xn(n,Dt("Set"))),s=gn(o.add);return An(r,function(t){s.call(o,i(t,t,n))},void 0,!1,!0),o}}),jt({target:"Set",proto:!0,real:!0,forced:F},{reduce:function(e,t){var n=k(this),r=qs(n),i=arguments.length<2,o=i?void 0:t;if(gn(e),An(r,function(t){o=i?(i=!1,t):e(o,t,t,n)},void 0,!1,!0),i)throw TypeError("Reduce of empty set with no initial value");return o}}),jt({target:"Set",proto:!0,real:!0,forced:F},{some:function(t,e){var n=k(this),r=qs(n),i=_n(t,1<arguments.length?e:void 0,3);return An(r,function(t){if(i(t,t,n))return An.stop()},void 0,!1,!0).stopped}}),jt({target:"Set",proto:!0,real:!0,forced:F},{symmetricDifference:function(t){var e=k(this),n=new(xn(e,Dt("Set")))(e),r=gn(n.delete),i=gn(n.add);return An(t,function(t){r.call(n,t)||i.call(n,t)}),n}}),jt({target:"Set",proto:!0,real:!0,forced:F},{union:function(t){var e=k(this),n=new(xn(e,Dt("Set")))(e);return An(t,gn(n.add),n),n}});var Bs=Math.floor;jt({target:"Number",stat:!0},{isInteger:function(t){return!N(t)&&isFinite(t)&&Bs(t)===t}});te.Number.isInteger;jt({target:"Number",stat:!0},{isNaN:function(t){return t!=t}});te.Number.isNaN;var Ws=function(t,e){return(Ws=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function Gs(t,e){function n(){this.constructor=t}Ws(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var Hs=function(){return(Hs=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function Ks(t,s,a,u){return new(a=a||Promise)(function(n,e){function r(t){try{o(u.next(t))}catch(t){e(t)}}function i(t){try{o(u.throw(t))}catch(t){e(t)}}function o(t){var e;t.done?n(t.value):((e=t.value)instanceof a?e:new a(function(t){t(e)})).then(r,i)}o((u=u.apply(t,s||[])).next())})}function zs(n,r){var i,o,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},t={next:e(0),throw:e(1),return:e(2)};return"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,o&&(s=2&e[0]?o.return:e[0]?o.throw||((s=o.return)&&s.call(o),0):o.next)&&!(s=s.call(o,e[1])).done)return s;switch(o=0,s&&(e=[2&e[0],s.value]),e[0]){case 0:case 1:s=e;break;case 4:return a.label++,{value:e[1],done:!1};case 5:a.label++,o=e[1],e=[0];continue;case 7:e=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===e[0]||2===e[0])){a=0;continue}if(3===e[0]&&(!s||e[1]>s[0]&&e[1]<s[3])){a.label=e[1];break}if(6===e[0]&&a.label<s[1]){a.label=s[1],s=e;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(e);break}s[2]&&a.ops.pop(),a.trys.pop();continue}e=r.call(n,a)}catch(t){e=[6,t],o=0}finally{i=s=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}}function Qs(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Ys(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),s=[];try{for(;(void 0===e||0<e--)&&!(r=o.next()).done;)s.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}function Xs(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(Ys(arguments[e]));return t}function $s(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),i=0,e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}function Js(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);i<128?e[n++]=i:(i<2048?e[n++]=i>>6|192:(55296==(64512&i)&&r+1<t.length&&56320==(64512&t.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++r)),e[n++]=i>>18|240,e[n++]=i>>12&63|128):e[n++]=i>>12|224,e[n++]=i>>6&63|128),e[n++]=63&i|128)}return e}function Zs(t){try{return ra.decodeString(t,!0)}catch(t){console.error("base64Decode failed: ",t)}return null}var ta={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},ea=function(t,e){if(!t)throw na(e)},na=function(t){return new Error("Firebase Database ("+ta.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)},ra={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<t.length;i+=3){var o=t[i],s=i+1<t.length,a=s?t[i+1]:0,u=i+2<t.length,c=u?t[i+2]:0,h=o>>2,l=(3&o)<<4|a>>4,f=(15&a)<<2|c>>6,p=63&c;u||(p=64,s||(f=64)),r.push(n[h],n[l],n[f],n[p])}return r.join("")},encodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Js(t),e)},decodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){for(var e=[],n=0,r=0;n<t.length;){var i,o,s,a=t[n++];a<128?e[r++]=String.fromCharCode(a):191<a&&a<224?(o=t[n++],e[r++]=String.fromCharCode((31&a)<<6|63&o)):239<a&&a<365?(i=((7&a)<<18|(63&(o=t[n++]))<<12|(63&(s=t[n++]))<<6|63&t[n++])-65536,e[r++]=String.fromCharCode(55296+(i>>10)),e[r++]=String.fromCharCode(56320+(1023&i))):(o=t[n++],s=t[n++],e[r++]=String.fromCharCode((15&a)<<12|(63&o)<<6|63&s))}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray:function(t,e){this.init_();for(var n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<t.length;){var o=n[t.charAt(i++)],s=i<t.length?n[t.charAt(i)]:0,a=++i<t.length?n[t.charAt(i)]:64,u=++i<t.length?n[t.charAt(i)]:64;if(++i,null==o||null==s||null==a||null==u)throw Error();var c,h,l=o<<2|s>>4;r.push(l),64!==a&&(c=s<<4&240|a>>2,r.push(c),64!==u&&(h=a<<6&192|u,r.push(h)))}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),(this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t)>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};function ia(t){return oa(void 0,t)}function oa(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(var n in e)e.hasOwnProperty(n)&&(t[n]=oa(t[n],e[n]));return t}var sa=(aa.prototype.wrapCallback=function(n){var r=this;return function(t,e){t?r.reject(t):r.resolve(e),"function"==typeof n&&(r.promise.catch(function(){}),1===n.length?n(t):n(t,e))}},aa);function aa(){var n=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise(function(t,e){n.resolve=t,n.reject=e})}function ua(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function ca(){return"undefined"!=typeof window&&(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ua())}function ha(){var t="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof t&&void 0!==t.id}function la(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function fa(){return!0===ta.NODE_ADMIN}function pa(){return"indexedDB"in self&&null!=indexedDB}function da(){return new Promise(function(t,e){try{var n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=window.indexedDB.open(r);i.onsuccess=function(){i.result.close(),n||window.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=function(){n=!1},i.onerror=function(){var t;e((null===(t=i.error)||void 0===t?void 0:t.message)||"")}}catch(t){e(t)}})}function va(){return!(!navigator||!navigator.cookieEnabled)}var ya,ga="FirebaseError",ma=(Gs(ba,ya=Error),ba);function ba(t,e){var n=ya.call(this,e)||this;return n.code=t,n.name=ga,Object.setPrototypeOf(n,ba.prototype),Error.captureStackTrace&&Error.captureStackTrace(n,_a.prototype.create),n}var _a=(wa.prototype.create=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r,i=e[0]||{},o=this.service+"/"+t,s=this.errors[t],a=s?(r=i,s.replace(Ea,function(t,e){var n=r[e];return null!=n?String(n):"<"+e+"?>"})):"Error",u=this.serviceName+": "+a+" ("+o+").",c=new ma(o,u),h=0,l=Object.keys(i);h<l.length;h++){var f=l[h];"_"!==f.slice(-1)&&(f in c&&console.warn('Overwriting FirebaseError base field "'+f+'" can cause unexpected behavior.'),c[f]=i[f])}return c},wa);function wa(t,e,n){this.service=t,this.serviceName=e,this.errors=n}var Ea=/\{\$([^}]+)}/g;function Ia(t){return JSON.parse(t)}function Ta(t){return JSON.stringify(t)}function Sa(t){var e={},n={},r={},i="";try{var o=t.split("."),e=Ia(Zs(o[0])||""),n=Ia(Zs(o[1])||""),i=o[2],r=n.d||{};delete n.d}catch(t){}return{header:e,claims:n,data:r,signature:i}}function Ca(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Na(t,e){return Object.prototype.hasOwnProperty.call(t,e)?t[e]:void 0}function Aa(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function ka(t,e,n){var r,i={};for(r in t)Object.prototype.hasOwnProperty.call(t,r)&&(i[r]=e.call(n,t[r],r,t));return i}var Oa=(Ra.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},Ra.prototype.compress_=function(t,e){e=e||0;var n=this.W_;if("string"==typeof t)for(var r=0;r<16;r++)n[r]=t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|t.charCodeAt(e+3),e+=4;else for(r=0;r<16;r++)n[r]=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3],e+=4;for(r=16;r<80;r++){var i=n[r-3]^n[r-8]^n[r-14]^n[r-16];n[r]=4294967295&(i<<1|i>>>31)}for(var o,s,a=this.chain_[0],u=this.chain_[1],c=this.chain_[2],h=this.chain_[3],l=this.chain_[4],r=0;r<80;r++){s=r<40?r<20?(o=h^u&(c^h),1518500249):(o=u^c^h,1859775393):r<60?(o=u&c|h&(u|c),2400959708):(o=u^c^h,3395469782);i=(a<<5|a>>>27)+o+l+s+n[r]&4294967295,l=h,h=c,c=4294967295&(u<<30|u>>>2),u=a,a=i}this.chain_[0]=this.chain_[0]+a&4294967295,this.chain_[1]=this.chain_[1]+u&4294967295,this.chain_[2]=this.chain_[2]+c&4294967295,this.chain_[3]=this.chain_[3]+h&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295},Ra.prototype.update=function(t,e){if(null!=t){void 0===e&&(e=t.length);for(var n=e-this.blockSize,r=0,i=this.buf_,o=this.inbuf_;r<e;){if(0===o)for(;r<=n;)this.compress_(t,r),r+=this.blockSize;if("string"==typeof t){for(;r<e;)if(i[o]=t.charCodeAt(r),++r,++o===this.blockSize){this.compress_(i),o=0;break}}else for(;r<e;)if(i[o]=t[r],++r,++o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=e}},Ra.prototype.digest=function(){var t=[],e=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;56<=n;n--)this.buf_[n]=255&e,e/=256;this.compress_(this.buf_);for(var r=0,n=0;n<5;n++)for(var i=24;0<=i;i-=8)t[r]=this.chain_[n]>>i&255,++r;return t},Ra);function Ra(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}function Pa(t,e){var n=new Da(t,e);return n.subscribe.bind(n)}var Da=(xa.prototype.next=function(e){this.forEachObserver(function(t){t.next(e)})},xa.prototype.error=function(e){this.forEachObserver(function(t){t.error(e)}),this.close(e)},xa.prototype.complete=function(){this.forEachObserver(function(t){t.complete()}),this.close()},xa.prototype.subscribe=function(t,e,n){var r,i=this;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=0,r=e;n<r.length;n++){var i=r[n];if(i in t&&"function"==typeof t[i])return!0}return!1}(t,["next","error","complete"])?t:{next:t,error:e,complete:n}).next&&(r.next=La),void 0===r.error&&(r.error=La),void 0===r.complete&&(r.complete=La);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(t){}}),this.observers.push(r),o},xa.prototype.unsubscribeOne=function(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],--this.observerCount,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},xa.prototype.forEachObserver=function(t){if(!this.finalized)for(var e=0;e<this.observers.length;e++)this.sendOne(e,t)},xa.prototype.sendOne=function(t,e){var n=this;this.task.then(function(){if(void 0!==n.observers&&void 0!==n.observers[t])try{e(n.observers[t])}catch(t){"undefined"!=typeof console&&console.error&&console.error(t)}})},xa.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then(function(){e.observers=void 0,e.onNoObservers=void 0}))},xa);function xa(t,e){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then(function(){t(n)}).catch(function(t){n.error(t)})}function La(){}function Ma(t,e,n,r){var i;if(r<e?i="at least "+e:n<r&&(i=0===n?"none":"no more than "+n),i)throw new Error(t+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+i+".")}function Fa(t,e,n){var r="";switch(e){case 1:r=n?"first":"First";break;case 2:r=n?"second":"Second";break;case 3:r=n?"third":"Third";break;case 4:r=n?"fourth":"Fourth";break;default:throw new Error("errorPrefix called with argumentNumber > 4.  Need to update it?")}var i=t+" failed: ";return i+=r+" argument "}function Ua(t,e,n,r){if((!r||n)&&"function"!=typeof n)throw new Error(Fa(t,e,r)+"must be a valid function.")}function ja(t,e,n,r){if((!r||n)&&("object"!=typeof n||null===n))throw new Error(Fa(t,e,r)+"must be a valid context object.")}function Va(t){for(var e=0,n=0;n<t.length;n++){var r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:55296<=r&&r<=56319?(e+=4,n++):e+=3}return e}var qa=1e3,Ba=2,Wa=144e5,Ga=.5;function Ha(t,e,n){void 0===e&&(e=qa),void 0===n&&(n=Ba);var r=e*Math.pow(n,t),i=Math.round(Ga*r*(Math.random()-.5)*2);return Math.min(Wa,r+i)}var Ka=(za.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},za.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},za.prototype.setServiceProps=function(t){return this.serviceProps=t,this},za);function za(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY"}var Qa="[DEFAULT]",Ya=(Xa.prototype.get=function(t){void 0===t&&(t=Qa);var e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){var n=new sa;this.instancesDeferred.set(e,n);try{var r=this.getOrInitializeService(e);r&&n.resolve(r)}catch(t){}}return this.instancesDeferred.get(e).promise},Xa.prototype.getImmediate=function(t){var e=Hs({identifier:Qa,optional:!1},t),n=e.identifier,r=e.optional,i=this.normalizeInstanceIdentifier(n);try{var o=this.getOrInitializeService(i);if(o)return o;if(r)return null;throw Error("Service "+this.name+" is not available")}catch(t){if(r)return null;throw t}},Xa.prototype.getComponent=function(){return this.component},Xa.prototype.setComponent=function(t){var e,n;if(t.name!==this.name)throw Error("Mismatching Component "+t.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if("EAGER"===(this.component=t).instantiationMode)try{this.getOrInitializeService(Qa)}catch(t){}try{for(var r=Qs(this.instancesDeferred.entries()),i=r.next();!i.done;i=r.next()){var o=Ys(i.value,2),s=o[0],a=o[1],u=this.normalizeInstanceIdentifier(s);try{var c=this.getOrInitializeService(u);a.resolve(c)}catch(t){}}}catch(t){e={error:t}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}},Xa.prototype.clearInstance=function(t){void 0===t&&(t=Qa),this.instancesDeferred.delete(t),this.instances.delete(t)},Xa.prototype.delete=function(){return Ks(this,void 0,void 0,function(){var e;return zs(this,function(t){switch(t.label){case 0:return e=Array.from(this.instances.values()),[4,Promise.all(Xs(e.filter(function(t){return"INTERNAL"in t}).map(function(t){return t.INTERNAL.delete()}),e.filter(function(t){return"_delete"in t}).map(function(t){return t._delete()})))];case 1:return t.sent(),[2]}})})},Xa.prototype.isComponentSet=function(){return null!=this.component},Xa.prototype.getOrInitializeService=function(t){var e,n=this.instances.get(t);return!n&&this.component&&(n=this.component.instanceFactory(this.container,(e=t)===Qa?void 0:e),this.instances.set(t,n)),n||null},Xa.prototype.normalizeInstanceIdentifier=function(t){return!this.component||this.component.multipleInstances?t:Qa},Xa);function Xa(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map}var $a,Ja=(Za.prototype.addComponent=function(t){var e=this.getProvider(t.name);if(e.isComponentSet())throw new Error("Component "+t.name+" has already been registered with "+this.name);e.setComponent(t)},Za.prototype.addOrOverwriteComponent=function(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)},Za.prototype.getProvider=function(t){if(this.providers.has(t))return this.providers.get(t);var e=new Ya(t,this);return this.providers.set(t,e),e},Za.prototype.getProviders=function(){return Array.from(this.providers.values())},Za);function Za(t){this.name=t,this.providers=new Map}function tu(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),i=0,e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}var eu,nu,ru=[];(nu=eu=eu||{})[nu.DEBUG=0]="DEBUG",nu[nu.VERBOSE=1]="VERBOSE",nu[nu.INFO=2]="INFO",nu[nu.WARN=3]="WARN",nu[nu.ERROR=4]="ERROR",nu[nu.SILENT=5]="SILENT";function iu(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(!(e<t.logLevel)){var i=(new Date).toISOString(),o=uu[e];if(!o)throw new Error("Attempted to log a message with an invalid logType (value: "+e+")");console[o].apply(console,tu(["["+i+"]  "+t.name+":"],n))}}var ou,su={debug:eu.DEBUG,verbose:eu.VERBOSE,info:eu.INFO,warn:eu.WARN,error:eu.ERROR,silent:eu.SILENT},au=eu.INFO,uu=(($a={})[eu.DEBUG]="log",$a[eu.VERBOSE]="log",$a[eu.INFO]="info",$a[eu.WARN]="warn",$a[eu.ERROR]="error",$a),cu=(Object.defineProperty(hu.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in eu))throw new TypeError('Invalid value "'+t+'" assigned to `logLevel`');this._logLevel=t},enumerable:!1,configurable:!0}),hu.prototype.setLogLevel=function(t){this._logLevel="string"==typeof t?su[t]:t},Object.defineProperty(hu.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!1,configurable:!0}),Object.defineProperty(hu.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(t){this._userLogHandler=t},enumerable:!1,configurable:!0}),hu.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,tu([this,eu.DEBUG],t)),this._logHandler.apply(this,tu([this,eu.DEBUG],t))},hu.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,tu([this,eu.VERBOSE],t)),this._logHandler.apply(this,tu([this,eu.VERBOSE],t))},hu.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,tu([this,eu.INFO],t)),this._logHandler.apply(this,tu([this,eu.INFO],t))},hu.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,tu([this,eu.WARN],t)),this._logHandler.apply(this,tu([this,eu.WARN],t))},hu.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,tu([this,eu.ERROR],t)),this._logHandler.apply(this,tu([this,eu.ERROR],t))},hu);function hu(t){this.name=t,this._logLevel=au,this._logHandler=iu,this._userLogHandler=null,ru.push(this)}function lu(e){ru.forEach(function(t){t.setLogLevel(e)})}var fu,pu=((ou={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",ou["bad-app-name"]="Illegal App name: '{$appName}",ou["duplicate-app"]="Firebase App named '{$appName}' already exists",ou["app-deleted"]="Firebase App named '{$appName}' already deleted",ou["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",ou["invalid-log-argument"]="First argument to `onLog` must be null or a function.",ou),du=new _a("app","Firebase",pu),vu="@firebase/app",yu="[DEFAULT]",gu=((fu={})[vu]="fire-core",fu["@firebase/analytics"]="fire-analytics",fu["@firebase/auth"]="fire-auth",fu["@firebase/database"]="fire-rtdb",fu["@firebase/functions"]="fire-fn",fu["@firebase/installations"]="fire-iid",fu["@firebase/messaging"]="fire-fcm",fu["@firebase/performance"]="fire-perf",fu["@firebase/remote-config"]="fire-rc",fu["@firebase/storage"]="fire-gcs",fu["@firebase/firestore"]="fire-fst",fu["fire-js"]="fire-js",fu["firebase-wrapper"]="fire-js-all",fu),mu=new cu("@firebase/app"),bu=(Object.defineProperty(_u.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(t){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=t},enumerable:!1,configurable:!0}),Object.defineProperty(_u.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(_u.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),_u.prototype.delete=function(){var e=this;return new Promise(function(t){e.checkDestroyed_(),t()}).then(function(){return e.firebase_.INTERNAL.removeApp(e.name_),Promise.all(e.container.getProviders().map(function(t){return t.delete()}))}).then(function(){e.isDeleted_=!0})},_u.prototype._getService=function(t,e){return void 0===e&&(e=yu),this.checkDestroyed_(),this.container.getProvider(t).getImmediate({identifier:e})},_u.prototype._removeServiceInstance=function(t,e){void 0===e&&(e=yu),this.container.getProvider(t).clearInstance(e)},_u.prototype._addComponent=function(e){try{this.container.addComponent(e)}catch(t){mu.debug("Component "+e.name+" failed to register with FirebaseApp "+this.name,t)}},_u.prototype._addOrOverwriteComponent=function(t){this.container.addOrOverwriteComponent(t)},_u.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw du.create("app-deleted",{appName:this.name_})},_u);function _u(t,e,n){var r,i,o=this;this.firebase_=n,this.isDeleted_=!1,this.name_=e.name,this.automaticDataCollectionEnabled_=e.automaticDataCollectionEnabled||!1,this.options_=ia(t),this.container=new Ja(e.name),this._addComponent(new Ka("app",function(){return o},"PUBLIC"));try{for(var s=Qs(this.firebase_.INTERNAL.components.values()),a=s.next();!a.done;a=s.next()){var u=a.value;this._addComponent(u)}}catch(t){r={error:t}}finally{try{a&&!a.done&&(i=s.return)&&i.call(s)}finally{if(r)throw r.error}}}bu.prototype.name&&bu.prototype.options||bu.prototype.delete||console.log("dc");var wu="7.21.1";function Eu(u){var c={},h=new Map,l={__esModule:!0,initializeApp:function(t,e){void 0===e&&(e={});{"object"==typeof e&&null!==e||(e={name:e})}var n=e;void 0===n.name&&(n.name=yu);var r=n.name;if("string"!=typeof r||!r)throw du.create("bad-app-name",{appName:String(r)});if(Ca(c,r))throw du.create("duplicate-app",{appName:r});var i=new u(t,n,l);return c[r]=i},app:f,registerVersion:function(t,e,n){var r,i=null!==(r=gu[t])&&void 0!==r?r:t;n&&(i+="-"+n);var o=i.match(/\s|\//),s=e.match(/\s|\//);if(o||s){var a=['Unable to register library "'+i+'" with version "'+e+'":'];return o&&a.push('library name "'+i+'" contains illegal characters (whitespace or "/")'),o&&s&&a.push("and"),s&&a.push('version name "'+e+'" contains illegal characters (whitespace or "/")'),void mu.warn(a.join(" "))}p(new Ka(i+"-version",function(){return{library:i,version:e}},"VERSION"))},setLogLevel:lu,onLog:function(t,e){if(null!==t&&"function"!=typeof t)throw du.create("invalid-log-argument",{appName:name});!function(s,e){for(var t=0,n=ru;t<n.length;t++){!function(t){var o=null;e&&e.level&&(o=su[e.level]),t.userLogHandler=null===s?null:function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var i=n.map(function(t){if(null==t)return null;if("string"==typeof t)return t;if("number"==typeof t||"boolean"==typeof t)return t.toString();if(t instanceof Error)return t.message;try{return JSON.stringify(t)}catch(t){return null}}).filter(function(t){return t}).join(" ");e>=(null!=o?o:t.logLevel)&&s({level:eu[e].toLowerCase(),message:i,args:n,type:t.name})}}(n[t])}}(t,e)},apps:null,SDK_VERSION:wu,INTERNAL:{registerComponent:p,removeApp:function(t){delete c[t]},components:h,useAsService:function(t,e){if("serverAuth"===e)return null;return e}}};function f(t){if(!Ca(c,t=t||yu))throw du.create("no-app",{appName:t});return c[t]}function p(n){var e,t,r,i=n.name;if(h.has(i))return mu.debug("There were multiple attempts to register component "+i+"."),"PUBLIC"===n.type?l[i]:null;h.set(i,n),"PUBLIC"===n.type&&(r=function(t){if(void 0===t&&(t=f()),"function"!=typeof t[i])throw du.create("invalid-app-argument",{appName:i});return t[i]()},void 0!==n.serviceProps&&oa(r,n.serviceProps),l[i]=r,u.prototype[i]=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this._getService.bind(this,i).apply(this,n.multipleInstances?t:[])});try{for(var o=Qs(Object.keys(c)),s=o.next();!s.done;s=o.next()){var a=s.value;c[a]._addComponent(n)}}catch(t){e={error:t}}finally{try{s&&!s.done&&(t=o.return)&&t.call(o)}finally{if(e)throw e.error}}return"PUBLIC"===n.type?l[i]:null}return l.default=l,Object.defineProperty(l,"apps",{get:function(){return Object.keys(c).map(function(t){return c[t]})}}),f.App=u,l}var Iu,Tu=function t(){var e=Eu(bu);return e.INTERNAL=Hs(Hs({},e.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(t){oa(e,t)},createSubscribe:Pa,ErrorFactory:_a,deepExtend:oa}),e}(),Su=(Cu.prototype.getPlatformInfoString=function(){return this.container.getProviders().map(function(t){if("VERSION"!==(null==(e=t.getComponent())?void 0:e.type))return null;var e,n=t.getImmediate();return n.library+"/"+n.version}).filter(function(t){return t}).join(" ")},Cu);function Cu(t){this.container=t}"object"==typeof self&&self.self===self&&void 0!==self.firebase&&(mu.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  "),(Iu=self.firebase.SDK_VERSION)&&0<=Iu.indexOf("LITE")&&mu.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    "));var Nu=Tu.initializeApp;Tu.initializeApp=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return function(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(t){return}}()&&mu.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the rollup-plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/rollup-plugin-node-resolve\n      '),Nu.apply(void 0,t)};var Au,ku,Hl=Tu;(Au=Hl).INTERNAL.registerComponent(new Ka("platform-logger",function(t){return new Su(t)},"PRIVATE")),Au.registerVersion(vu,"0.6.11",ku),Au.registerVersion("fire-js","");Hl.registerVersion("firebase","7.21.1","app");(function(){var t,o="function"==typeof Object.defineProperties?Object.defineProperty:function(t,e,n){t!=Array.prototype&&t!=Object.prototype&&(t[e]=n.value)};var u=function(t){t=["object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global,t];for(var e=0;e<t.length;++e){var n=t[e];if(n&&n.Math==Math)return n}return globalThis}(this);function c(t){var e,n,r="undefined"!=typeof Symbol&&Symbol.iterator&&t[Symbol.iterator];return r?r.call(t):{next:(e=t,n=0,function(){return n<e.length?{done:!1,value:e[n++]}:{done:!0}})}}!function(t,e){if(e){var n=u;t=t.split(".");for(var r=0;r<t.length-1;r++){var i=t[r];i in n||(n[i]={}),n=n[i]}(e=e(r=n[t=t[t.length-1]]))!=r&&null!=e&&o(n,t,{configurable:!0,writable:!0,value:e})}}("Promise",function(t){function s(t){this.b=0,this.c=void 0,this.a=[];var e=this.f();try{t(e.resolve,e.reject)}catch(t){e.reject(t)}}function e(){this.a=null}function a(e){return e instanceof s?e:new s(function(t){t(e)})}if(t)return t;e.prototype.b=function(t){var e;null==this.a&&(this.a=[],(e=this).c(function(){e.g()})),this.a.push(t)};var n=u.setTimeout;e.prototype.c=function(t){n(t,0)},e.prototype.g=function(){for(;this.a&&this.a.length;){var t=this.a;this.a=[];for(var e=0;e<t.length;++e){var n=t[e];t[e]=null;try{n()}catch(t){this.f(t)}}}this.a=null},e.prototype.f=function(t){this.c(function(){throw t})},s.prototype.f=function(){function t(e){return function(t){r||(r=!0,e.call(n,t))}}var n=this,r=!1;return{resolve:t(this.m),reject:t(this.g)}},s.prototype.m=function(t){if(t===this)this.g(new TypeError("A Promise cannot resolve to itself"));else if(t instanceof s)this.s(t);else{t:switch(typeof t){case"object":var e=null!=t;break t;case"function":e=!0;break t;default:e=!1}e?this.u(t):this.h(t)}},s.prototype.u=function(t){var e=void 0;try{e=t.then}catch(t){return void this.g(t)}"function"==typeof e?this.w(e,t):this.h(t)},s.prototype.g=function(t){this.i(2,t)},s.prototype.h=function(t){this.i(1,t)},s.prototype.i=function(t,e){if(0!=this.b)throw Error("Cannot settle("+t+", "+e+"): Promise already settled in state"+this.b);this.b=t,this.c=e,this.l()},s.prototype.l=function(){if(null!=this.a){for(var t=0;t<this.a.length;++t)i.b(this.a[t]);this.a=null}};var i=new e;return s.prototype.s=function(t){var e=this.f();t.Oa(e.resolve,e.reject)},s.prototype.w=function(t,e){var n=this.f();try{t.call(e,n.resolve,n.reject)}catch(t){n.reject(t)}},s.prototype.then=function(t,e){function n(e,t){return"function"==typeof e?function(t){try{r(e(t))}catch(t){i(t)}}:t}var r,i,o=new s(function(t,e){r=t,i=e});return this.Oa(n(t,r),n(e,i)),o},s.prototype.catch=function(t){return this.then(void 0,t)},s.prototype.Oa=function(t,e){function n(){switch(r.b){case 1:t(r.c);break;case 2:e(r.c);break;default:throw Error("Unexpected state: "+r.b)}}var r=this;null==this.a?i.b(n):this.a.push(n)},s.resolve=a,s.reject=function(n){return new s(function(t,e){e(n)})},s.race=function(i){return new s(function(t,e){for(var n=c(i),r=n.next();!r.done;r=n.next())a(r.value).Oa(t,e)})},s.all=function(t){var e=c(t),o=e.next();return o.done?a([]):new s(function(n,t){for(var r=[],i=0;r.push(void 0),i++,a(o.value).Oa(function(e){return function(t){r[e]=t,0==--i&&n(r)}}(r.length-1),t),!(o=e.next()).done;);})},s});var h=h||{},l=this||self,f=/^[\w+/_-]+[=]{0,2}$/,p=null;function s(){}function n(t){var e=typeof t;if("object"==e){if(!t)return"null";if(t instanceof Array)return"array";if(t instanceof Object)return e;var n=Object.prototype.toString.call(t);if("[object Window]"==n)return"object";if("[object Array]"==n||"number"==typeof t.length&&void 0!==t.splice&&void 0!==t.propertyIsEnumerable&&!t.propertyIsEnumerable("splice"))return"array";if("[object Function]"==n||void 0!==t.call&&void 0!==t.propertyIsEnumerable&&!t.propertyIsEnumerable("call"))return"function"}else if("function"==e&&void 0===t.call)return"object";return e}function d(t){var e=n(t);return"array"==e||"object"==e&&"number"==typeof t.length}function v(t){return"function"==n(t)}function y(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var r="closure_uid_"+(1e9*Math.random()>>>0),i=0;function a(t,e,n){return t.call.apply(t.bind,arguments)}function g(e,n,t){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var t=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(t,r),e.apply(n,t)}}return function(){return e.apply(n,arguments)}}function m(t,e,n){return(m=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?a:g).apply(null,arguments)}function b(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}var _=Date.now||function(){return+new Date};function e(t,e){function n(){}n.prototype=e.prototype,t.Za=e.prototype,t.prototype=new n,t.prototype.constructor=t}function w(t,e,n){this.code=T+t,this.message=e||S[t]||"",this.a=n||null}function E(t){var e=t&&t.code;return e?new w(e.substring(T.length),t.message,t.serverResponse):null}e(w,Error),w.prototype.v=function(){var t={code:this.code,message:this.message};return this.a&&(t.serverResponse=this.a),t},w.prototype.toJSON=function(){return this.v()};var I,T="auth/",S={"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","expired-action-code":"The action code has expired. ","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal error has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal error has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal error has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network error (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal error has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled."},C={hd:{Ra:"https://staging-identitytoolkit.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",Xa:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Ua:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"b"},pd:{Ra:"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",Xa:"https://securetoken.googleapis.com/v1/token",Ua:"https://identitytoolkit.googleapis.com/v2/",id:"p"},rd:{Ra:"https://staging-www.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",Xa:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Ua:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"s"},sd:{Ra:"https://www-googleapis-test.sandbox.google.com/identitytoolkit/v3/relyingparty/",Xa:"https://test-securetoken.sandbox.googleapis.com/v1/token",Ua:"https://test-identitytoolkit.sandbox.googleapis.com/v2/",id:"t"}};function N(t){for(var e in C)if(C[e].id===t)return{firebaseEndpoint:(t=C[e]).Ra,secureTokenEndpoint:t.Xa,identityPlatformEndpoint:t.Ua};return null}function A(t){if(t)try{return t.$goog_Thenable}catch(t){return}}function k(t){var e;Error.captureStackTrace?Error.captureStackTrace(this,k):(e=Error().stack)&&(this.stack=e),t&&(this.message=String(t))}function O(t,e){for(var n="",r=(t=t.split("%s")).length-1,i=0;i<r;i++)n+=t[i]+(i<e.length?e[i]:"%s");k.call(this,n+t[r])}function R(t,e){throw new O("Failure"+(t?": "+t:""),Array.prototype.slice.call(arguments,1))}function P(t,e){this.c=t,this.f=e,this.b=0,this.a=null}function D(t,e){t.f(e),t.b<100&&(t.b++,e.next=t.a,t.a=e)}function x(){this.b=this.a=null}I=N("__EID__")?"__EID__":void 0,e(k,Error),k.prototype.name="CustomError",e(O,k),O.prototype.name="AssertionError",P.prototype.get=function(){var t;return 0<this.b?(this.b--,t=this.a,this.a=t.next,t.next=null):t=this.c(),t};var L=new P(function(){return new M},function(t){t.reset()});function M(){this.next=this.b=this.a=null}x.prototype.add=function(t,e){var n=L.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},M.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},M.prototype.reset=function(){this.next=this.b=this.a=null};var F=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},U=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};var j=Array.prototype.filter?function(t,e){return Array.prototype.filter.call(t,e,void 0)}:function(t,e){for(var n,r=t.length,i=[],o=0,s="string"==typeof t?t.split(""):t,a=0;a<r;a++){a in s&&(n=s[a],e.call(void 0,n,a,t)&&(i[o++]=n))}return i},V=Array.prototype.map?function(t,e){return Array.prototype.map.call(t,e,void 0)}:function(t,e){for(var n=t.length,r=Array(n),i="string"==typeof t?t.split(""):t,o=0;o<n;o++)o in i&&(r[o]=e.call(void 0,i[o],o,t));return r},q=Array.prototype.some?function(t,e){return Array.prototype.some.call(t,e,void 0)}:function(t,e){for(var n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t))return!0;return!1};function B(t,e){return 0<=F(t,e)}function W(t,e){var n;return(n=0<=(e=F(t,e)))&&Array.prototype.splice.call(t,e,1),n}function G(n,r){!function(t,e){for(var n="string"==typeof t?t.split(""):t,r=t.length-1;0<=r;--r)r in n&&e.call(void 0,n[r],r,t)}(n,function(t,e){r.call(void 0,t,e,n)&&1==Array.prototype.splice.call(n,e,1).length&&0})}function H(t){return Array.prototype.concat.apply([],arguments)}function K(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}var z,Q=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]},Y=/&/g,X=/</g,$=/>/g,J=/"/g,Z=/'/g,tt=/\x00/g,et=/[\x00&<>"']/;function nt(t,e){return-1!=t.indexOf(e)}function rt(t,e){return t<e?-1:e<t?1:0}t:{var it=l.navigator;if(it){var ot=it.userAgent;if(ot){z=ot;break t}}z=""}function st(t){return nt(z,t)}function at(t,e){for(var n in t)e.call(void 0,t[n],n,t)}function ut(t){for(var e in t)return;return 1}function ct(t){var e,n={};for(e in t)n[e]=t[e];return n}var ht="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function lt(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<ht.length;o++)n=ht[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function ft(t,e){t:{try{var n=t&&t.ownerDocument,r=n&&(n.defaultView||n.parentWindow);if((r=r||l).Element&&r.Location){var i=r;break t}}catch(t){}i=null}if(i&&void 0!==i[e]&&(!t||!(t instanceof i[e])&&(t instanceof i.Location||t instanceof i.Element))){if(y(t))try{var o=t.constructor.displayName||t.constructor.name||Object.prototype.toString.call(t)}catch(t){o="<object could not be stringified>"}else o=void 0===t?"undefined":null===t?"null":typeof t;R("Argument is not a %s (or a non-Element, non-Location mock); got: %s",e,o)}}function pt(t,e){this.a=t===yt&&e||"",this.b=vt}function dt(t){return t instanceof pt&&t.constructor===pt&&t.b===vt?t.a:(R("expected object of type Const, got '"+t+"'"),"type_error:Const")}pt.prototype.ra=!0,pt.prototype.qa=function(){return this.a},pt.prototype.toString=function(){return"Const{"+this.a+"}"};var vt={},yt={},gt=new pt(yt,"");function mt(t,e){this.a=t===Tt&&e||"",this.b=It}function bt(t){return t instanceof mt&&t.constructor===mt&&t.b===It?t.a:(R("expected object of type TrustedResourceUrl, got '"+t+"' of type "+n(t)),"type_error:TrustedResourceUrl")}function _t(t,n){var r=dt(t);if(!Et.test(r))throw Error("Invalid TrustedResourceUrl format: "+r);return t=r.replace(wt,function(t,e){if(!Object.prototype.hasOwnProperty.call(n,e))throw Error('Found marker, "'+e+'", in format string, "'+r+'", but no valid label mapping found in args: '+JSON.stringify(n));return(t=n[e])instanceof pt?dt(t):encodeURIComponent(String(t))}),new mt(Tt,t)}mt.prototype.ra=!0,mt.prototype.qa=function(){return this.a.toString()},mt.prototype.toString=function(){return"TrustedResourceUrl{"+this.a+"}"};var wt=/%{(\w+)}/g,Et=/^((https:)?\/\/[0-9a-z.:[\]-]+\/|\/[^/\\]|[^:/\\%]+\/|[^:/\\%]*[?#]|about:blank#)/i,It={},Tt={};function St(t,e){this.a=t===Ot&&e||"",this.b=kt}function Ct(t){return t instanceof St&&t.constructor===St&&t.b===kt?t.a:(R("expected object of type SafeUrl, got '"+t+"' of type "+n(t)),"type_error:SafeUrl")}St.prototype.ra=!0,St.prototype.qa=function(){return this.a.toString()},St.prototype.toString=function(){return"SafeUrl{"+this.a+"}"};var Nt=/^(?:(?:https?|mailto|ftp):|[^:/?#]*(?:[/?#]|$))/i;function At(t){return t instanceof St?t:(t="object"==typeof t&&t.ra?t.qa():String(t),Nt.test(t)||(t="about:invalid#zClosurez"),new St(Ot,t))}var kt={},Ot={};function Rt(){this.a="",this.b=Dt}function Pt(t){return t instanceof Rt&&t.constructor===Rt&&t.b===Dt?t.a:(R("expected object of type SafeHtml, got '"+t+"' of type "+n(t)),"type_error:SafeHtml")}Rt.prototype.ra=!0,Rt.prototype.qa=function(){return this.a.toString()},Rt.prototype.toString=function(){return"SafeHtml{"+this.a+"}"};var Dt={};function xt(t){var e=new Rt;return e.a=t,e}xt("<!DOCTYPE html>");var Lt=xt("");function Mt(t,e){for(var n=t.split("%s"),r="",i=Array.prototype.slice.call(arguments,1);i.length&&1<n.length;)r+=n.shift()+i.shift();return r+n.join("%s")}function Ft(t){return et.test(t)&&(-1!=t.indexOf("&")&&(t=t.replace(Y,"&amp;")),-1!=t.indexOf("<")&&(t=t.replace(X,"&lt;")),-1!=t.indexOf(">")&&(t=t.replace($,"&gt;")),-1!=t.indexOf('"')&&(t=t.replace(J,"&quot;")),-1!=t.indexOf("'")&&(t=t.replace(Z,"&#39;")),-1!=t.indexOf("\0")&&(t=t.replace(tt,"&#0;"))),t}function Ut(t){return Ut[" "](t),t}xt("<br>"),Ut[" "]=s;var jt,Vt,qt=st("Opera"),Bt=st("Trident")||st("MSIE"),Wt=st("Edge"),Gt=Wt||Bt,Ht=st("Gecko")&&!(nt(z.toLowerCase(),"webkit")&&!st("Edge"))&&!(st("Trident")||st("MSIE"))&&!st("Edge"),Kt=nt(z.toLowerCase(),"webkit")&&!st("Edge");function zt(){var t=l.document;return t?t.documentMode:void 0}t:{var Qt="",Yt=(Vt=z,Ht?/rv:([^\);]+)(\)|;)/.exec(Vt):Wt?/Edge\/([\d\.]+)/.exec(Vt):Bt?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(Vt):Kt?/WebKit\/(\S+)/.exec(Vt):qt?/(?:Version)[ \/]?(\S+)/.exec(Vt):void 0);if(Yt&&(Qt=Yt?Yt[1]:""),Bt){var Xt=zt();if(null!=Xt&&Xt>parseFloat(Qt)){jt=String(Xt);break t}}jt=Qt}var $t,Jt={};function Zt(a){return t=a,e=function(){for(var t=0,e=Q(String(jt)).split("."),n=Q(String(a)).split("."),r=Math.max(e.length,n.length),i=0;0==t&&i<r;i++){var o=e[i]||"",s=n[i]||"";do{if(o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==o[0].length&&0==s[0].length)break;t=rt(0==o[1].length?0:parseInt(o[1],10),0==s[1].length?0:parseInt(s[1],10))||rt(0==o[2].length,0==s[2].length)||rt(o[2],s[2]),o=o[3],s=s[3]}while(0==t)}return 0<=t},n=Jt,Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t);var t,e,n}$t=l.document&&Bt?zt():void 0;try{new self.OffscreenCanvas(0,0).getContext("2d")}catch(t){}var te=!Bt||9<=Number($t);function ee(t){var e=document;return"string"==typeof t?e.getElementById(t):t}function ne(n,t){at(t,function(t,e){t&&"object"==typeof t&&t.ra&&(t=t.qa()),"style"==e?n.style.cssText=t:"class"==e?n.className=t:"for"==e?n.htmlFor=t:oe.hasOwnProperty(e)?n.setAttribute(oe[e],t):0==e.lastIndexOf("aria-",0)||0==e.lastIndexOf("data-",0)?n.setAttribute(e,t):n[e]=t})}var re,ie,oe={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",nonce:"nonce",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};function se(t,e,n){var r,i=arguments,o=document,s=String(i[0]),a=i[1];return!te&&a&&(a.name||a.type)&&(s=["<",s],a.name&&s.push(' name="',Ft(a.name),'"'),a.type&&(s.push(' type="',Ft(a.type),'"'),lt(r={},a),delete r.type,a=r),s.push(">"),s=s.join("")),s=ae(o,s),a&&("string"==typeof a?s.className=a:Array.isArray(a)?s.className=a.join(" "):ne(s,a)),2<i.length&&function(e,n,t){function r(t){t&&n.appendChild("string"==typeof t?e.createTextNode(t):t)}for(var i=2;i<t.length;i++){var o=t[i];!d(o)||y(o)&&0<o.nodeType?r(o):U(function(t){if(t&&"number"==typeof t.length){if(y(t))return"function"==typeof t.item||"string"==typeof t.item;if(v(t))return"function"==typeof t.item}return!1}(o)?K(o):o,r)}}(o,s,i),s}function ae(t,e){return e=String(e),"application/xhtml+xml"===t.contentType&&(e=e.toLowerCase()),t.createElement(e)}function ue(t){l.setTimeout(function(){throw t},0)}function ce(){var t=l.MessageChannel;if(void 0===t&&"undefined"!=typeof window&&window.postMessage&&window.addEventListener&&!st("Presto")&&(t=function(){var t,e,n=ae(document,"IFRAME");n.style.display="none",t=n,e=new mt(Tt,dt(gt)),ft(t,"HTMLIFrameElement"),t.src=bt(e).toString(),document.documentElement.appendChild(n);var r=n.contentWindow;(n=r.document).open(),n.write(Pt(Lt)),n.close();var i="callImmediate"+Math.random(),o="file:"==r.location.protocol?"*":r.location.protocol+"//"+r.location.host;n=m(function(t){"*"!=o&&t.origin!=o||t.data!=i||this.port1.onmessage()},this),r.addEventListener("message",n,!1),this.port1={},this.port2={postMessage:function(){r.postMessage(i,o)}}}),void 0===t||st("Trident")||st("MSIE"))return function(t){l.setTimeout(t,0)};var e=new t,n={},r=n;return e.port1.onmessage=function(){var t;void 0!==n.next&&(t=(n=n.next).Db,n.Db=null,t())},function(t){r.next={Db:t},r=r.next,e.port2.postMessage(0)}}function he(t,e){ie||function(){{var t;ie=l.Promise&&l.Promise.resolve?(t=l.Promise.resolve(void 0),function(){t.then(pe)}):function(){var t=pe;!v(l.setImmediate)||l.Window&&l.Window.prototype&&!st("Edge")&&l.Window.prototype.setImmediate==l.setImmediate?(re=re||ce())(t):l.setImmediate(t)}}}(),le||(ie(),le=!0),fe.add(t,e)}var le=!1,fe=new x;function pe(){for(var t,e,n;n=e=void 0,n=null,(e=fe).a&&(n=e.a,e.a=e.a.next,e.a||(e.b=null),n.next=null),t=n;){try{t.a.call(t.b)}catch(t){ue(t)}D(L,t)}le=!1}function de(t,e){if(this.a=ve,this.i=void 0,this.f=this.b=this.c=null,this.g=this.h=!1,t!=s)try{var n=this;t.call(e,function(t){Ne(n,ye,t)},function(t){if(!(t instanceof xe))try{if(t instanceof Error)throw t;throw Error("Promise rejected.")}catch(t){}Ne(n,ge,t)})}catch(t){Ne(this,ge,t)}}var ve=0,ye=2,ge=3;function me(){this.next=this.f=this.b=this.g=this.a=null,this.c=!1}me.prototype.reset=function(){this.f=this.b=this.g=this.a=null,this.c=!1};var be=new P(function(){return new me},function(t){t.reset()});function _e(t,e,n){var r=be.get();return r.g=t,r.b=e,r.f=n,r}function we(t){if(t instanceof de)return t;var e=new de(s);return Ne(e,ye,t),e}function Ee(n){return new de(function(t,e){e(n)})}function Ie(t,e,n){Ae(t,e,n,null)||he(b(e,t))}function Te(n){return new de(function(r){var i=n.length,o=[];if(i)for(var t=function(t,e,n){i--,o[t]=e?{Mb:!0,value:n}:{Mb:!1,reason:n},0==i&&r(o)},e=0;e<n.length;e++)Ie(n[e],b(t,e,!0),b(t,e,!1));else r(o)})}function Se(t,e){t.b||t.a!=ye&&t.a!=ge||ke(t),t.f?t.f.next=e:t.b=e,t.f=e}function Ce(t,i,o,s){var e=_e(null,null,null);return e.a=new de(function(n,r){e.g=i?function(t){try{var e=i.call(s,t);n(e)}catch(t){r(t)}}:n,e.b=o?function(t){try{var e=o.call(s,t);void 0===e&&t instanceof xe?r(t):n(e)}catch(t){r(t)}}:r}),Se(e.a.c=t,e),e.a}function Ne(t,e,n){var r,i;t.a==ve&&(t===n&&(e=ge,n=new TypeError("Promise cannot resolve to itself")),t.a=1,Ae(n,t.Yc,t.Zc,t)||(t.i=n,t.a=e,t.c=null,ke(t),e!=ge||n instanceof xe||(i=n,(r=t).g=!0,he(function(){r.g&&De.call(null,i)}))))}function Ae(t,e,n,r){if(t instanceof de)return Se(t,_e(e||s,n||null,r)),1;if(A(t))return t.then(e,n,r),1;if(y(t))try{var i=t.then;if(v(i))return function(t,e,n,r,i){function o(t){s||(s=!0,r.call(i,t))}var s=!1;try{e.call(t,function(t){s||(s=!0,n.call(i,t))},o)}catch(t){o(t)}}(t,i,e,n,r),1}catch(t){return n.call(r,t),1}}function ke(t){t.h||(t.h=!0,he(t.ec,t))}function Oe(t){var e=null;return t.b&&(e=t.b,t.b=e.next,e.next=null),t.b||(t.f=null),e}function Re(t,e,n,r){if(n==ge&&e.b&&!e.c)for(;t&&t.g;t=t.c)t.g=!1;if(e.a)e.a.c=null,Pe(e,n,r);else try{e.c?e.g.call(e.f):Pe(e,n,r)}catch(t){De.call(null,t)}D(be,e)}function Pe(t,e,n){e==ye?t.g.call(t.f,n):t.b&&t.b.call(t.f,n)}de.prototype.then=function(t,e,n){return Ce(this,v(t)?t:null,v(e)?e:null,n)},de.prototype.$goog_Thenable=!0,(t=de.prototype).ma=function(t,e){return(t=_e(t,t,e)).c=!0,Se(this,t),this},t.o=function(t,e){return Ce(this,null,t,e)},t.cancel=function(t){var e;this.a==ve&&(e=new xe(t),he(function(){!function t(e,n){if(e.a==ve)if(e.c){var r=e.c;if(r.b){for(var i=0,o=null,s=null,a=r.b;a&&(a.c||(i++,a.a==e&&(o=a),!(o&&1<i)));a=a.next)o||(s=a);o&&(r.a==ve&&1==i?t(r,n):(s?((i=s).next==r.f&&(r.f=i),i.next=i.next.next):Oe(r),Re(r,o,ge,n)))}e.c=null}else Ne(e,ge,n)}(this,e)},this))},t.Yc=function(t){this.a=ve,Ne(this,ye,t)},t.Zc=function(t){this.a=ve,Ne(this,ge,t)},t.ec=function(){for(var t;t=Oe(this);)Re(this,t,this.a,this.i);this.h=!1};var De=ue;function xe(t){k.call(this,t)}function Le(){this.wa=this.wa,this.na=this.na}e(xe,k);var Me=0;function Fe(t){var e;t.wa||(t.wa=!0,t.Ba(),0==Me)||(e=t,Object.prototype.hasOwnProperty.call(e,r)&&e[r]||(e[r]=++i))}Le.prototype.wa=!(xe.prototype.name="cancel"),Le.prototype.Ba=function(){if(this.na)for(;this.na.length;)this.na.shift()()};var Ue=Object.freeze||function(t){return t},je=!Bt||9<=Number($t),Ve=Bt&&!Zt("9"),qe=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{l.addEventListener("test",s,e),l.removeEventListener("test",s,e)}catch(t){}return t}();function Be(t,e){this.type=t,this.b=this.target=e,this.defaultPrevented=!1}function We(t,e){if(Be.call(this,t?t.type:""),this.relatedTarget=this.b=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.a=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.b=e,e=t.relatedTarget){if(Ht){t:{try{Ut(e.nodeName);var i=!0;break t}catch(t){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:Ge[t.pointerType]||"",(this.a=t).defaultPrevented&&this.preventDefault()}}Be.prototype.preventDefault=function(){this.defaultPrevented=!0},e(We,Be);var Ge=Ue({2:"touch",3:"pen",4:"mouse"});We.prototype.preventDefault=function(){We.Za.preventDefault.call(this);var t=this.a;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,Ve)try{(t.ctrlKey||112<=t.keyCode&&t.keyCode<=123)&&(t.keyCode=-1)}catch(t){}},We.prototype.f=function(){return this.a};var He="closure_listenable_"+(1e6*Math.random()|0),Ke=0;function ze(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.Ta=i,this.key=++Ke,this.ua=this.Na=!1}function Qe(t){t.ua=!0,t.listener=null,t.proxy=null,t.src=null,t.Ta=null}function Ye(t){this.src=t,this.a={},this.b=0}function Xe(t,e){var n=e.type;n in t.a&&W(t.a[n],e)&&(Qe(e),0==t.a[n].length&&(delete t.a[n],t.b--))}function $e(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.ua&&o.listener==e&&o.capture==!!n&&o.Ta==r)return i}return-1}Ye.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var s=$e(t,e,r,i);return-1<s?(e=t[s],n||(e.Na=!1)):((e=new ze(e,this.src,o,!!r,i)).Na=n,t.push(e)),e};var Je="closure_lm_"+(1e6*Math.random()|0),Ze={};function tn(t,e,n,r,i){if(r&&r.once)nn(t,e,n,r,i);else if(Array.isArray(e))for(var o=0;o<e.length;o++)tn(t,e[o],n,r,i);else n=fn(n),t&&t[He]?dn(t,e,n,y(r)?!!r.capture:!!r,i):en(t,e,n,!1,r,i)}function en(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s,a,u=y(i)?!!i.capture:!!i,c=hn(t);if(c||(t[Je]=c=new Ye(t)),!(n=c.add(e,n,r,u,o)).proxy)if(s=cn,r=a=je?function(t){return s.call(a.src,a.listener,t)}:function(t){if(!(t=s.call(a.src,a.listener,t)))return t},(n.proxy=r).src=t,r.listener=n,t.addEventListener)qe||(i=u),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(sn(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}}function nn(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)nn(t,e[o],n,r,i);else n=fn(n),t&&t[He]?vn(t,e,n,y(r)?!!r.capture:!!r,i):en(t,e,n,!0,r,i)}function rn(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)rn(t,e[o],n,r,i);else r=y(r)?!!r.capture:!!r,n=fn(n),t&&t[He]?(t=t.u,(e=String(e).toString())in t.a&&(-1<(n=$e(o=t.a[e],n,r,i))&&(Qe(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.a[e],t.b--)))):(t=t&&hn(t))&&(e=t.a[e.toString()],t=-1,e&&(t=$e(e,n,r,i)),(n=-1<t?e[t]:null)&&on(n))}function on(t){var e,n,r;"number"!=typeof t&&t&&!t.ua&&((e=t.src)&&e[He]?Xe(e.u,t):(n=t.type,r=t.proxy,e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(sn(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=hn(e))?(Xe(n,t),0==n.b&&(n.src=null,e[Je]=null)):Qe(t)))}function sn(t){return t in Ze?Ze[t]:Ze[t]="on"+t}function an(t,e,n,r){var i=!0;if((t=hn(t))&&(e=t.a[e.toString()]))for(e=e.concat(),t=0;t<e.length;t++){var o=e[t];o&&o.capture==n&&!o.ua&&(o=un(o,r),i=i&&!1!==o)}return i}function un(t,e){var n=t.listener,r=t.Ta||t.src;return t.Na&&on(t),n.call(r,e)}function cn(t,e){if(t.ua)return!0;if(je)return un(t,new We(e,this));if(!e)t:{e=["window","event"];for(var n=l,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}if(e=new We(r=e,this),n=!0,!(r.keyCode<0||null!=r.returnValue)){t:{var i=!1;if(0==r.keyCode)try{r.keyCode=-1;break t}catch(t){i=!0}!i&&null!=r.returnValue||(r.returnValue=!0)}for(r=[],i=e.b;i;i=i.parentNode)r.push(i);for(t=t.type,i=r.length-1;0<=i;i--){e.b=r[i];var o=an(r[i],t,!0,e),n=n&&o}for(i=0;i<r.length;i++)e.b=r[i],o=an(r[i],t,!1,e),n=n&&o}return n}function hn(t){return(t=t[Je])instanceof Ye?t:null}var ln="__closure_events_fn_"+(1e9*Math.random()>>>0);function fn(e){return v(e)?e:(e[ln]||(e[ln]=function(t){return e.handleEvent(t)}),e[ln])}function pn(){Le.call(this),this.u=new Ye(this),(this.Yb=this).eb=null}function dn(t,e,n,r,i){t.u.add(String(e),n,!1,r,i)}function vn(t,e,n,r,i){t.u.add(String(e),n,!0,r,i)}function yn(t,e,n,r){if(!(e=t.u.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s,a,u=e[o];u&&!u.ua&&u.capture==n&&(s=u.listener,a=u.Ta||u.src,u.Na&&Xe(t.u,u),i=!1!==s.call(a,r)&&i)}return i&&!r.defaultPrevented}function gn(t,e,n){if(v(t))n&&(t=m(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=m(t.handleEvent,t)}return 2147483647<Number(e)?-1:l.setTimeout(t,e||0)}function mn(n){var r=null;return new de(function(t,e){-1==(r=gn(function(){t(void 0)},n))&&e(Error("Failed to schedule timer."))}).o(function(t){throw l.clearTimeout(r),t})}function bn(t){if(t.V&&"function"==typeof t.V)return t.V();if("string"==typeof t)return t.split("");if(d(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}function _n(t){if(t.X&&"function"==typeof t.X)return t.X();if(!t.V||"function"!=typeof t.V){if(d(t)||"string"==typeof t){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}for(var r in e=[],n=0,t)e[n++]=r;return e}}function wn(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof wn)for(n=t.X(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function En(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];In(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){for(var i={},n=e=0;e<t.a.length;)In(i,r=t.a[e])||(i[t.a[n++]=r]=1),e++;t.a.length=n}}function In(t,e){return Object.prototype.hasOwnProperty.call(t,e)}e(pn,Le),pn.prototype[He]=!0,pn.prototype.addEventListener=function(t,e,n,r){tn(this,t,e,n,r)},pn.prototype.removeEventListener=function(t,e,n,r){rn(this,t,e,n,r)},pn.prototype.dispatchEvent=function(t){var e,n=this.eb;if(n)for(e=[];n;n=n.eb)e.push(n);n=this.Yb;var r=t.type||t;if("string"==typeof t?t=new Be(t,n):t instanceof Be?t.target=t.target||n:(s=t,lt(t=new Be(r,n),s)),s=!0,e)for(var i=e.length-1;0<=i;i--)var o=t.b=e[i],s=yn(o,r,!0,t)&&s;if(s=yn(o=t.b=n,r,!0,t)&&s,s=yn(o,r,!1,t)&&s,e)for(i=0;i<e.length;i++)s=yn(o=t.b=e[i],r,!1,t)&&s;return s},pn.prototype.Ba=function(){if(pn.Za.Ba.call(this),this.u){var t,e=this.u;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)Qe(n[r]);delete e.a[t],e.b--}}this.eb=null},(t=wn.prototype).V=function(){En(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},t.X=function(){return En(this),this.a.concat()},t.clear=function(){this.b={},this.c=this.a.length=0},t.get=function(t,e){return In(this.b,t)?this.b[t]:e},t.set=function(t,e){In(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},t.forEach=function(t,e){for(var n=this.X(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var Tn=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/\\#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Sn(t,e){var n;this.b=this.i=this.f="",this.l=null,this.g=this.c="",this.h=!1,t instanceof Sn?(this.h=void 0!==e?e:t.h,Cn(this,t.f),this.i=t.i,this.b=t.b,Nn(this,t.l),this.c=t.c,An(this,zn(t.a)),this.g=t.g):t&&(n=String(t).match(Tn))?(this.h=!!e,Cn(this,n[1]||"",!0),this.i=Dn(n[2]||""),this.b=Dn(n[3]||"",!0),Nn(this,n[4]),this.c=Dn(n[5]||"",!0),An(this,n[6]||"",!0),this.g=Dn(n[7]||"")):(this.h=!!e,this.a=new qn(null,this.h))}function Cn(t,e,n){t.f=n?Dn(e,!0):e,t.f&&(t.f=t.f.replace(/:$/,""))}function Nn(t,e){if(e){if(e=Number(e),isNaN(e)||e<0)throw Error("Bad port number "+e);t.l=e}else t.l=null}function An(t,e,n){var r,i;e instanceof qn?(t.a=e,r=t.a,(i=t.h)&&!r.f&&(Bn(r),r.c=null,r.a.forEach(function(t,e){var n=e.toLowerCase();e!=n&&(Gn(this,e),Kn(this,n,t))},r)),r.f=i):(n||(e=xn(e,jn)),t.a=new qn(e,t.h))}function kn(t,e,n){t.a.set(e,n)}function On(t,e){return t.a.get(e)}function Rn(t){return t instanceof Sn?new Sn(t):new Sn(t,void 0)}function Pn(t,e){var n=new Sn(null,void 0);return Cn(n,"https"),t&&(n.b=t),e&&(n.c=e),n}function Dn(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function xn(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,Ln),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function Ln(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}Sn.prototype.toString=function(){var t=[],e=this.f;e&&t.push(xn(e,Mn,!0),":");var n=this.b;return!n&&"file"!=e||(t.push("//"),(e=this.i)&&t.push(xn(e,Mn,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.l)&&t.push(":",String(n))),(n=this.c)&&(this.b&&"/"!=n.charAt(0)&&t.push("/"),t.push(xn(n,"/"==n.charAt(0)?Un:Fn,!0))),(n=this.a.toString())&&t.push("?",n),(n=this.g)&&t.push("#",xn(n,Vn)),t.join("")},Sn.prototype.resolve=function(t){var e=new Sn(this),n=!!t.f;n?Cn(e,t.f):n=!!t.i,n?e.i=t.i:n=!!t.b,n?e.b=t.b:n=null!=t.l;var r,i=t.c;if(n)Nn(e,t.l);else if(n=!!t.c){if("/"!=i.charAt(0)&&(this.b&&!this.c?i="/"+i:-1!=(r=e.c.lastIndexOf("/"))&&(i=e.c.substr(0,r+1)+i)),".."==(r=i)||"."==r)i="";else if(nt(r,"./")||nt(r,"/.")){i=0==r.lastIndexOf("/",0),r=r.split("/");for(var o=[],s=0;s<r.length;){var a=r[s++];"."==a?i&&s==r.length&&o.push(""):".."==a?((1<o.length||1==o.length&&""!=o[0])&&o.pop(),i&&s==r.length&&o.push("")):(o.push(a),i=!0)}i=o.join("/")}else i=r}return n?e.c=i:n=""!==t.a.toString(),n?An(e,zn(t.a)):n=!!t.g,n&&(e.g=t.g),e};var Mn=/[#\/\?@]/g,Fn=/[#\?:]/g,Un=/[#\?]/g,jn=/[#\?@]/g,Vn=/#/g;function qn(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function Bn(n){n.a||(n.a=new wn,n.b=0,n.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r,i=t[n].indexOf("="),o=null;0<=i?(r=t[n].substring(0,i),o=t[n].substring(i+1)):r=t[n],e(r,o?decodeURIComponent(o.replace(/\+/g," ")):"")}}}(n.c,function(t,e){n.add(decodeURIComponent(t.replace(/\+/g," ")),e)}))}function Wn(t){var e=_n(t);if(void 0===e)throw Error("Keys are undefined");var n=new qn(null,void 0);t=bn(t);for(var r=0;r<e.length;r++){var i=e[r],o=t[r];Array.isArray(o)?Kn(n,i,o):n.add(i,o)}return n}function Gn(t,e){Bn(t),e=Qn(t,e),In(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,In((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&En(t)))}function Hn(t,e){return Bn(t),e=Qn(t,e),In(t.a.b,e)}function Kn(t,e,n){Gn(t,e),0<n.length&&(t.c=null,t.a.set(Qn(t,e),K(n)),t.b+=n.length)}function zn(t){var e=new qn;return e.c=t.c,t.a&&(e.a=new wn(t.a),e.b=t.b),e}function Qn(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}function Yn(t){var e=[];return function t(e,n,r){if(null==n)r.push("null");else{if("object"==typeof n){if(Array.isArray(n)){var i=n;n=i.length,r.push("[");for(var o="",s=0;s<n;s++)r.push(o),t(e,i[s],r),o=",";return void r.push("]")}if(!(n instanceof String||n instanceof Number||n instanceof Boolean)){for(i in r.push("{"),o="",n)Object.prototype.hasOwnProperty.call(n,i)&&("function"!=typeof(s=n[i])&&(r.push(o),Zn(i,r),r.push(":"),t(e,s,r),o=","));return void r.push("}")}n=n.valueOf()}switch(typeof n){case"string":Zn(n,r);break;case"number":r.push(isFinite(n)&&!isNaN(n)?String(n):"null");break;case"boolean":r.push(String(n));break;case"function":r.push("null");break;default:throw Error("Unknown type: "+typeof n)}}}(new Xn,t,e),e.join("")}function Xn(){}(t=qn.prototype).add=function(t,e){Bn(this),this.c=null,t=Qn(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},t.clear=function(){this.a=this.c=null,this.b=0},t.forEach=function(n,r){Bn(this),this.a.forEach(function(t,e){U(t,function(t){n.call(r,t,e,this)},this)},this)},t.X=function(){Bn(this);for(var t=this.a.V(),e=this.a.X(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},t.V=function(t){Bn(this);var e=[];if("string"==typeof t)Hn(this,t)&&(e=H(e,this.a.get(Qn(this,t))));else{t=this.a.V();for(var n=0;n<t.length;n++)e=H(e,t[n])}return e},t.set=function(t,e){return Bn(this),this.c=null,Hn(this,t=Qn(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},t.get=function(t,e){return t&&0<(t=this.V(t)).length?String(t[0]):e},t.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.X(),n=0;n<e.length;n++)for(var r=e[n],i=encodeURIComponent(String(r)),r=this.V(r),o=0;o<r.length;o++){var s=i;""!==r[o]&&(s+="="+encodeURIComponent(String(r[o]))),t.push(s)}return this.c=t.join("&")};var $n={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\u000b"},Jn=/\uffff/.test("ï¿¿")?/[\\"\x00-\x1f\x7f-\uffff]/g:/[\\"\x00-\x1f\x7f-\xff]/g;function Zn(t,e){e.push('"',t.replace(Jn,function(t){var e=$n[t];return e||(e="\\u"+(65536|t.charCodeAt(0)).toString(16).substr(1),$n[t]=e),e}),'"')}function tr(){var t=br();return Bt&&$t&&11==$t||/Edge\/\d+/.test(t)}function er(){return l.window&&l.window.location.href||self&&self.location&&self.location.href||""}function nr(t,e){e=e||l.window;var n="about:blank";t&&(n=Ct(At(t))),e.location.href=n}function rr(t){return!!((t=(t||br()).toLowerCase()).match(/android/)||t.match(/webos/)||t.match(/iphone|ipad|ipod/)||t.match(/blackberry/)||t.match(/windows phone/)||t.match(/iemobile/))}function ir(t){t=t||l.window;try{t.close()}catch(t){}}function or(t,e,n){var r=Math.floor(1e9*Math.random()).toString();e=e||500,n=n||600;var i=(window.screen.availHeight-n)/2,o=(window.screen.availWidth-e)/2;for(s in e={width:e,height:n,top:0<i?i:0,left:0<o?o:0,location:!0,resizable:!0,statusbar:!0,toolbar:!1},n=br().toLowerCase(),r&&(e.target=r,nt(n,"crios/")&&(e.target="_blank")),yr(br())==dr&&(t=t||"http://localhost",e.scrollbars=!0),n=t||"",(t=e)||(t={}),r=window,e=n instanceof St?n:At(void 0!==n.href?n.href:String(n)),n=t.target||n.target,i=[],t)switch(s){case"width":case"height":case"top":case"left":i.push(s+"="+t[s]);break;case"target":case"noopener":case"noreferrer":break;default:i.push(s+"="+(t[s]?1:0))}var s=i.join(",");if((st("iPhone")&&!st("iPod")&&!st("iPad")||st("iPad")||st("iPod"))&&r.navigator&&r.navigator.standalone&&n&&"_self"!=n?(ft(s=ae(document,"A"),"HTMLAnchorElement"),e instanceof St||e instanceof St||(e="object"==typeof e&&e.ra?e.qa():String(e),Nt.test(e)||(e="about:invalid#zClosurez"),e=new St(Ot,e)),s.href=Ct(e),s.setAttribute("target",n),t.noreferrer&&s.setAttribute("rel","noreferrer"),(t=document.createEvent("MouseEvent")).initMouseEvent("click",!0,!0,r,1),s.dispatchEvent(t),s={}):t.noreferrer?(s=r.open("",n,s),t=Ct(e),s&&(Gt&&nt(t,";")&&(t="'"+t.replace(/'/g,"%27")+"'"),s.opener=null,t=xt('<meta name="referrer" content="no-referrer"><meta http-equiv="refresh" content="0; url='+Ft(t)+'">'),r=s.document)&&(r.write(Pt(t)),r.close())):(s=r.open(Ct(e),n,s))&&t.noopener&&(s.opener=null),s)try{s.focus()}catch(t){}return s}var sr=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,ar=/^[^@]+@[^@]+$/;function ur(){var e=null;return new de(function(t){"complete"==l.document.readyState?t():(e=function(){t()},nn(window,"load",e))}).o(function(t){throw rn(window,"load",e),t})}function cr(t){return t=t||br(),!("file:"!==Tr()&&"ionic:"!==Tr()||!t.toLowerCase().match(/iphone|ipad|ipod|android/))}function hr(){var t=l.window;try{return t&&t!=t.top}catch(t){return}}function lr(){return void 0!==l.WorkerGlobalScope&&"function"==typeof l.importScripts}function fr(){return Hl.INTERNAL.hasOwnProperty("reactNative")?"ReactNative":Hl.INTERNAL.hasOwnProperty("node")?"Node":lr()?"Worker":"Browser"}function pr(){var t=fr();return"ReactNative"===t||"Node"===t}var dr="Firefox",vr="Chrome";function yr(t){var e=t.toLowerCase();return nt(e,"opera/")||nt(e,"opr/")||nt(e,"opios/")?"Opera":nt(e,"iemobile")?"IEMobile":nt(e,"msie")||nt(e,"trident/")?"IE":nt(e,"edge/")?"Edge":nt(e,"firefox/")?dr:nt(e,"silk/")?"Silk":nt(e,"blackberry")?"Blackberry":nt(e,"webos")?"Webos":!nt(e,"safari/")||nt(e,"chrome/")||nt(e,"crios/")||nt(e,"android")?!nt(e,"chrome/")&&!nt(e,"crios/")||nt(e,"edge/")?nt(e,"android")?"Android":(t=t.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/))&&2==t.length?t[1]:"Other":vr:"Safari"}var gr={jd:"FirebaseCore-web",ld:"FirebaseUI-web"};function mr(t,e){e=e||[];var n,r=[],i={};for(n in gr)i[gr[n]]=!0;for(n=0;n<e.length;n++)void 0!==i[e[n]]&&(delete i[e[n]],r.push(e[n]));return r.sort(),(e=r).length||(e=["FirebaseCore-web"]),"Browser"===(r=fr())?r=yr(i=br()):"Worker"===r&&(r=yr(i=br())+"-"+r),r+"/JsCore/"+t+"/"+e.join(",")}function br(){return l.navigator&&l.navigator.userAgent||""}function _r(t,e){t=t.split("."),e=e||l;for(var n=0;n<t.length&&"object"==typeof e&&null!=e;n++)e=e[t[n]];return n!=t.length&&(e=void 0),e}function wr(){try{var t=l.localStorage,e=kr();if(t)return t.setItem(e,"1"),t.removeItem(e),!tr()||!!l.indexedDB}catch(t){return lr()&&!!l.indexedDB}return!1}function Er(){return(Ir()||"chrome-extension:"===Tr()||cr())&&!pr()&&wr()&&!lr()}function Ir(){return"http:"===Tr()||"https:"===Tr()}function Tr(){return l.location&&l.location.protocol||null}function Sr(t){return!rr(t=t||br())&&yr(t)!=dr}function Cr(t){return void 0===t?null:Yn(t)}function Nr(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&null!==t[e]&&void 0!==t[e]&&(n[e]=t[e]);return n}function Ar(t){if(null!==t)return JSON.parse(t)}function kr(t){return t||Math.floor(1e9*Math.random()).toString()}function Or(t){return"Safari"!=yr(t=t||br())&&!t.toLowerCase().match(/iphone|ipad|ipod/)}function Rr(){var t=l.___jsl;if(t&&t.H)for(var e in t.H)if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=t.H[e].L.concat(),t.CP)for(var n=0;n<t.CP.length;n++)t.CP[n]=null}function Pr(t,e){if(e<t)throw Error("Short delay should be less than long delay!");this.a=t,this.c=e,t=br(),e=fr(),this.b=rr(t)||"ReactNative"===e}function Dr(){var t=l.document;return!t||void 0===t.visibilityState||"visible"==t.visibilityState}function xr(t){try{var e=new Date(parseInt(t,10));if(!isNaN(e.getTime())&&!/[^0-9]/.test(t))return e.toUTCString()}catch(t){}return null}function Lr(){return _r("fireauth.oauthhelper",l)||_r("fireauth.iframe",l)}Pr.prototype.get=function(){var t=l.navigator;return!t||"boolean"!=typeof t.onLine||!Ir()&&"chrome-extension:"!==Tr()&&void 0===t.connection||t.onLine?this.b?this.c:this.a:Math.min(5e3,this.a)};var Mr,Fr={};function Ur(t){Fr[t]||(Fr[t]=!0,"undefined"!=typeof console&&"function"==typeof console.warn&&console.warn(t))}try{var jr={};Object.defineProperty(jr,"abcd",{configurable:!0,enumerable:!0,value:1}),Object.defineProperty(jr,"abcd",{configurable:!0,enumerable:!0,value:2}),Mr=2==jr.abcd}catch(t){Mr=!1}function Vr(t,e,n){Mr?Object.defineProperty(t,e,{configurable:!0,enumerable:!0,value:n}):t[e]=n}function qr(t,e){if(e)for(var n in e)e.hasOwnProperty(n)&&Vr(t,n,e[n])}function Br(t){var e={};return qr(e,t),e}function Wr(t){var e=t;if("object"==typeof t&&null!=t)for(var n in e="length"in t?[]:{},t)Vr(e,n,Wr(t[n]));return e}function Gr(t){var e=t&&(t[Yr]?"phone":null);if(!(e&&t&&t[Qr]))throw new w("internal-error","Internal assert: invalid MultiFactorInfo object");Vr(this,"uid",t[Qr]),Vr(this,"displayName",t[Kr]||null);var n=null;t[zr]&&(n=new Date(t[zr]).toUTCString()),Vr(this,"enrollmentTime",n),Vr(this,"factorId",e)}function Hr(t){try{var e=new Xr(t)}catch(t){e=null}return e}Gr.prototype.v=function(){return{uid:this.uid,displayName:this.displayName,factorId:this.factorId,enrollmentTime:this.enrollmentTime}};var Kr="displayName",zr="enrolledAt",Qr="mfaEnrollmentId",Yr="phoneInfo";function Xr(t){Gr.call(this,t),Vr(this,"phoneNumber",t[Yr])}function $r(t){var e={},n=t[ei],r=t[ri],i=t[ii];if(t=Hr(t[ni]),!i||i!=Zr&&i!=ti&&!n||i==ti&&!r||i==Jr&&!t)throw Error("Invalid checkActionCode response!");i==ti?(e[si]=n||null,e[ui]=n||null,e[oi]=r):(e[si]=r||null,e[ui]=r||null,e[oi]=n||null),e[ai]=t||null,Vr(this,hi,i),Vr(this,ci,Wr(e))}e(Xr,Gr),Xr.prototype.v=function(){var t=Xr.Za.v.call(this);return t.phoneNumber=this.phoneNumber,t};var Jr="REVERT_SECOND_FACTOR_ADDITION",Zr="EMAIL_SIGNIN",ti="VERIFY_AND_CHANGE_EMAIL",ei="email",ni="mfaInfo",ri="newEmail",ii="requestType",oi="email",si="fromEmail",ai="multiFactorInfo",ui="previousEmail",ci="data",hi="operation";function li(t){var e=On(t=Rn(t),fi)||null,n=On(t,pi)||null,r=(r=On(t,yi)||null)&&mi[r]||null;if(!e||!n||!r)throw new w("argument-error",fi+", "+pi+"and "+yi+" are required in a valid action code URL.");qr(this,{apiKey:e,operation:r,code:n,continueUrl:On(t,di)||null,languageCode:On(t,vi)||null,tenantId:On(t,gi)||null})}var fi="apiKey",pi="oobCode",di="continueUrl",vi="languageCode",yi="mode",gi="tenantId",mi={recoverEmail:"RECOVER_EMAIL",resetPassword:"PASSWORD_RESET",revertSecondFactorAddition:Jr,signIn:Zr,verifyAndChangeEmail:ti,verifyEmail:"VERIFY_EMAIL"};function bi(t){try{return new li(t)}catch(t){return null}}function _i(t){var e=t[Si];if(void 0===e)throw new w("missing-continue-uri");if("string"!=typeof e||"string"==typeof e&&!e.length)throw new w("invalid-continue-uri");if(this.h=e,this.b=this.a=null,this.g=!1,(r=t[wi])&&"object"==typeof r){e=r[Ai];var n=r[Ci],r=r[Ni];if("string"==typeof e&&e.length){if(this.a=e,void 0!==n&&"boolean"!=typeof n)throw new w("argument-error",Ci+" property must be a boolean when specified.");if(this.g=!!n,void 0!==r&&("string"!=typeof r||"string"==typeof r&&!r.length))throw new w("argument-error",Ni+" property must be a non empty string when specified.");this.b=r||null}else{if(void 0!==e)throw new w("argument-error",Ai+" property must be a non empty string when specified.");if(void 0!==n||void 0!==r)throw new w("missing-android-pkg-name")}}else if(void 0!==r)throw new w("argument-error",wi+" property must be a non null object when specified.");if(this.f=null,(e=t[Ti])&&"object"==typeof e){if("string"==typeof(e=e[ki])&&e.length)this.f=e;else if(void 0!==e)throw new w("argument-error",ki+" property must be a non empty string when specified.")}else if(void 0!==e)throw new w("argument-error",Ti+" property must be a non null object when specified.");if(void 0!==(e=t[Ii])&&"boolean"!=typeof e)throw new w("argument-error",Ii+" property must be a boolean when specified.");if(this.c=!!e,void 0!==(t=t[Ei])&&("string"!=typeof t||"string"==typeof t&&!t.length))throw new w("argument-error",Ei+" property must be a non empty string when specified.");this.i=t||null}var wi="android",Ei="dynamicLinkDomain",Ii="handleCodeInApp",Ti="iOS",Si="url",Ci="installApp",Ni="minimumVersion",Ai="packageName",ki="bundleId";function Oi(t){var e,n={};for(e in n.continueUrl=t.h,n.canHandleCodeInApp=t.c,(n.androidPackageName=t.a)&&(n.androidMinimumVersion=t.b,n.androidInstallApp=t.g),n.iOSBundleId=t.f,n.dynamicLinkDomain=t.i,n)null===n[e]&&delete n[e];return n}var Ri=null;function Pi(t){var e="";return function(r,t){function e(t){for(;i<r.length;){var e=r.charAt(i++),n=Ri[e];if(null!=n)return n;if(!/^[\s\xa0]*$/.test(e))throw Error("Unknown base64 encoding at char: "+e)}return t}!function(){if(!Ri){Ri={};for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),e=["+/=","+/","-_=","-_.","-_"],n=0;n<5;n++)for(var r=t.concat(e[n].split("")),i=0;i<r.length;i++){var o=r[i];void 0===Ri[o]&&(Ri[o]=i)}}}();for(var i=0;;){var n=e(-1),o=e(0),s=e(64),a=e(64);if(64===a&&-1===n)break;t(n<<2|o>>4),64!=s&&(t(o<<4&240|s>>2),64!=a&&t(s<<6&192|a))}}(t,function(t){e+=String.fromCharCode(t)}),e}function Di(t){var e=Li(t);if(!(e&&e.sub&&e.iss&&e.aud&&e.exp))throw Error("Invalid JWT");this.g=t,this.c=e.exp,this.h=e.sub,this.a=e.provider_id||e.firebase&&e.firebase.sign_in_provider||null,this.f=e.firebase&&e.firebase.tenant||null,this.b=!!e.is_anonymous||"anonymous"==this.a}function xi(t){try{return new Di(t)}catch(t){return null}}function Li(t){if(!t)return null;if(3!=(t=t.split(".")).length)return null;for(var e=(4-(t=t[1]).length%4)%4,n=0;n<e;n++)t+=".";try{return JSON.parse(Pi(t))}catch(t){}return null}Di.prototype.S=function(){return this.f},Di.prototype.i=function(){return this.b},Di.prototype.toString=function(){return this.g};var Mi="oauth_consumer_key oauth_nonce oauth_signature oauth_signature_method oauth_timestamp oauth_token oauth_version".split(" "),Fi=["client_id","response_type","scope","redirect_uri","state"],Ui={kd:{Ha:"locale",ta:700,sa:600,ea:"facebook.com",Va:Fi},md:{Ha:null,ta:500,sa:750,ea:"github.com",Va:Fi},nd:{Ha:"hl",ta:515,sa:680,ea:"google.com",Va:Fi},td:{Ha:"lang",ta:485,sa:705,ea:"twitter.com",Va:Mi},gd:{Ha:"locale",ta:640,sa:600,ea:"apple.com",Va:[]}};function ji(t){for(var e in Ui)if(Ui[e].ea==t)return Ui[e];return null}function Vi(t){var e={};e["facebook.com"]=Hi,e["google.com"]=zi,e["github.com"]=Ki,e["twitter.com"]=Qi;var n=t&&t[Bi];try{if(n)return e[n]?new e[n](t):new Gi(t);if(void 0!==t[qi])return new Wi(t)}catch(t){}return null}var qi="idToken",Bi="providerId";function Wi(t){var e,n=t[Bi];if(n||!t[qi]||(e=xi(t[qi]))&&e.a&&(n=e.a),!n)throw Error("Invalid additional user info!");"anonymous"!=n&&"custom"!=n||(n=null),e=!1,void 0!==t.isNewUser?e=!!t.isNewUser:"identitytoolkit#SignupNewUserResponse"===t.kind&&(e=!0),Vr(this,"providerId",n),Vr(this,"isNewUser",e)}function Gi(t){Wi.call(this,t),Vr(this,"profile",Wr((t=Ar(t.rawUserInfo||"{}"))||{}))}function Hi(t){if(Gi.call(this,t),"facebook.com"!=this.providerId)throw Error("Invalid provider ID!")}function Ki(t){if(Gi.call(this,t),"github.com"!=this.providerId)throw Error("Invalid provider ID!");Vr(this,"username",this.profile&&this.profile.login||null)}function zi(t){if(Gi.call(this,t),"google.com"!=this.providerId)throw Error("Invalid provider ID!")}function Qi(t){if(Gi.call(this,t),"twitter.com"!=this.providerId)throw Error("Invalid provider ID!");Vr(this,"username",t.screenName||null)}function Yi(t){var e=On(r=Rn(t),"link"),n=On(Rn(e),"link"),r=On(r,"deep_link_id");return On(Rn(r),"link")||r||n||e||t}function Xi(t,e){if(!t&&!e)throw new w("internal-error","Internal assert: no raw session string available");if(t&&e)throw new w("internal-error","Internal assert: unable to determine the session type");this.a=t||null,this.b=e||null,this.type=this.a?$i:Ji}e(Gi,Wi),e(Hi,Gi),e(Ki,Gi),e(zi,Gi),e(Qi,Gi);var $i="enroll",Ji="signin";function Zi(){}function to(t,n){return t.then(function(t){if(t[Ws]){var e=xi(t[Ws]);if(!e||n!=e.h)throw new w("user-mismatch");return t}throw new w("user-mismatch")}).o(function(t){throw t&&t.code&&t.code==T+"user-not-found"?new w("user-mismatch"):t})}function eo(t,e){if(!e)throw new w("internal-error","failed to construct a credential");this.a=e,Vr(this,"providerId",t),Vr(this,"signInMethod",t)}function no(t){return{pendingToken:t.a,requestUri:"http://localhost"}}function ro(t){if(t&&t.providerId&&t.signInMethod&&0==t.providerId.indexOf("saml.")&&t.pendingToken)try{return new eo(t.providerId,t.pendingToken)}catch(t){}return null}function io(t,e,n){if(this.a=null,e.idToken||e.accessToken)e.idToken&&Vr(this,"idToken",e.idToken),e.accessToken&&Vr(this,"accessToken",e.accessToken),e.nonce&&!e.pendingToken&&Vr(this,"nonce",e.nonce),e.pendingToken&&(this.a=e.pendingToken);else{if(!e.oauthToken||!e.oauthTokenSecret)throw new w("internal-error","failed to construct a credential");Vr(this,"accessToken",e.oauthToken),Vr(this,"secret",e.oauthTokenSecret)}Vr(this,"providerId",t),Vr(this,"signInMethod",n)}function oo(t){var e={};return t.idToken&&(e.id_token=t.idToken),t.accessToken&&(e.access_token=t.accessToken),t.secret&&(e.oauth_token_secret=t.secret),e.providerId=t.providerId,t.nonce&&!t.a&&(e.nonce=t.nonce),e={postBody:Wn(e).toString(),requestUri:"http://localhost"},t.a&&(delete e.postBody,e.pendingToken=t.a),e}function so(t){if(t&&t.providerId&&t.signInMethod){var e={idToken:t.oauthIdToken,accessToken:t.oauthTokenSecret?null:t.oauthAccessToken,oauthTokenSecret:t.oauthTokenSecret,oauthToken:t.oauthTokenSecret&&t.oauthAccessToken,nonce:t.nonce,pendingToken:t.pendingToken};try{return new io(t.providerId,e,t.signInMethod)}catch(t){}}return null}function ao(t,e){this.Oc=e||[],qr(this,{providerId:t,isOAuthProvider:!0}),this.Fb={},this.lb=(ji(t)||{}).Ha||null,this.kb=null}function uo(t){if("string"!=typeof t||0!=t.indexOf("saml."))throw new w("argument-error",'SAML provider IDs must be prefixed with "saml."');ao.call(this,t,[])}function co(t){ao.call(this,t,Fi),this.a=[]}function ho(){co.call(this,"facebook.com")}function lo(t){if(!t)throw new w("argument-error","credential failed: expected 1 argument (the OAuth access token).");var e=t;return y(t)&&(e=t.accessToken),(new ho).credential({accessToken:e})}function fo(){co.call(this,"github.com")}function po(t){if(!t)throw new w("argument-error","credential failed: expected 1 argument (the OAuth access token).");var e=t;return y(t)&&(e=t.accessToken),(new fo).credential({accessToken:e})}function vo(){co.call(this,"google.com"),this.Aa("profile")}function yo(t,e){var n=t;return y(t)&&(n=t.idToken,e=t.accessToken),(new vo).credential({idToken:n,accessToken:e})}function go(){ao.call(this,"twitter.com",Mi)}function mo(t,e){var n=t;if(y(n)||(n={oauthToken:t,oauthTokenSecret:e}),!n.oauthToken||!n.oauthTokenSecret)throw new w("argument-error","credential failed: expected 2 arguments (the OAuth access token and secret).");return new io("twitter.com",n,"twitter.com")}function bo(t,e,n){this.a=t,this.f=e,Vr(this,"providerId","password"),Vr(this,"signInMethod",n===wo.EMAIL_LINK_SIGN_IN_METHOD?wo.EMAIL_LINK_SIGN_IN_METHOD:wo.EMAIL_PASSWORD_SIGN_IN_METHOD)}function _o(t){return t&&t.email&&t.password?new bo(t.email,t.password,t.signInMethod):null}function wo(){qr(this,{providerId:"password",isOAuthProvider:!1})}function Eo(t,e){if(!(e=Io(e)))throw new w("argument-error","Invalid email link!");return new bo(t,e.code,wo.EMAIL_LINK_SIGN_IN_METHOD)}function Io(t){return(t=bi(t=Yi(t)))&&t.operation===Zr?t:null}function To(t){if(!(t.bb&&t.ab||t.Ja&&t.da))throw new w("internal-error");this.a=t,Vr(this,"providerId","phone"),this.ea="phone",Vr(this,"signInMethod","phone")}function So(e){if(e&&"phone"===e.providerId&&(e.verificationId&&e.verificationCode||e.temporaryProof&&e.phoneNumber)){var n={};return U(["verificationId","verificationCode","temporaryProof","phoneNumber"],function(t){e[t]&&(n[t]=e[t])}),new To(n)}return null}function Co(t){return t.a.Ja&&t.a.da?{temporaryProof:t.a.Ja,phoneNumber:t.a.da}:{sessionInfo:t.a.bb,code:t.a.ab}}function No(t){try{this.a=t||Hl.auth()}catch(t){throw new w("argument-error","Either an instance of firebase.auth.Auth must be passed as an argument to the firebase.auth.PhoneAuthProvider constructor, or the default firebase App instance must be initialized via firebase.initializeApp().")}qr(this,{providerId:"phone",isOAuthProvider:!1})}function Ao(t,e){if(!t)throw new w("missing-verification-id");if(!e)throw new w("missing-verification-code");return new To({bb:t,ab:e})}function ko(t){if(t.temporaryProof&&t.phoneNumber)return new To({Ja:t.temporaryProof,da:t.phoneNumber});var e=t&&t.providerId;if(!e||"password"===e)return null;var n=t&&t.oauthAccessToken,r=t&&t.oauthTokenSecret,i=t&&t.nonce,o=t&&t.oauthIdToken,s=t&&t.pendingToken;try{switch(e){case"google.com":return yo(o,n);case"facebook.com":return lo(n);case"github.com":return po(n);case"twitter.com":return mo(n,r);default:return n||r||o||s?s?0==e.indexOf("saml.")?new eo(e,s):new io(e,{pendingToken:s,idToken:t.oauthIdToken,accessToken:t.oauthAccessToken},e):new co(e).credential({idToken:o,accessToken:n,rawNonce:i}):null}}catch(t){return null}}function Oo(t){if(!t.isOAuthProvider)throw new w("invalid-oauth-provider")}function Ro(t,e,n,r,i,o,s){if(this.c=t,this.b=e||null,this.g=n||null,this.f=r||null,this.i=o||null,this.h=s||null,this.a=i||null,!this.g&&!this.a)throw new w("invalid-auth-event");if(this.g&&this.a)throw new w("invalid-auth-event");if(this.g&&!this.f)throw new w("invalid-auth-event")}function Po(t){return(t=t||{}).type?new Ro(t.type,t.eventId,t.urlResponse,t.sessionId,t.error&&E(t.error),t.postBody,t.tenantId):null}function Do(){this.b=null,this.a=[]}Xi.prototype.Fa=function(){return this.a?we(this.a):we(this.b)},Xi.prototype.v=function(){return this.type==$i?{multiFactorSession:{idToken:this.a}}:{multiFactorSession:{pendingCredential:this.b}}},Zi.prototype.ia=function(){},Zi.prototype.b=function(){},Zi.prototype.c=function(){},Zi.prototype.v=function(){},eo.prototype.ia=function(t){return ca(t,no(this))},eo.prototype.b=function(t,e){var n=no(this);return n.idToken=e,ha(t,n)},eo.prototype.c=function(t,e){return to(la(t,no(this)),e)},eo.prototype.v=function(){return{providerId:this.providerId,signInMethod:this.signInMethod,pendingToken:this.a}},io.prototype.ia=function(t){return ca(t,oo(this))},io.prototype.b=function(t,e){var n=oo(this);return n.idToken=e,ha(t,n)},io.prototype.c=function(t,e){return to(la(t,oo(this)),e)},io.prototype.v=function(){var t={providerId:this.providerId,signInMethod:this.signInMethod};return this.idToken&&(t.oauthIdToken=this.idToken),this.accessToken&&(t.oauthAccessToken=this.accessToken),this.secret&&(t.oauthTokenSecret=this.secret),this.nonce&&(t.nonce=this.nonce),this.a&&(t.pendingToken=this.a),t},ao.prototype.Ia=function(t){return this.Fb=ct(t),this},e(uo,ao),e(co,ao),co.prototype.Aa=function(t){return B(this.a,t)||this.a.push(t),this},co.prototype.Nb=function(){return K(this.a)},co.prototype.credential=function(t,e){var n=y(t)?{idToken:t.idToken||null,accessToken:t.accessToken||null,nonce:t.rawNonce||null}:{idToken:t||null,accessToken:e||null};if(!n.idToken&&!n.accessToken)throw new w("argument-error","credential failed: must provide the ID token and/or the access token.");return new io(this.providerId,n,this.providerId)},e(ho,co),Vr(ho,"PROVIDER_ID","facebook.com"),Vr(ho,"FACEBOOK_SIGN_IN_METHOD","facebook.com"),e(fo,co),Vr(fo,"PROVIDER_ID","github.com"),Vr(fo,"GITHUB_SIGN_IN_METHOD","github.com"),e(vo,co),Vr(vo,"PROVIDER_ID","google.com"),Vr(vo,"GOOGLE_SIGN_IN_METHOD","google.com"),e(go,ao),Vr(go,"PROVIDER_ID","twitter.com"),Vr(go,"TWITTER_SIGN_IN_METHOD","twitter.com"),bo.prototype.ia=function(t){return this.signInMethod==wo.EMAIL_LINK_SIGN_IN_METHOD?Ka(t,ba,{email:this.a,oobCode:this.f}):Ka(t,qa,{email:this.a,password:this.f})},bo.prototype.b=function(t,e){return this.signInMethod==wo.EMAIL_LINK_SIGN_IN_METHOD?Ka(t,_a,{idToken:e,email:this.a,oobCode:this.f}):Ka(t,Da,{idToken:e,email:this.a,password:this.f})},bo.prototype.c=function(t,e){return to(this.ia(t),e)},bo.prototype.v=function(){return{email:this.a,password:this.f,signInMethod:this.signInMethod}},qr(wo,{PROVIDER_ID:"password"}),qr(wo,{EMAIL_LINK_SIGN_IN_METHOD:"emailLink"}),qr(wo,{EMAIL_PASSWORD_SIGN_IN_METHOD:"password"}),To.prototype.ia=function(t){return t.cb(Co(this))},To.prototype.b=function(t,e){var n=Co(this);return n.idToken=e,Ka(t,Wa,n)},To.prototype.c=function(t,e){var n=Co(this);return n.operation="REAUTH",to(t=Ka(t,Ga,n),e)},To.prototype.v=function(){var t={providerId:"phone"};return this.a.bb&&(t.verificationId=this.a.bb),this.a.ab&&(t.verificationCode=this.a.ab),this.a.Ja&&(t.temporaryProof=this.a.Ja),this.a.da&&(t.phoneNumber=this.a.da),t},No.prototype.cb=function(i,o){var s=this.a.b;return we(o.verify()).then(function(r){if("string"!=typeof r)throw new w("argument-error","An implementation of firebase.auth.ApplicationVerifier.prototype.verify() must return a firebase.Promise that resolves with a string.");if("recaptcha"!==o.type)throw new w("argument-error",'Only firebase.auth.ApplicationVerifiers with type="recaptcha" are currently supported.');var t=y(i)?i.session:null,e=y(i)?i.phoneNumber:i,n=t&&t.type==$i?t.Fa().then(function(t){return Ka(s,La,{idToken:t,phoneEnrollmentInfo:{phoneNumber:e,recaptchaToken:r}}).then(function(t){return t.phoneSessionInfo.sessionInfo})}):t&&t.type==Ji?t.Fa().then(function(t){return e=s,n={mfaPendingCredential:t,mfaEnrollmentId:i.multiFactorHint&&i.multiFactorHint.uid||i.multiFactorUid,phoneSignInInfo:{recaptchaToken:r}},Ka(e,Ma,n).then(function(t){return t.phoneResponseInfo.sessionInfo});var e,n}):Ka(s,Ra,{phoneNumber:e,recaptchaToken:r});return n.then(function(t){return"function"==typeof o.reset&&o.reset(),t},function(t){throw"function"==typeof o.reset&&o.reset(),t})})},qr(No,{PROVIDER_ID:"phone"}),qr(No,{PHONE_SIGN_IN_METHOD:"phone"}),Ro.prototype.getUid=function(){var t=[];return t.push(this.c),this.b&&t.push(this.b),this.f&&t.push(this.f),this.h&&t.push(this.h),t.join("-")},Ro.prototype.S=function(){return this.h},Ro.prototype.v=function(){return{type:this.c,eventId:this.b,urlResponse:this.g,sessionId:this.f,postBody:this.i,tenantId:this.h,error:this.a&&this.a.v()}};var xo,Lo=null;function Mo(t){var e="unauthorized-domain",n=void 0,r=Rn(t);t=r.b,"chrome-extension"==(r=r.f)?n=Mt("This chrome extension ID (chrome-extension://%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",t):"http"==r||"https"==r?n=Mt("This domain (%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",t):e="operation-not-supported-in-this-environment",w.call(this,e,n)}function Fo(t,e,n){w.call(this,t,n),(t=e||{}).Gb&&Vr(this,"email",t.Gb),t.da&&Vr(this,"phoneNumber",t.da),t.credential&&Vr(this,"credential",t.credential),t.Wb&&Vr(this,"tenantId",t.Wb)}function Uo(t){if(t.code){var e=t.code||"";0==e.indexOf(T)&&(e=e.substring(T.length));var n={credential:ko(t),Wb:t.tenantId};if(t.email)n.Gb=t.email;else if(t.phoneNumber)n.da=t.phoneNumber;else if(!n.credential)return new w(e,t.message||void 0);return new Fo(e,n,t.message)}return null}function jo(){}function Vo(t){return t.c||(t.c=t.b())}function qo(){}function Bo(t){if(t.f||"undefined"!=typeof XMLHttpRequest||"undefined"==typeof ActiveXObject)return t.f;for(var e=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],n=0;n<e.length;n++){var r=e[n];try{return new ActiveXObject(r),t.f=r}catch(t){}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed")}function Wo(){}function Go(){this.a=new XDomainRequest,this.readyState=0,this.onreadystatechange=null,this.responseType=this.responseText=this.response="",this.status=-1,this.statusText="",this.a.onload=m(this.oc,this),this.a.onerror=m(this.Pb,this),this.a.onprogress=m(this.pc,this),this.a.ontimeout=m(this.tc,this)}function Ho(t,e){t.readyState=e,t.onreadystatechange&&t.onreadystatechange()}function Ko(t,e,n){this.reset(t,e,n,void 0,void 0)}function zo(t){this.f=t,this.b=this.c=this.a=null}function Qo(t,e){this.name=t,this.value=e}e(Mo,w),e(Fo,w),Fo.prototype.v=function(){var t={code:this.code,message:this.message};this.email&&(t.email=this.email),this.phoneNumber&&(t.phoneNumber=this.phoneNumber),this.tenantId&&(t.tenantId=this.tenantId);var e=this.credential&&this.credential.v();return e&&lt(t,e),t},Fo.prototype.toJSON=function(){return this.v()},jo.prototype.c=null,e(qo,jo),qo.prototype.a=function(){var t=Bo(this);return t?new ActiveXObject(t):new XMLHttpRequest},qo.prototype.b=function(){var t={};return Bo(this)&&(t[0]=!0,t[1]=!0),t},xo=new qo,e(Wo,jo),Wo.prototype.a=function(){var t=new XMLHttpRequest;if("withCredentials"in t)return t;if("undefined"!=typeof XDomainRequest)return new Go;throw Error("Unsupported browser")},Wo.prototype.b=function(){return{}},(t=Go.prototype).open=function(t,e,n){if(null!=n&&!n)throw Error("Only async requests are supported.");this.a.open(t,e)},t.send=function(t){if(t){if("string"!=typeof t)throw Error("Only string data is supported");this.a.send(t)}else this.a.send()},t.abort=function(){this.a.abort()},t.setRequestHeader=function(){},t.getResponseHeader=function(t){return"content-type"==t.toLowerCase()?this.a.contentType:""},t.oc=function(){this.status=200,this.response=this.responseText=this.a.responseText,Ho(this,4)},t.Pb=function(){this.status=500,this.response=this.responseText="",Ho(this,4)},t.tc=function(){this.Pb()},t.pc=function(){this.status=200,Ho(this,1)},t.getAllResponseHeaders=function(){return"content-type: "+this.a.contentType},Ko.prototype.a=null,Ko.prototype.reset=function(t,e,n,r,i){delete this.a},Qo.prototype.toString=function(){return this.name};var Yo=new Qo("SEVERE",1e3),Xo=new Qo("WARNING",900),$o=new Qo("CONFIG",700),Jo=new Qo("FINE",500);zo.prototype.log=function(t,e,n){if(t.value>=function t(e){return e.c?e.c:e.a?t(e.a):(R("Root logger has no level set."),null)}(this).value)for(v(e)&&(e=e()),t=new Ko(t,String(e),this.f),n&&(t.a=n),n=this;n;)n=n.a};var Zo,ts={},es=null;function ns(t){var e,n,r;return es||(es=new zo(""),(ts[""]=es).c=$o),(e=ts[t])||(e=new zo(t),r=t.lastIndexOf("."),n=t.substr(r+1),(r=ns(t.substr(0,r))).b||(r.b={}),(r.b[n]=e).a=r,ts[t]=e),e}function rs(t,e){t&&t.log(Jo,e,void 0)}function is(t){this.f=t}function os(t){pn.call(this),this.s=t,this.readyState=ss,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.i=new Headers,this.b=null,this.m="GET",this.g="",this.a=!1,this.h=ns("goog.net.FetchXmlHttp"),this.l=this.c=this.f=null}e(is,jo),is.prototype.a=function(){return new os(this.f)},is.prototype.b=(Zo={},function(){return Zo}),e(os,pn);var ss=0;function as(t){t.c.read().then(t.nc.bind(t)).catch(t.Sa.bind(t))}function us(t,e){e&&t.f&&(t.status=t.f.status,t.statusText=t.f.statusText),t.readyState=4,t.f=null,t.c=null,t.l=null,cs(t)}function cs(t){t.onreadystatechange&&t.onreadystatechange.call(t)}function hs(t){pn.call(this),this.headers=new wn,this.D=t||null,this.c=!1,this.B=this.a=null,this.h=this.P=this.l="",this.f=this.O=this.i=this.N=!1,this.g=0,this.s=null,this.m=ls,this.w=this.R=!1}(t=os.prototype).open=function(t,e){if(this.readyState!=ss)throw this.abort(),Error("Error reopening a connection");this.m=t,this.g=e,this.readyState=1,cs(this)},t.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.a=!0;var e={headers:this.i,method:this.m,credentials:void 0,cache:void 0};t&&(e.body=t),this.s.fetch(new Request(this.g,e)).then(this.sc.bind(this),this.Sa.bind(this))},t.abort=function(){this.response=this.responseText="",this.i=new Headers,this.status=0,this.c&&this.c.cancel("Request was aborted."),1<=this.readyState&&this.a&&4!=this.readyState&&(this.a=!1,us(this,!1)),this.readyState=ss},t.sc=function(t){this.a&&(this.f=t,this.b||(this.b=t.headers,this.readyState=2,cs(this)),this.a&&(this.readyState=3,cs(this),this.a&&("arraybuffer"===this.responseType?t.arrayBuffer().then(this.qc.bind(this),this.Sa.bind(this)):void 0!==l.ReadableStream&&"body"in t?(this.response=this.responseText="",this.c=t.body.getReader(),this.l=new TextDecoder,as(this)):t.text().then(this.rc.bind(this),this.Sa.bind(this)))))},t.nc=function(t){var e;this.a&&((e=this.l.decode(t.value?t.value:new Uint8Array(0),{stream:!t.done}))&&(this.response=this.responseText+=e),t.done?us(this,!0):cs(this),3==this.readyState&&as(this))},t.rc=function(t){this.a&&(this.response=this.responseText=t,us(this,!0))},t.qc=function(t){this.a&&(this.response=t,us(this,!0))},t.Sa=function(t){var e=this.h;e&&e.log(Xo,"Failed to fetch url "+this.g,t instanceof Error?t:Error(t)),this.a&&us(this,!0)},t.setRequestHeader=function(t,e){this.i.append(t,e)},t.getResponseHeader=function(t){return this.b?this.b.get(t.toLowerCase())||"":((t=this.h)&&t.log(Xo,"Attempting to get response header but no headers have been received for url: "+this.g,void 0),"")},t.getAllResponseHeaders=function(){if(!this.b){var t=this.h;return t&&t.log(Xo,"Attempting to get all response headers but no headers have been received for url: "+this.g,void 0),""}t=[];for(var e=this.b.entries(),n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join("\r\n")},e(hs,pn);var ls="";hs.prototype.b=ns("goog.net.XhrIo");var fs=/^https?$/i,ps=["POST","PUT"];function ds(e,t,n,r,i){if(e.a)throw Error("[goog.net.XhrIo] Object is active with another request="+e.l+"; newUri="+t);n=n?n.toUpperCase():"GET",e.l=t,e.h="",e.P=n,e.N=!1,e.c=!0,e.a=e.D?e.D.a():xo.a(),e.B=e.D?Vo(e.D):Vo(xo),e.a.onreadystatechange=m(e.Sb,e);try{rs(e.b,Is(e,"Opening Xhr")),e.O=!0,e.a.open(n,String(t),!0),e.O=!1}catch(t){return rs(e.b,Is(e,"Error opening Xhr: "+t.message)),void ys(e,t)}t=r||"";var o,s=new wn(e.headers);i&&function(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(d(t)||"string"==typeof t)U(t,e,void 0);else for(var n=_n(t),r=bn(t),i=r.length,o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}(i,function(t,e){s.set(e,t)}),i=function(t){t:{for(var e=vs,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return e<0?null:"string"==typeof t?t.charAt(e):t[e]}(s.X()),r=l.FormData&&t instanceof l.FormData,!B(ps,n)||i||r||s.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),s.forEach(function(t,e){this.a.setRequestHeader(e,t)},e),e.m&&(e.a.responseType=e.m),"withCredentials"in e.a&&e.a.withCredentials!==e.R&&(e.a.withCredentials=e.R);try{_s(e),0<e.g&&(e.w=(o=e.a,Bt&&Zt(9)&&"number"==typeof o.timeout&&void 0!==o.ontimeout),rs(e.b,Is(e,"Will abort after "+e.g+"ms if incomplete, xhr2 "+e.w)),e.w?(e.a.timeout=e.g,e.a.ontimeout=m(e.Ka,e)):e.s=gn(e.Ka,e.g,e)),rs(e.b,Is(e,"Sending request")),e.i=!0,e.a.send(t),e.i=!1}catch(t){rs(e.b,Is(e,"Send error: "+t.message)),ys(e,t)}}function vs(t){return"content-type"==t.toLowerCase()}function ys(t,e){t.c=!1,t.a&&(t.f=!0,t.a.abort(),t.f=!1),t.h=e,gs(t),bs(t)}function gs(t){t.N||(t.N=!0,t.dispatchEvent("complete"),t.dispatchEvent("error"))}function ms(e){if(e.c&&void 0!==h)if(e.B[1]&&4==ws(e)&&2==Es(e))rs(e.b,Is(e,"Local request error detected and ignored"));else if(e.i&&4==ws(e))gn(e.Sb,0,e);else if(e.dispatchEvent("readystatechange"),4==ws(e)){rs(e.b,Is(e,"Request complete")),e.c=!1;try{var t,n,r,i,o=Es(e);t:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var s=!0;break t;default:s=!1}if((t=s)||((n=0===o)&&(!(i=String(e.l).match(Tn)[1]||null)&&l.self&&l.self.location&&(i=(r=l.self.location.protocol).substr(0,r.length-1)),n=!fs.test(i?i.toLowerCase():"")),t=n),t)e.dispatchEvent("complete"),e.dispatchEvent("success");else{try{var a=2<ws(e)?e.a.statusText:""}catch(t){rs(e.b,"Can not get status: "+t.message),a=""}e.h=a+" ["+Es(e)+"]",gs(e)}}finally{bs(e)}}}function bs(e,t){if(e.a){_s(e);var n=e.a,r=e.B[0]?s:null;e.a=null,e.B=null,t||e.dispatchEvent("ready");try{n.onreadystatechange=r}catch(t){(e=e.b)&&e.log(Yo,"Problem encountered resetting onreadystatechange: "+t.message,void 0)}}}function _s(t){t.a&&t.w&&(t.a.ontimeout=null),t.s&&(l.clearTimeout(t.s),t.s=null)}function ws(t){return t.a?t.a.readyState:0}function Es(t){try{return 2<ws(t)?t.a.status:-1}catch(t){return-1}}function Is(t,e){return e+" ["+t.P+" "+t.l+" "+Es(t)+"]"}function Ts(t){var e=Ls;this.g=[],this.w=e,this.s=t||null,this.f=this.a=!1,this.c=void 0,this.u=this.B=this.i=!1,this.h=0,this.b=null,this.l=0}function Ss(t,e,n){t.a=!0,t.c=n,t.f=!e,ks(t)}function Cs(t){if(t.a){if(!t.u)throw new Os;t.u=!1}}function Ns(t,e,n,r){t.g.push([e,n,r]),t.a&&ks(t)}function As(t){return q(t.g,function(t){return v(t[1])})}function ks(e){var n,r;e.h&&e.a&&As(e)&&(n=e.h,(r=Ds[n])&&(l.clearTimeout(r.a),delete Ds[n]),e.h=0),e.b&&(e.b.l--,delete e.b),n=e.c;for(var t=r=!1;e.g.length&&!e.i;){var i=(s=e.g.shift())[0],o=s[1],s=s[2];if(i=e.f?o:i)try{var a=i.call(s||e.s,n);void 0!==a&&(e.f=e.f&&(a==n||a instanceof Error),e.c=n=a),(A(n)||"function"==typeof l.Promise&&n instanceof l.Promise)&&(t=!0,e.i=!0)}catch(t){n=t,e.f=!0,As(e)||(r=!0)}}e.c=n,t&&(a=m(e.m,e,!0),t=m(e.m,e,!1),n instanceof Ts?(Ns(n,a,t),n.B=!0):n.then(a,t)),r&&(n=new Ps(n),Ds[n.a]=n,e.h=n.a)}function Os(){k.call(this)}function Rs(){k.call(this)}function Ps(t){this.a=l.setTimeout(m(this.c,this),0),this.b=t}(t=hs.prototype).Ka=function(){void 0!==h&&this.a&&(this.h="Timed out after "+this.g+"ms, aborting",rs(this.b,Is(this,this.h)),this.dispatchEvent("timeout"),this.abort(8))},t.abort=function(){this.a&&this.c&&(rs(this.b,Is(this,"Aborting")),this.c=!1,this.f=!0,this.a.abort(),this.f=!1,this.dispatchEvent("complete"),this.dispatchEvent("abort"),bs(this))},t.Ba=function(){this.a&&(this.c&&(this.c=!1,this.f=!0,this.a.abort(),this.f=!1),bs(this,!0)),hs.Za.Ba.call(this)},t.Sb=function(){this.wa||(this.O||this.i||this.f?ms(this):this.Hc())},t.Hc=function(){ms(this)},t.getResponse=function(){try{if(!this.a)return null;if("response"in this.a)return this.a.response;switch(this.m){case ls:case"text":return this.a.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in this.a)return this.a.mozResponseArrayBuffer}var t=this.b;return t&&t.log(Yo,"Response type "+this.m+" is not supported on this browser",void 0),null}catch(t){return rs(this.b,"Can not get response: "+t.message),null}},Ts.prototype.cancel=function(t){var e;this.a?this.c instanceof Ts&&this.c.cancel():(this.b&&(e=this.b,delete this.b,t?e.cancel(t):(e.l--,e.l<=0&&e.cancel())),this.w?this.w.call(this.s,this):this.u=!0,this.a||(t=new Rs,Cs(this),Ss(this,!1,t)))},Ts.prototype.m=function(t,e){this.i=!1,Ss(this,t,e)},Ts.prototype.then=function(t,e,n){var r,i,o=new de(function(t,e){r=t,i=e});return Ns(this,r,function(t){t instanceof Rs?o.cancel():i(t)}),o.then(t,e,n)},Ts.prototype.$goog_Thenable=!0,e(Os,k),Os.prototype.message="Deferred has already fired",Os.prototype.name="AlreadyCalledError",e(Rs,k),Rs.prototype.message="Deferred was canceled",Rs.prototype.name="CanceledError",Ps.prototype.c=function(){throw delete Ds[this.a],this.b};var Ds={};function xs(t){var e,n,r,i,o=document,s=bt(t).toString(),a=ae(document,"SCRIPT"),u={Tb:a,Ka:void 0},c=new Ts(u),h=window.setTimeout(function(){Ms(a,!0);var t=new js(Us,"Timeout reached for loading script "+s);Cs(c),Ss(c,!1,t)},5e3);return u.Ka=h,a.onload=a.onreadystatechange=function(){a.readyState&&"loaded"!=a.readyState&&"complete"!=a.readyState||(Ms(a,!1,h),Cs(c),Ss(c,!0,null))},a.onerror=function(){Ms(a,!0,h);var t=new js(Fs,"Error while loading script "+s);Cs(c),Ss(c,!1,t)},lt(u={},{type:"text/javascript",charset:"UTF-8"}),ne(a,u),n=t,ft(e=a,"HTMLScriptElement"),e.src=bt(n),null===p&&(p=(n=(n=l.document).querySelector&&n.querySelector("script[nonce]"))&&(n=n.nonce||n.getAttribute("nonce"))&&f.test(n)?n:""),(n=p)&&e.setAttribute("nonce",n),((i=((r=o)||document).getElementsByTagName("HEAD"))&&0!=i.length?i[0]:r.documentElement).appendChild(a),c}function Ls(){var t;this&&this.Tb&&((t=this.Tb)&&"SCRIPT"==t.tagName&&Ms(t,!0,this.Ka))}function Ms(t,e,n){null!=n&&l.clearTimeout(n),t.onload=s,t.onerror=s,t.onreadystatechange=s,e&&window.setTimeout(function(){t&&t.parentNode&&t.parentNode.removeChild(t)},0)}var Fs=0,Us=1;function js(t,e){var n="Jsloader error (code #"+t+")";e&&(n+=": "+e),k.call(this,n),this.code=t}function Vs(t){this.f=t}function qs(t,e,n){if(this.c=t,t=e||{},this.u=t.secureTokenEndpoint||"https://securetoken.googleapis.com/v1/token",this.m=t.secureTokenTimeout||Gs,this.g=ct(t.secureTokenHeaders||Hs),this.h=t.firebaseEndpoint||"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",this.l=t.identityPlatformEndpoint||"https://identitytoolkit.googleapis.com/v2/",this.i=t.firebaseTimeout||Ks,this.a=ct(t.firebaseHeaders||zs),n&&(this.a["X-Client-Version"]=n,this.g["X-Client-Version"]=n),n="Node"==fr(),!(n=l.XMLHttpRequest||n&&Hl.INTERNAL.node&&Hl.INTERNAL.node.XMLHttpRequest)&&!lr())throw new w("internal-error","The XMLHttpRequest compatibility library was not found.");this.f=void 0,lr()?this.f=new is(self):pr()?this.f=new Vs(n):this.f=new Wo,this.b=null}e(js,k),e(Vs,jo),Vs.prototype.a=function(){return new this.f},Vs.prototype.b=function(){return{}};var Bs,Ws="idToken",Gs=new Pr(3e4,6e4),Hs={"Content-Type":"application/x-www-form-urlencoded"},Ks=new Pr(3e4,6e4),zs={"Content-Type":"application/json"};function Qs(t,e){e?t.a["X-Firebase-Locale"]=e:delete t.a["X-Firebase-Locale"]}function Ys(t,e){e?(t.a["X-Client-Version"]=e,t.g["X-Client-Version"]=e):(delete t.a["X-Client-Version"],delete t.g["X-Client-Version"])}function Xs(t,e,n,r,i,o,s){var a;(t=((a=yr(a=br())==vr&&(a=a.match(/\sChrome\/(\d+)/i))&&2==a.length?parseInt(a[1],10):null)&&a<30||Bt&&$t&&!(9<$t))&&!lr()?(Bs=Bs||new de(function(t,e){!function(t,e){{((window.gapi||{}).client||{}).request?t():(l[Js]=function(){((window.gapi||{}).client||{}).request?t():e(Error("CORS_UNSUPPORTED"))},function(t,e){Ns(t,null,e,void 0)}(xs(_t($s,{onload:Js})),function(){e(Error("CORS_UNSUPPORTED"))}))}}(t,e)}),m(t.s,t)):m(t.w,t))(e,n,r,i,o,s)}qs.prototype.S=function(){return this.b},qs.prototype.w=function(t,n,e,r,i,o){if(lr()&&(void 0===l.fetch||void 0===l.Headers||void 0===l.Request))throw new w("operation-not-supported-in-this-environment","fetch, Headers and Request native APIs or equivalent Polyfills must be available to support HTTP requests from a Worker environment.");var s,a=new hs(this.f);o&&(a.g=Math.max(0,o),s=setTimeout(function(){a.dispatchEvent("timeout")},o)),dn(a,"complete",function(){s&&clearTimeout(s);var e=null;try{e=JSON.parse(function(e){try{return e.a?e.a.responseText:""}catch(t){return rs(e.b,"Can not get responseText: "+t.message),""}}(this))||null}catch(t){e=null}n&&n(e)}),vn(a,"ready",function(){s&&clearTimeout(s),Fe(this)}),vn(a,"timeout",function(){s&&clearTimeout(s),Fe(this),n&&n(null)}),ds(a,t,e,r,i)};var $s=new pt(yt,"https://apis.google.com/js/client.js?onload=%{onload}"),Js="__fcb"+Math.floor(1e6*Math.random()).toString();function Zs(t,e,n,r,i,o,s){var a=Rn(e+n);kn(a,"key",t.c),s&&kn(a,"cb",_().toString());var u="GET"==r;if(u)for(var c in i)i.hasOwnProperty(c)&&kn(a,c,i[c]);return new de(function(e,n){Xs(t,a.toString(),function(t){t?t.error?n(Qa(t,o||{})):e(t):n(new w("network-request-failed"))},r,u?void 0:Yn(Nr(i)),t.a,t.i.get())})}function ta(t){if("string"!=typeof(t=t.email)||!ar.test(t))throw new w("invalid-email")}function ea(t){"email"in t&&ta(t)}function na(t){if(!t[Ws]){if(t.mfaPendingCredential)throw new w("multi-factor-auth-required",null,ct(t));throw new w("internal-error")}}function ra(t){if(t.phoneNumber||t.temporaryProof){if(!t.phoneNumber||!t.temporaryProof)throw new w("internal-error")}else{if(!t.sessionInfo)throw new w("missing-verification-id");if(!t.code)throw new w("missing-verification-code")}}qs.prototype.s=function(t,n,r,i,o){var s=this;Bs.then(function(){window.gapi.client.setApiKey(s.c);var e=window.gapi.auth.getToken();window.gapi.auth.setToken(null),window.gapi.client.request({path:t,method:r,body:i,headers:o,authType:"none",callback:function(t){window.gapi.auth.setToken(e),n&&n(t)}})}).o(function(t){n&&n({error:{message:t&&t.message||"CORS_UNSUPPORTED"}})})},qs.prototype.vb=function(){return Ka(this,xa,{})},qs.prototype.xb=function(t,e){return Ka(this,Pa,{idToken:t,email:e})},qs.prototype.yb=function(t,e){return Ka(this,Da,{idToken:t,password:e})};var ia={displayName:"DISPLAY_NAME",photoUrl:"PHOTO_URL"};function oa(t){if(!t.phoneVerificationInfo)throw new w("internal-error");if(!t.phoneVerificationInfo.sessionInfo)throw new w("missing-verification-id");if(!t.phoneVerificationInfo.code)throw new w("missing-verification-code")}function sa(t){if(!t.requestUri||!t.sessionId&&!t.postBody&&!t.pendingToken)throw new w("internal-error")}function aa(t,e){return e.oauthIdToken&&e.providerId&&0==e.providerId.indexOf("oidc.")&&!e.pendingToken&&(t.sessionId?e.nonce=t.sessionId:t.postBody&&(Hn(t=new qn(t.postBody),"nonce")&&(e.nonce=t.get("nonce")))),e}function ua(t){var e=null;if(t.needConfirmation?(t.code="account-exists-with-different-credential",e=Uo(t)):"FEDERATED_USER_ID_ALREADY_LINKED"==t.errorMessage?(t.code="credential-already-in-use",e=Uo(t)):"EMAIL_EXISTS"==t.errorMessage?(t.code="email-already-in-use",e=Uo(t)):t.errorMessage&&(e=za(t.errorMessage)),e)throw e;na(t)}function ca(t,e){return e.returnIdpCredential=!0,Ka(t,Fa,e)}function ha(t,e){return e.returnIdpCredential=!0,Ka(t,ja,e)}function la(t,e){return e.returnIdpCredential=!0,e.autoCreate=!1,Ka(t,Ua,e)}function fa(t){if(!t.oobCode)throw new w("invalid-action-code")}(t=qs.prototype).zb=function(t,r){var i={idToken:t},o=[];return at(ia,function(t,e){var n=r[e];null===n?o.push(t):e in r&&(i[e]=n)}),o.length&&(i.deleteAttribute=o),Ka(this,Pa,i)},t.rb=function(t,e){return lt(t={requestType:"PASSWORD_RESET",email:t},e),Ka(this,Na,t)},t.sb=function(t,e){return lt(t={requestType:"EMAIL_SIGNIN",email:t},e),Ka(this,Ta,t)},t.qb=function(t,e){return lt(t={requestType:"VERIFY_EMAIL",idToken:t},e),Ka(this,Sa,t)},t.Ab=function(t,e,n){return lt(t={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:t,newEmail:e},n),Ka(this,Ca,t)},t.cb=function(t){return Ka(this,Ba,t)},t.jb=function(t,e){return Ka(this,Oa,{oobCode:t,newPassword:e})},t.Pa=function(t){return Ka(this,da,{oobCode:t})},t.fb=function(t){return Ka(this,pa,{oobCode:t})};var pa={endpoint:"setAccountInfo",A:fa,Y:"email",C:!0},da={endpoint:"resetPassword",A:fa,G:function(t){var e=t.requestType;if(!e||!t.email&&"EMAIL_SIGNIN"!=e&&"VERIFY_AND_CHANGE_EMAIL"!=e)throw new w("internal-error")},C:!0},va={endpoint:"signupNewUser",A:function(t){if(ta(t),!t.password)throw new w("weak-password")},G:na,U:!0,C:!0},ya={endpoint:"createAuthUri",C:!0},ga={endpoint:"deleteAccount",M:["idToken"]},ma={endpoint:"setAccountInfo",M:["idToken","deleteProvider"],A:function(t){if("array"!=n(t.deleteProvider))throw new w("internal-error")}},ba={endpoint:"emailLinkSignin",M:["email","oobCode"],A:ta,G:na,U:!0,C:!0},_a={endpoint:"emailLinkSignin",M:["idToken","email","oobCode"],A:ta,G:na,U:!0},wa={endpoint:"accounts/mfaEnrollment:finalize",M:["idToken","phoneVerificationInfo"],A:oa,G:na,C:!0,La:!0},Ea={endpoint:"accounts/mfaSignIn:finalize",M:["mfaPendingCredential","phoneVerificationInfo"],A:oa,G:na,C:!0,La:!0},Ia={endpoint:"getAccountInfo"},Ta={endpoint:"getOobConfirmationCode",M:["requestType"],A:function(t){if("EMAIL_SIGNIN"!=t.requestType)throw new w("internal-error");ta(t)},Y:"email",C:!0},Sa={endpoint:"getOobConfirmationCode",M:["idToken","requestType"],A:function(t){if("VERIFY_EMAIL"!=t.requestType)throw new w("internal-error")},Y:"email",C:!0},Ca={endpoint:"getOobConfirmationCode",M:["idToken","newEmail","requestType"],A:function(t){if("VERIFY_AND_CHANGE_EMAIL"!=t.requestType)throw new w("internal-error")},Y:"email",C:!0},Na={endpoint:"getOobConfirmationCode",M:["requestType"],A:function(t){if("PASSWORD_RESET"!=t.requestType)throw new w("internal-error");ta(t)},Y:"email",C:!0},Aa={hb:!0,endpoint:"getProjectConfig",Rb:"GET"},ka={hb:!0,endpoint:"getRecaptchaParam",Rb:"GET",G:function(t){if(!t.recaptchaSiteKey)throw new w("internal-error")}},Oa={endpoint:"resetPassword",A:fa,Y:"email",C:!0},Ra={endpoint:"sendVerificationCode",M:["phoneNumber","recaptchaToken"],Y:"sessionInfo",C:!0},Pa={endpoint:"setAccountInfo",M:["idToken"],A:ea,U:!0},Da={endpoint:"setAccountInfo",M:["idToken"],A:function(t){if(ea(t),!t.password)throw new w("weak-password")},G:na,U:!0},xa={endpoint:"signupNewUser",G:na,U:!0,C:!0},La={endpoint:"accounts/mfaEnrollment:start",M:["idToken","phoneEnrollmentInfo"],A:function(t){if(!t.phoneEnrollmentInfo)throw new w("internal-error");if(!t.phoneEnrollmentInfo.phoneNumber)throw new w("missing-phone-number");if(!t.phoneEnrollmentInfo.recaptchaToken)throw new w("missing-app-credential")},G:function(t){if(!t.phoneSessionInfo||!t.phoneSessionInfo.sessionInfo)throw new w("internal-error")},C:!0,La:!0},Ma={endpoint:"accounts/mfaSignIn:start",M:["mfaPendingCredential","mfaEnrollmentId","phoneSignInInfo"],A:function(t){if(!t.phoneSignInInfo||!t.phoneSignInInfo.recaptchaToken)throw new w("missing-app-credential")},G:function(t){if(!t.phoneResponseInfo||!t.phoneResponseInfo.sessionInfo)throw new w("internal-error")},C:!0,La:!0},Fa={endpoint:"verifyAssertion",A:sa,Wa:aa,G:ua,U:!0,C:!0},Ua={endpoint:"verifyAssertion",A:sa,Wa:aa,G:function(t){if(t.errorMessage&&"USER_NOT_FOUND"==t.errorMessage)throw new w("user-not-found");if(t.errorMessage)throw za(t.errorMessage);na(t)},U:!0,C:!0},ja={endpoint:"verifyAssertion",A:function(t){if(sa(t),!t.idToken)throw new w("internal-error")},Wa:aa,G:ua,U:!0},Va={endpoint:"verifyCustomToken",A:function(t){if(!t.token)throw new w("invalid-custom-token")},G:na,U:!0,C:!0},qa={endpoint:"verifyPassword",A:function(t){if(ta(t),!t.password)throw new w("wrong-password")},G:na,U:!0,C:!0},Ba={endpoint:"verifyPhoneNumber",A:ra,G:na,C:!0},Wa={endpoint:"verifyPhoneNumber",A:function(t){if(!t.idToken)throw new w("internal-error");ra(t)},G:function(t){if(t.temporaryProof)throw t.code="credential-already-in-use",Uo(t);na(t)}},Ga={Eb:{USER_NOT_FOUND:"user-not-found"},endpoint:"verifyPhoneNumber",A:ra,G:na,C:!0},Ha={endpoint:"accounts/mfaEnrollment:withdraw",M:["idToken","mfaEnrollmentId"],G:function(t){if(!!t[Ws]^!!t.refreshToken)throw new w("internal-error")},C:!0,La:!0};function Ka(t,e,n){if(!function(t,e){if(!e||!e.length)return 1;if(t){for(var n=0;n<e.length;n++){var r=t[e[n]];if(null==r||""===r)return}return 1}}(n,e.M))return Ee(new w("internal-error"));var r,i=!!e.La,o=e.Rb||"POST";return we(n).then(e.A).then(function(){return e.U&&(n.returnSecureToken=!0),e.C&&t.b&&void 0===n.tenantId&&(n.tenantId=t.b),Zs(t,i?t.l:t.h,e.endpoint,o,n,e.Eb,e.hb||!1)}).then(function(t){return r=t,e.Wa?e.Wa(n,r):r}).then(e.G).then(function(){if(!e.Y)return r;if(!(e.Y in r))throw new w("internal-error");return r[e.Y]})}function za(t){return Qa({error:{errors:[{message:t}],code:400,message:t}})}function Qa(t,e){var n,r=(t.error&&t.error.errors&&t.error.errors[0]||{}).reason||"",i={keyInvalid:"invalid-api-key",ipRefererBlocked:"app-not-authorized"};if(r=i[r]?new w(i[r]):null)return r;for(n in r=t.error&&t.error.message||"",lt(i={INVALID_CUSTOM_TOKEN:"invalid-custom-token",CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_EMAIL:"invalid-email",INVALID_PASSWORD:"wrong-password",USER_DISABLED:"user-disabled",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_OR_INVALID_NONCE:"missing-or-invalid-nonce",INVALID_MESSAGE_PAYLOAD:"invalid-message-payload",INVALID_RECIPIENT_EMAIL:"invalid-recipient-email",INVALID_SENDER:"invalid-sender",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",INVALID_PROVIDER_ID:"invalid-provider-id",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",CORS_UNSUPPORTED:"cors-unsupported",DYNAMIC_LINK_NOT_ACTIVATED:"dynamic-link-not-activated",INVALID_APP_ID:"invalid-app-id",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",WEAK_PASSWORD:"weak-password",OPERATION_NOT_ALLOWED:"operation-not-allowed",USER_CANCELLED:"user-cancelled",CAPTCHA_CHECK_FAILED:"captcha-check-failed",INVALID_APP_CREDENTIAL:"invalid-app-credential",INVALID_CODE:"invalid-verification-code",INVALID_PHONE_NUMBER:"invalid-phone-number",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_APP_CREDENTIAL:"missing-app-credential",MISSING_CODE:"missing-verification-code",MISSING_PHONE_NUMBER:"missing-phone-number",MISSING_SESSION_INFO:"missing-verification-id",QUOTA_EXCEEDED:"quota-exceeded",SESSION_EXPIRED:"code-expired",REJECTED_CREDENTIAL:"rejected-credential",INVALID_CONTINUE_URI:"invalid-continue-uri",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",MISSING_IOS_BUNDLE_ID:"missing-ios-bundle-id",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_DYNAMIC_LINK_DOMAIN:"invalid-dynamic-link-domain",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",INVALID_CERT_HASH:"invalid-cert-hash",UNSUPPORTED_TENANT_OPERATION:"unsupported-tenant-operation",INVALID_TENANT_ID:"invalid-tenant-id",TENANT_ID_MISMATCH:"tenant-id-mismatch",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",EMAIL_CHANGE_NEEDS_VERIFICATION:"email-change-needs-verification",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",UNSUPPORTED_FIRST_FACTOR:"unsupported-first-factor",UNVERIFIED_EMAIL:"unverified-email"},e||{}),e=(e=r.match(/^[^\s]+\s*:\s*([\s\S]*)$/))&&1<e.length?e[1]:void 0,i)if(0===r.indexOf(n))return new w(i[n],e);return!e&&t&&(e=Cr(t)),new w("internal-error",e)}function Ya(t){var o;this.b=t,this.a=null,this.nb=(o=this,(Za||(Za=new de(function(t,e){function n(){Rr(),_r("gapi.load")("gapi.iframes",{callback:t,ontimeout:function(){Rr(),e(Error("Network Error"))},timeout:$a.get()})}var r;_r("gapi.iframes.Iframe")?t():_r("gapi.load")?n():(r="__iframefcb"+Math.floor(1e6*Math.random()).toString(),l[r]=function(){_r("gapi.load")?n():e(Error("Network Error"))},we(xs(r=_t(Xa,{onload:r}))).o(function(){e(Error("Network Error"))}))}).o(function(t){throw Za=null,t}))).then(function(){return new de(function(r,i){_r("gapi.iframes.getContext")().open({where:document.body,url:o.b,messageHandlersFilter:_r("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"),attributes:{style:{position:"absolute",top:"-100px",width:"1px",height:"1px"}},dontclear:!0},function(t){function e(){clearTimeout(n),r()}o.a=t,o.a.restyle({setHideOnLeave:!1});var n=setTimeout(function(){i(Error("Network Error"))},Ja.get());t.ping(e).then(e,function(){i(Error("Network Error"))})})})}))}var Xa=new pt(yt,"https://apis.google.com/js/api.js?onload=%{onload}"),$a=new Pr(3e4,6e4),Ja=new Pr(5e3,15e3),Za=null;function tu(t,e,n){this.i=t,this.g=e,this.h=n,this.f=null,this.a=Pn(this.i,"/__/auth/iframe"),kn(this.a,"apiKey",this.g),kn(this.a,"appName",this.h),this.b=null,this.c=[]}function eu(t,e,n,r,i){this.s=t,this.m=e,this.c=n,this.u=r,this.i=this.g=this.l=null,this.a=i,this.h=this.f=null}function nu(t){try{return Hl.app(t).auth().Ea()}catch(t){return[]}}function ru(t,e,n,r,i){this.u=t,this.f=e,this.b=n,this.c=r||null,this.h=i||null,this.m=this.s=this.w=null,this.g=[],this.l=this.a=null}function iu(t){var a=er();return Ka(t,Aa,{}).then(function(t){return t.authorizedDomains||[]}).then(function(t){t:{for(var e=(n=Rn(a)).f,n=n.b,r=0;r<t.length;r++){var i=t[r],o=n,s=e;if(o=0==i.indexOf("chrome-extension://")?Rn(i).b==o&&"chrome-extension"==s:("http"==s||"https"==s)&&(sr.test(i)?o==i:(i=i.split(".").join("\\."),new RegExp("^(.+\\."+i+"|"+i+")$","i").test(o)))){t=!0;break t}}t=!1}if(!t)throw new Mo(er())})}function ou(i){return i.l||(i.l=ur().then(function(){var t,e,n,r;i.s||(t=i.c,e=i.h,n=nu(i.b),(r=new tu(i.u,i.f,i.b)).f=t,r.b=e,r.c=K(n||[]),i.s=r.toString()),i.i=new Ya(i.s),function(r){if(!r.i)throw Error("IfcHandler must be initialized!");!function(t,e){t.nb.then(function(){t.a.register("authEvent",e,_r("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))})}(r.i,function(t){var e={};if(t&&t.authEvent){var n=!1;for(t=Po(t.authEvent),e=0;e<r.g.length;e++)n=r.g[e](t)||n;return(e={}).status=n?"ACK":"ERROR",we(e)}return e.status="ERROR",we(e)})}(i)})),i.l}function su(t){return t.m||(t.w=t.c?mr(t.c,nu(t.b)):null,t.m=new qs(t.f,N(t.h),t.w)),t.m}function au(t,e,n,r,i,o,s,a,u,c,h){return(t=new eu(t,e,n,r,i)).l=o,t.g=s,t.i=a,t.b=ct(u||null),t.f=c,t.ub(h).toString()}function uu(t){if(this.a=t||Hl.INTERNAL.reactNative&&Hl.INTERNAL.reactNative.AsyncStorage,!this.a)throw new w("internal-error","The React Native compatibility library was not found.");this.type="asyncStorage"}function cu(t){this.b=t,this.a={},this.f=m(this.c,this)}tu.prototype.toString=function(){return this.f?kn(this.a,"v",this.f):Gn(this.a.a,"v"),this.b?kn(this.a,"eid",this.b):Gn(this.a.a,"eid"),this.c.length?kn(this.a,"fw",this.c.join(",")):Gn(this.a.a,"fw"),this.a.toString()},eu.prototype.ub=function(t){return this.h=t,this},eu.prototype.toString=function(){var t=Pn(this.s,"/__/auth/handler");if(kn(t,"apiKey",this.m),kn(t,"appName",this.c),kn(t,"authType",this.u),this.a.isOAuthProvider){var e,n=this.a;try{var r=Hl.app(this.c).auth().ja()}catch(t){r=null}for(e in n.kb=r,kn(t,"providerId",this.a.providerId),r=Nr((n=this.a).Fb))r[e]=r[e].toString();e=n.Oc,r=ct(r);for(var i=0;i<e.length;i++){var o=e[i];o in r&&delete r[o]}n.lb&&n.kb&&!r[n.lb]&&(r[n.lb]=n.kb),ut(r)||kn(t,"customParameters",Cr(r))}if("function"==typeof this.a.Nb&&((n=this.a.Nb()).length&&kn(t,"scopes",n.join(","))),this.l?kn(t,"redirectUrl",this.l):Gn(t.a,"redirectUrl"),this.g?kn(t,"eventId",this.g):Gn(t.a,"eventId"),this.i?kn(t,"v",this.i):Gn(t.a,"v"),this.b)for(var s in this.b)this.b.hasOwnProperty(s)&&!On(t,s)&&kn(t,s,this.b[s]);return this.h?kn(t,"tid",this.h):Gn(t.a,"tid"),this.f?kn(t,"eid",this.f):Gn(t.a,"eid"),(s=nu(this.c)).length&&kn(t,"fw",s.join(",")),t.toString()},(t=ru.prototype).Lb=function(e,n,t){var r=new w("popup-closed-by-user"),i=new w("web-storage-unsupported"),o=this,s=!1;return this.ka().then(function(){var t,r;r={type:"webStorageSupport"},ou(t=o).then(function(){return e=t.i,n=r,e.nb.then(function(){return new de(function(t){e.a.send(n.type,n,t,_r("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))})});var e,n}).then(function(t){if(t&&t.length&&void 0!==t[0].webStorageSupport)return t[0].webStorageSupport;throw Error()}).then(function(t){t||(e&&ir(e),n(i),s=!0)})}).o(function(){}).then(function(){if(!s)return n=e,new de(function(e){return function t(){mn(2e3).then(function(){return n&&!n.closed?t():void e()})}()});var n}).then(function(){if(!s)return mn(t).then(function(){n(r)})})},t.Ub=function(){var t=br();return!Sr(t)&&!Or(t)},t.Qb=function(){return!1},t.Jb=function(e,t,n,r,i,o,s,a){if(!e)return Ee(new w("popup-blocked"));if(s&&!Sr())return this.ka().o(function(t){ir(e),i(t)}),r(),we();this.a||(this.a=iu(su(this)));var u=this;return this.a.then(function(){var t=u.ka().o(function(t){throw ir(e),i(t),t});return r(),t}).then(function(){Oo(n),s||nr(au(u.u,u.f,u.b,t,n,null,o,u.c,void 0,u.h,a),e)}).o(function(t){throw"auth/network-request-failed"==t.code&&(u.a=null),t})},t.Kb=function(t,e,n,r){this.a||(this.a=iu(su(this)));var i=this;return this.a.then(function(){Oo(e),nr(au(i.u,i.f,i.b,t,e,er(),n,i.c,void 0,i.h,r))}).o(function(t){throw"auth/network-request-failed"==t.code&&(i.a=null),t})},t.ka=function(){var t=this;return ou(this).then(function(){return t.i.nb}).o(function(){throw t.a=null,new w("network-request-failed")})},t.Xb=function(){return!0},t.Ca=function(t){this.g.push(t)},t.Qa=function(e){G(this.g,function(t){return t==e})},(t=uu.prototype).get=function(t){return we(this.a.getItem(t)).then(function(t){return t&&Ar(t)})},t.set=function(t,e){return we(this.a.setItem(t,Cr(e)))},t.T=function(t){return we(this.a.removeItem(t))},t.ba=function(){},t.ha=function(){};var hu,lu=[];function fu(t,e,n){ut(t.a)&&t.b.addEventListener("message",t.f),void 0===t.a[e]&&(t.a[e]=[]),t.a[e].push(n)}function pu(t){this.a=t}function du(t){this.c=t,this.b=!1,this.a=[]}function vu(r,t,e,n){var i,o,s,a,u=e||{},c=null;if(r.b)return Ee(Error("connection_unavailable"));var h=n?800:50,l="undefined"!=typeof MessageChannel?new MessageChannel:null;return new de(function(e,n){l?(i=Math.floor(Math.random()*Math.pow(10,20)).toString(),l.port1.start(),s=setTimeout(function(){n(Error("unsupported_event"))},h),c={messageChannel:l,onMessage:o=function(t){t.data.eventId===i&&("ack"===t.data.status?(clearTimeout(s),a=setTimeout(function(){n(Error("timeout"))},3e3)):"done"===t.data.status?(clearTimeout(a),void 0!==t.data.response?e(t.data.response):n(Error("unknown_error"))):(clearTimeout(s),clearTimeout(a),n(Error("invalid_response"))))}},r.a.push(c),l.port1.addEventListener("message",o),r.c.postMessage({eventType:t,eventId:i,data:u},[l.port2])):n(Error("connection_unavailable"))}).then(function(t){return yu(r,c),t}).o(function(t){throw yu(r,c),t})}function yu(t,e){var n,r;e&&(n=e.messageChannel,r=e.onMessage,n&&(n.port1.removeEventListener("message",r),n.port1.close()),G(t.a,function(t){return t==e}))}function gu(){if(!_u())throw new w("web-storage-unsupported");this.c={},this.a=[],this.b=0,this.u=l.indexedDB,this.type="indexedDB",this.g=this.l=this.f=this.i=null,this.s=!1,this.h=null;var t,e,n,r=this;lr()&&self?(this.l=(n=lr()?self:null,U(lu,function(t){t.b==n&&(e=t)}),e||(e=new cu(n),lu.push(e)),e),fu(this.l,"keyChanged",function(t,n){return Su(r).then(function(e){return 0<e.length&&U(r.a,function(t){t(e)}),{keyProcessed:B(e,n.key)}})}),fu(this.l,"ping",function(){return we(["keyChanged"])})):((t=l.navigator)&&t.serviceWorker?we().then(function(){return t.serviceWorker.ready}).then(function(t){return t.active||null}).o(function(){return null}):we(null)).then(function(t){(r.h=t)&&(r.g=new du(new pu(t)),vu(r.g,"ping",null,!0).then(function(t){t[0].fulfilled&&B(t[0].value,"keyChanged")&&(r.s=!0)}).o(function(){}))})}function mu(i){return new de(function(e,n){var t=i.u.open("firebaseLocalStorageDb",1);t.onerror=function(t){try{t.preventDefault()}catch(t){}n(Error(t.target.error))},t.onupgradeneeded=function(t){t=t.target.result;try{t.createObjectStore("firebaseLocalStorage",{keyPath:"fbase_key"})}catch(t){n(t)}},t.onsuccess=function(t){var r;(t=t.target.result).objectStoreNames.contains("firebaseLocalStorage")?e(t):(r=i,new de(function(t,e){var n=r.u.deleteDatabase("firebaseLocalStorageDb");n.onsuccess=function(){t()},n.onerror=function(t){e(Error(t.target.error))}}).then(function(){return mu(i)}).then(function(t){e(t)}).o(function(t){n(t)}))}})}function bu(t){return t.m||(t.m=mu(t)),t.m}function _u(){try{return l.indexedDB}catch(t){return}}function wu(t){return t.objectStore("firebaseLocalStorage")}function Eu(t,e){return t.transaction(["firebaseLocalStorage"],e?"readwrite":"readonly")}function Iu(t){return new de(function(e,n){t.onsuccess=function(t){t&&t.target?e(t.target.result):e()},t.onerror=function(t){n(t.target.error)}})}function Tu(t,e){return t.g&&t.h&&((n=l.navigator)&&n.serviceWorker&&n.serviceWorker.controller||null)===t.h?vu(t.g,"keyChanged",{key:e},t.s).then(function(){}).o(function(){}):we();var n}function Su(r){return bu(r).then(function(t){var i=wu(Eu(t,!1));return i.getAll?Iu(i.getAll()):new de(function(e,n){var r=[],t=i.openCursor();t.onsuccess=function(t){(t=t.target.result)?(r.push(t.value),t.continue()):e(r)},t.onerror=function(t){n(t.target.error)}})}).then(function(t){var e={},n=[];if(0==r.b){for(n=0;n<t.length;n++)e[t[n].fbase_key]=t[n].value;n=function t(e,n){var r,i=[];for(r in e)r in n&&typeof e[r]==typeof n[r]?"object"==typeof e[r]&&null!=e[r]&&null!=n[r]?0<t(e[r],n[r]).length&&i.push(r):e[r]!==n[r]&&i.push(r):i.push(r);for(r in n)r in e||i.push(r);return i}(r.c,e),r.c=e}return n})}function Cu(t){t.i&&t.i.cancel("STOP_EVENT"),t.f&&(clearTimeout(t.f),t.f=null)}function Nu(t){var r=this,i=null;this.a=[],this.type="indexedDB",this.c=t,this.b=we().then(function(){if(_u()){var e=kr(),n="__sak"+e;return hu=hu||new gu,(i=hu).set(n,e).then(function(){return i.get(n)}).then(function(t){if(t!==e)throw Error("indexedDB not supported!");return i.T(n)}).then(function(){return i}).o(function(){return r.c})}return r.c}).then(function(t){return r.type=t.type,t.ba(function(e){U(r.a,function(t){t(e)})}),t})}function Au(){this.a={},this.type="inMemory"}function ku(){if(!function(){var t="Node"==fr();if(!(t=Ou()||t&&Hl.INTERNAL.node&&Hl.INTERNAL.node.localStorage))return!1;try{return t.setItem("__sak","1"),t.removeItem("__sak"),!0}catch(t){return!1}}()){if("Node"==fr())throw new w("internal-error","The LocalStorage compatibility library was not found.");throw new w("web-storage-unsupported")}this.a=Ou()||Hl.INTERNAL.node.localStorage,this.type="localStorage"}function Ou(){try{var t=l.localStorage,e=kr();return t&&(t.setItem(e,"1"),t.removeItem(e)),t}catch(t){return null}}function Ru(){this.type="nullStorage"}function Pu(){if(!function(){var t="Node"==fr();if(!(t=Du()||t&&Hl.INTERNAL.node&&Hl.INTERNAL.node.sessionStorage))return!1;try{return t.setItem("__sak","1"),t.removeItem("__sak"),!0}catch(t){return!1}}()){if("Node"==fr())throw new w("internal-error","The SessionStorage compatibility library was not found.");throw new w("web-storage-unsupported")}this.a=Du()||Hl.INTERNAL.node.sessionStorage,this.type="sessionStorage"}function Du(){try{var t=l.sessionStorage,e=kr();return t&&(t.setItem(e,"1"),t.removeItem(e)),t}catch(t){return null}}function xu(){var t={};t.Browser=Fu,t.Node=Uu,t.ReactNative=ju,t.Worker=Vu,this.a=t[fr()]}cu.prototype.c=function(n){var e,r=n.data.eventType,i=n.data.eventId,t=this.a[r];t&&0<t.length&&(n.ports[0].postMessage({status:"ack",eventId:i,eventType:r,response:null}),e=[],U(t,function(t){e.push(we().then(function(){return t(n.origin,n.data.data)}))}),Te(e).then(function(t){var e=[];U(t,function(t){e.push({fulfilled:t.Mb,value:t.value,reason:t.reason?t.reason.message:void 0})}),U(e,function(t){for(var e in t)void 0===t[e]&&delete t[e]}),n.ports[0].postMessage({status:"done",eventId:i,eventType:r,response:e})}))},pu.prototype.postMessage=function(t,e){this.a.postMessage(t,e)},du.prototype.close=function(){for(;0<this.a.length;)yu(this,this.a[0]);this.b=!0},(t=gu.prototype).set=function(n,r){var i,o=!1,s=this;return bu(this).then(function(t){return Iu((t=wu(Eu(i=t,!0))).get(n))}).then(function(t){var e=wu(Eu(i,!0));return t?(t.value=r,Iu(e.put(t))):(s.b++,o=!0,(t={}).fbase_key=n,t.value=r,Iu(e.add(t)))}).then(function(){return s.c[n]=r,Tu(s,n)}).ma(function(){o&&s.b--})},t.get=function(e){return bu(this).then(function(t){return Iu(wu(Eu(t,!1)).get(e))}).then(function(t){return t&&t.value})},t.T=function(e){var n=!1,r=this;return bu(this).then(function(t){return n=!0,r.b++,Iu(wu(Eu(t,!0)).delete(e))}).then(function(){return delete r.c[e],Tu(r,e)}).ma(function(){n&&r.b--})},t.ba=function(t){var n;0==this.a.length&&(Cu(n=this),function e(){n.f=setTimeout(function(){n.i=Su(n).then(function(e){0<e.length&&U(n.a,function(t){t(e)})}).then(function(){e()}).o(function(t){"STOP_EVENT"!=t.message&&e()})},800)}()),this.a.push(t)},t.ha=function(e){G(this.a,function(t){return t==e}),0==this.a.length&&Cu(this)},(t=Nu.prototype).get=function(e){return this.b.then(function(t){return t.get(e)})},t.set=function(e,n){return this.b.then(function(t){return t.set(e,n)})},t.T=function(e){return this.b.then(function(t){return t.T(e)})},t.ba=function(t){this.a.push(t)},t.ha=function(e){G(this.a,function(t){return t==e})},(t=Au.prototype).get=function(t){return we(this.a[t])},t.set=function(t,e){return this.a[t]=e,we()},t.T=function(t){return delete this.a[t],we()},t.ba=function(){},t.ha=function(){},(t=ku.prototype).get=function(t){var e=this;return we().then(function(){return Ar(e.a.getItem(t))})},t.set=function(e,n){var r=this;return we().then(function(){var t=Cr(n);null===t?r.T(e):r.a.setItem(e,t)})},t.T=function(t){var e=this;return we().then(function(){e.a.removeItem(t)})},t.ba=function(t){l.window&&tn(l.window,"storage",t)},t.ha=function(t){l.window&&rn(l.window,"storage",t)},(t=Ru.prototype).get=function(){return we(null)},t.set=function(){return we()},t.T=function(){return we()},t.ba=function(){},t.ha=function(){},(t=Pu.prototype).get=function(t){var e=this;return we().then(function(){return Ar(e.a.getItem(t))})},t.set=function(e,n){var r=this;return we().then(function(){var t=Cr(n);null===t?r.T(e):r.a.setItem(e,t)})},t.T=function(t){var e=this;return we().then(function(){e.a.removeItem(t)})},t.ba=function(){},t.ha=function(){};var Lu,Mu,Fu={F:ku,$a:Pu},Uu={F:ku,$a:Pu},ju={F:uu,$a:Ru},Vu={F:ku,$a:Ru},qu={od:"local",NONE:"none",qd:"session"};function Bu(){var t=!(Or(br())||!hr()),e=Sr(),n=wr();this.m=t,this.h=e,this.l=n,this.a={},t=Lu=Lu||new xu;try{this.g=!tr()&&Lr()||!l.indexedDB?new t.a.F:new Nu(lr()?new Au:new t.a.F)}catch(t){this.g=new Au,this.h=!0}try{this.i=new t.a.$a}catch(t){this.i=new Au}this.u=new Au,this.f=m(this.Vb,this),this.b={}}function Wu(){return Mu=Mu||new Bu}function Gu(t,e){switch(e){case"session":return t.i;case"none":return t.u;default:return t.g}}function Hu(t,e){return"firebase:"+t.name+(e?":"+e:"")}function Ku(t,e,n){return n=Hu(e,n),"local"==e.F&&(t.b[n]=null),Gu(t,e.F).T(n)}function zu(t){t.c&&(clearInterval(t.c),t.c=null)}function Qu(t){this.a=t,this.b=Wu()}(t=Bu.prototype).get=function(t,e){return Gu(this,t.F).get(Hu(t,e))},t.set=function(e,t,n){var r=Hu(e,n),i=this,o=Gu(this,e.F);return o.set(r,t).then(function(){return o.get(r)}).then(function(t){"local"==e.F&&(i.b[r]=t)})},t.addListener=function(t,e,n){var r;t=Hu(t,e),this.l&&(this.b[t]=l.localStorage.getItem(t)),ut(this.a)&&(Gu(this,"local").ba(this.f),this.h||(tr()||!Lr())&&l.indexedDB||!this.l||(zu(r=this),r.c=setInterval(function(){for(var t in r.a){var e=l.localStorage.getItem(t),n=r.b[t];e!=n&&(r.b[t]=e,e=new We({type:"storage",key:t,target:window,oldValue:n,newValue:e,a:!0}),r.Vb(e))}},1e3))),this.a[t]||(this.a[t]=[]),this.a[t].push(n)},t.removeListener=function(t,e,n){t=Hu(t,e),this.a[t]&&(G(this.a[t],function(t){return t==n}),0==this.a[t].length&&delete this.a[t]),ut(this.a)&&(Gu(this,"local").ha(this.f),zu(this))},t.Vb=function(t){if(t&&t.f){var e=t.a.key;if(null==e)for(var n in this.a){var r=this.b[n];void 0===r&&(r=null);var i=l.localStorage.getItem(n);i!==r&&(this.b[n]=i,this.ib(n))}else if(0==e.indexOf("firebase:")&&this.a[e]){if(void 0!==t.a.a?Gu(this,"local").ha(this.f):zu(this),this.m)if(n=l.localStorage.getItem(e),(r=t.a.newValue)!==n)null!==r?l.localStorage.setItem(e,r):l.localStorage.removeItem(e);else if(this.b[e]===r&&void 0===t.a.a)return;var o=this,n=function(){void 0===t.a.a&&o.b[e]===l.localStorage.getItem(e)||(o.b[e]=l.localStorage.getItem(e),o.ib(e))};Bt&&$t&&10==$t&&l.localStorage.getItem(e)!==t.a.newValue&&t.a.newValue!==t.a.oldValue?setTimeout(n,10):n()}}else U(t,m(this.ib,this))},t.ib=function(t){this.a[t]&&U(this.a[t],function(t){t()})};var Yu,Xu={name:"authEvent",F:"local"};function $u(){this.a=Wu()}function Ju(t,e){this.b=Zu,this.f=l.Uint8Array?new Uint8Array(this.b):Array(this.b),this.g=this.c=0,this.a=[],this.i=t,this.h=e,this.l=l.Int32Array?new Int32Array(64):Array(64),void 0===Yu&&(Yu=l.Int32Array?new Int32Array(sc):sc),this.reset()}e(Ju,function(){this.b=-1});for(var Zu=64,tc=Zu-1,ec=[],nc=0;nc<tc;nc++)ec[nc]=0;var rc=H(128,ec);function ic(t){for(var e=t.f,n=t.l,r=0,i=0;i<e.length;)n[r++]=e[i]<<24|e[i+1]<<16|e[i+2]<<8|e[i+3],i=4*r;for(e=16;e<64;e++){i=0|n[e-15],r=0|n[e-2];var o=(0|n[e-16])+((i>>>7|i<<25)^(i>>>18|i<<14)^i>>>3)|0,s=(0|n[e-7])+((r>>>17|r<<15)^(r>>>19|r<<13)^r>>>10)|0;n[e]=o+s|0}r=0|t.a[0],i=0|t.a[1];var a=0|t.a[2],u=0|t.a[3],c=0|t.a[4],h=0|t.a[5],l=0|t.a[6];for(o=0|t.a[7],e=0;e<64;e++){var f=((r>>>2|r<<30)^(r>>>13|r<<19)^(r>>>22|r<<10))+(r&i^r&a^i&a)|0;s=(o=o+((c>>>6|c<<26)^(c>>>11|c<<21)^(c>>>25|c<<7))|0)+((s=(s=c&h^~c&l)+(0|Yu[e])|0)+(0|n[e])|0)|0,o=l,l=h,h=c,c=u+s|0,u=a,a=i,i=r,r=s+f|0}t.a[0]=t.a[0]+r|0,t.a[1]=t.a[1]+i|0,t.a[2]=t.a[2]+a|0,t.a[3]=t.a[3]+u|0,t.a[4]=t.a[4]+c|0,t.a[5]=t.a[5]+h|0,t.a[6]=t.a[6]+l|0,t.a[7]=t.a[7]+o|0}function oc(t,e,n){void 0===n&&(n=e.length);var r=0,i=t.c;if("string"==typeof e)for(;r<n;)t.f[i++]=e.charCodeAt(r++),i==t.b&&(ic(t),i=0);else{if(!d(e))throw Error("message must be string or array");for(;r<n;){var o=e[r++];if(!("number"==typeof o&&0<=o&&o<=255&&o==(0|o)))throw Error("message must be a byte array");t.f[i++]=o,i==t.b&&(ic(t),i=0)}}t.c=i,t.g+=n}Ju.prototype.reset=function(){this.g=this.c=0,this.a=l.Int32Array?new Int32Array(this.h):K(this.h)};var sc=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function ac(){Ju.call(this,8,uc)}e(ac,Ju);var uc=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225];function cc(t,e,n,r,i){this.u=t,this.i=e,this.l=n,this.m=r||null,this.s=i||null,this.h=e+":"+n,this.w=new $u,this.g=new Qu(this.h),this.f=null,this.b=[],this.a=this.c=null}function hc(t){return new w("invalid-cordova-configuration",t)}function lc(t){var e=new ac;oc(e,t),t=[];var n=8*e.g;e.c<56?oc(e,rc,56-e.c):oc(e,rc,e.b-(e.c-56));for(var r=63;56<=r;r--)e.f[r]=255&n,n/=256;for(ic(e),r=n=0;r<e.i;r++)for(var i=24;0<=i;i-=8)t[n++]=e.a[r]>>i&255;return V(t,function(t){return 1<(t=t.toString(16)).length?t:"0"+t}).join("")}function fc(t,e){for(var n=0;n<t.b.length;n++)try{t.b[n](e)}catch(t){}}function pc(a){return a.f||(a.f=a.ka().then(function(){return new de(function(n){function e(r){t=!0,s&&s.cancel(),dc(i).then(function(t){var e,n=o;t&&r&&r.url&&(e=null,-1!=(n=Yi(r.url)).indexOf("/__/auth/callback")&&(e=(e="object"==typeof(e=Ar(On(e=Rn(n),"firebaseError")||null))?E(e):null)?new Ro(t.c,t.b,null,null,e,null,t.S()):new Ro(t.c,t.b,n,t.f,null,null,t.S())),n=e||o),fc(i,n)})}var i,o,t,s,r;a.Ca(function t(e){return n(e),a.Qa(t),!1}),i=a,o=new Ro("unknown",null,null,null,new w("no-auth-event")),t=!1,s=mn(500).then(function(){return dc(i).then(function(){t||fc(i,o)})}),r=l.handleOpenURL,l.handleOpenURL=function(t){if(0==t.toLowerCase().indexOf(_r("BuildInfo.packageName",l).toLowerCase()+"://")&&e({url:t}),"function"==typeof r)try{r(t)}catch(t){console.error(t)}},Lo=Lo||new Do,function(t){var n=Lo;n.a.push(t),n.b||(n.b=function(t){for(var e=0;e<n.a.length;e++)n.a[e](t)},"function"==typeof(t=_r("universalLinks.subscribe",l))&&t(null,n.b))}(e)})})),a.f}function dc(e){var t,n=null;return(t=e.g).b.get(Xu,t.a).then(Po).then(function(t){return n=t,Ku((t=e.g).b,Xu,t.a)}).then(function(){return n})}function vc(t){this.a=t,this.b=Wu()}(t=cc.prototype).ka=function(){return this.Ga?this.Ga:this.Ga=(cr(void 0)?ur().then(function(){return new de(function(t,e){var n=l.document,r=setTimeout(function(){e(Error("Cordova framework is not ready."))},1e3);n.addEventListener("deviceready",function(){clearTimeout(r),t()},!1)})}):Ee(Error("Cordova must run in an Android or iOS file scheme."))).then(function(){if("function"!=typeof _r("universalLinks.subscribe",l))throw hc("cordova-universal-links-plugin-fix is not installed");if(void 0===_r("BuildInfo.packageName",l))throw hc("cordova-plugin-buildinfo is not installed");if("function"!=typeof _r("cordova.plugins.browsertab.openUrl",l))throw hc("cordova-plugin-browsertab is not installed");if("function"!=typeof _r("cordova.InAppBrowser.open",l))throw hc("cordova-plugin-inappbrowser is not installed")},function(){throw new w("cordova-not-ready")})},t.Lb=function(t,e){return e(new w("operation-not-supported-in-this-environment")),we()},t.Jb=function(){return Ee(new w("operation-not-supported-in-this-environment"))},t.Xb=function(){return!1},t.Ub=function(){return!0},t.Qb=function(){return!0},t.Kb=function(t,e,n,r){if(this.c)return Ee(new w("redirect-operation-pending"));var i=this,o=l.document,s=null,a=null,u=null,c=null;return this.c=we().then(function(){return Oo(e),pc(i)}).then(function(){return function(n,t,e,r,i){var o=function(){for(var t=20,e=[];0<t;)e.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),t--;return e.join("")}(),s=new Ro(t,r,null,o,new w("no-auth-event"),null,i),a=_r("BuildInfo.packageName",l);if("string"!=typeof a)throw new w("invalid-cordova-configuration");var u=_r("BuildInfo.displayName",l),c={};if(br().toLowerCase().match(/iphone|ipad|ipod/))c.ibi=a;else{if(!br().toLowerCase().match(/android/))return Ee(new w("operation-not-supported-in-this-environment"));c.apn=a}u&&(c.appDisplayName=u),o=lc(o),c.sessionId=o;var h=au(n.u,n.i,n.l,t,e,null,r,n.m,c,n.s,i);return n.ka().then(function(){var t=n.h;return n.w.a.set(Xu,s.v(),t)}).then(function(){var t=_r("cordova.plugins.browsertab.isAvailable",l);if("function"!=typeof t)throw new w("invalid-cordova-configuration");var e=null;t(function(t){if(t){if("function"!=typeof(e=_r("cordova.plugins.browsertab.openUrl",l)))throw new w("invalid-cordova-configuration");e(h)}else{if("function"!=typeof(e=_r("cordova.InAppBrowser.open",l)))throw new w("invalid-cordova-configuration");t=br(),n.a=e(h,t.match(/(iPad|iPhone|iPod).*OS 7_\d/i)||t.match(/(iPad|iPhone|iPod).*OS 8_\d/i)?"_blank":"_system","location=yes")}})})}(i,t,e,n,r)}).then(function(){return new de(function(e,t){a=function(){var t=_r("cordova.plugins.browsertab.close",l);return e(),"function"==typeof t&&t(),i.a&&"function"==typeof i.a.close&&(i.a.close(),i.a=null),!1},i.Ca(a),u=function(){s=s||mn(2e3).then(function(){t(new w("redirect-cancelled-by-user"))})},c=function(){Dr()&&u()},o.addEventListener("resume",u,!1),br().toLowerCase().match(/android/)||o.addEventListener("visibilitychange",c,!1)}).o(function(t){return dc(i).then(function(){throw t})})}).ma(function(){u&&o.removeEventListener("resume",u,!1),c&&o.removeEventListener("visibilitychange",c,!1),s&&s.cancel(),a&&i.Qa(a),i.c=null})},t.Ca=function(e){this.b.push(e),pc(this).o(function(t){"auth/invalid-cordova-configuration"===t.code&&(t=new Ro("unknown",null,null,null,new w("no-auth-event")),e(t))})},t.Qa=function(e){G(this.b,function(t){return t==e})};var yc={name:"pendingRedirect",F:"session"};function gc(t){return Ku(t.b,yc,t.a)}function mc(t,e,n){this.i={},this.w=0,this.D=t,this.u=e,this.m=n,this.h=[],this.f=!1,this.l=m(this.s,this),this.b=new Pc,this.B=new Fc,this.g=new vc(this.u+":"+this.m),this.c={},this.c.unknown=this.b,this.c.signInViaRedirect=this.b,this.c.linkViaRedirect=this.b,this.c.reauthViaRedirect=this.b,this.c.signInViaPopup=this.B,this.c.linkViaPopup=this.B,this.c.reauthViaPopup=this.B,this.a=bc(this.D,this.u,this.m,I)}function bc(t,e,n,r){var i=Hl.SDK_VERSION||null;return new(cr()?cc:ru)(t,e,n,i,r)}function _c(e){e.f||(e.f=!0,e.a.Ca(e.l));var n=e.a;return e.a.ka().o(function(t){throw e.a==n&&e.reset(),t})}function wc(n){n.a.Ub()&&_c(n).o(function(t){var e=new Ro("unknown",null,null,null,new w("operation-not-supported-in-this-environment"));Nc(t)&&n.s(e)}),n.a.Qb()||Dc(n.b)}function Ec(n,t){var e;B(n.h,t)||n.h.push(t),n.f||(e=n.g).b.get(yc,e.a).then(function(t){return"pending"==t}).then(function(t){t?gc(n.g).then(function(){_c(n).o(function(t){var e=new Ro("unknown",null,null,null,new w("operation-not-supported-in-this-environment"));Nc(t)&&n.s(e)})}):wc(n)}).o(function(){wc(n)})}function Ic(t,e){G(t.h,function(t){return t==e})}mc.prototype.reset=function(){this.f=!1,this.a.Qa(this.l),this.a=bc(this.D,this.u,this.m),this.i={}},mc.prototype.s=function(t){if(!t)throw new w("invalid-auth-event");if(6e5<=_()-this.w&&(this.i={},this.w=0),t&&t.getUid()&&this.i.hasOwnProperty(t.getUid()))return!1;for(var e=!1,n=0;n<this.h.length;n++){var r=this.h[n];if(r.Cb(t.c,t.b)){(e=this.c[t.c])&&(e.h(t,r),t&&(t.f||t.b)&&(this.i[t.getUid()]=!0,this.w=_())),e=!0;break}}return Dc(this.b),e};var Tc=new Pr(2e3,1e4),Sc=new Pr(3e4,6e4);function Cc(t,e,n,r,i,o,s){return t.a.Jb(e,n,r,function(){t.f||(t.f=!0,t.a.Ca(t.l))},function(){t.reset()},i,o,s)}function Nc(t){return!(!t||"auth/cordova-not-ready"!=t.code)}function Ac(e,t,n,r,i){var o,s;return(s=e.g).b.set(yc,"pending",s.a).then(function(){return e.a.Kb(t,n,r,i).o(function(t){if(Nc(t))throw new w("operation-not-supported-in-this-environment");return o=t,gc(e.g).then(function(){throw o})}).then(function(){return e.a.Xb()?new de(function(){}):gc(e.g).then(function(){return e.pa()}).then(function(){}).o(function(){})})})}function kc(t,e,n,r,i){return t.a.Lb(r,function(t){e.la(n,null,t,i)},Tc.get())}mc.prototype.pa=function(){return this.b.pa()};var Oc={};function Rc(t,e,n){var r=e+":"+n;return Oc[r]||(Oc[r]=new mc(t,e,n)),Oc[r]}function Pc(){this.b=null,this.f=[],this.c=[],this.a=null,this.i=this.g=!1}function Dc(t){t.g||(t.g=!0,Mc(t,!1,null,null))}function xc(t){t.g&&!t.i&&Mc(t,!1,null,null)}function Lc(t,e){if(t.b=function(){return we(e)},t.f.length)for(var n=0;n<t.f.length;n++)t.f[n](e)}function Mc(t,e,n,r){e?r?function(t,e){if(t.b=function(){return Ee(e)},t.c.length)for(var n=0;n<t.c.length;n++)t.c[n](e)}(t,r):Lc(t,n):Lc(t,{user:null}),t.f=[],t.c=[]}function Fc(){}function Uc(){this.Bb=!1,Object.defineProperty(this,"appVerificationDisabled",{get:function(){return this.Bb},set:function(t){this.Bb=t},enumerable:!1})}function jc(t,e){this.a=e,Vr(this,"verificationId",t)}function Vc(t,e,n,r){return new No(t).cb(e,n).then(function(t){return new jc(t,r)})}function qc(t){var e=Li(t);if(!(e&&e.exp&&e.auth_time&&e.iat))throw new w("internal-error","An internal error occurred. The token obtained by Firebase appears to be malformed. Please retry the operation.");qr(this,{token:t,expirationTime:xr(1e3*e.exp),authTime:xr(1e3*e.auth_time),issuedAtTime:xr(1e3*e.iat),signInProvider:e.firebase&&e.firebase.sign_in_provider?e.firebase.sign_in_provider:null,signInSecondFactor:e.firebase&&e.firebase.sign_in_second_factor?e.firebase.sign_in_second_factor:null,claims:e})}function Bc(t,e,n){var r=e&&e[Gc];if(!r)throw new w("argument-error","Internal assert: Invalid MultiFactorResolver");this.a=t,this.f=ct(e),this.g=n,this.c=new Xi(null,r),this.b=[];var i=this;U(e[Wc]||[],function(t){(t=Hr(t))&&i.b.push(t)}),Vr(this,"auth",this.a),Vr(this,"session",this.c),Vr(this,"hints",this.b)}Pc.prototype.reset=function(){this.b=null,this.a&&(this.a.cancel(),this.a=null)},Pc.prototype.h=function(t,e){var n,r,i,o;t?(this.reset(),this.g=!0,n=t.c,r=t.b,i=t.a&&"auth/web-storage-unsupported"==t.a.code,o=t.a&&"auth/operation-not-supported-in-this-environment"==t.a.code,this.i=!(!i&&!o),"unknown"!=n||i||o?t.a?(Mc(this,!0,null,t.a),we()):e.Da(n,r)?function(e,t,n){n=n.Da(t.c,t.b);var r=t.g,i=t.f,o=t.i,s=t.S(),a=!!t.c.match(/Redirect$/);n(r,i,s,o).then(function(t){Mc(e,a,t,null)}).o(function(t){Mc(e,a,null,t)})}(this,t,e):Ee(new w("invalid-auth-event")):(Mc(this,!1,null,null),we())):Ee(new w("invalid-auth-event"))},Pc.prototype.pa=function(){var i=this;return new de(function(t,e){var n,r;i.b?i.b().then(t,e):(i.f.push(t),i.c.push(e),n=i,r=new w("timeout"),n.a&&n.a.cancel(),n.a=mn(Sc.get()).then(function(){n.b||(n.g=!0,Mc(n,!0,null,r))}))})},Fc.prototype.h=function(t,e){var n,r,i,o,s,a;t?(n=t.c,r=t.b,t.a?(e.la(t.c,null,t.a,t.b),we()):e.Da(n,r)?(o=e,s=(i=t).b,a=i.c,o.Da(a,s)(i.g,i.f,i.S(),i.i).then(function(t){o.la(a,t,null,s)}).o(function(t){o.la(a,null,t,s)})):Ee(new w("invalid-auth-event"))):Ee(new w("invalid-auth-event"))},jc.prototype.confirm=function(t){return t=Ao(this.verificationId,t),this.a(t)};var Wc="mfaInfo",Gc="mfaPendingCredential";function Hc(t,e,n,r){w.call(this,"multi-factor-auth-required",r,e),this.b=new Bc(t,e,n),Vr(this,"resolver",this.b)}function Kc(t,e,n){if(t&&y(t.serverResponse)&&"auth/multi-factor-auth-required"===t.code)try{return new Hc(e,t.serverResponse,n,t.message)}catch(t){}return null}function zc(){}function Qc(t){Vr(this,"factorId",t.ea),this.a=t}function Yc(t){if(Qc.call(this,t),this.a.ea!=No.PROVIDER_ID)throw new w("argument-error","firebase.auth.PhoneMultiFactorAssertion requires a valid firebase.auth.PhoneAuthCredential")}function Xc(t,e){for(var n in Be.call(this,t),e)this[n]=e[n]}function $c(t,e){this.a=t,this.b=[],this.c=m(this.wc,this),tn(this.a,"userReloaded",this.c);var r=[];e&&e.multiFactor&&e.multiFactor.enrolledFactors&&U(e.multiFactor.enrolledFactors,function(t){var e=null,n={};if(t){t.uid&&(n[Qr]=t.uid),t.displayName&&(n[Kr]=t.displayName),t.enrollmentTime&&(n[zr]=new Date(t.enrollmentTime).toISOString()),t.phoneNumber&&(n[Yr]=t.phoneNumber);try{e=new Xr(n)}catch(t){}t=e}else t=null;t&&r.push(t)}),Jc(this,r)}function Jc(t,e){t.b=e,Vr(t,"enrolledFactors",e)}function Zc(t,e,n){if(this.h=t,this.i=e,this.g=n,this.c=3e4,this.f=96e4,this.b=null,this.a=this.c,this.f<this.c)throw Error("Proactive refresh lower bound greater than upper bound!")}function th(t,e){return e?(t.a=t.c,t.g()):(e=t.a,t.a*=2,t.a>t.f&&(t.a=t.f),e)}function eh(t){this.c=t,this.b=this.a=null}function nh(t){return t.b&&1e3*t.b.c||0}function rh(t,e){var n=e.refreshToken;t.b=xi(e[Ws]||""),t.a=n}function ih(e,t){return r=e.c,i=t,new de(function(e,n){"refresh_token"==i.grant_type&&i.refresh_token||"authorization_code"==i.grant_type&&i.code?Xs(r,r.u+"?key="+encodeURIComponent(r.c),function(t){t?t.error?n(Qa(t)):t.access_token&&t.refresh_token?e(t):n(new w("internal-error")):n(new w("network-request-failed"))},"POST",Wn(i).toString(),r.g,r.m.get()):n(new w("internal-error"))}).then(function(t){return e.b=xi(t.access_token),e.a=t.refresh_token,{accessToken:e.b.toString(),refreshToken:e.a}}).o(function(t){throw"auth/user-token-expired"==t.code&&(e.a=null),t});var r,i}function oh(t,e){this.a=t||null,this.b=e||null,qr(this,{lastSignInTime:xr(e||null),creationTime:xr(t||null)})}function sh(t,e,n,r,i,o){qr(this,{uid:t,displayName:r||null,photoURL:i||null,email:n||null,phoneNumber:o||null,providerId:e})}function ah(t,e,n){var r;this.N=[],this.l=t.apiKey,this.m=t.appName,this.s=t.authDomain||null,t=Hl.SDK_VERSION?mr(Hl.SDK_VERSION):null,this.a=new qs(this.l,N(I),t),this.b=new eh(this.a),dh(this,e[Ws]),rh(this.b,e),Vr(this,"refreshToken",this.b.a),gh(this,n||{}),pn.call(this),this.P=!1,this.s&&Er()&&(this.i=Rc(this.s,this.l,this.m)),this.R=[],this.h=null,this.B=(r=this,new Zc(function(){return r.I(!0)},function(t){return!(!t||"auth/network-request-failed"!=t.code)},function(){var t=nh(r.b)-_()-3e5;return 0<t?t:0})),this.Z=m(this.Ma,this);var i=this;this.oa=null,this.za=function(t){i.va(t.g)},this.aa=null,this.W=[],this.ya=function(t){ch(i,t.c)},this.$=null,this.O=new $c(this,n),Vr(this,"multiFactor",this.O)}function uh(t,e){t.aa&&rn(t.aa,"languageCodeChanged",t.za),(t.aa=e)&&tn(e,"languageCodeChanged",t.za)}function ch(t,e){t.W=e,Ys(t.a,Hl.SDK_VERSION?mr(Hl.SDK_VERSION,t.W):null)}function hh(t,e){t.$&&rn(t.$,"frameworkChanged",t.ya),(t.$=e)&&tn(e,"frameworkChanged",t.ya)}function lh(e){try{return Hl.app(e.m).auth()}catch(t){throw new w("internal-error","No firebase.auth.Auth instance is available for the Firebase App '"+e.m+"'!")}}function fh(t){t.D||t.B.b||(t.B.start(),rn(t,"tokenChanged",t.Z),tn(t,"tokenChanged",t.Z))}function ph(t){rn(t,"tokenChanged",t.Z),t.B.stop()}function dh(t,e){t.xa=e,Vr(t,"_lat",e)}function vh(t){for(var e=[],n=0;n<t.R.length;n++)e.push(t.R[n](t));return Te(e).then(function(){return t})}function yh(t){t.i&&!t.P&&(t.P=!0,Ec(t.i,t))}function gh(t,e){qr(t,{uid:e.uid,displayName:e.displayName||null,photoURL:e.photoURL||null,email:e.email||null,emailVerified:e.emailVerified||!1,phoneNumber:e.phoneNumber||null,isAnonymous:e.isAnonymous||!1,tenantId:e.tenantId||null,metadata:new oh(e.createdAt,e.lastLoginAt),providerData:[]}),t.a.b=t.tenantId}function mh(){}function bh(t){return we().then(function(){if(t.D)throw new w("app-deleted")})}function _h(t){return V(t.providerData,function(t){return t.providerId})}function wh(t,e){e&&(Eh(t,e.providerId),t.providerData.push(e))}function Eh(t,e){G(t.providerData,function(t){return t.providerId==e})}function Ih(t,e,n){("uid"!=e||n)&&t.hasOwnProperty(e)&&Vr(t,e,n)}function Th(e,t){var n,r,i;e!=t&&(qr(e,{uid:t.uid,displayName:t.displayName,photoURL:t.photoURL,email:t.email,emailVerified:t.emailVerified,phoneNumber:t.phoneNumber,isAnonymous:t.isAnonymous,tenantId:t.tenantId,providerData:[]}),t.metadata?Vr(e,"metadata",new oh((i=t.metadata).a,i.b)):Vr(e,"metadata",new oh),U(t.providerData,function(t){wh(e,t)}),n=e.b,r=t.b,n.b=r.b,n.a=r.a,Vr(e,"refreshToken",e.b.a),Jc(e.O,t.O.b))}function Sh(i){return i.I().then(function(t){var e,n,r=i.isAnonymous;return n=t,Ka((e=i).a,Ia,{idToken:n}).then(m(e.Ic,e)).then(function(){return r||Ih(i,"isAnonymous",!1),t})})}function Ch(t,e){e[Ws]&&t.xa!=e[Ws]&&(rh(t.b,e),t.dispatchEvent(new Xc("tokenChanged")),dh(t,e[Ws]),Ih(t,"refreshToken",t.b.a))}function Nh(t,e){return Sh(t).then(function(){if(B(_h(t),e))return vh(t).then(function(){throw new w("provider-already-linked")})})}function Ah(t,e,n){return Br({user:t,credential:ko(e),additionalUserInfo:e=Vi(e),operationType:n})}function kh(t,e){return Ch(t,e),t.reload().then(function(){return t})}function Oh(n,r,t,e,i){if(!Er())return Ee(new w("operation-not-supported-in-this-environment"));if(n.h&&!i)return Ee(n.h);var o=ji(t.providerId),s=kr(n.uid+":::"),a=null;(!Sr()||hr())&&n.s&&t.isOAuthProvider&&(a=au(n.s,n.l,n.m,r,t,null,s,Hl.SDK_VERSION||null,null,null,n.tenantId));var u=or(a,o&&o.ta,o&&o.sa);return e=e().then(function(){if(Ph(n),!i)return n.I().then(function(){})}).then(function(){return Cc(n.i,u,r,t,s,!!a,n.tenantId)}).then(function(){return new de(function(t,e){n.la(r,null,new w("cancelled-popup-request"),n.g||null),n.f=t,n.w=e,n.g=s,n.c=kc(n.i,n,r,u,s)})}).then(function(t){return u&&ir(u),t?Br(t):null}).o(function(t){throw u&&ir(u),t}),Dh(n,e,i)}function Rh(e,t,n,r,i){if(!Er())return Ee(new w("operation-not-supported-in-this-environment"));if(e.h&&!i)return Ee(e.h);var o=null,s=kr(e.uid+":::");return r=r().then(function(){if(Ph(e),!i)return e.I().then(function(){})}).then(function(){return e.fa=s,vh(e)}).then(function(t){return e.ga&&(t=(t=e.ga).b.set(Mh,e.v(),t.a)),t}).then(function(){return Ac(e.i,t,n,s,e.tenantId)}).o(function(t){if(o=t,e.ga)return Fh(e.ga);throw o}).then(function(){if(o)throw o}),Dh(e,r,i)}function Ph(t){if(!t.i||!t.P){if(t.i&&!t.P)throw new w("internal-error");throw new w("auth-domain-config-required")}}function Dh(n,t,e){var r,i,o,s=(i=t,o=e,(r=n).h&&!o?(i.cancel(),Ee(r.h)):i.o(function(t){throw!t||"auth/user-disabled"!=t.code&&"auth/user-token-expired"!=t.code||(r.h||r.dispatchEvent(new Xc("userInvalidated")),r.h=t),t}));return n.N.push(s),s.ma(function(){W(n.N,s)}),s.o(function(t){var e=null;throw t&&"auth/multi-factor-auth-required"===t.code&&(e=Kc(t.v(),lh(n),m(n.hc,n))),e||t})}function xh(t){if(!t.apiKey)return null;var e={apiKey:t.apiKey,authDomain:t.authDomain,appName:t.appName},n={};if(!t.stsTokenManager||!t.stsTokenManager.accessToken)return null;n[Ws]=t.stsTokenManager.accessToken,n.refreshToken=t.stsTokenManager.refreshToken||null;var r=new ah(e,n,t);return t.providerData&&U(t.providerData,function(t){t&&wh(r,Br(t))}),t.redirectEventId&&(r.fa=t.redirectEventId),r}function Lh(t){this.a=t,this.b=Wu()}Bc.prototype.Pc=function(t){var n=this;return t.ob(this.a.b,this.c).then(function(t){var e=ct(n.f);return delete e[Wc],delete e[Gc],lt(e,t),n.g(e)})},e(Hc,w),zc.prototype.ob=function(t,e,n){return e.type==$i?(o=this,s=t,a=n,e.Fa().then(function(t){return t={idToken:t},void 0!==a&&(t.displayName=a),lt(t,{phoneVerificationInfo:Co(o.a)}),Ka(s,wa,t)})):(r=this,i=t,e.Fa().then(function(t){return lt(t={mfaPendingCredential:t},{phoneVerificationInfo:Co(r.a)}),Ka(i,Ea,t)}));var r,i,o,s,a},e(Qc,zc),e(Yc,Qc),e(Xc,Be),(t=$c.prototype).wc=function(t){var e,n;Jc(this,(e=t.ed,n=[],U(e.mfaInfo||[],function(t){(t=Hr(t))&&n.push(t)}),n))},t.Ob=function(){return this.a.I().then(function(t){return new Xi(t,null)})},t.dc=function(e,n){var r=this,i=this.a.a;return this.Ob().then(function(t){return e.ob(i,t,n)}).then(function(t){return Ch(r.a,t),r.a.reload()})},t.$c=function(t){var n=this,r="string"==typeof t?t:t.uid,e=this.a.a;return this.a.I().then(function(t){return Ka(e,Ha,{idToken:t,mfaEnrollmentId:r})}).then(function(t){var e=j(n.b,function(t){return t.uid!=r});return Jc(n,e),Ch(n.a,t),n.a.reload().o(function(t){if("auth/user-token-expired"!=t.code)throw t})})},t.v=function(){return{multiFactor:{enrolledFactors:V(this.b,function(t){return t.v()})}}},Zc.prototype.start=function(){this.a=this.c,function e(n,t){n.stop();n.b=mn(th(n,t)).then(function(){return e=l.document,n=null,Dr()||!e?we():new de(function(t){n=function(){Dr()&&(e.removeEventListener("visibilitychange",n,!1),t())},e.addEventListener("visibilitychange",n,!1)}).o(function(t){throw e.removeEventListener("visibilitychange",n,!1),t});var e,n}).then(function(){return n.h()}).then(function(){e(n,!0)}).o(function(t){n.i(t)&&e(n,!1)})}(this,!0)},Zc.prototype.stop=function(){this.b&&(this.b.cancel(),this.b=null)},eh.prototype.v=function(){return{apiKey:this.c.c,refreshToken:this.a,accessToken:this.b&&this.b.toString(),expirationTime:nh(this)}},eh.prototype.getToken=function(t){return t=!!t,this.b&&!this.a?Ee(new w("user-token-expired")):t||!this.b||_()>nh(this)-3e4?this.a?ih(this,{grant_type:"refresh_token",refresh_token:this.a}):we(null):we({accessToken:this.b.toString(),refreshToken:this.a})},oh.prototype.v=function(){return{lastLoginAt:this.b,createdAt:this.a}},e(ah,pn),ah.prototype.va=function(t){this.oa=t,Qs(this.a,t)},ah.prototype.ja=function(){return this.oa},ah.prototype.Ea=function(){return K(this.W)},ah.prototype.Ma=function(){this.B.b&&(this.B.stop(),this.B.start())},Vr(ah.prototype,"providerId","firebase"),(t=ah.prototype).reload=function(){var t=this;return Dh(this,bh(this).then(function(){return Sh(t).then(function(){return vh(t)}).then(mh)}))},t.mc=function(t){return this.I(t).then(function(t){return new qc(t)})},t.I=function(t){var e=this;return Dh(this,bh(this).then(function(){return e.b.getToken(t)}).then(function(t){if(!t)throw new w("internal-error");return t.accessToken!=e.xa&&(dh(e,t.accessToken),e.dispatchEvent(new Xc("tokenChanged"))),Ih(e,"refreshToken",t.refreshToken),t.accessToken}))},t.Ic=function(t){if(!(t=t.users)||!t.length)throw new w("internal-error");gh(this,{uid:(t=t[0]).localId,displayName:t.displayName,photoURL:t.photoUrl,email:t.email,emailVerified:!!t.emailVerified,phoneNumber:t.phoneNumber,lastLoginAt:t.lastLoginAt,createdAt:t.createdAt,tenantId:t.tenantId});for(var e,n=(e=(e=t).providerUserInfo)&&e.length?V(e,function(t){return new sh(t.rawId,t.providerId,t.email,t.displayName,t.photoUrl,t.phoneNumber)}):[],r=0;r<n.length;r++)wh(this,n[r]);Ih(this,"isAnonymous",!(this.email&&t.passwordHash||this.providerData&&this.providerData.length)),this.dispatchEvent(new Xc("userReloaded",{ed:t}))},t.Jc=function(t){return Ur("firebase.User.prototype.reauthenticateAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.reauthenticateWithCredential instead."),this.pb(t)},t.pb=function(t){var e=this,n=null;return Dh(this,t.c(this.a,this.uid).then(function(t){return Ch(e,t),n=Ah(e,t,"reauthenticate"),e.h=null,e.reload()}).then(function(){return n}),!0)},t.Ac=function(t){return Ur("firebase.User.prototype.linkAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.linkWithCredential instead."),this.mb(t)},t.mb=function(e){var n=this,r=null;return Dh(this,Nh(this,e.providerId).then(function(){return n.I()}).then(function(t){return e.b(n.a,t)}).then(function(t){return r=Ah(n,t,"link"),kh(n,t)}).then(function(){return r}))},t.Bc=function(t,e){var n=this;return Dh(this,Nh(this,"phone").then(function(){return Vc(lh(n),t,e,m(n.mb,n))}))},t.Kc=function(t,e){var n=this;return Dh(this,we().then(function(){return Vc(lh(n),t,e,m(n.pb,n))}),!0)},t.xb=function(e){var n=this;return Dh(this,this.I().then(function(t){return n.a.xb(t,e)}).then(function(t){return Ch(n,t),n.reload()}))},t.cd=function(e){var n=this;return Dh(this,this.I().then(function(t){return e.b(n.a,t)}).then(function(t){return Ch(n,t),n.reload()}))},t.yb=function(e){var n=this;return Dh(this,this.I().then(function(t){return n.a.yb(t,e)}).then(function(t){return Ch(n,t),n.reload()}))},t.zb=function(e){if(void 0===e.displayName&&void 0===e.photoURL)return bh(this);var n=this;return Dh(this,this.I().then(function(t){return n.a.zb(t,{displayName:e.displayName,photoUrl:e.photoURL})}).then(function(t){return Ch(n,t),Ih(n,"displayName",t.displayName||null),Ih(n,"photoURL",t.photoUrl||null),U(n.providerData,function(t){"password"===t.providerId&&(Vr(t,"displayName",n.displayName),Vr(t,"photoURL",n.photoURL))}),vh(n)}).then(mh))},t.ad=function(e){var n=this;return Dh(this,Sh(this).then(function(t){return B(_h(n),e)?Ka(n.a,ma,{idToken:t,deleteProvider:[e]}).then(function(t){var e={};return U(t.providerUserInfo||[],function(t){e[t.providerId]=!0}),U(_h(n),function(t){e[t]||Eh(n,t)}),e[No.PROVIDER_ID]||Vr(n,"phoneNumber",null),vh(n)}):vh(n).then(function(){throw new w("no-such-provider")})}))},t.delete=function(){var e=this;return Dh(this,this.I().then(function(t){return Ka(e.a,ga,{idToken:t})}).then(function(){e.dispatchEvent(new Xc("userDeleted"))})).then(function(){for(var t=0;t<e.N.length;t++)e.N[t].cancel("app-deleted");uh(e,null),hh(e,null),e.N=[],e.D=!0,ph(e),Vr(e,"refreshToken",null),e.i&&Ic(e.i,e)})},t.Cb=function(t,e){return!!("linkViaPopup"==t&&(this.g||null)==e&&this.f||"reauthViaPopup"==t&&(this.g||null)==e&&this.f||"linkViaRedirect"==t&&(this.fa||null)==e||"reauthViaRedirect"==t&&(this.fa||null)==e)},t.la=function(t,e,n,r){"linkViaPopup"!=t&&"reauthViaPopup"!=t||r!=(this.g||null)||(n&&this.w?this.w(n):e&&!n&&this.f&&this.f(e),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.w)},t.Da=function(t,e){return"linkViaPopup"==t&&e==(this.g||null)?m(this.Hb,this):"reauthViaPopup"==t&&e==(this.g||null)?m(this.Ib,this):"linkViaRedirect"==t&&(this.fa||null)==e?m(this.Hb,this):"reauthViaRedirect"==t&&(this.fa||null)==e?m(this.Ib,this):null},t.Cc=function(t){var e=this;return Oh(this,"linkViaPopup",t,function(){return Nh(e,t.providerId).then(function(){return vh(e)})},!1)},t.Lc=function(t){return Oh(this,"reauthViaPopup",t,function(){return we()},!0)},t.Dc=function(t){var e=this;return Rh(this,"linkViaRedirect",t,function(){return Nh(e,t.providerId)},!1)},t.Mc=function(t){return Rh(this,"reauthViaRedirect",t,function(){return we()},!0)},t.Hb=function(e,n,t,r){var i=this;this.c&&(this.c.cancel(),this.c=null);var o=null;return t=this.I().then(function(t){return ha(i.a,{requestUri:e,postBody:r,sessionId:n,idToken:t})}).then(function(t){return o=Ah(i,t,"link"),kh(i,t)}).then(function(){return o}),Dh(this,t)},t.Ib=function(t,e,n,r){var i=this;this.c&&(this.c.cancel(),this.c=null);var o=null;return Dh(this,we().then(function(){return to(la(i.a,{requestUri:t,sessionId:e,postBody:r,tenantId:n}),i.uid)}).then(function(t){return o=Ah(i,t,"reauthenticate"),Ch(i,t),i.h=null,i.reload()}).then(function(){return o}),!0)},t.qb=function(e){var n=this,r=null;return Dh(this,this.I().then(function(t){return r=t,void 0===e||ut(e)?{}:Oi(new _i(e))}).then(function(t){return n.a.qb(r,t)}).then(function(t){if(n.email!=t)return n.reload()}).then(function(){}))},t.Ab=function(e,n){var r=this,i=null;return Dh(this,this.I().then(function(t){return i=t,void 0===n||ut(n)?{}:Oi(new _i(n))}).then(function(t){return r.a.Ab(i,e,t)}).then(function(t){if(r.email!=t)return r.reload()}).then(function(){}))},t.hc=function(t){var e=null,n=this;return Dh(this,t=to(we(t),n.uid).then(function(t){return e=Ah(n,t,"reauthenticate"),Ch(n,t),n.h=null,n.reload()}).then(function(){return e}),!0)},t.toJSON=function(){return this.v()},t.v=function(){var e={uid:this.uid,displayName:this.displayName,photoURL:this.photoURL,email:this.email,emailVerified:this.emailVerified,phoneNumber:this.phoneNumber,isAnonymous:this.isAnonymous,tenantId:this.tenantId,providerData:[],apiKey:this.l,appName:this.m,authDomain:this.s,stsTokenManager:this.b.v(),redirectEventId:this.fa||null};return this.metadata&&lt(e,this.metadata.v()),U(this.providerData,function(t){e.providerData.push(function(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&(n[e]=t[e]);return n}(t))}),lt(e,this.O.v()),e};var Mh={name:"redirectUser",F:"session"};function Fh(t){return Ku(t.b,Mh,t.a)}function Uh(t){var e,n,r,i;this.a=t,this.b=Wu(),this.c=null,this.f=(n=qh("local"),r=qh("session"),i=qh("none"),function(n,r,i){var o=Hu(r,i),s=Gu(n,r.F);return n.get(r,i).then(function(t){var e=null;try{e=Ar(l.localStorage.getItem(o))}catch(t){}if(e&&!t)return l.localStorage.removeItem(o),n.set(r,e,i);e&&t&&"localStorage"!=s.type&&l.localStorage.removeItem(o)})}((e=this).b,n,e.a).then(function(){return e.b.get(r,e.a)}).then(function(t){return t?r:e.b.get(i,e.a).then(function(t){return t?i:e.b.get(n,e.a).then(function(t){return t?n:e.b.get(Vh,e.a).then(function(t){return t?qh(t):n})})})}).then(function(t){return e.c=t,jh(e,t.F)}).o(function(){e.c||(e.c=n)})),this.b.addListener(qh("local"),this.a,m(this.g,this))}function jh(t,e){var n,a,r=[];for(n in qu)qu[n]!==e&&r.push(Ku(t.b,qh(qu[n]),t.a));return r.push(Ku(t.b,Vh,t.a)),a=r,new de(function(n,e){var r=a.length,i=[];if(r)for(var t=function(t,e){r--,i[t]=e,0==r&&n(i)},o=function(t){e(t)},s=0;s<a.length;s++)Ie(a[s],b(t,s),o);else n(i)})}Uh.prototype.g=function(){var e=this,n=qh("local");Hh(this,function(){return we().then(function(){return e.c&&"local"!=e.c.F?e.b.get(n,e.a):null}).then(function(t){if(t)return jh(e,"local").then(function(){e.c=n})})})};var Vh={name:"persistence",F:"session"};function qh(t){return{name:"authUser",F:t}}function Bh(t,e){return Hh(t,function(){return t.b.set(t.c,e.v(),t.a)})}function Wh(t){return Hh(t,function(){return Ku(t.b,t.c,t.a)})}function Gh(t,e){return Hh(t,function(){return t.b.get(t.c,t.a).then(function(t){return t&&e&&(t.authDomain=e),xh(t||{})})})}function Hh(t,e){return t.f=t.f.then(e,e),t.f}function Kh(t){if(this.l=!1,Vr(this,"settings",new Uc),Vr(this,"app",t),!this.app.options||!this.app.options.apiKey)throw new w("invalid-api-key");var n,e,r,i,o,s,a,u;t=Hl.SDK_VERSION?mr(Hl.SDK_VERSION):null,this.b=new qs(this.app.options&&this.app.options.apiKey,N(I),t),this.P=[],this.m=[],this.O=[],this.$b=Hl.INTERNAL.createSubscribe(m(this.xc,this)),this.W=void 0,this.ac=Hl.INTERNAL.createSubscribe(m(this.yc,this)),Jh(this,null),this.i=new Uh(this.app.options.apiKey+":"+this.app.name),this.B=new Lh(this.app.options.apiKey+":"+this.app.name),this.Z=rl(this,(e=(n=this).app.options.authDomain,r=function(e){var t=function(t,e){return t.b.get(Mh,t.a).then(function(t){return t&&e&&(t.authDomain=e),xh(t||{})})}(e.B,e.app.options.authDomain).then(function(t){return(e.D=t)&&(t.ga=e.B),Fh(e.B)});return rl(e,t)}(n).then(function(){return Gh(n.i,e)}).then(function(e){return e?(e.ga=n.B,n.D&&(n.D.fa||null)==(e.fa||null)?e:e.reload().then(function(){return Bh(n.i,e).then(function(){return e})}).o(function(t){return"auth/network-request-failed"==t.code?e:Wh(n.i)})):null}).then(function(t){Jh(n,t||null)}),rl(n,r))),this.h=rl(this,(i=this).Z.then(function(){return Xh(i)}).o(function(){}).then(function(){if(!i.l)return i.oa()}).o(function(){}).then(function(){var t;i.l||(i.aa=!0,(t=i.i).b.addListener(qh("local"),t.a,i.oa))})),this.aa=!1,this.oa=m(this.Xc,this),this.Ma=m(this.ca,this),this.xa=m(this.jc,this),this.ya=m(this.uc,this),this.za=m(this.vc,this),this.a=null,s=(o=this).app.options.authDomain,a=o.app.options.apiKey,s&&Er()&&(o.Zb=o.Z.then(function(){var t;if(!o.l)return o.a=Rc(s,a,o.app.name),Ec(o.a,o),tl(o)&&yh(tl(o)),o.D&&(yh(o.D),(t=o.D).va(o.ja()),uh(t,o),ch(t=o.D,o.N),hh(t,o),o.D=null),o.a})),this.INTERNAL={},this.INTERNAL.delete=m(this.delete,this),this.INTERNAL.logFramework=m(this.Ec,this),this.s=0,pn.call(this),u=this,Object.defineProperty(u,"lc",{get:function(){return this.ja()},set:function(t){this.va(t)},enumerable:!1}),u.$=null,Object.defineProperty(u,"ti",{get:function(){return this.S()},set:function(t){this.ub(t)},enumerable:!1}),u.R=null,this.N=[]}function zh(t){Be.call(this,"languageCodeChanged"),this.g=t}function Qh(t){Be.call(this,"frameworkChanged"),this.c=t}function Yh(t){return t.Zb||Ee(new w("auth-domain-config-required"))}function Xh(t){if(!Er())return Ee(new w("operation-not-supported-in-this-environment"));var e=Yh(t).then(function(){return t.a.pa()}).then(function(t){return t?Br(t):null});return rl(t,e)}function $h(o,s){var a={};return a.apiKey=o.app.options.apiKey,a.authDomain=o.app.options.authDomain,a.appName=o.app.name,o.Z.then(function(){return t=a,e=s,n=o.B,r=o.Ea(),i=new ah(t,e),n&&(i.ga=n),r&&ch(i,r),i.reload().then(function(){return i});var t,e,n,r,i}).then(function(t){return tl(o)&&t.uid==tl(o).uid?Th(tl(o),t):(Jh(o,t),yh(t)),o.ca(t)}).then(function(){nl(o)})}function Jh(t,e){var n,r;tl(t)&&(n=tl(t),r=t.Ma,G(n.R,function(t){return t==r}),rn(tl(t),"tokenChanged",t.xa),rn(tl(t),"userDeleted",t.ya),rn(tl(t),"userInvalidated",t.za),ph(tl(t))),e&&(e.R.push(t.Ma),tn(e,"tokenChanged",t.xa),tn(e,"userDeleted",t.ya),tn(e,"userInvalidated",t.za),0<t.s&&fh(e)),Vr(t,"currentUser",e),e&&(e.va(t.ja()),uh(e,t),ch(e,t.N),hh(e,t))}function Zh(n,t){var e=null,r=null;return rl(n,t.then(function(t){return e=ko(t),r=Vi(t),$h(n,t)},function(t){var e=null;throw t&&"auth/multi-factor-auth-required"===t.code&&(e=Kc(t.v(),n,m(n.ic,n))),e||t}).then(function(){return Br({user:tl(n),credential:e,additionalUserInfo:r,operationType:"signIn"})}))}function tl(t){return t.currentUser}function el(t){return tl(t)&&tl(t)._lat||null}function nl(t){if(t.aa){for(var e=0;e<t.m.length;e++)t.m[e]&&t.m[e](el(t));if(t.W!==t.getUid()&&t.O.length)for(t.W=t.getUid(),e=0;e<t.O.length;e++)t.O[e]&&t.O[e](el(t))}}function rl(t,e){return t.P.push(e),e.ma(function(){W(t.P,e)}),e}function il(){}function ol(){this.a={},this.b=1e12}Uh.prototype.tb=function(e){var n=null,r=this;return function(t){var e=new w("invalid-persistence-type"),n=new w("unsupported-persistence-type");t:{for(r in qu)if(qu[r]==t){var r=!0;break t}r=!1}if(!r||"string"!=typeof t)throw e;switch(fr()){case"ReactNative":if("session"===t)throw n;break;case"Node":if("none"!==t)throw n;break;case"Worker":if("session"===t||!_u()&&"none"!==t)throw n;break;default:if(!wr()&&"none"!==t)throw n}}(e),Hh(this,function(){return e!=r.c.F?r.b.get(r.c,r.a).then(function(t){return n=t,jh(r,e)}).then(function(){if(r.c=qh(e),n)return r.b.set(r.c,n,r.a)}):we()})},e(Kh,pn),e(zh,Be),e(Qh,Be),(t=Kh.prototype).tb=function(t){return t=this.i.tb(t),rl(this,t)},t.va=function(t){this.$===t||this.l||(this.$=t,Qs(this.b,this.$),this.dispatchEvent(new zh(this.ja())))},t.ja=function(){return this.$},t.dd=function(){var t=l.navigator;this.va(t&&(t.languages&&t.languages[0]||t.language||t.userLanguage)||null)},t.Ec=function(t){this.N.push(t),Ys(this.b,Hl.SDK_VERSION?mr(Hl.SDK_VERSION,this.N):null),this.dispatchEvent(new Qh(this.N))},t.Ea=function(){return K(this.N)},t.ub=function(t){this.R===t||this.l||(this.R=t,this.b.b=this.R)},t.S=function(){return this.R},t.toJSON=function(){return{apiKey:this.app.options.apiKey,authDomain:this.app.options.authDomain,appName:this.app.name,currentUser:tl(this)&&tl(this).v()}},t.Cb=function(t,e){switch(t){case"unknown":case"signInViaRedirect":return!0;case"signInViaPopup":return this.g==e&&!!this.f;default:return!1}},t.la=function(t,e,n,r){"signInViaPopup"==t&&this.g==r&&(n&&this.w?this.w(n):e&&!n&&this.f&&this.f(e),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.w)},t.Da=function(t,e){return"signInViaRedirect"==t||"signInViaPopup"==t&&this.g==e&&this.f?m(this.gc,this):null},t.gc=function(t,e,n,r){var i=this,o={requestUri:t,postBody:r,sessionId:e,tenantId:n};return this.c&&(this.c.cancel(),this.c=null),i.Z.then(function(){return Zh(i,ca(i.b,o))})},t.Vc=function(e){if(!Er())return Ee(new w("operation-not-supported-in-this-environment"));var n=this,t=ji(e.providerId),r=kr(),i=null;(!Sr()||hr())&&this.app.options.authDomain&&e.isOAuthProvider&&(i=au(this.app.options.authDomain,this.app.options.apiKey,this.app.name,"signInViaPopup",e,null,r,Hl.SDK_VERSION||null,null,null,this.S()));var o=or(i,t&&t.ta,t&&t.sa);return rl(this,t=Yh(this).then(function(t){return Cc(t,o,"signInViaPopup",e,r,!!i,n.S())}).then(function(){return new de(function(t,e){n.la("signInViaPopup",null,new w("cancelled-popup-request"),n.g),n.f=t,n.w=e,n.g=r,n.c=kc(n.a,n,"signInViaPopup",o,r)})}).then(function(t){return o&&ir(o),t?Br(t):null}).o(function(t){throw o&&ir(o),t}))},t.Wc=function(t){if(!Er())return Ee(new w("operation-not-supported-in-this-environment"));var e=this;return rl(this,Yh(this).then(function(){return Hh(t=e.i,function(){return t.b.set(Vh,t.c.F,t.a)});var t}).then(function(){return Ac(e.a,"signInViaRedirect",t,void 0,e.S())}))},t.pa=function(){var e=this;return Xh(this).then(function(t){return e.a&&xc(e.a.b),t}).o(function(t){throw e.a&&xc(e.a.b),t})},t.bd=function(t){if(!t)return Ee(new w("null-user"));if(this.R!=t.tenantId)return Ee(new w("tenant-id-mismatch"));var e=this,n={};n.apiKey=this.app.options.apiKey,n.authDomain=this.app.options.authDomain,n.appName=this.app.name;var r,i,o,s,a,u,c=(r=t,i=n,o=e.B,s=e.Ea(),a=r.b,(u={})[Ws]=a.b&&a.b.toString(),u.refreshToken=a.a,i=new ah(i||{apiKey:r.l,authDomain:r.s,appName:r.m},u),o&&(i.ga=o),s&&ch(i,s),Th(i,r),i);return rl(this,this.h.then(function(){if(e.app.options.apiKey!=t.l)return c.reload()}).then(function(){return tl(e)&&t.uid==tl(e).uid?(Th(tl(e),t),e.ca(t)):(Jh(e,c),yh(c),e.ca(c))}).then(function(){nl(e)}))},t.wb=function(){var t=this,e=this.h.then(function(){return t.a&&xc(t.a.b),tl(t)?(Jh(t,null),Wh(t.i).then(function(){nl(t)})):we()});return rl(this,e)},t.Xc=function(){var r=this;return Gh(this.i,this.app.options.authDomain).then(function(t){if(!r.l){var e,n;if((n=tl(r)&&t)&&(n=tl(r).uid,e=t.uid,n=null!=n&&""!==n&&null!=e&&""!==e&&n==e),n)return Th(tl(r),t),tl(r).I();(tl(r)||t)&&(Jh(r,t),t&&(yh(t),t.ga=r.B),r.a&&Ec(r.a,r),nl(r))}})},t.ca=function(t){return Bh(this.i,t)},t.jc=function(){nl(this),this.ca(tl(this))},t.uc=function(){this.wb()},t.vc=function(){this.wb()},t.ic=function(t){var e=this;return this.h.then(function(){return Zh(e,we(t))})},t.xc=function(t){var e=this;this.addAuthTokenListener(function(){t.next(tl(e))})},t.yc=function(t){var e,n,r=this;n=function(){t.next(tl(r))},(e=this).O.push(n),rl(e,e.h.then(function(){!e.l&&B(e.O,n)&&e.W!==e.getUid()&&(e.W=e.getUid(),n(el(e)))}))},t.Gc=function(t,e,n){var r=this;return this.aa&&Promise.resolve().then(function(){"function"==typeof t?t(tl(r)):"function"==typeof t.next&&t.next(tl(r))}),this.$b(t,e,n)},t.Fc=function(t,e,n){var r=this;return this.aa&&Promise.resolve().then(function(){r.W=r.getUid(),"function"==typeof t?t(tl(r)):"function"==typeof t.next&&t.next(tl(r))}),this.ac(t,e,n)},t.kc=function(t){var e=this,n=this.h.then(function(){return tl(e)?tl(e).I(t).then(function(t){return{accessToken:t}}):null});return rl(this,n)},t.Rc=function(t){var n=this;return this.h.then(function(){return Zh(n,Ka(n.b,Va,{token:t}))}).then(function(t){var e=t.user;return Ih(e,"isAnonymous",!1),n.ca(e),t})},t.Sc=function(t,e){var n=this;return this.h.then(function(){return Zh(n,Ka(n.b,qa,{email:t,password:e}))})},t.cc=function(t,e){var n=this;return this.h.then(function(){return Zh(n,Ka(n.b,va,{email:t,password:e}))})},t.Ya=function(t){var e=this;return this.h.then(function(){return Zh(e,t.ia(e.b))})},t.Qc=function(t){return Ur("firebase.auth.Auth.prototype.signInAndRetrieveDataWithCredential is deprecated. Please use firebase.auth.Auth.prototype.signInWithCredential instead."),this.Ya(t)},t.vb=function(){var n=this;return this.h.then(function(){var t=tl(n);if(t&&t.isAnonymous){var e=Br({providerId:null,isNewUser:!1});return Br({user:t,credential:null,additionalUserInfo:e,operationType:"signIn"})}return Zh(n,n.b.vb()).then(function(t){var e=t.user;return Ih(e,"isAnonymous",!0),n.ca(e),t})})},t.getUid=function(){return tl(this)&&tl(this).uid||null},t.bc=function(t){this.addAuthTokenListener(t),this.s++,0<this.s&&tl(this)&&fh(tl(this))},t.Nc=function(e){var n=this;U(this.m,function(t){t==e&&n.s--}),this.s<0&&(this.s=0),0==this.s&&tl(this)&&ph(tl(this)),this.removeAuthTokenListener(e)},t.addAuthTokenListener=function(t){var e=this;this.m.push(t),rl(this,this.h.then(function(){e.l||B(e.m,t)&&t(el(e))}))},t.removeAuthTokenListener=function(e){G(this.m,function(t){return t==e})},t.delete=function(){this.l=!0;for(var t=0;t<this.P.length;t++)this.P[t].cancel("app-deleted");return this.P=[],this.i&&(t=this.i).b.removeListener(qh("local"),t.a,this.oa),this.a&&(Ic(this.a,this),xc(this.a.b)),Promise.resolve()},t.fc=function(t){return rl(this,Ka(this.b,ya,{identifier:t,continueUri:Ir()?er():"http://localhost"}).then(function(t){return t.signinMethods||[]}))},t.zc=function(t){return!!Io(t)},t.sb=function(e,n){var r=this;return rl(this,we().then(function(){var t=new _i(n);if(!t.c)throw new w("argument-error",Ii+" must be true when sending sign in link to email");return Oi(t)}).then(function(t){return r.b.sb(e,t)}).then(function(){}))},t.fd=function(t){return this.Pa(t).then(function(t){return t.data.email})},t.jb=function(t,e){return rl(this,this.b.jb(t,e).then(function(){}))},t.Pa=function(t){return rl(this,this.b.Pa(t).then(function(t){return new $r(t)}))},t.fb=function(t){return rl(this,this.b.fb(t).then(function(){}))},t.rb=function(e,t){var n=this;return rl(this,we().then(function(){return void 0===t||ut(t)?{}:Oi(new _i(t))}).then(function(t){return n.b.rb(e,t)}).then(function(){}))},t.Uc=function(t,e){return rl(this,Vc(this,t,e,m(this.Ya,this)))},t.Tc=function(n,r){var i=this;return rl(this,we().then(function(){var t=r||er(),e=Eo(n,t);if(!(t=Io(t)))throw new w("argument-error","Invalid email link!");if(t.tenantId!==i.S())throw new w("tenant-id-mismatch");return i.Ya(e)}))},il.prototype.render=function(){},il.prototype.reset=function(){},il.prototype.getResponse=function(){},il.prototype.execute=function(){};var sl=null;function al(t,e){return(e=ul(e))&&t.a[e]||null}function ul(t){return(t=void 0===t?1e12:t)?t.toString():null}function cl(t,e){this.g=!1,this.c=e,this.a=this.b=null,this.h="invisible"!==this.c.size,this.f=ee(t);var n=this;this.i=function(){n.execute()},this.h?this.execute():tn(this.f,"click",this.i)}function hl(t){if(t.g)throw Error("reCAPTCHA mock was already deleted!")}function ll(){}function fl(){}ol.prototype.render=function(t,e){return this.a[this.b.toString()]=new cl(t,e),this.b++},ol.prototype.reset=function(t){var e=al(this,t);t=ul(t),e&&t&&(e.delete(),delete this.a[t])},ol.prototype.getResponse=function(t){return(t=al(this,t))?t.getResponse():null},ol.prototype.execute=function(t){(t=al(this,t))&&t.execute()},cl.prototype.getResponse=function(){return hl(this),this.b},cl.prototype.execute=function(){hl(this);var n=this;this.a||(this.a=setTimeout(function(){n.b=function(){for(var t=50,e=[];0<t;)e.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),t--;return e.join("")}();var t=n.c.callback,e=n.c["expired-callback"];if(t)try{t(n.b)}catch(t){}n.a=setTimeout(function(){if(n.a=null,n.b=null,e)try{e()}catch(t){}n.h&&n.execute()},6e4)},500))},cl.prototype.delete=function(){hl(this),this.g=!0,clearTimeout(this.a),this.a=null,rn(this.f,"click",this.i)},Vr(ll,"FACTOR_ID","phone"),fl.prototype.g=function(){return we(sl=sl||new ol)},fl.prototype.c=function(){};var pl=null;function dl(){this.b=l.grecaptcha?1/0:0,this.f=null,this.a="__rcb"+Math.floor(1e6*Math.random()).toString()}var vl=new pt(yt,"https://www.google.com/recaptcha/api.js?onload=%{onload}&render=explicit&hl=%{hl}"),yl=new Pr(3e4,6e4);dl.prototype.g=function(i){var o=this;return new de(function(t,e){var r=setTimeout(function(){e(new w("network-request-failed"))},yl.get());!l.grecaptcha||i!==o.f&&!o.b?(l[o.a]=function(){var n;l.grecaptcha?(o.f=i,n=l.grecaptcha.render,l.grecaptcha.render=function(t,e){return t=n(t,e),o.b++,t},clearTimeout(r),t(l.grecaptcha)):(clearTimeout(r),e(new w("internal-error"))),delete l[o.a]},we(xs(_t(vl,{onload:o.a,hl:i||""}))).o(function(){clearTimeout(r),e(new w("internal-error","Unable to load external reCAPTCHA dependencies!"))})):(clearTimeout(r),t(l.grecaptcha))})},dl.prototype.c=function(){this.b--};var gl=null;function ml(t,e,n,r,i,o,s){if(Vr(this,"type","recaptcha"),this.c=this.f=null,this.D=!1,this.u=e,this.g=null,s=s?pl=pl||new fl:gl=gl||new dl,this.m=s,this.a=n||{theme:"light",type:"image"},this.h=[],this.a[wl])throw new w("argument-error","sitekey should not be provided for reCAPTCHA as one is automatically provisioned for the current project.");if(this.i="invisible"===this.a[El],!l.document)throw new w("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment with DOM support.");if(!ee(e)||!this.i&&ee(e).hasChildNodes())throw new w("argument-error","reCAPTCHA container is either not found or already contains inner elements!");this.s=new qs(t,o||null,i||null),this.w=r||function(){return null};var a=this;this.l=[];var u=this.a[bl];this.a[bl]=function(t){var e;Il(a,t),"function"==typeof u?u(t):"string"!=typeof u||"function"==typeof(e=_r(u,l))&&e(t)};var c=this.a[_l];this.a[_l]=function(){var t;Il(a,null),"function"==typeof c?c():"string"!=typeof c||"function"==typeof(t=_r(c,l))&&t()}}var bl="callback",_l="expired-callback",wl="sitekey",El="size";function Il(t,e){for(var n=0;n<t.l.length;n++)try{t.l[n](e)}catch(t){}}function Tl(t,e){return t.h.push(e),e.ma(function(){W(t.h,e)}),e}function Sl(t){if(t.D)throw new w("internal-error","RecaptchaVerifier instance has been destroyed.")}function Cl(t,e,n){var r=!1;try{this.b=n||Hl.app()}catch(t){throw new w("argument-error","No firebase.app.App instance is currently initialized.")}if(!this.b.options||!this.b.options.apiKey)throw new w("invalid-api-key");n=this.b.options.apiKey;var i=this,o=null;try{o=this.b.auth().Ea()}catch(t){}try{r=this.b.auth().settings.appVerificationDisabledForTesting}catch(t){}o=Hl.SDK_VERSION?mr(Hl.SDK_VERSION,o):null,ml.call(this,n,t,e,function(){try{var e=i.b.auth().ja()}catch(t){e=null}return e},o,N(I),r)}function Nl(t,e,n,r){t:{n=Array.prototype.slice.call(n);for(var i=0,o=!1,s=0;s<e.length;s++)if(e[s].optional)o=!0;else{if(o)throw new w("internal-error","Argument validator encountered a required argument after an optional argument.");i++}if(o=e.length,n.length<i||o<n.length)r="Expected "+(i==o?1==i?"1 argument":i+" arguments":i+"-"+o+" arguments")+" but got "+n.length+".";else{for(i=0;i<n.length;i++)if(o=e[i].optional&&void 0===n[i],!e[i].K(n[i])&&!o){if(e=e[i],i<0||i>=Al.length)throw new w("internal-error","Argument validator received an unsupported number of arguments.");n=Al[i],r=(r?"":n+" argument ")+(e.name?'"'+e.name+'" ':"")+"must be "+e.J+".";break t}r=null}}if(r)throw new w("argument-error",t+" failed: "+r)}(t=ml.prototype).Ga=function(){var e=this;return this.f?this.f:this.f=Tl(this,we().then(function(){if(Ir()&&!lr())return ur();throw new w("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment.")}).then(function(){return e.m.g(e.w())}).then(function(t){return e.g=t,Ka(e.s,ka,{})}).then(function(t){e.a[wl]=t.recaptchaSiteKey}).o(function(t){throw e.f=null,t}))},t.render=function(){Sl(this);var n=this;return Tl(this,this.Ga().then(function(){var t,e;return null===n.c&&(e=n.u,n.i||(t=ee(e),e=se("DIV"),t.appendChild(e)),n.c=n.g.render(e,n.a)),n.c}))},t.verify=function(){Sl(this);var i=this;return Tl(this,this.render().then(function(e){return new de(function(n){var r,t=i.g.getResponse(e);t?n(t):(r=function(t){var e;t&&(e=r,G(i.l,function(t){return t==e}),n(t))},i.l.push(r),i.i&&i.g.execute(i.c))})}))},t.reset=function(){Sl(this),null!==this.c&&this.g.reset(this.c)},t.clear=function(){Sl(this),this.D=!0,this.m.c();for(var t,e=0;e<this.h.length;e++)this.h[e].cancel("RecaptchaVerifier instance has been destroyed.");if(!this.i){e=ee(this.u);for(;t=e.firstChild;)e.removeChild(t)}},e(Cl,ml);var Al="First Second Third Fourth Fifth Sixth Seventh Eighth Ninth".split(" ");function kl(t,e){return{name:t||"",J:"a valid string",optional:!!e,K:function(t){return"string"==typeof t}}}function Ol(t,e){return{name:t||"",J:"a boolean",optional:!!e,K:function(t){return"boolean"==typeof t}}}function Rl(t,e){return{name:t||"",J:"a valid object",optional:!!e,K:y}}function Pl(t,e){return{name:t||"",J:"a function",optional:!!e,K:function(t){return"function"==typeof t}}}function Dl(t,e){return{name:t||"",J:"null",optional:!!e,K:function(t){return null===t}}}function xl(n){return{name:n?n+"Credential":"credential",J:n?"a valid "+n+" credential":"a valid credential",optional:!1,K:function(t){if(!t)return!1;var e=!n||t.providerId===n;return!(!t.ia||!e)}}}function Ll(){return{name:"multiFactorAssertion",J:"a valid multiFactorAssertion",optional:!1,K:function(t){return!!t&&!!t.ob}}}function Ml(){return{name:"authProvider",J:"a valid Auth provider",optional:!1,K:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}}function Fl(t,e){return y(t)&&"string"==typeof t.type&&t.type===e&&"function"==typeof t.Fa}function Ul(t){return y(t)&&"string"==typeof t.uid}function jl(){return{name:"applicationVerifier",J:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,K:function(t){return!(!t||"string"!=typeof t.type||"function"!=typeof t.verify)}}}function Vl(e,n,t,r){return{name:t||"",J:e.J+" or "+n.J,optional:!!r,K:function(t){return e.K(t)||n.K(t)}}}function ql(t,e){for(var n in e){var r=e[n].name;t[r]=Gl(r,t[n],e[n].j)}}function Bl(t,e){for(var n in e){var r=e[n].name;r!==n&&Object.defineProperty(t,r,{get:b(function(t){return this[t]},n),set:b(function(t,e,n,r){Nl(t,[n],[r],!0),this[e]=r},r,n,e[n].gb),enumerable:!0})}}function Wl(t,e,n,r){t[e]=Gl(e,n,r)}function Gl(t,e,n){function r(){var t=Array.prototype.slice.call(arguments);return Nl(s,n,t),e.apply(this,t)}if(!n)return e;var i,o,s=(o=(o=t).split("."))[o.length-1];for(i in e)r[i]=e[i];for(i in e.prototype)r.prototype[i]=e.prototype[i];return r}ql(Kh.prototype,{fb:{name:"applyActionCode",j:[kl("code")]},Pa:{name:"checkActionCode",j:[kl("code")]},jb:{name:"confirmPasswordReset",j:[kl("code"),kl("newPassword")]},cc:{name:"createUserWithEmailAndPassword",j:[kl("email"),kl("password")]},fc:{name:"fetchSignInMethodsForEmail",j:[kl("email")]},pa:{name:"getRedirectResult",j:[]},zc:{name:"isSignInWithEmailLink",j:[kl("emailLink")]},Fc:{name:"onAuthStateChanged",j:[Vl(Rl(),Pl(),"nextOrObserver"),Pl("opt_error",!0),Pl("opt_completed",!0)]},Gc:{name:"onIdTokenChanged",j:[Vl(Rl(),Pl(),"nextOrObserver"),Pl("opt_error",!0),Pl("opt_completed",!0)]},rb:{name:"sendPasswordResetEmail",j:[kl("email"),Vl(Rl("opt_actionCodeSettings",!0),Dl(null,!0),"opt_actionCodeSettings",!0)]},sb:{name:"sendSignInLinkToEmail",j:[kl("email"),Rl("actionCodeSettings")]},tb:{name:"setPersistence",j:[kl("persistence")]},Qc:{name:"signInAndRetrieveDataWithCredential",j:[xl()]},vb:{name:"signInAnonymously",j:[]},Ya:{name:"signInWithCredential",j:[xl()]},Rc:{name:"signInWithCustomToken",j:[kl("token")]},Sc:{name:"signInWithEmailAndPassword",j:[kl("email"),kl("password")]},Tc:{name:"signInWithEmailLink",j:[kl("email"),kl("emailLink",!0)]},Uc:{name:"signInWithPhoneNumber",j:[kl("phoneNumber"),jl()]},Vc:{name:"signInWithPopup",j:[Ml()]},Wc:{name:"signInWithRedirect",j:[Ml()]},bd:{name:"updateCurrentUser",j:[Vl({name:"user",J:"an instance of Firebase User",optional:!1,K:function(t){return!!(t&&t instanceof ah)}},Dl(),"user")]},wb:{name:"signOut",j:[]},toJSON:{name:"toJSON",j:[kl(null,!0)]},dd:{name:"useDeviceLanguage",j:[]},fd:{name:"verifyPasswordResetCode",j:[kl("code")]}}),Bl(Kh.prototype,{lc:{name:"languageCode",gb:Vl(kl(),Dl(),"languageCode")},ti:{name:"tenantId",gb:Vl(kl(),Dl(),"tenantId")}}),(Kh.Persistence=qu).LOCAL="local",Kh.Persistence.SESSION="session",Kh.Persistence.NONE="none",ql(ah.prototype,{delete:{name:"delete",j:[]},mc:{name:"getIdTokenResult",j:[Ol("opt_forceRefresh",!0)]},I:{name:"getIdToken",j:[Ol("opt_forceRefresh",!0)]},Ac:{name:"linkAndRetrieveDataWithCredential",j:[xl()]},mb:{name:"linkWithCredential",j:[xl()]},Bc:{name:"linkWithPhoneNumber",j:[kl("phoneNumber"),jl()]},Cc:{name:"linkWithPopup",j:[Ml()]},Dc:{name:"linkWithRedirect",j:[Ml()]},Jc:{name:"reauthenticateAndRetrieveDataWithCredential",j:[xl()]},pb:{name:"reauthenticateWithCredential",j:[xl()]},Kc:{name:"reauthenticateWithPhoneNumber",j:[kl("phoneNumber"),jl()]},Lc:{name:"reauthenticateWithPopup",j:[Ml()]},Mc:{name:"reauthenticateWithRedirect",j:[Ml()]},reload:{name:"reload",j:[]},qb:{name:"sendEmailVerification",j:[Vl(Rl("opt_actionCodeSettings",!0),Dl(null,!0),"opt_actionCodeSettings",!0)]},toJSON:{name:"toJSON",j:[kl(null,!0)]},ad:{name:"unlink",j:[kl("provider")]},xb:{name:"updateEmail",j:[kl("email")]},yb:{name:"updatePassword",j:[kl("password")]},cd:{name:"updatePhoneNumber",j:[xl("phone")]},zb:{name:"updateProfile",j:[Rl("profile")]},Ab:{name:"verifyBeforeUpdateEmail",j:[kl("email"),Vl(Rl("opt_actionCodeSettings",!0),Dl(null,!0),"opt_actionCodeSettings",!0)]}}),ql(ol.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),ql(il.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),ql(de.prototype,{ma:{name:"finally"},o:{name:"catch"},then:{name:"then"}}),Bl(Uc.prototype,{appVerificationDisabled:{name:"appVerificationDisabledForTesting",gb:Ol("appVerificationDisabledForTesting")}}),ql(jc.prototype,{confirm:{name:"confirm",j:[kl("verificationCode")]}}),Wl(Zi,"fromJSON",function(t){t="string"==typeof t?JSON.parse(t):t;for(var e,n=[so,_o,So,ro],r=0;r<n.length;r++)if(e=n[r](t))return e;return null},[Vl(kl(),Rl(),"json")]),Wl(wo,"credential",function(t,e){return new bo(t,e)},[kl("email"),kl("password")]),ql(bo.prototype,{v:{name:"toJSON",j:[kl(null,!0)]}}),ql(ho.prototype,{Aa:{name:"addScope",j:[kl("scope")]},Ia:{name:"setCustomParameters",j:[Rl("customOAuthParameters")]}}),Wl(ho,"credential",lo,[Vl(kl(),Rl(),"token")]),Wl(wo,"credentialWithLink",Eo,[kl("email"),kl("emailLink")]),ql(fo.prototype,{Aa:{name:"addScope",j:[kl("scope")]},Ia:{name:"setCustomParameters",j:[Rl("customOAuthParameters")]}}),Wl(fo,"credential",po,[Vl(kl(),Rl(),"token")]),ql(vo.prototype,{Aa:{name:"addScope",j:[kl("scope")]},Ia:{name:"setCustomParameters",j:[Rl("customOAuthParameters")]}}),Wl(vo,"credential",yo,[Vl(kl(),Vl(Rl(),Dl()),"idToken"),Vl(kl(),Dl(),"accessToken",!0)]),ql(go.prototype,{Ia:{name:"setCustomParameters",j:[Rl("customOAuthParameters")]}}),Wl(go,"credential",mo,[Vl(kl(),Rl(),"token"),kl("secret",!0)]),ql(co.prototype,{Aa:{name:"addScope",j:[kl("scope")]},credential:{name:"credential",j:[Vl(kl(),Vl(Rl(),Dl()),"optionsOrIdToken"),Vl(kl(),Dl(),"accessToken",!0)]},Ia:{name:"setCustomParameters",j:[Rl("customOAuthParameters")]}}),ql(io.prototype,{v:{name:"toJSON",j:[kl(null,!0)]}}),ql(eo.prototype,{v:{name:"toJSON",j:[kl(null,!0)]}}),Wl(No,"credential",Ao,[kl("verificationId"),kl("verificationCode")]),ql(No.prototype,{cb:{name:"verifyPhoneNumber",j:[Vl(kl(),{name:"phoneInfoOptions",J:"valid phone info options",optional:!1,K:function(t){return!!t&&(t.session&&t.phoneNumber?Fl(t.session,$i)&&"string"==typeof t.phoneNumber:t.session&&t.multiFactorHint?Fl(t.session,Ji)&&Ul(t.multiFactorHint):t.session&&t.multiFactorUid?Fl(t.session,Ji)&&"string"==typeof t.multiFactorUid:!!t.phoneNumber&&"string"==typeof t.phoneNumber)}},"phoneInfoOptions"),jl()]}}),ql(To.prototype,{v:{name:"toJSON",j:[kl(null,!0)]}}),ql(w.prototype,{toJSON:{name:"toJSON",j:[kl(null,!0)]}}),ql(Fo.prototype,{toJSON:{name:"toJSON",j:[kl(null,!0)]}}),ql(Mo.prototype,{toJSON:{name:"toJSON",j:[kl(null,!0)]}}),ql(Hc.prototype,{toJSON:{name:"toJSON",j:[kl(null,!0)]}}),ql(Bc.prototype,{Pc:{name:"resolveSignIn",j:[Ll()]}}),ql($c.prototype,{Ob:{name:"getSession",j:[]},dc:{name:"enroll",j:[Ll(),kl("displayName",!0)]},$c:{name:"unenroll",j:[Vl({name:"multiFactorInfo",J:"a valid multiFactorInfo",optional:!1,K:Ul},kl(),"multiFactorInfoIdentifier")]}}),ql(Cl.prototype,{clear:{name:"clear",j:[]},render:{name:"render",j:[]},verify:{name:"verify",j:[]}}),Wl(li,"parseLink",bi,[kl("link")]),Wl(ll,"assertion",function(t){return new Yc(t)},[xl("phone")]),function(){if(void 0===Hl||!Hl.INTERNAL||!Hl.INTERNAL.registerComponent)throw Error("Cannot find the firebase namespace; be sure to include firebase-app.js before this library.");var t={ActionCodeInfo:{Operation:{EMAIL_SIGNIN:Zr,PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:Jr,VERIFY_AND_CHANGE_EMAIL:ti,VERIFY_EMAIL:"VERIFY_EMAIL"}},Auth:Kh,AuthCredential:Zi,Error:w};Wl(t,"EmailAuthProvider",wo,[]),Wl(t,"FacebookAuthProvider",ho,[]),Wl(t,"GithubAuthProvider",fo,[]),Wl(t,"GoogleAuthProvider",vo,[]),Wl(t,"TwitterAuthProvider",go,[]),Wl(t,"OAuthProvider",co,[kl("providerId")]),Wl(t,"SAMLAuthProvider",uo,[kl("providerId")]),Wl(t,"PhoneAuthProvider",No,[{name:"auth",J:"an instance of Firebase Auth",optional:!0,K:function(t){return!!(t&&t instanceof Kh)}}]),Wl(t,"RecaptchaVerifier",Cl,[Vl(kl(),{name:"",J:"an HTML element",optional:!1,K:function(t){return!!(t&&t instanceof Element)}},"recaptchaContainer"),Rl("recaptchaParameters",!0),{name:"app",J:"an instance of Firebase App",optional:!0,K:function(t){return!!(t&&t instanceof Hl.app.App)}}]),Wl(t,"ActionCodeURL",li,[]),Wl(t,"PhoneMultiFactorGenerator",ll,[]),Hl.INTERNAL.registerComponent({name:"auth",instanceFactory:function(t){return new Kh(t=t.getProvider("app").getImmediate())},multipleInstances:!1,serviceProps:t,instantiationMode:"LAZY",type:"PUBLIC"}),Hl.INTERNAL.registerComponent({name:"auth-internal",instanceFactory:function(t){return{getUid:m((t=t.getProvider("auth").getImmediate()).getUid,t),getToken:m(t.kc,t),addAuthTokenListener:m(t.bc,t),removeAuthTokenListener:m(t.Nc,t)}},multipleInstances:!1,instantiationMode:"LAZY",type:"PRIVATE"}),Hl.registerVersion("@firebase/auth","0.14.9"),Hl.INTERNAL.extendNamespace({User:ah})}()}).apply("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});var Ou=(Ru.prototype.set=function(t,e){null==e?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),Ta(e))},Ru.prototype.get=function(t){var e=this.domStorage_.getItem(this.prefixedName_(t));return null==e?null:Ia(e)},Ru.prototype.remove=function(t){this.domStorage_.removeItem(this.prefixedName_(t))},Ru.prototype.prefixedName_=function(t){return this.prefix_+t},Ru.prototype.toString=function(){return this.domStorage_.toString()},Ru);function Ru(t){this.domStorage_=t,this.prefix_="firebase:"}var Pu=(Du.prototype.set=function(t,e){null==e?delete this.cache_[t]:this.cache_[t]=e},Du.prototype.get=function(t){return Ca(this.cache_,t)?this.cache_[t]:null},Du.prototype.remove=function(t){delete this.cache_[t]},Du);function Du(){this.cache_={},this.isInMemoryStorage=!0}function xu(t){try{if("undefined"!=typeof window&&void 0!==window[t]){var e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new Ou(e)}}catch(t){}return new Pu}function Lu(t){var e=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i,o=t.charCodeAt(r);55296<=o&&o<=56319&&(i=o-55296,ea(++r<t.length,"Surrogate pair missing trail surrogate."),o=65536+(i<<10)+(t.charCodeAt(r)-56320)),o<128?e[n++]=o:(o<2048?e[n++]=o>>6|192:(o<65536?e[n++]=o>>12|224:(e[n++]=o>>18|240,e[n++]=o>>12&63|128),e[n++]=o>>6&63|128),e[n++]=63&o|128)}return e}(t),n=new Oa;n.update(e);var r=n.digest();return ra.encodeByteArray(r)}function Mu(t,e){ea(!e||!0===t||!1===t,"Can't turn on custom loggers persistently."),!0===t?(zu.logLevel=eu.VERBOSE,Xu=zu.log.bind(zu),e&&Ku.set("logging_enabled",!0)):"function"==typeof t?Xu=t:(Xu=null,Ku.remove("logging_enabled"))}function Fu(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE INTERNAL ERROR: "+Yu.apply(void 0,Xs(t));zu.error(n)}function Uu(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE FATAL ERROR: "+Yu.apply(void 0,Xs(t));throw zu.error(n),new Error(n)}function ju(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE WARNING: "+Yu.apply(void 0,Xs(t));zu.warn(n)}function Vu(t){return"number"==typeof t&&(t!=t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)}function qu(t,e){return t===e?0:t<e?-1:1}function Bu(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+Ta(e))}function Wu(t,e){var n=t.length;if(n<=e)return[t];for(var r=[],i=0;i<n;i+=e)n<i+e?r.push(t.substring(i,n)):r.push(t.substring(i,i+e));return r}var Gu,Hu=xu("localStorage"),Ku=xu("sessionStorage"),zu=new cu("@firebase/database"),Qu=(Gu=1,function(){return Gu++}),Yu=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n="",r=0;r<t.length;r++){var i=t[r];Array.isArray(i)||i&&"object"==typeof i&&"number"==typeof i.length?n+=Yu.apply(null,i):n+="object"==typeof i?Ta(i):i,n+=" "}return n},Xu=null,$u=!0,Ju=function(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];!0===$u&&($u=!1,null===Xu&&!0===Ku.get("logging_enabled")&&Mu(!0)),Xu&&(t=Yu.apply(null,e),Xu(t))},Zu=function(n){return function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];Ju.apply(void 0,Xs([n],t))}},tc="[MIN_NAME]",ec="[MAX_NAME]",nc=function(t,e){if(t===e)return 0;if(t===tc||e===ec)return-1;if(e===tc||t===ec)return 1;var n=cc(t),r=cc(e);return null!==n?null!==r?n-r==0?t.length-e.length:n-r:-1:null===r&&t<e?-1:1},rc=function(t){if("object"!=typeof t||null===t)return Ta(t);var e,n=[];for(e in t)n.push(e);n.sort();for(var r="{",i=0;i<n.length;i++)0!==i&&(r+=","),r+=Ta(n[i]),r+=":",r+=rc(t[n[i]]);return r+="}"};function ic(t,e){for(var n in t)t.hasOwnProperty(n)&&e(n,t[n])}function oc(t){var e,n,r,i;ea(!Vu(t),"Invalid JSON number"),0===t?e=1/t==-1/(r=n=0)?1:0:(e=t<0,r=(t=Math.abs(t))>=Math.pow(2,-1022)?(n=(i=Math.min(Math.floor(Math.log(t)/Math.LN2),1023))+1023,Math.round(t*Math.pow(2,52-i)-Math.pow(2,52))):(n=0,Math.round(t/Math.pow(2,-1074))));for(var o=[],s=52;s;--s)o.push(r%2?1:0),r=Math.floor(r/2);for(s=11;s;--s)o.push(n%2?1:0),n=Math.floor(n/2);o.push(e?1:0),o.reverse();var a=o.join(""),u="";for(s=0;s<64;s+=8){var c=parseInt(a.substr(s,8),2).toString(16);1===c.length&&(c="0"+c),u+=c}return u.toLowerCase()}function sc(t){try{t()}catch(e){setTimeout(function(){var t=e.stack||"";throw ju("Exception was thrown by user callback.",t),e},Math.floor(0))}}function ac(t,e){var n=setTimeout(t,e);return"object"==typeof n&&n.unref&&n.unref(),n}var uc=new RegExp("^-?(0*)\\d{1,10}$"),cc=function(t){if(uc.test(t)){var e=Number(t);if(-2147483648<=e&&e<=2147483647)return e}return null},hc=(Object.defineProperty(lc,"Empty",{get:function(){return new lc("")},enumerable:!1,configurable:!0}),lc.prototype.getFront=function(){return this.pieceNum_>=this.pieces_.length?null:this.pieces_[this.pieceNum_]},lc.prototype.getLength=function(){return this.pieces_.length-this.pieceNum_},lc.prototype.popFront=function(){var t=this.pieceNum_;return t<this.pieces_.length&&t++,new lc(this.pieces_,t)},lc.prototype.getBack=function(){return this.pieceNum_<this.pieces_.length?this.pieces_[this.pieces_.length-1]:null},lc.prototype.toString=function(){for(var t="",e=this.pieceNum_;e<this.pieces_.length;e++)""!==this.pieces_[e]&&(t+="/"+this.pieces_[e]);return t||"/"},lc.prototype.toUrlEncodedString=function(){for(var t="",e=this.pieceNum_;e<this.pieces_.length;e++)""!==this.pieces_[e]&&(t+="/"+encodeURIComponent(String(this.pieces_[e])));return t||"/"},lc.prototype.slice=function(t){return void 0===t&&(t=0),this.pieces_.slice(this.pieceNum_+t)},lc.prototype.parent=function(){if(this.pieceNum_>=this.pieces_.length)return null;for(var t=[],e=this.pieceNum_;e<this.pieces_.length-1;e++)t.push(this.pieces_[e]);return new lc(t,0)},lc.prototype.child=function(t){for(var e=[],n=this.pieceNum_;n<this.pieces_.length;n++)e.push(this.pieces_[n]);if(t instanceof lc)for(n=t.pieceNum_;n<t.pieces_.length;n++)e.push(t.pieces_[n]);else for(var r=t.split("/"),n=0;n<r.length;n++)0<r[n].length&&e.push(r[n]);return new lc(e,0)},lc.prototype.isEmpty=function(){return this.pieceNum_>=this.pieces_.length},lc.relativePath=function(t,e){var n=t.getFront(),r=e.getFront();if(null===n)return e;if(n===r)return lc.relativePath(t.popFront(),e.popFront());throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")},lc.comparePaths=function(t,e){for(var n=t.slice(),r=e.slice(),i=0;i<n.length&&i<r.length;i++){var o=nc(n[i],r[i]);if(0!==o)return o}return n.length===r.length?0:n.length<r.length?-1:1},lc.prototype.equals=function(t){if(this.getLength()!==t.getLength())return!1;for(var e=this.pieceNum_,n=t.pieceNum_;e<=this.pieces_.length;e++,n++)if(this.pieces_[e]!==t.pieces_[n])return!1;return!0},lc.prototype.contains=function(t){var e=this.pieceNum_,n=t.pieceNum_;if(this.getLength()>t.getLength())return!1;for(;e<this.pieces_.length;){if(this.pieces_[e]!==t.pieces_[n])return!1;++e,++n}return!0},lc);function lc(t,e){if(void 0===e){this.pieces_=t.split("/");for(var n=0,r=0;r<this.pieces_.length;r++)0<this.pieces_[r].length&&(this.pieces_[n]=this.pieces_[r],n++);this.pieces_.length=n,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=e}var fc=(Object.defineProperty(pc,"MAX_PATH_DEPTH",{get:function(){return 32},enumerable:!1,configurable:!0}),Object.defineProperty(pc,"MAX_PATH_LENGTH_BYTES",{get:function(){return 768},enumerable:!1,configurable:!0}),pc.prototype.push=function(t){0<this.parts_.length&&(this.byteLength_+=1),this.parts_.push(t),this.byteLength_+=Va(t),this.checkValid_()},pc.prototype.pop=function(){var t=this.parts_.pop();this.byteLength_-=Va(t),0<this.parts_.length&&--this.byteLength_},pc.prototype.checkValid_=function(){if(this.byteLength_>pc.MAX_PATH_LENGTH_BYTES)throw new Error(this.errorPrefix_+"has a key path longer than "+pc.MAX_PATH_LENGTH_BYTES+" bytes ("+this.byteLength_+").");if(this.parts_.length>pc.MAX_PATH_DEPTH)throw new Error(this.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+pc.MAX_PATH_DEPTH+") or object contains a cycle "+this.toErrorString())},pc.prototype.toErrorString=function(){return 0===this.parts_.length?"":"in property '"+this.parts_.join(".")+"'"},pc);function pc(t,e){this.errorPrefix_=e,this.parts_=t.slice(),this.byteLength_=Math.max(1,this.parts_.length);for(var n=0;n<this.parts_.length;n++)this.byteLength_+=Va(this.parts_[n]);this.checkValid_()}var dc="firebaseio.com",vc="websocket",yc="long_polling",gc=(mc.prototype.needsQueryParam=function(){return this.host!==this.internalHost||this.isCustomHost()||this.includeNamespaceInQueryParams},mc.prototype.isCacheableHost=function(){return"s-"===this.internalHost.substr(0,2)},mc.prototype.isDemoHost=function(){return"firebaseio-demo.com"===this.domain},mc.prototype.isCustomHost=function(){return"firebaseio.com"!==this.domain&&"firebaseio-demo.com"!==this.domain},mc.prototype.updateHost=function(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&Hu.set("host:"+this.host,this.internalHost))},mc.prototype.connectionURL=function(t,e){var n;if(ea("string"==typeof t,"typeof type must == string"),ea("object"==typeof e,"typeof params must == object"),t===vc)n=(this.secure?"wss://":"ws://")+this.internalHost+"/.ws?";else{if(t!==yc)throw new Error("Unknown connection type: "+t);n=(this.secure?"https://":"http://")+this.internalHost+"/.lp?"}this.needsQueryParam()&&(e.ns=this.namespace);var r=[];return ic(e,function(t,e){r.push(t+"="+e)}),n+r.join("&")},mc.prototype.toString=function(){var t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t},mc.prototype.toURLString=function(){return(this.secure?"https://":"http://")+this.host},mc);function mc(t,e,n,r,i,o,s){void 0===i&&(i=!1),void 0===o&&(o=""),void 0===s&&(s=!1),this.secure=e,this.namespace=n,this.webSocketOnly=r,this.nodeAdmin=i,this.persistenceKey=o,this.includeNamespaceInQueryParams=s,this.host=t.toLowerCase(),this.domain=this.host.substr(this.host.indexOf(".")+1),this.internalHost=Hu.get("host:"+t)||this.host}function bc(t,e){var n=Rc(t),r=n.namespace;"firebase.com"===n.domain&&Uu(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),r&&"undefined"!==r||"localhost"===n.domain||Uu("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&ju("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().");var i="ws"===n.scheme||"wss"===n.scheme;return{repoInfo:new gc(n.host,n.secure,r,e,i,"",r!==n.subdomain),path:new hc(n.pathString)}}function _c(t){return"string"==typeof t&&0!==t.length&&!Pc.test(t)}function wc(t){return"string"==typeof t&&0!==t.length&&!Dc.test(t)}function Ec(t){return null===t||"string"==typeof t||"number"==typeof t&&!Vu(t)||t&&"object"==typeof t&&Ca(t,".sv")}function Ic(t,e,n,r,i){i&&void 0===n||Lc(Fa(t,e,i),n,r)}function Tc(t,e,n,r,i){if(!i||void 0!==n){var o=Fa(t,e,i);if(!n||"object"!=typeof n||Array.isArray(n))throw new Error(o+" must be an object containing the children to replace.");var s=[];ic(n,function(t,e){var n=new hc(t);if(Lc(o,e,r.child(n)),".priority"===n.getBack()&&!Ec(e))throw new Error(o+"contains an invalid value for '"+n.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");s.push(n)}),function(t,e){for(var n,r=0;r<e.length;r++)for(var i=(n=e[r]).slice(),o=0;o<i.length;o++)if((".priority"!==i[o]||o!==i.length-1)&&!_c(i[o]))throw new Error(t+"contains an invalid key ("+i[o]+") in path "+n.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');e.sort(hc.comparePaths);var s=null;for(r=0;r<e.length;r++){if(n=e[r],null!==s&&s.contains(n))throw new Error(t+"contains a path "+s.toString()+" that is ancestor of another path "+n.toString());s=n}}(o,s)}}function Sc(t,e,n,r){if(!r||void 0!==n){if(Vu(n))throw new Error(Fa(t,e,r)+"is "+n.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!Ec(n))throw new Error(Fa(t,e,r)+"must be a valid Firebase priority (a string, finite number, server value, or null).")}}function Cc(t,e,n,r){if(!r||void 0!==n)switch(n){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error(Fa(t,e,r)+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}function Nc(t,e,n,r){if(!(r&&void 0===n||_c(n)))throw new Error(Fa(t,e,r)+'was an invalid key = "'+n+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')}function Ac(t,e,n,r){if(!(r&&void 0===n||wc(n)))throw new Error(Fa(t,e,r)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')}function kc(t,e){if(".info"===e.getFront())throw new Error(t+" failed = Can't modify data under /.info/")}function Oc(t,e,n){var r,i=n.path.toString();if("string"!=typeof n.repoInfo.host||0===n.repoInfo.host.length||!_c(n.repoInfo.namespace)&&"localhost"!==n.repoInfo.host.split(":")[0]||0!==i.length&&(r=(r=i)&&r.replace(/^\/*\.info(\/|$)/,"/"),!wc(r)))throw new Error(Fa(t,e,!1)+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')}var Rc=function(t){var e,n,r,i,o,s,a="",u="",c="",h="",l="",f=!0,p="https",d=443;return"string"==typeof t&&(0<=(i=t.indexOf("//"))&&(p=t.substring(0,i-1),t=t.substring(i+2)),-1===(e=t.indexOf("/"))&&(e=t.length),-1===(n=t.indexOf("?"))&&(n=t.length),a=t.substring(0,Math.min(e,n)),e<n&&(h=function(t){for(var e="",n=t.split("/"),r=0;r<n.length;r++)if(0<n[r].length){var i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(t){}e+="/"+i}return e}(t.substring(e,n))),r=function(t){var e,n,r={};"?"===t.charAt(0)&&(t=t.substring(1));try{for(var i=Qs(t.split("&")),o=i.next();!o.done;o=i.next()){var s,a=o.value;0!==a.length&&(2===(s=a.split("=")).length?r[decodeURIComponent(s[0])]=decodeURIComponent(s[1]):ju("Invalid query segment '"+a+"' in query '"+t+"'"))}}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}(t.substring(Math.min(t.length,n))),0<=(i=a.indexOf(":"))?(f="https"===p||"wss"===p,d=parseInt(a.substring(i+1),10)):i=a.length,"localhost"===(o=a.slice(0,i)).toLowerCase()?u="localhost":o.split(".").length<=2?u=o:(s=a.indexOf("."),c=a.substring(0,s).toLowerCase(),u=a.substring(s+1),l=c),"ns"in r&&(l=r.ns)),{host:a,port:d,domain:u,subdomain:c,secure:f,scheme:p,pathString:h,namespace:l}},Pc=/[\[\].#$\/\u0000-\u001F\u007F]/,Dc=/[\[\].#$\u0000-\u001F\u007F]/,xc=10485760,Lc=function(n,t,e){var r=e instanceof hc?new fc(e,n):e;if(void 0===t)throw new Error(n+"contains undefined "+r.toErrorString());if("function"==typeof t)throw new Error(n+"contains a function "+r.toErrorString()+" with contents = "+t.toString());if(Vu(t))throw new Error(n+"contains "+t.toString()+" "+r.toErrorString());if("string"==typeof t&&t.length>xc/3&&Va(t)>xc)throw new Error(n+"contains a string greater than "+xc+" utf8 bytes "+r.toErrorString()+" ('"+t.substring(0,50)+"...')");if(t&&"object"==typeof t){var i=!1,o=!1;if(ic(t,function(t,e){if(".value"===t)i=!0;else if(".priority"!==t&&".sv"!==t&&(o=!0,!_c(t)))throw new Error(n+" contains an invalid key ("+t+") "+r.toErrorString()+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');r.push(t),Lc(n,e,r),r.pop()}),i&&o)throw new Error(n+' contains ".value" child '+r.toErrorString()+" in addition to actual children.")}},Mc=(Fc.prototype.cancel=function(t){Ma("OnDisconnect.cancel",0,1,arguments.length),Ua("OnDisconnect.cancel",1,t,!0);var e=new sa;return this.repo_.onDisconnectCancel(this.path_,e.wrapCallback(t)),e.promise},Fc.prototype.remove=function(t){Ma("OnDisconnect.remove",0,1,arguments.length),kc("OnDisconnect.remove",this.path_),Ua("OnDisconnect.remove",1,t,!0);var e=new sa;return this.repo_.onDisconnectSet(this.path_,null,e.wrapCallback(t)),e.promise},Fc.prototype.set=function(t,e){Ma("OnDisconnect.set",1,2,arguments.length),kc("OnDisconnect.set",this.path_),Ic("OnDisconnect.set",1,t,this.path_,!1),Ua("OnDisconnect.set",2,e,!0);var n=new sa;return this.repo_.onDisconnectSet(this.path_,t,n.wrapCallback(e)),n.promise},Fc.prototype.setWithPriority=function(t,e,n){Ma("OnDisconnect.setWithPriority",2,3,arguments.length),kc("OnDisconnect.setWithPriority",this.path_),Ic("OnDisconnect.setWithPriority",1,t,this.path_,!1),Sc("OnDisconnect.setWithPriority",2,e,!1),Ua("OnDisconnect.setWithPriority",3,n,!0);var r=new sa;return this.repo_.onDisconnectSetWithPriority(this.path_,t,e,r.wrapCallback(n)),r.promise},Fc.prototype.update=function(t,e){if(Ma("OnDisconnect.update",1,2,arguments.length),kc("OnDisconnect.update",this.path_),Array.isArray(t)){for(var n={},r=0;r<t.length;++r)n[""+r]=t[r];t=n,ju("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Tc("OnDisconnect.update",1,t,this.path_,!1),Ua("OnDisconnect.update",2,e,!0);var i=new sa;return this.repo_.onDisconnectUpdate(this.path_,t,i.wrapCallback(e)),i.promise},Fc);function Fc(t,e){this.repo_=t,this.path_=e}var Uc=(jc.prototype.toJSON=function(){return Ma("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}},jc);function jc(t,e){this.committed=t,this.snapshot=e}var Vc,qc,Bc,Wc=(Vc="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",qc=0,Bc=[],function(t){var e=t===qc;qc=t;for(var n=new Array(8),r=7;0<=r;r--)n[r]=Vc.charAt(t%64),t=Math.floor(t/64);ea(0===t,"Cannot push at time == 0");var i=n.join("");if(e){for(r=11;0<=r&&63===Bc[r];r--)Bc[r]=0;Bc[r]++}else for(r=0;r<12;r++)Bc[r]=Math.floor(64*Math.random());for(r=0;r<12;r++)i+=Vc.charAt(Bc[r]);return ea(20===i.length,"nextPushId: Length should be 20."),i}),Gc=(Hc.Wrap=function(t,e){return new Hc(t,e)},Hc);function Hc(t,e){this.name=t,this.node=e}var Kc,zc=(Qc.prototype.getCompare=function(){return this.compare.bind(this)},Qc.prototype.indexedValueChanged=function(t,e){var n=new Gc(tc,t),r=new Gc(tc,e);return 0!==this.compare(n,r)},Qc.prototype.minPost=function(){return Gc.MIN},Qc);function Qc(){}var Yc,Xc=(Gs($c,Yc=zc),Object.defineProperty($c,"__EMPTY_NODE",{get:function(){return Kc},set:function(t){Kc=t},enumerable:!1,configurable:!0}),$c.prototype.compare=function(t,e){return nc(t.name,e.name)},$c.prototype.isDefinedOn=function(t){throw na("KeyIndex.isDefinedOn not expected to be called.")},$c.prototype.indexedValueChanged=function(t,e){return!1},$c.prototype.minPost=function(){return Gc.MIN},$c.prototype.maxPost=function(){return new Gc(ec,Kc)},$c.prototype.makePost=function(t,e){return ea("string"==typeof t,"KeyIndex indexValue must always be a string."),new Gc(t,Kc)},$c.prototype.toString=function(){return".key"},$c);function $c(){return null!==Yc&&Yc.apply(this,arguments)||this}var Jc,Zc=new Xc;function th(t){return"number"==typeof t?"number:"+oc(t):"string:"+t}var eh,nh,rh,ih,oh=function(t){var e;t.isLeafNode()?(e=t.val(),ea("string"==typeof e||"number"==typeof e||"object"==typeof e&&Ca(e,".sv"),"Priority must be a string or number.")):ea(t===Jc||t.isEmpty(),"priority of unexpected type."),ea(t===Jc||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")},sh=(Object.defineProperty(ah,"__childrenNodeConstructor",{get:function(){return eh},set:function(t){eh=t},enumerable:!1,configurable:!0}),ah.prototype.isLeafNode=function(){return!0},ah.prototype.getPriority=function(){return this.priorityNode_},ah.prototype.updatePriority=function(t){return new ah(this.value_,t)},ah.prototype.getImmediateChild=function(t){return".priority"===t?this.priorityNode_:ah.__childrenNodeConstructor.EMPTY_NODE},ah.prototype.getChild=function(t){return t.isEmpty()?this:".priority"===t.getFront()?this.priorityNode_:ah.__childrenNodeConstructor.EMPTY_NODE},ah.prototype.hasChild=function(){return!1},ah.prototype.getPredecessorChildName=function(t,e){return null},ah.prototype.updateImmediateChild=function(t,e){return".priority"===t?this.updatePriority(e):e.isEmpty()&&".priority"!==t?this:ah.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,e).updatePriority(this.priorityNode_)},ah.prototype.updateChild=function(t,e){var n=t.getFront();return null===n?e:e.isEmpty()&&".priority"!==n?this:(ea(".priority"!==n||1===t.getLength(),".priority must be the last token in a path"),this.updateImmediateChild(n,ah.__childrenNodeConstructor.EMPTY_NODE.updateChild(t.popFront(),e)))},ah.prototype.isEmpty=function(){return!1},ah.prototype.numChildren=function(){return 0},ah.prototype.forEachChild=function(t,e){return!1},ah.prototype.val=function(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()},ah.prototype.hash=function(){var t,e;return null===this.lazyHash_&&(t="",this.priorityNode_.isEmpty()||(t+="priority:"+th(this.priorityNode_.val())+":"),t+=(e=typeof this.value_)+":",t+="number"==e?oc(this.value_):this.value_,this.lazyHash_=Lu(t)),this.lazyHash_},ah.prototype.getValue=function(){return this.value_},ah.prototype.compareTo=function(t){return t===ah.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof ah.__childrenNodeConstructor?-1:(ea(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))},ah.prototype.compareToLeafNode_=function(t){var e=typeof t.value_,n=typeof this.value_,r=ah.VALUE_TYPE_ORDER.indexOf(e),i=ah.VALUE_TYPE_ORDER.indexOf(n);return ea(0<=r,"Unknown leaf type: "+e),ea(0<=i,"Unknown leaf type: "+n),r===i?"object"==n?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:i-r},ah.prototype.withIndex=function(){return this},ah.prototype.isIndexed=function(){return!0},ah.prototype.equals=function(t){return t===this||!!t.isLeafNode()&&(this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_))},ah.VALUE_TYPE_ORDER=["object","boolean","number","string"],ah);function ah(t,e){void 0===e&&(e=ah.__childrenNodeConstructor.EMPTY_NODE),this.value_=t,this.priorityNode_=e,this.lazyHash_=null,ea(void 0!==this.value_&&null!==this.value_,"LeafNode shouldn't be created with null/undefined value."),oh(this.priorityNode_)}function uh(){return null!==ih&&ih.apply(this,arguments)||this}var ch=new(Gs(uh,ih=zc),uh.prototype.compare=function(t,e){var n=t.node.getPriority(),r=e.node.getPriority(),i=n.compareTo(r);return 0===i?nc(t.name,e.name):i},uh.prototype.isDefinedOn=function(t){return!t.getPriority().isEmpty()},uh.prototype.indexedValueChanged=function(t,e){return!t.getPriority().equals(e.getPriority())},uh.prototype.minPost=function(){return Gc.MIN},uh.prototype.maxPost=function(){return new Gc(ec,new sh("[PRIORITY-POST]",rh))},uh.prototype.makePost=function(t,e){var n=nh(t);return new Gc(e,new sh("[PRIORITY-POST]",n))},uh.prototype.toString=function(){return".priority"},uh),hh=(lh.prototype.getNext=function(){if(0===this.nodeStack_.length)return null;var t=this.nodeStack_.pop(),e=this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value};if(this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return e},lh.prototype.hasNext=function(){return 0<this.nodeStack_.length},lh.prototype.peek=function(){if(0===this.nodeStack_.length)return null;var t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}},lh);function lh(t,e,n,r,i){void 0===i&&(i=null),this.isReverse_=r,this.resultGenerator_=i,this.nodeStack_=[];for(var o=1;!t.isEmpty();)if(o=e?n(t.key,e):1,r&&(o*=-1),o<0)t=this.isReverse_?t.left:t.right;else{if(0===o){this.nodeStack_.push(t);break}this.nodeStack_.push(t),t=this.isReverse_?t.right:t.left}}var fh=(ph.prototype.copy=function(t,e,n,r,i){return new ph(null!=t?t:this.key,null!=e?e:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)},ph.prototype.count=function(){return this.left.count()+1+this.right.count()},ph.prototype.isEmpty=function(){return!1},ph.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)},ph.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},ph.prototype.min_=function(){return this.left.isEmpty()?this:this.left.min_()},ph.prototype.minKey=function(){return this.min_().key},ph.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},ph.prototype.insert=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n))).fixUp_()},ph.prototype.removeMin_=function(){if(this.left.isEmpty())return yh.EMPTY_NODE;var t=this;return t.left.isRed_()||t.left.left.isRed_()||(t=t.moveRedLeft_()),(t=t.copy(null,null,null,t.left.removeMin_(),null)).fixUp_()},ph.prototype.remove=function(t,e){var n,r=this;if(e(t,r.key)<0)r.left.isEmpty()||r.left.isRed_()||r.left.left.isRed_()||(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(t,e),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),r.right.isEmpty()||r.right.isRed_()||r.right.left.isRed_()||(r=r.moveRedRight_()),0===e(t,r.key)){if(r.right.isEmpty())return yh.EMPTY_NODE;n=r.right.min_(),r=r.copy(n.key,n.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(t,e))}return r.fixUp_()},ph.prototype.isRed_=function(){return this.color},ph.prototype.fixUp_=function(){var t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t},ph.prototype.moveRedLeft_=function(){var t=this.colorFlip_();return t.right.left.isRed_()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight_())).rotateLeft_()).colorFlip_()),t},ph.prototype.moveRedRight_=function(){var t=this.colorFlip_();return t.left.left.isRed_()&&(t=(t=t.rotateRight_()).colorFlip_()),t},ph.prototype.rotateLeft_=function(){var t=this.copy(null,null,ph.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)},ph.prototype.rotateRight_=function(){var t=this.copy(null,null,ph.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)},ph.prototype.colorFlip_=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},ph.prototype.checkMaxDepth_=function(){var t=this.check_();return Math.pow(2,t)<=this.count()+1},ph.prototype.check_=function(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");var t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)},ph.RED=!0,ph.BLACK=!1,ph);function ph(t,e,n,r,i){this.key=t,this.value=e,this.color=null!=n?n:ph.RED,this.left=null!=r?r:yh.EMPTY_NODE,this.right=null!=i?i:yh.EMPTY_NODE}var dh=(vh.prototype.copy=function(t,e,n,r,i){return this},vh.prototype.insert=function(t,e,n){return new fh(t,e,null)},vh.prototype.remove=function(t,e){return this},vh.prototype.count=function(){return 0},vh.prototype.isEmpty=function(){return!0},vh.prototype.inorderTraversal=function(t){return!1},vh.prototype.reverseTraversal=function(t){return!1},vh.prototype.minKey=function(){return null},vh.prototype.maxKey=function(){return null},vh.prototype.check_=function(){return 0},vh.prototype.isRed_=function(){return!1},vh);function vh(){}var yh=(gh.prototype.insert=function(t,e){return new gh(this.comparator_,this.root_.insert(t,e,this.comparator_).copy(null,null,fh.BLACK,null,null))},gh.prototype.remove=function(t){return new gh(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,fh.BLACK,null,null))},gh.prototype.get=function(t){for(var e,n=this.root_;!n.isEmpty();){if(0===(e=this.comparator_(t,n.key)))return n.value;e<0?n=n.left:0<e&&(n=n.right)}return null},gh.prototype.getPredecessorKey=function(t){for(var e,n=this.root_,r=null;!n.isEmpty();){if(0===(e=this.comparator_(t,n.key))){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}e<0?n=n.left:0<e&&(n=(r=n).right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")},gh.prototype.isEmpty=function(){return this.root_.isEmpty()},gh.prototype.count=function(){return this.root_.count()},gh.prototype.minKey=function(){return this.root_.minKey()},gh.prototype.maxKey=function(){return this.root_.maxKey()},gh.prototype.inorderTraversal=function(t){return this.root_.inorderTraversal(t)},gh.prototype.reverseTraversal=function(t){return this.root_.reverseTraversal(t)},gh.prototype.getIterator=function(t){return new hh(this.root_,null,this.comparator_,!1,t)},gh.prototype.getIteratorFrom=function(t,e){return new hh(this.root_,t,this.comparator_,!1,e)},gh.prototype.getReverseIteratorFrom=function(t,e){return new hh(this.root_,t,this.comparator_,!0,e)},gh.prototype.getReverseIterator=function(t){return new hh(this.root_,null,this.comparator_,!0,t)},gh.EMPTY_NODE=new dh,gh);function gh(t,e){void 0===e&&(e=gh.EMPTY_NODE),this.comparator_=t,this.root_=e}var mh=Math.log(2),bh=(_h.prototype.nextBitIsOne=function(){var t=!(this.bits_&1<<this.current_);return this.current_--,t},_h);function _h(t){var e;this.count=(e=t+1,parseInt(Math.log(e)/mh,10)),this.current_=this.count-1;var n,r=(n=this.count,parseInt(Array(n+1).join("1"),2));this.bits_=t+1&r}var wh,Eh,Ih=function(c,t,h,e){c.sort(t);var l=function(t,e){var n=e-t;if(0==n)return null;if(1==n)return s=c[t],a=h?h(s):s,new fh(a,s.node,fh.BLACK,null,null);var r=parseInt(n/2,10)+t,i=l(t,r),o=l(r+1,e),s=c[r],a=h?h(s):s;return new fh(a,s.node,fh.BLACK,i,o)},n=function(t){for(var e=null,n=null,a=c.length,r=function(t,e){var n=a-t,r=a;a-=t;var i=l(1+n,r),o=c[n],s=h?h(o):o;u(new fh(s,o.node,e,null,i))},u=function(t){e=e?e.left=t:n=t},i=0;i<t.count;++i){var o=t.nextBitIsOne(),s=Math.pow(2,t.count-(i+1));o?r(s,fh.BLACK):(r(s,fh.BLACK),r(s,fh.RED))}return n}(new bh(c.length));return new yh(e||t,n)},Th={},Sh=(Object.defineProperty(Ch,"Default",{get:function(){return ea(ch,"ChildrenNode.ts has not been loaded"),wh=wh||new Ch({".priority":Th},{".priority":ch})},enumerable:!1,configurable:!0}),Ch.prototype.get=function(t){var e=Na(this.indexes_,t);if(!e)throw new Error("No index defined for "+t);return e instanceof yh?e:null},Ch.prototype.hasIndex=function(t){return Ca(this.indexSet_,t.toString())},Ch.prototype.addIndex=function(t,e){ea(t!==Zc,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var n,r=[],i=!1,o=e.getIterator(Gc.Wrap),s=o.getNext();s;)i=i||t.isDefinedOn(s.node),r.push(s),s=o.getNext();n=i?Ih(r,t.getCompare()):Th;var a=t.toString(),u=Hs({},this.indexSet_);u[a]=t;var c=Hs({},this.indexes_);return c[a]=n,new Ch(c,u)},Ch.prototype.addToIndexes=function(u,c){var h=this;return new Ch(ka(this.indexes_,function(t,e){var n=Na(h.indexSet_,e);if(ea(n,"Missing index implementation for "+e),t===Th){if(n.isDefinedOn(u.node)){for(var r=[],i=c.getIterator(Gc.Wrap),o=i.getNext();o;)o.name!==u.name&&r.push(o),o=i.getNext();return r.push(u),Ih(r,n.getCompare())}return Th}var s=c.get(u.name),a=t;return s&&(a=a.remove(new Gc(u.name,s))),a.insert(u,u.node)}),this.indexSet_)},Ch.prototype.removeFromIndexes=function(n,r){return new Ch(ka(this.indexes_,function(t){if(t===Th)return t;var e=r.get(n.name);return e?t.remove(new Gc(n.name,e)):t}),this.indexSet_)},Ch);function Ch(t,e){this.indexes_=t,this.indexSet_=e}function Nh(t,e){return nc(t.name,e.name)}function Ah(t,e){return nc(t,e)}var kh,Oh=(Object.defineProperty(Rh,"EMPTY_NODE",{get:function(){return Eh=Eh||new Rh(new yh(Ah),null,Sh.Default)},enumerable:!1,configurable:!0}),Rh.prototype.isLeafNode=function(){return!1},Rh.prototype.getPriority=function(){return this.priorityNode_||Eh},Rh.prototype.updatePriority=function(t){return this.children_.isEmpty()?this:new Rh(this.children_,t,this.indexMap_)},Rh.prototype.getImmediateChild=function(t){if(".priority"===t)return this.getPriority();var e=this.children_.get(t);return null===e?Eh:e},Rh.prototype.getChild=function(t){var e=t.getFront();return null===e?this:this.getImmediateChild(e).getChild(t.popFront())},Rh.prototype.hasChild=function(t){return null!==this.children_.get(t)},Rh.prototype.updateImmediateChild=function(t,e){if(ea(e,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(e);var n=new Gc(t,e),r=void 0,i=void 0,i=e.isEmpty()?(r=this.children_.remove(t),this.indexMap_.removeFromIndexes(n,this.children_)):(r=this.children_.insert(t,e),this.indexMap_.addToIndexes(n,this.children_)),o=r.isEmpty()?Eh:this.priorityNode_;return new Rh(r,o,i)},Rh.prototype.updateChild=function(t,e){var n=t.getFront();if(null===n)return e;ea(".priority"!==t.getFront()||1===t.getLength(),".priority must be the last token in a path");var r=this.getImmediateChild(n).updateChild(t.popFront(),e);return this.updateImmediateChild(n,r)},Rh.prototype.isEmpty=function(){return this.children_.isEmpty()},Rh.prototype.numChildren=function(){return this.children_.count()},Rh.prototype.val=function(n){if(this.isEmpty())return null;var r={},i=0,o=0,s=!0;if(this.forEachChild(ch,function(t,e){r[t]=e.val(n),i++,s&&Rh.INTEGER_REGEXP_.test(t)?o=Math.max(o,Number(t)):s=!1}),!n&&s&&o<2*i){var t,e=[];for(t in r)e[t]=r[t];return e}return n&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r},Rh.prototype.hash=function(){var r;return null===this.lazyHash_&&(r="",this.getPriority().isEmpty()||(r+="priority:"+th(this.getPriority().val())+":"),this.forEachChild(ch,function(t,e){var n=e.hash();""!==n&&(r+=":"+t+":"+n)}),this.lazyHash_=""===r?"":Lu(r)),this.lazyHash_},Rh.prototype.getPredecessorChildName=function(t,e,n){var r=this.resolveIndex_(n);if(r){var i=r.getPredecessorKey(new Gc(t,e));return i?i.name:null}return this.children_.getPredecessorKey(t)},Rh.prototype.getFirstChildName=function(t){var e=this.resolveIndex_(t);if(e){var n=e.minKey();return n&&n.name}return this.children_.minKey()},Rh.prototype.getFirstChild=function(t){var e=this.getFirstChildName(t);return e?new Gc(e,this.children_.get(e)):null},Rh.prototype.getLastChildName=function(t){var e=this.resolveIndex_(t);if(e){var n=e.maxKey();return n&&n.name}return this.children_.maxKey()},Rh.prototype.getLastChild=function(t){var e=this.getLastChildName(t);return e?new Gc(e,this.children_.get(e)):null},Rh.prototype.forEachChild=function(t,e){var n=this.resolveIndex_(t);return n?n.inorderTraversal(function(t){return e(t.name,t.node)}):this.children_.inorderTraversal(e)},Rh.prototype.getIterator=function(t){return this.getIteratorFrom(t.minPost(),t)},Rh.prototype.getIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getIteratorFrom(t,function(t){return t});for(var r=this.children_.getIteratorFrom(t.name,Gc.Wrap),i=r.peek();null!=i&&e.compare(i,t)<0;)r.getNext(),i=r.peek();return r},Rh.prototype.getReverseIterator=function(t){return this.getReverseIteratorFrom(t.maxPost(),t)},Rh.prototype.getReverseIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getReverseIteratorFrom(t,function(t){return t});for(var r=this.children_.getReverseIteratorFrom(t.name,Gc.Wrap),i=r.peek();null!=i&&0<e.compare(i,t);)r.getNext(),i=r.peek();return r},Rh.prototype.compareTo=function(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===Dh?-1:0},Rh.prototype.withIndex=function(t){if(t===Zc||this.indexMap_.hasIndex(t))return this;var e=this.indexMap_.addIndex(t,this.children_);return new Rh(this.children_,this.priorityNode_,e)},Rh.prototype.isIndexed=function(t){return t===Zc||this.indexMap_.hasIndex(t)},Rh.prototype.equals=function(t){if(t===this)return!0;if(t.isLeafNode())return!1;var e=t;if(this.getPriority().equals(e.getPriority())){if(this.children_.count()!==e.children_.count())return!1;for(var n=this.getIterator(ch),r=e.getIterator(ch),i=n.getNext(),o=r.getNext();i&&o;){if(i.name!==o.name||!i.node.equals(o.node))return!1;i=n.getNext(),o=r.getNext()}return null===i&&null===o}return!1},Rh.prototype.resolveIndex_=function(t){return t===Zc?null:this.indexMap_.get(t.toString())},Rh.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,Rh);function Rh(t,e,n){this.children_=t,this.priorityNode_=e,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&oh(this.priorityNode_),this.children_.isEmpty()&&ea(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}function Ph(){return kh.call(this,new yh(Ah),Oh.EMPTY_NODE,Sh.Default)||this}var Dh=new(Gs(Ph,kh=Oh),Ph.prototype.compareTo=function(t){return t===this?0:1},Ph.prototype.equals=function(t){return t===this},Ph.prototype.getPriority=function(){return this},Ph.prototype.getImmediateChild=function(t){return Oh.EMPTY_NODE},Ph.prototype.isEmpty=function(){return!1},Ph);Object.defineProperties(Gc,{MIN:{value:new Gc(tc,Oh.EMPTY_NODE)},MAX:{value:new Gc(ec,Dh)}}),Xc.__EMPTY_NODE=Oh.EMPTY_NODE,sh.__childrenNodeConstructor=Oh,Jc=Dh,rh=Dh;var xh,Lh=!0;function Mh(r,t){if(void 0===t&&(t=null),null===r)return Oh.EMPTY_NODE;if("object"==typeof r&&".priority"in r&&(t=r[".priority"]),ea(null===t||"string"==typeof t||"number"==typeof t||"object"==typeof t&&".sv"in t,"Invalid priority type found: "+typeof t),"object"==typeof r&&".value"in r&&null!==r[".value"]&&(r=r[".value"]),"object"!=typeof r||".sv"in r)return new sh(r,Mh(t));if(r instanceof Array||!Lh){var i=Oh.EMPTY_NODE;return ic(r,function(t,e){var n;Ca(r,t)&&"."!==t.substring(0,1)&&(!(n=Mh(e)).isLeafNode()&&n.isEmpty()||(i=i.updateImmediateChild(t,n)))}),i.updatePriority(Mh(t))}var o=[],s=!1;if(ic(r,function(t,e){var n;"."!==t.substring(0,1)&&((n=Mh(e)).isEmpty()||(s=s||!n.getPriority().isEmpty(),o.push(new Gc(t,n))))}),0===o.length)return Oh.EMPTY_NODE;var e=Ih(o,Nh,function(t){return t.name},Ah);if(s){var n=Ih(o,ch.getCompare());return new Oh(e,Mh(t),new Sh({".priority":n},{".priority":ch}))}return new Oh(e,Mh(t),Sh.Default)}function Fh(){return null!==xh&&xh.apply(this,arguments)||this}nh=Mh;var Uh,jh=new(Gs(Fh,xh=zc),Fh.prototype.compare=function(t,e){var n=t.node.compareTo(e.node);return 0===n?nc(t.name,e.name):n},Fh.prototype.isDefinedOn=function(t){return!0},Fh.prototype.indexedValueChanged=function(t,e){return!t.equals(e)},Fh.prototype.minPost=function(){return Gc.MIN},Fh.prototype.maxPost=function(){return Gc.MAX},Fh.prototype.makePost=function(t,e){var n=Mh(t);return new Gc(e,n)},Fh.prototype.toString=function(){return".value"},Fh),Vh=(Gs(qh,Uh=zc),qh.prototype.extractChild=function(t){return t.getChild(this.indexPath_)},qh.prototype.isDefinedOn=function(t){return!t.getChild(this.indexPath_).isEmpty()},qh.prototype.compare=function(t,e){var n=this.extractChild(t.node),r=this.extractChild(e.node),i=n.compareTo(r);return 0===i?nc(t.name,e.name):i},qh.prototype.makePost=function(t,e){var n=Mh(t),r=Oh.EMPTY_NODE.updateChild(this.indexPath_,n);return new Gc(e,r)},qh.prototype.maxPost=function(){var t=Oh.EMPTY_NODE.updateChild(this.indexPath_,Dh);return new Gc(ec,t)},qh.prototype.toString=function(){return this.indexPath_.slice().join("/")},qh);function qh(t){var e=Uh.call(this)||this;return e.indexPath_=t,ea(!t.isEmpty()&&".priority"!==t.getFront(),"Can't create PathIndex with empty path or .priority key"),e}var Bh=(Wh.prototype.val=function(){return Ma("DataSnapshot.val",0,0,arguments.length),this.node_.val()},Wh.prototype.exportVal=function(){return Ma("DataSnapshot.exportVal",0,0,arguments.length),this.node_.val(!0)},Wh.prototype.toJSON=function(){return Ma("DataSnapshot.toJSON",0,1,arguments.length),this.exportVal()},Wh.prototype.exists=function(){return Ma("DataSnapshot.exists",0,0,arguments.length),!this.node_.isEmpty()},Wh.prototype.child=function(t){Ma("DataSnapshot.child",0,1,arguments.length),t=String(t),Ac("DataSnapshot.child",1,t,!1);var e=new hc(t),n=this.ref_.child(e);return new Wh(this.node_.getChild(e),n,ch)},Wh.prototype.hasChild=function(t){Ma("DataSnapshot.hasChild",1,1,arguments.length),Ac("DataSnapshot.hasChild",1,t,!1);var e=new hc(t);return!this.node_.getChild(e).isEmpty()},Wh.prototype.getPriority=function(){return Ma("DataSnapshot.getPriority",0,0,arguments.length),this.node_.getPriority().val()},Wh.prototype.forEach=function(n){var r=this;return Ma("DataSnapshot.forEach",1,1,arguments.length),Ua("DataSnapshot.forEach",1,n,!1),!this.node_.isLeafNode()&&!!this.node_.forEachChild(this.index_,function(t,e){return n(new Wh(e,r.ref_.child(t),ch))})},Wh.prototype.hasChildren=function(){return Ma("DataSnapshot.hasChildren",0,0,arguments.length),!this.node_.isLeafNode()&&!this.node_.isEmpty()},Object.defineProperty(Wh.prototype,"key",{get:function(){return this.ref_.getKey()},enumerable:!1,configurable:!0}),Wh.prototype.numChildren=function(){return Ma("DataSnapshot.numChildren",0,0,arguments.length),this.node_.numChildren()},Wh.prototype.getRef=function(){return Ma("DataSnapshot.ref",0,0,arguments.length),this.ref_},Object.defineProperty(Wh.prototype,"ref",{get:function(){return this.getRef()},enumerable:!1,configurable:!0}),Wh);function Wh(t,e,n){this.node_=t,this.ref_=e,this.index_=n}var Gh=(Hh.prototype.getPath=function(){var t=this.snapshot.getRef();return"value"===this.eventType?t.path:t.getParent().path},Hh.prototype.getEventType=function(){return this.eventType},Hh.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},Hh.prototype.toString=function(){return this.getPath().toString()+":"+this.eventType+":"+Ta(this.snapshot.exportVal())},Hh);function Hh(t,e,n,r){this.eventType=t,this.eventRegistration=e,this.snapshot=n,this.prevName=r}var Kh=(zh.prototype.getPath=function(){return this.path},zh.prototype.getEventType=function(){return"cancel"},zh.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},zh.prototype.toString=function(){return this.path.toString()+":cancel"},zh);function zh(t,e,n){this.eventRegistration=t,this.error=e,this.path=n}var Qh=(Yh.prototype.respondsTo=function(t){return"value"===t},Yh.prototype.createEvent=function(t,e){var n=e.getQueryParams().getIndex();return new Gh("value",this,new Bh(t.snapshotNode,e.getRef(),n))},Yh.prototype.getEventRunner=function(t){var e=this.context_;if("cancel"===t.getEventType()){ea(this.cancelCallback_,"Raising a cancel event on a listener with no cancel callback");var n=this.cancelCallback_;return function(){n.call(e,t.error)}}var r=this.callback_;return function(){r.call(e,t.snapshot)}},Yh.prototype.createCancelEvent=function(t,e){return this.cancelCallback_?new Kh(this,t,e):null},Yh.prototype.matches=function(t){return t instanceof Yh&&(!t.callback_||!this.callback_||t.callback_===this.callback_&&t.context_===this.context_)},Yh.prototype.hasAnyCallback=function(){return null!==this.callback_},Yh);function Yh(t,e,n){this.callback_=t,this.cancelCallback_=e,this.context_=n}var Xh,$h=(Jh.prototype.respondsTo=function(t){var e="children_removed"===(e="children_added"===t?"child_added":t)?"child_removed":e;return Ca(this.callbacks_,e)},Jh.prototype.createCancelEvent=function(t,e){return this.cancelCallback_?new Kh(this,t,e):null},Jh.prototype.createEvent=function(t,e){ea(null!=t.childName,"Child events should have a childName.");var n=e.getRef().child(t.childName),r=e.getQueryParams().getIndex();return new Gh(t.type,this,new Bh(t.snapshotNode,n,r),t.prevName)},Jh.prototype.getEventRunner=function(t){var e=this.context_;if("cancel"===t.getEventType()){ea(this.cancelCallback_,"Raising a cancel event on a listener with no cancel callback");var n=this.cancelCallback_;return function(){n.call(e,t.error)}}var r=this.callbacks_[t.eventType];return function(){r.call(e,t.snapshot,t.prevName)}},Jh.prototype.matches=function(e){var n=this;if(e instanceof Jh){if(!this.callbacks_||!e.callbacks_)return!0;if(this.context_===e.context_){var t=Object.keys(e.callbacks_),r=Object.keys(this.callbacks_),i=t.length;if(i===r.length){if(1!==i)return r.every(function(t){return e.callbacks_[t]===n.callbacks_[t]});var o=t[0],s=r[0];return!(s!==o||e.callbacks_[o]&&this.callbacks_[s]&&e.callbacks_[o]!==this.callbacks_[s])}}}return!1},Jh.prototype.hasAnyCallback=function(){return null!==this.callbacks_},Jh);function Jh(t,e,n){this.callbacks_=t,this.cancelCallback_=e,this.context_=n}var Zh=(Object.defineProperty(tl,"__referenceConstructor",{get:function(){return ea(Xh,"Reference.ts has not been loaded"),Xh},set:function(t){Xh=t},enumerable:!1,configurable:!0}),tl.validateQueryEndpoints_=function(t){var e=null,n=null;if(t.hasStart()&&(e=t.getIndexStartValue()),t.hasEnd()&&(n=t.getIndexEndValue()),t.getIndex()===Zc){var r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), endAt(),or equalTo() must be a string.";if(t.hasStart()){if(t.getIndexStartName()!==tc)throw new Error(r);if("string"!=typeof e)throw new Error(i)}if(t.hasEnd()){if(t.getIndexEndName()!==ec)throw new Error(r);if("string"!=typeof n)throw new Error(i)}}else if(t.getIndex()===ch){if(null!=e&&!Ec(e)||null!=n&&!Ec(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), endAt(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(ea(t.getIndex()instanceof Vh||t.getIndex()===jh,"unknown index type."),null!=e&&"object"==typeof e||null!=n&&"object"==typeof n)throw new Error("Query: First argument passed to startAt(), endAt(), or equalTo() cannot be an object.")},tl.validateLimit_=function(t){if(t.hasStart()&&t.hasEnd()&&t.hasLimit()&&!t.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), endAt(), and limit(). Use limitToFirst() or limitToLast() instead.")},tl.prototype.validateNoPreviousOrderByCall_=function(t){if(!0===this.orderByCalled_)throw new Error(t+": You can't combine multiple orderBy calls.")},tl.prototype.getQueryParams=function(){return this.queryParams_},tl.prototype.getRef=function(){return Ma("Query.ref",0,0,arguments.length),new tl.__referenceConstructor(this.repo,this.path)},tl.prototype.on=function(t,e,n,r){Ma("Query.on",2,4,arguments.length),Cc("Query.on",1,t,!1),Ua("Query.on",2,e,!1);var i,o=tl.getCancelAndContextArgs_("Query.on",n,r);return"value"===t?this.onValueEvent(e,o.cancel,o.context):((i={})[t]=e,this.onChildEvent(i,o.cancel,o.context)),e},tl.prototype.onValueEvent=function(t,e,n){var r=new Qh(t,e||null,n||null);this.repo.addEventCallbackForQuery(this,r)},tl.prototype.onChildEvent=function(t,e,n){var r=new $h(t,e,n);this.repo.addEventCallbackForQuery(this,r)},tl.prototype.off=function(t,e,n){Ma("Query.off",0,3,arguments.length),Cc("Query.off",1,t,!0),Ua("Query.off",2,e,!0),ja("Query.off",3,n,!0);var r=null,i=null;"value"===t?r=new Qh(e||null,null,n||null):t&&(e&&((i={})[t]=e),r=new $h(i,null,n||null)),this.repo.removeEventCallbackForQuery(this,r)},tl.prototype.once=function(e,n,t,r){var i=this;Ma("Query.once",1,4,arguments.length),Cc("Query.once",1,e,!1),Ua("Query.once",2,n,!0);var o=tl.getCancelAndContextArgs_("Query.once",t,r),s=!0,a=new sa;a.promise.catch(function(){});var u=function(t){s&&(s=!1,i.off(e,u),n&&n.bind(o.context)(t),a.resolve(t))};return this.on(e,u,function(t){i.off(e,u),o.cancel&&o.cancel.bind(o.context)(t),a.reject(t)}),a.promise},tl.prototype.limitToFirst=function(t){if(Ma("Query.limitToFirst",1,1,arguments.length),"number"!=typeof t||Math.floor(t)!==t||t<=0)throw new Error("Query.limitToFirst: First argument must be a positive integer.");if(this.queryParams_.hasLimit())throw new Error("Query.limitToFirst: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new tl(this.repo,this.path,this.queryParams_.limitToFirst(t),this.orderByCalled_)},tl.prototype.limitToLast=function(t){if(Ma("Query.limitToLast",1,1,arguments.length),"number"!=typeof t||Math.floor(t)!==t||t<=0)throw new Error("Query.limitToLast: First argument must be a positive integer.");if(this.queryParams_.hasLimit())throw new Error("Query.limitToLast: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new tl(this.repo,this.path,this.queryParams_.limitToLast(t),this.orderByCalled_)},tl.prototype.orderByChild=function(t){if(Ma("Query.orderByChild",1,1,arguments.length),"$key"===t)throw new Error('Query.orderByChild: "$key" is invalid.  Use Query.orderByKey() instead.');if("$priority"===t)throw new Error('Query.orderByChild: "$priority" is invalid.  Use Query.orderByPriority() instead.');if("$value"===t)throw new Error('Query.orderByChild: "$value" is invalid.  Use Query.orderByValue() instead.');Ac("Query.orderByChild",1,t,!1),this.validateNoPreviousOrderByCall_("Query.orderByChild");var e=new hc(t);if(e.isEmpty())throw new Error("Query.orderByChild: cannot pass in empty path.  Use Query.orderByValue() instead.");var n=new Vh(e),r=this.queryParams_.orderBy(n);return tl.validateQueryEndpoints_(r),new tl(this.repo,this.path,r,!0)},tl.prototype.orderByKey=function(){Ma("Query.orderByKey",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByKey");var t=this.queryParams_.orderBy(Zc);return tl.validateQueryEndpoints_(t),new tl(this.repo,this.path,t,!0)},tl.prototype.orderByPriority=function(){Ma("Query.orderByPriority",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByPriority");var t=this.queryParams_.orderBy(ch);return tl.validateQueryEndpoints_(t),new tl(this.repo,this.path,t,!0)},tl.prototype.orderByValue=function(){Ma("Query.orderByValue",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByValue");var t=this.queryParams_.orderBy(jh);return tl.validateQueryEndpoints_(t),new tl(this.repo,this.path,t,!0)},tl.prototype.startAt=function(t,e){void 0===t&&(t=null),Ma("Query.startAt",0,2,arguments.length),Ic("Query.startAt",1,t,this.path,!0),Nc("Query.startAt",2,e,!0);var n=this.queryParams_.startAt(t,e);if(tl.validateLimit_(n),tl.validateQueryEndpoints_(n),this.queryParams_.hasStart())throw new Error("Query.startAt: Starting point was already set (by another call to startAt or equalTo).");return void 0===t&&(e=t=null),new tl(this.repo,this.path,n,this.orderByCalled_)},tl.prototype.endAt=function(t,e){void 0===t&&(t=null),Ma("Query.endAt",0,2,arguments.length),Ic("Query.endAt",1,t,this.path,!0),Nc("Query.endAt",2,e,!0);var n=this.queryParams_.endAt(t,e);if(tl.validateLimit_(n),tl.validateQueryEndpoints_(n),this.queryParams_.hasEnd())throw new Error("Query.endAt: Ending point was already set (by another call to endAt or equalTo).");return new tl(this.repo,this.path,n,this.orderByCalled_)},tl.prototype.equalTo=function(t,e){if(Ma("Query.equalTo",1,2,arguments.length),Ic("Query.equalTo",1,t,this.path,!1),Nc("Query.equalTo",2,e,!0),this.queryParams_.hasStart())throw new Error("Query.equalTo: Starting point was already set (by another call to startAt or equalTo).");if(this.queryParams_.hasEnd())throw new Error("Query.equalTo: Ending point was already set (by another call to endAt or equalTo).");return this.startAt(t,e).endAt(t,e)},tl.prototype.toString=function(){return Ma("Query.toString",0,0,arguments.length),this.repo.toString()+this.path.toUrlEncodedString()},tl.prototype.toJSON=function(){return Ma("Query.toJSON",0,1,arguments.length),this.toString()},tl.prototype.queryObject=function(){return this.queryParams_.getQueryObject()},tl.prototype.queryIdentifier=function(){var t=this.queryObject(),e=rc(t);return"{}"===e?"default":e},tl.prototype.isEqual=function(t){if(Ma("Query.isEqual",1,1,arguments.length),!(t instanceof tl)){throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.")}var e=this.repo===t.repo,n=this.path.equals(t.path),r=this.queryIdentifier()===t.queryIdentifier();return e&&n&&r},tl.getCancelAndContextArgs_=function(t,e,n){var r={cancel:null,context:null};if(e&&n)r.cancel=e,Ua(t,3,r.cancel,!0),r.context=n,ja(t,4,r.context,!0);else if(e)if("object"==typeof e&&null!==e)r.context=e;else{if("function"!=typeof e)throw new Error(Fa(t,3,!0)+" must either be a cancel callback or a context object.");r.cancel=e}return r},Object.defineProperty(tl.prototype,"ref",{get:function(){return this.getRef()},enumerable:!1,configurable:!0}),tl);function tl(t,e,n,r){this.repo=t,this.path=e,this.queryParams_=n,this.orderByCalled_=r}var el=(nl.prototype.getImmediateChild=function(t){return new nl(this.node_.getImmediateChild(t))},nl.prototype.node=function(){return this.node_},nl);function nl(t){this.node_=t}var rl=(il.prototype.getImmediateChild=function(t){var e=this.path_.child(t);return new il(this.syncTree_,e)},il.prototype.node=function(){return this.syncTree_.calcCompleteEventCache(this.path_)},il);function il(t,e){this.syncTree_=t,this.path_=e}function ol(t,e,n,r){return hl(e,new rl(n,t),r)}function sl(t,e,n){return hl(t,new el(e),n)}var al=function(t,e,n){return t&&"object"==typeof t?(ea(".sv"in t,"Unexpected leaf node or priority contents"),"string"==typeof t[".sv"]?ul(t[".sv"],e,n):"object"==typeof t[".sv"]?cl(t[".sv"],e):void ea(!1,"Unexpected server value: "+JSON.stringify(t,null,2))):t},ul=function(t,e,n){if("timestamp"===t)return n.timestamp;ea(!1,"Unexpected server value: "+t)},cl=function(t,e,n){t.hasOwnProperty("increment")||ea(!1,"Unexpected server value: "+JSON.stringify(t,null,2));var r=t.increment;"number"!=typeof r&&ea(!1,"Unexpected increment value: "+r);var i=e.node();if(ea(null!=i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;var o=i.getValue();return"number"!=typeof o?r:o+r};function hl(t,r,i){var e=t.getPriority().val(),n=al(e,r.getImmediateChild(".priority"),i);if(t.isLeafNode()){var o=t,s=al(o.getValue(),r,i);return s!==o.getValue()||n!==o.getPriority().val()?new sh(s,Mh(n)):t}var a=t,u=a;return n!==a.getPriority().val()&&(u=u.updatePriority(new sh(n))),a.forEachChild(ch,function(t,e){var n=hl(e,r.getImmediateChild(t),i);n!==e&&(u=u.updateImmediateChild(t,n))}),u}var ll,fl,pl=(dl.prototype.find=function(t){if(null!=this.value)return this.value.getChild(t);if(!t.isEmpty()&&0<this.children.size){var e=t.getFront();return t=t.popFront(),this.children.has(e)?this.children.get(e).find(t):null}return null},dl.prototype.remember=function(t,e){var n,r;t.isEmpty()?(this.value=e,this.children.clear()):null!==this.value?this.value=this.value.updateChild(t,e):(n=t.getFront(),this.children.has(n)||this.children.set(n,new dl),r=this.children.get(n),t=t.popFront(),r.remember(t,e))},dl.prototype.forget=function(t){if(t.isEmpty())return this.value=null,this.children.clear(),!0;if(null!==this.value){if(this.value.isLeafNode())return!1;var e=this.value;this.value=null;var n=this;return e.forEachChild(ch,function(t,e){n.remember(new hc(t),e)}),this.forget(t)}if(0<this.children.size){var r=t.getFront();return t=t.popFront(),this.children.has(r)&&this.children.get(r).forget(t)&&this.children.delete(r),0===this.children.size}return!0},dl.prototype.forEachTree=function(r,i){null!==this.value?i(r,this.value):this.forEachChild(function(t,e){var n=new hc(r.toString()+"/"+t);e.forEachTree(n,i)})},dl.prototype.forEachChild=function(n){this.children.forEach(function(t,e){n(e,t)})},dl);function dl(){this.value=null,this.children=new Map}(fl=ll=ll||{})[fl.OVERWRITE=0]="OVERWRITE",fl[fl.MERGE=1]="MERGE",fl[fl.ACK_USER_WRITE=2]="ACK_USER_WRITE",fl[fl.LISTEN_COMPLETE=3]="LISTEN_COMPLETE";var vl=(yl.User=new yl(!0,!1,null,!1),yl.Server=new yl(!1,!0,null,!1),yl.forServerTaggedQuery=function(t){return new yl(!1,!0,t,!0)},yl);function yl(t,e,n,r){this.fromUser=t,this.fromServer=e,this.queryId=n,this.tagged=r,ea(!r||e,"Tagged queries must be from server.")}var gl,ml=(bl.prototype.operationForChild=function(t){if(this.path.isEmpty()){if(null!=this.affectedTree.value)return ea(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;var e=this.affectedTree.subtree(new hc(t));return new bl(hc.Empty,e,this.revert)}return ea(this.path.getFront()===t,"operationForChild called for unrelated child."),new bl(this.path.popFront(),this.affectedTree,this.revert)},bl);function bl(t,e,n){this.path=t,this.affectedTree=e,this.revert=n,this.type=ll.ACK_USER_WRITE,this.source=vl.User}var _l=(wl.fromObject=function(t){var n=wl.Empty;return ic(t,function(t,e){n=n.set(new hc(t),e)}),n},wl.prototype.isEmpty=function(){return null===this.value&&this.children.isEmpty()},wl.prototype.findRootMostMatchingPathAndValue=function(t,e){if(null!=this.value&&e(this.value))return{path:hc.Empty,value:this.value};if(t.isEmpty())return null;var n=t.getFront(),r=this.children.get(n);if(null===r)return null;var i=r.findRootMostMatchingPathAndValue(t.popFront(),e);return null==i?null:{path:new hc(n).child(i.path),value:i.value}},wl.prototype.findRootMostValueAndPath=function(t){return this.findRootMostMatchingPathAndValue(t,function(){return!0})},wl.prototype.subtree=function(t){if(t.isEmpty())return this;var e=t.getFront(),n=this.children.get(e);return null!==n?n.subtree(t.popFront()):wl.Empty},wl.prototype.set=function(t,e){if(t.isEmpty())return new wl(e,this.children);var n=t.getFront(),r=(this.children.get(n)||wl.Empty).set(t.popFront(),e),i=this.children.insert(n,r);return new wl(this.value,i)},wl.prototype.remove=function(t){if(t.isEmpty())return this.children.isEmpty()?wl.Empty:new wl(null,this.children);var e=t.getFront(),n=this.children.get(e);if(n){var r=n.remove(t.popFront()),i=void 0,i=r.isEmpty()?this.children.remove(e):this.children.insert(e,r);return null===this.value&&i.isEmpty()?wl.Empty:new wl(this.value,i)}return this},wl.prototype.get=function(t){if(t.isEmpty())return this.value;var e=t.getFront(),n=this.children.get(e);return n?n.get(t.popFront()):null},wl.prototype.setTree=function(t,e){if(t.isEmpty())return e;var n=t.getFront(),r=(this.children.get(n)||wl.Empty).setTree(t.popFront(),e),i=void 0,i=r.isEmpty()?this.children.remove(n):this.children.insert(n,r);return new wl(this.value,i)},wl.prototype.fold=function(t){return this.fold_(hc.Empty,t)},wl.prototype.fold_=function(n,r){var i={};return this.children.inorderTraversal(function(t,e){i[t]=e.fold_(n.child(t),r)}),r(n,this.value,i)},wl.prototype.findOnPath=function(t,e){return this.findOnPath_(t,hc.Empty,e)},wl.prototype.findOnPath_=function(t,e,n){var r=!!this.value&&n(e,this.value);if(r)return r;if(t.isEmpty())return null;var i=t.getFront(),o=this.children.get(i);return o?o.findOnPath_(t.popFront(),e.child(i),n):null},wl.prototype.foreachOnPath=function(t,e){return this.foreachOnPath_(t,hc.Empty,e)},wl.prototype.foreachOnPath_=function(t,e,n){if(t.isEmpty())return this;this.value&&n(e,this.value);var r=t.getFront(),i=this.children.get(r);return i?i.foreachOnPath_(t.popFront(),e.child(r),n):wl.Empty},wl.prototype.foreach=function(t){this.foreach_(hc.Empty,t)},wl.prototype.foreach_=function(n,r){this.children.inorderTraversal(function(t,e){e.foreach_(n.child(t),r)}),this.value&&r(n,this.value)},wl.prototype.foreachChild=function(n){this.children.inorderTraversal(function(t,e){e.value&&n(t,e.value)})},wl.Empty=new wl(null),wl);function wl(t,e){void 0===e&&(e=gl=gl||new yh(qu)),this.value=t,this.children=e}var El=(Il.prototype.operationForChild=function(t){return this.path.isEmpty()?new Il(this.source,hc.Empty):new Il(this.source,this.path.popFront())},Il);function Il(t,e){this.source=t,this.path=e,this.type=ll.LISTEN_COMPLETE}var Tl=(Sl.prototype.operationForChild=function(t){return this.path.isEmpty()?new Sl(this.source,hc.Empty,this.snap.getImmediateChild(t)):new Sl(this.source,this.path.popFront(),this.snap)},Sl);function Sl(t,e,n){this.source=t,this.path=e,this.snap=n,this.type=ll.OVERWRITE}var Cl=(Nl.prototype.operationForChild=function(t){if(this.path.isEmpty()){var e=this.children.subtree(new hc(t));return e.isEmpty()?null:e.value?new Tl(this.source,hc.Empty,e.value):new Nl(this.source,hc.Empty,e)}return ea(this.path.getFront()===t,"Can't get a merge for a child not on the path of the operation"),new Nl(this.source,this.path.popFront(),this.children)},Nl.prototype.toString=function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"},Nl);function Nl(t,e,n){this.source=t,this.path=e,this.children=n,this.type=ll.MERGE}var Al=(kl.prototype.isFullyInitialized=function(){return this.fullyInitialized_},kl.prototype.isFiltered=function(){return this.filtered_},kl.prototype.isCompleteForPath=function(t){if(t.isEmpty())return this.isFullyInitialized()&&!this.filtered_;var e=t.getFront();return this.isCompleteForChild(e)},kl.prototype.isCompleteForChild=function(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)},kl.prototype.getNode=function(){return this.node_},kl);function kl(t,e,n){this.node_=t,this.fullyInitialized_=e,this.filtered_=n}var Ol=(Rl.prototype.updateEventSnap=function(t,e,n){return new Rl(new Al(t,e,n),this.serverCache_)},Rl.prototype.updateServerSnap=function(t,e,n){return new Rl(this.eventCache_,new Al(t,e,n))},Rl.prototype.getEventCache=function(){return this.eventCache_},Rl.prototype.getCompleteEventSnap=function(){return this.eventCache_.isFullyInitialized()?this.eventCache_.getNode():null},Rl.prototype.getServerCache=function(){return this.serverCache_},Rl.prototype.getCompleteServerSnap=function(){return this.serverCache_.isFullyInitialized()?this.serverCache_.getNode():null},Rl.Empty=new Rl(new Al(Oh.EMPTY_NODE,!1,!1),new Al(Oh.EMPTY_NODE,!1,!1)),Rl);function Rl(t,e){this.eventCache_=t,this.serverCache_=e}var Pl=(Dl.valueChange=function(t){return new Dl(Dl.VALUE,t)},Dl.childAddedChange=function(t,e){return new Dl(Dl.CHILD_ADDED,e,t)},Dl.childRemovedChange=function(t,e){return new Dl(Dl.CHILD_REMOVED,e,t)},Dl.childChangedChange=function(t,e,n){return new Dl(Dl.CHILD_CHANGED,e,t,n)},Dl.childMovedChange=function(t,e){return new Dl(Dl.CHILD_MOVED,e,t)},Dl.CHILD_ADDED="child_added",Dl.CHILD_REMOVED="child_removed",Dl.CHILD_CHANGED="child_changed",Dl.CHILD_MOVED="child_moved",Dl.VALUE="value",Dl);function Dl(t,e,n,r,i){this.type=t,this.snapshotNode=e,this.childName=n,this.oldSnap=r,this.prevName=i}var xl=(Ll.prototype.updateChild=function(t,e,n,r,i,o){ea(t.isIndexed(this.index_),"A node must be indexed if only a child is updated");var s=t.getImmediateChild(e);return s.getChild(r).equals(n.getChild(r))&&s.isEmpty()===n.isEmpty()?t:(null!=o&&(n.isEmpty()?t.hasChild(e)?o.trackChildChange(Pl.childRemovedChange(e,s)):ea(t.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):s.isEmpty()?o.trackChildChange(Pl.childAddedChange(e,n)):o.trackChildChange(Pl.childChangedChange(e,n,s))),t.isLeafNode()&&n.isEmpty()?t:t.updateImmediateChild(e,n).withIndex(this.index_))},Ll.prototype.updateFullNode=function(r,n,i){return null!=i&&(r.isLeafNode()||r.forEachChild(ch,function(t,e){n.hasChild(t)||i.trackChildChange(Pl.childRemovedChange(t,e))}),n.isLeafNode()||n.forEachChild(ch,function(t,e){var n;r.hasChild(t)?(n=r.getImmediateChild(t)).equals(e)||i.trackChildChange(Pl.childChangedChange(t,e,n)):i.trackChildChange(Pl.childAddedChange(t,e))})),n.withIndex(this.index_)},Ll.prototype.updatePriority=function(t,e){return t.isEmpty()?Oh.EMPTY_NODE:t.updatePriority(e)},Ll.prototype.filtersNodes=function(){return!1},Ll.prototype.getIndexedFilter=function(){return this},Ll.prototype.getIndex=function(){return this.index_},Ll);function Ll(t){this.index_=t}var Ml=(Fl.prototype.trackChildChange=function(t){var e=t.type,n=t.childName;ea(e===Pl.CHILD_ADDED||e===Pl.CHILD_CHANGED||e===Pl.CHILD_REMOVED,"Only child changes supported for tracking"),ea(".priority"!==n,"Only non-priority child changes can be tracked.");var r=this.changeMap.get(n);if(r){var i=r.type;if(e===Pl.CHILD_ADDED&&i===Pl.CHILD_REMOVED)this.changeMap.set(n,Pl.childChangedChange(n,t.snapshotNode,r.snapshotNode));else if(e===Pl.CHILD_REMOVED&&i===Pl.CHILD_ADDED)this.changeMap.delete(n);else if(e===Pl.CHILD_REMOVED&&i===Pl.CHILD_CHANGED)this.changeMap.set(n,Pl.childRemovedChange(n,r.oldSnap));else if(e===Pl.CHILD_CHANGED&&i===Pl.CHILD_ADDED)this.changeMap.set(n,Pl.childAddedChange(n,t.snapshotNode));else{if(e!==Pl.CHILD_CHANGED||i!==Pl.CHILD_CHANGED)throw na("Illegal combination of changes: "+t+" occurred after "+r);this.changeMap.set(n,Pl.childChangedChange(n,t.snapshotNode,r.oldSnap))}}else this.changeMap.set(n,t)},Fl.prototype.getChanges=function(){return Array.from(this.changeMap.values())},Fl);function Fl(){this.changeMap=new Map}function Ul(){}var jl=new(Ul.prototype.getCompleteChild=function(t){return null},Ul.prototype.getChildAfterChild=function(t,e,n){return null},Ul),Vl=(ql.prototype.getCompleteChild=function(t){var e=this.viewCache_.getEventCache();if(e.isCompleteForChild(t))return e.getNode().getImmediateChild(t);var n=null!=this.optCompleteServerCache_?new Al(this.optCompleteServerCache_,!0,!1):this.viewCache_.getServerCache();return this.writes_.calcCompleteChild(t,n)},ql.prototype.getChildAfterChild=function(t,e,n){var r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:this.viewCache_.getCompleteServerSnap(),i=this.writes_.calcIndexedSlice(r,e,1,n,t);return 0===i.length?null:i[0]},ql);function ql(t,e,n){void 0===n&&(n=null),this.writes_=t,this.viewCache_=e,this.optCompleteServerCache_=n}var Bl=function(t,e){this.viewCache=t,this.changes=e},Wl=(Gl.prototype.assertIndexed=function(t){ea(t.getEventCache().getNode().isIndexed(this.filter_.getIndex()),"Event snap not indexed"),ea(t.getServerCache().getNode().isIndexed(this.filter_.getIndex()),"Server snap not indexed")},Gl.prototype.applyOperation=function(t,e,n,r){var i,o=new Ml;if(e.type===ll.OVERWRITE)var s=e,a=s.source.fromUser?this.applyUserOverwrite_(t,s.path,s.snap,n,r,o):(ea(s.source.fromServer,"Unknown source."),i=s.source.tagged||t.getServerCache().isFiltered()&&!s.path.isEmpty(),this.applyServerOverwrite_(t,s.path,s.snap,n,r,i,o));else if(e.type===ll.MERGE){var u=e;a=u.source.fromUser?this.applyUserMerge_(t,u.path,u.children,n,r,o):(ea(u.source.fromServer,"Unknown source."),i=u.source.tagged||t.getServerCache().isFiltered(),this.applyServerMerge_(t,u.path,u.children,n,r,i,o))}else if(e.type===ll.ACK_USER_WRITE){var c=e;a=c.revert?this.revertUserWrite_(t,c.path,n,r,o):this.ackUserWrite_(t,c.path,c.affectedTree,n,r,o)}else{if(e.type!==ll.LISTEN_COMPLETE)throw na("Unknown operation type: "+e.type);a=this.listenComplete_(t,e.path,n,o)}var h=o.getChanges();return Gl.maybeAddValueEvent_(t,a,h),new Bl(a,h)},Gl.maybeAddValueEvent_=function(t,e,n){var r,i,o=e.getEventCache();o.isFullyInitialized()&&(r=o.getNode().isLeafNode()||o.getNode().isEmpty(),i=t.getCompleteEventSnap(),(0<n.length||!t.getEventCache().isFullyInitialized()||r&&!o.getNode().equals(i)||!o.getNode().getPriority().equals(i.getPriority()))&&n.push(Pl.valueChange(e.getCompleteEventSnap())))},Gl.prototype.generateEventCacheAfterServerEvent_=function(t,e,n,r,i){var o=t.getEventCache();if(null!=n.shadowingWrite(e))return t;var s,a,u,c,h,l,f,p,d,v,y=void 0,g=void 0;return y=e.isEmpty()?(ea(t.getServerCache().isFullyInitialized(),"If change path is empty, we must have complete server data"),t.getServerCache().isFiltered()?(a=(s=t.getCompleteServerSnap())instanceof Oh?s:Oh.EMPTY_NODE,u=n.calcCompleteEventChildren(a),this.filter_.updateFullNode(t.getEventCache().getNode(),u,i)):(c=n.calcCompleteEventCache(t.getCompleteServerSnap()),this.filter_.updateFullNode(t.getEventCache().getNode(),c,i))):".priority"===(h=e.getFront())?(ea(1===e.getLength(),"Can't have a priority with additional path components"),l=o.getNode(),g=t.getServerCache().getNode(),null!=(f=n.calcEventCacheAfterServerOverwrite(e,l,g))?this.filter_.updatePriority(l,f):o.getNode()):(p=e.popFront(),v=void 0,null!=(v=o.isCompleteForChild(h)?(g=t.getServerCache().getNode(),null!=(d=n.calcEventCacheAfterServerOverwrite(e,o.getNode(),g))?o.getNode().getImmediateChild(h).updateChild(p,d):o.getNode().getImmediateChild(h)):n.calcCompleteChild(h,t.getServerCache()))?this.filter_.updateChild(o.getNode(),h,v,p,r,i):o.getNode()),t.updateEventSnap(y,o.isFullyInitialized()||e.isEmpty(),this.filter_.filtersNodes())},Gl.prototype.applyServerOverwrite_=function(t,e,n,r,i,o,s){var a=t.getServerCache(),u=o?this.filter_:this.filter_.getIndexedFilter();if(e.isEmpty())h=u.updateFullNode(a.getNode(),n,null);else if(u.filtersNodes()&&!a.isFiltered())var c=a.getNode().updateChild(e,n),h=u.updateFullNode(a.getNode(),c,null);else{var l=e.getFront();if(!a.isCompleteForPath(e)&&1<e.getLength())return t;var f=e.popFront(),p=a.getNode().getImmediateChild(l).updateChild(f,n);h=".priority"===l?u.updatePriority(a.getNode(),p):u.updateChild(a.getNode(),l,p,f,jl,null)}var d=t.updateServerSnap(h,a.isFullyInitialized()||e.isEmpty(),u.filtersNodes()),v=new Vl(r,d,i);return this.generateEventCacheAfterServerEvent_(d,e,r,v,s)},Gl.prototype.applyUserOverwrite_=function(t,e,n,r,i,o){var s,a,u,c,h,l,f,p=t.getEventCache(),d=new Vl(r,t,i);return e.isEmpty()?(s=this.filter_.updateFullNode(t.getEventCache().getNode(),n,o),t.updateEventSnap(s,!0,this.filter_.filtersNodes())):".priority"===(a=e.getFront())?(s=this.filter_.updatePriority(t.getEventCache().getNode(),n),t.updateEventSnap(s,p.isFullyInitialized(),p.isFiltered())):(u=e.popFront(),c=p.getNode().getImmediateChild(a),l=void 0,l=u.isEmpty()?n:null!=(h=d.getCompleteChild(a))?".priority"===u.getBack()&&h.getChild(u.parent()).isEmpty()?h:h.updateChild(u,n):Oh.EMPTY_NODE,c.equals(l)?t:(f=this.filter_.updateChild(p.getNode(),a,l,u,d,o),t.updateEventSnap(f,p.isFullyInitialized(),this.filter_.filtersNodes())))},Gl.cacheHasChild_=function(t,e){return t.getEventCache().isCompleteForChild(e)},Gl.prototype.applyUserMerge_=function(r,i,t,o,s,a){var u=this,c=r;return t.foreach(function(t,e){var n=i.child(t);Gl.cacheHasChild_(r,n.getFront())&&(c=u.applyUserOverwrite_(c,n,e,o,s,a))}),t.foreach(function(t,e){var n=i.child(t);Gl.cacheHasChild_(r,n.getFront())||(c=u.applyUserOverwrite_(c,n,e,o,s,a))}),c},Gl.prototype.applyMerge_=function(n,t){return t.foreach(function(t,e){n=n.updateChild(t,e)}),n},Gl.prototype.applyServerMerge_=function(o,t,e,s,a,u,c){var h=this;if(o.getServerCache().getNode().isEmpty()&&!o.getServerCache().isFullyInitialized())return o;var l=o,n=t.isEmpty()?e:_l.Empty.setTree(t,e),f=o.getServerCache().getNode();return n.children.inorderTraversal(function(t,e){var n,r;f.hasChild(t)&&(n=o.getServerCache().getNode().getImmediateChild(t),r=h.applyMerge_(n,e),l=h.applyServerOverwrite_(l,new hc(t),r,s,a,u,c))}),n.children.inorderTraversal(function(t,e){var n,r,i=!o.getServerCache().isCompleteForChild(t)&&null==e.value;f.hasChild(t)||i||(n=o.getServerCache().getNode().getImmediateChild(t),r=h.applyMerge_(n,e),l=h.applyServerOverwrite_(l,new hc(t),r,s,a,u,c))}),l},Gl.prototype.ackUserWrite_=function(t,r,e,n,i,o){if(null!=n.shadowingWrite(r))return t;var s=t.getServerCache().isFiltered(),a=t.getServerCache();if(null!=e.value){if(r.isEmpty()&&a.isFullyInitialized()||a.isCompleteForPath(r))return this.applyServerOverwrite_(t,r,a.getNode().getChild(r),n,i,s,o);if(r.isEmpty()){var u=_l.Empty;return a.getNode().forEachChild(Zc,function(t,e){u=u.set(new hc(t),e)}),this.applyServerMerge_(t,r,u,n,i,s,o)}return t}var c=_l.Empty;return e.foreach(function(t,e){var n=r.child(t);a.isCompleteForPath(n)&&(c=c.set(t,a.getNode().getChild(n)))}),this.applyServerMerge_(t,r,c,n,i,s,o)},Gl.prototype.listenComplete_=function(t,e,n,r){var i=t.getServerCache(),o=t.updateServerSnap(i.getNode(),i.isFullyInitialized()||e.isEmpty(),i.isFiltered());return this.generateEventCacheAfterServerEvent_(o,e,n,jl,r)},Gl.prototype.revertUserWrite_=function(t,e,n,r,i){var o;if(null!=n.shadowingWrite(e))return t;var s,a,u,c,h=new Vl(n,t,r),l=t.getEventCache().getNode(),f=void 0;return e.isEmpty()||".priority"===e.getFront()?(a=void 0,a=t.getServerCache().isFullyInitialized()?n.calcCompleteEventCache(t.getCompleteServerSnap()):(s=t.getServerCache().getNode(),ea(s instanceof Oh,"serverChildren would be complete if leaf node"),n.calcCompleteEventChildren(s)),f=this.filter_.updateFullNode(l,a,i)):(u=e.getFront(),null==(c=n.calcCompleteChild(u,t.getServerCache()))&&t.getServerCache().isCompleteForChild(u)&&(c=l.getImmediateChild(u)),(f=null!=c?this.filter_.updateChild(l,u,c,e.popFront(),h,i):t.getEventCache().getNode().hasChild(u)?this.filter_.updateChild(l,u,Oh.EMPTY_NODE,e.popFront(),h,i):l).isEmpty()&&t.getServerCache().isFullyInitialized()&&(o=n.calcCompleteEventCache(t.getCompleteServerSnap())).isLeafNode()&&(f=this.filter_.updateFullNode(f,o,i))),o=t.getServerCache().isFullyInitialized()||null!=n.shadowingWrite(hc.Empty),t.updateEventSnap(f,o,this.filter_.filtersNodes())},Gl);function Gl(t){this.filter_=t}var Kl=(zl.prototype.generateEventsForChanges=function(t,e,n){var r=this,i=[],o=[];return t.forEach(function(t){t.type===Pl.CHILD_CHANGED&&r.index_.indexedValueChanged(t.oldSnap,t.snapshotNode)&&o.push(Pl.childMovedChange(t.childName,t.snapshotNode))}),this.generateEventsForType_(i,Pl.CHILD_REMOVED,t,n,e),this.generateEventsForType_(i,Pl.CHILD_ADDED,t,n,e),this.generateEventsForType_(i,Pl.CHILD_MOVED,o,n,e),this.generateEventsForType_(i,Pl.CHILD_CHANGED,t,n,e),this.generateEventsForType_(i,Pl.VALUE,t,n,e),i},zl.prototype.generateEventsForType_=function(r,e,t,i,o){var s=this,n=t.filter(function(t){return t.type===e});n.sort(this.compareChanges_.bind(this)),n.forEach(function(e){var n=s.materializeSingleChange_(e,o);i.forEach(function(t){t.respondsTo(e.type)&&r.push(t.createEvent(n,s.query_))})})},zl.prototype.materializeSingleChange_=function(t,e){return"value"===t.type||"child_removed"===t.type||(t.prevName=e.getPredecessorChildName(t.childName,t.snapshotNode,this.index_)),t},zl.prototype.compareChanges_=function(t,e){if(null==t.childName||null==e.childName)throw na("Should only compare child_ events.");var n=new Gc(t.childName,t.snapshotNode),r=new Gc(e.childName,e.snapshotNode);return this.index_.compare(n,r)},zl);function zl(t){this.query_=t,this.index_=this.query_.getQueryParams().getIndex()}var Ql,Yl=(Xl.prototype.getQuery=function(){return this.query_},Xl.prototype.getServerCache=function(){return this.viewCache_.getServerCache().getNode()},Xl.prototype.getCompleteServerCache=function(t){var e=this.viewCache_.getCompleteServerSnap();return e&&(this.query_.getQueryParams().loadsAllData()||!t.isEmpty()&&!e.getImmediateChild(t.getFront()).isEmpty())?e.getChild(t):null},Xl.prototype.isEmpty=function(){return 0===this.eventRegistrations_.length},Xl.prototype.addEventRegistration=function(t){this.eventRegistrations_.push(t)},Xl.prototype.removeEventRegistration=function(t,n){var r,i=[];if(n&&(ea(null==t,"A cancel should cancel all event registrations."),r=this.query_.path,this.eventRegistrations_.forEach(function(t){var e=t.createCancelEvent(n,r);e&&i.push(e)})),t){for(var e=[],o=0;o<this.eventRegistrations_.length;++o){var s=this.eventRegistrations_[o];if(s.matches(t)){if(t.hasAnyCallback()){e=e.concat(this.eventRegistrations_.slice(o+1));break}}else e.push(s)}this.eventRegistrations_=e}else this.eventRegistrations_=[];return i},Xl.prototype.applyOperation=function(t,e,n){t.type===ll.MERGE&&null!==t.source.queryId&&(ea(this.viewCache_.getCompleteServerSnap(),"We should always have a full cache before handling merges"),ea(this.viewCache_.getCompleteEventSnap(),"Missing event cache, even though we have a server cache"));var r=this.viewCache_,i=this.processor_.applyOperation(r,t,e,n);return this.processor_.assertIndexed(i.viewCache),ea(i.viewCache.getServerCache().isFullyInitialized()||!r.getServerCache().isFullyInitialized(),"Once a server snap is complete, it should never go back"),this.viewCache_=i.viewCache,this.generateEventsForChanges_(i.changes,i.viewCache.getEventCache().getNode(),null)},Xl.prototype.getInitialEvents=function(t){var e=this.viewCache_.getEventCache(),n=[];return e.getNode().isLeafNode()||e.getNode().forEachChild(ch,function(t,e){n.push(Pl.childAddedChange(t,e))}),e.isFullyInitialized()&&n.push(Pl.valueChange(e.getNode())),this.generateEventsForChanges_(n,e.getNode(),t)},Xl.prototype.generateEventsForChanges_=function(t,e,n){var r=n?[n]:this.eventRegistrations_;return this.eventGenerator_.generateEventsForChanges(t,e,r)},Xl);function Xl(t,e){this.query_=t,this.eventRegistrations_=[];var n=this.query_.getQueryParams(),r=new xl(n.getIndex()),i=n.getNodeFilter();this.processor_=new Wl(i);var o=e.getServerCache(),s=e.getEventCache(),a=r.updateFullNode(Oh.EMPTY_NODE,o.getNode(),null),u=i.updateFullNode(Oh.EMPTY_NODE,s.getNode(),null),c=new Al(a,o.isFullyInitialized(),r.filtersNodes()),h=new Al(u,s.isFullyInitialized(),i.filtersNodes());this.viewCache_=new Ol(h,c),this.eventGenerator_=new Kl(this.query_)}var $l=(Object.defineProperty(Jl,"__referenceConstructor",{get:function(){return ea(Ql,"Reference.ts has not been loaded"),Ql},set:function(t){ea(!Ql,"__referenceConstructor has already been defined"),Ql=t},enumerable:!1,configurable:!0}),Jl.prototype.isEmpty=function(){return 0===this.views.size},Jl.prototype.applyOperation=function(t,e,n){var r,i,o=t.source.queryId;if(null!==o){var s=this.views.get(o);return ea(null!=s,"SyncTree gave us an op for an invalid query."),s.applyOperation(t,e,n)}var a=[];try{for(var u=Qs(this.views.values()),c=u.next();!c.done;c=u.next())s=c.value,a=a.concat(s.applyOperation(t,e,n))}catch(t){r={error:t}}finally{try{c&&!c.done&&(i=u.return)&&i.call(u)}finally{if(r)throw r.error}}return a},Jl.prototype.addEventRegistration=function(t,e,n,r,i){var o,s,a,u=t.queryIdentifier(),c=this.views.get(u);return c||(s=!1,s=!!(o=n.calcCompleteEventCache(i?r:null))||(o=r instanceof Oh?n.calcCompleteEventChildren(r):Oh.EMPTY_NODE,!1),a=new Ol(new Al(o,s,!1),new Al(r,i,!1)),c=new Yl(t,a),this.views.set(u,c)),c.addEventRegistration(e),c.getInitialEvents(e)},Jl.prototype.removeEventRegistration=function(t,e,n){var r,i,o=t.queryIdentifier(),s=[],a=[],u=this.hasCompleteView();if("default"===o)try{for(var c=Qs(this.views.entries()),h=c.next();!h.done;h=c.next()){var l=Ys(h.value,2),f=l[0],p=l[1],a=a.concat(p.removeEventRegistration(e,n));p.isEmpty()&&(this.views.delete(f),p.getQuery().getQueryParams().loadsAllData()||s.push(p.getQuery()))}}catch(t){r={error:t}}finally{try{h&&!h.done&&(i=c.return)&&i.call(c)}finally{if(r)throw r.error}}else(p=this.views.get(o))&&(a=a.concat(p.removeEventRegistration(e,n)),p.isEmpty()&&(this.views.delete(o),p.getQuery().getQueryParams().loadsAllData()||s.push(p.getQuery())));return u&&!this.hasCompleteView()&&s.push(new Jl.__referenceConstructor(t.repo,t.path)),{removed:s,events:a}},Jl.prototype.getQueryViews=function(){var e,t,n=[];try{for(var r=Qs(this.views.values()),i=r.next();!i.done;i=r.next()){var o=i.value;o.getQuery().getQueryParams().loadsAllData()||n.push(o)}}catch(t){e={error:t}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}return n},Jl.prototype.getCompleteServerCache=function(t){var e,n,r=null;try{for(var i=Qs(this.views.values()),o=i.next();!o.done;o=i.next())var s=o.value,r=r||s.getCompleteServerCache(t)}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r},Jl.prototype.viewForQuery=function(t){if(t.getQueryParams().loadsAllData())return this.getCompleteView();var e=t.queryIdentifier();return this.views.get(e)},Jl.prototype.viewExistsForQuery=function(t){return null!=this.viewForQuery(t)},Jl.prototype.hasCompleteView=function(){return null!=this.getCompleteView()},Jl.prototype.getCompleteView=function(){var e,t;try{for(var n=Qs(this.views.values()),r=n.next();!r.done;r=n.next()){var i=r.value;if(i.getQuery().getQueryParams().loadsAllData())return i}}catch(t){e={error:t}}finally{try{r&&!r.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}return null},Jl);function Jl(){this.views=new Map}var Zl=(tf.prototype.addWrite=function(t,e){if(t.isEmpty())return new tf(new _l(e));var n=this.writeTree_.findRootMostValueAndPath(t);if(null!=n){var r=n.path,i=n.value,o=hc.relativePath(r,t),i=i.updateChild(o,e);return new tf(this.writeTree_.set(r,i))}var s=new _l(e);return new tf(this.writeTree_.setTree(t,s))},tf.prototype.addWrites=function(n,t){var r=this;return ic(t,function(t,e){r=r.addWrite(n.child(t),e)}),r},tf.prototype.removeWrite=function(t){return t.isEmpty()?tf.Empty:new tf(this.writeTree_.setTree(t,_l.Empty))},tf.prototype.hasCompleteWrite=function(t){return null!=this.getCompleteNode(t)},tf.prototype.getCompleteNode=function(t){var e=this.writeTree_.findRootMostValueAndPath(t);return null!=e?this.writeTree_.get(e.path).getChild(hc.relativePath(e.path,t)):null},tf.prototype.getCompleteChildren=function(){var n=[],t=this.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild(ch,function(t,e){n.push(new Gc(t,e))}):this.writeTree_.children.inorderTraversal(function(t,e){null!=e.value&&n.push(new Gc(t,e.value))}),n},tf.prototype.childCompoundWrite=function(t){if(t.isEmpty())return this;var e=this.getCompleteNode(t);return new tf(null!=e?new _l(e):this.writeTree_.subtree(t))},tf.prototype.isEmpty=function(){return this.writeTree_.isEmpty()},tf.prototype.apply=function(t){return function n(r,t,i){{if(null!=t.value)return i.updateChild(r,t.value);var o=null;return t.children.inorderTraversal(function(t,e){".priority"===t?(ea(null!==e.value,"Priority writes must always be leaf nodes"),o=e.value):i=n(r.child(t),e,i)}),i.getChild(r).isEmpty()||null===o||(i=i.updateChild(r.child(".priority"),o)),i}}(hc.Empty,this.writeTree_,t)},tf.Empty=new tf(new _l(null)),tf);function tf(t){this.writeTree_=t}var ef=(nf.prototype.childWrites=function(t){return new rf(t,this)},nf.prototype.addOverwrite=function(t,e,n,r){ea(n>this.lastWriteId_,"Stacking an older write on top of newer ones"),void 0===r&&(r=!0),this.allWrites_.push({path:t,snap:e,writeId:n,visible:r}),r&&(this.visibleWrites_=this.visibleWrites_.addWrite(t,e)),this.lastWriteId_=n},nf.prototype.addMerge=function(t,e,n){ea(n>this.lastWriteId_,"Stacking an older merge on top of newer ones"),this.allWrites_.push({path:t,children:e,writeId:n,visible:!0}),this.visibleWrites_=this.visibleWrites_.addWrites(t,e),this.lastWriteId_=n},nf.prototype.getWrite=function(t){for(var e=0;e<this.allWrites_.length;e++){var n=this.allWrites_[e];if(n.writeId===t)return n}return null},nf.prototype.removeWrite=function(e){var n=this,t=this.allWrites_.findIndex(function(t){return t.writeId===e});ea(0<=t,"removeWrite called with nonexistent writeId.");var r=this.allWrites_[t];this.allWrites_.splice(t,1);for(var i=r.visible,o=!1,s=this.allWrites_.length-1;i&&0<=s;){var a=this.allWrites_[s];a.visible&&(t<=s&&this.recordContainsPath_(a,r.path)?i=!1:r.path.contains(a.path)&&(o=!0)),s--}return!!i&&(o?this.resetTree_():r.snap?this.visibleWrites_=this.visibleWrites_.removeWrite(r.path):ic(r.children,function(t){n.visibleWrites_=n.visibleWrites_.removeWrite(r.path.child(t))}),!0)},nf.prototype.getCompleteWriteData=function(t){return this.visibleWrites_.getCompleteNode(t)},nf.prototype.calcCompleteEventCache=function(e,t,n,r){if(n||r){var i=this.visibleWrites_.childCompoundWrite(e);if(!r&&i.isEmpty())return t;if(r||null!=t||i.hasCompleteWrite(hc.Empty)){var o=nf.layerTree_(this.allWrites_,function(t){return(t.visible||r)&&(!n||!~n.indexOf(t.writeId))&&(t.path.contains(e)||e.contains(t.path))},e),s=t||Oh.EMPTY_NODE;return o.apply(s)}return null}var a=this.visibleWrites_.getCompleteNode(e);if(null!=a)return a;var u=this.visibleWrites_.childCompoundWrite(e);if(u.isEmpty())return t;if(null!=t||u.hasCompleteWrite(hc.Empty)){var s=t||Oh.EMPTY_NODE;return u.apply(s)}return null},nf.prototype.calcCompleteEventChildren=function(t,e){var r=Oh.EMPTY_NODE,n=this.visibleWrites_.getCompleteNode(t);if(n)return n.isLeafNode()||n.forEachChild(ch,function(t,e){r=r.updateImmediateChild(t,e)}),r;if(e){var i=this.visibleWrites_.childCompoundWrite(t);return e.forEachChild(ch,function(t,e){var n=i.childCompoundWrite(new hc(t)).apply(e);r=r.updateImmediateChild(t,n)}),i.getCompleteChildren().forEach(function(t){r=r.updateImmediateChild(t.name,t.node)}),r}return this.visibleWrites_.childCompoundWrite(t).getCompleteChildren().forEach(function(t){r=r.updateImmediateChild(t.name,t.node)}),r},nf.prototype.calcEventCacheAfterServerOverwrite=function(t,e,n,r){ea(n||r,"Either existingEventSnap or existingServerSnap must exist");var i=t.child(e);if(this.visibleWrites_.hasCompleteWrite(i))return null;var o=this.visibleWrites_.childCompoundWrite(i);return o.isEmpty()?r.getChild(e):o.apply(r.getChild(e))},nf.prototype.calcCompleteChild=function(t,e,n){var r=t.child(e),i=this.visibleWrites_.getCompleteNode(r);return null!=i?i:n.isCompleteForChild(e)?this.visibleWrites_.childCompoundWrite(r).apply(n.getNode().getImmediateChild(e)):null},nf.prototype.shadowingWrite=function(t){return this.visibleWrites_.getCompleteNode(t)},nf.prototype.calcIndexedSlice=function(t,e,n,r,i,o){var s,a=this.visibleWrites_.childCompoundWrite(t),u=a.getCompleteNode(hc.Empty);if(null!=u)s=u;else{if(null==e)return[];s=a.apply(e)}if((s=s.withIndex(o)).isEmpty()||s.isLeafNode())return[];for(var c=[],h=o.getCompare(),l=i?s.getReverseIteratorFrom(n,o):s.getIteratorFrom(n,o),f=l.getNext();f&&c.length<r;)0!==h(f,n)&&c.push(f),f=l.getNext();return c},nf.prototype.recordContainsPath_=function(t,e){if(t.snap)return t.path.contains(e);for(var n in t.children)if(t.children.hasOwnProperty(n)&&t.path.child(n).contains(e))return!0;return!1},nf.prototype.resetTree_=function(){this.visibleWrites_=nf.layerTree_(this.allWrites_,nf.DefaultFilter_,hc.Empty),0<this.allWrites_.length?this.lastWriteId_=this.allWrites_[this.allWrites_.length-1].writeId:this.lastWriteId_=-1},nf.DefaultFilter_=function(t){return t.visible},nf.layerTree_=function(t,e,n){for(var r=Zl.Empty,i=0;i<t.length;++i){var o=t[i];if(e(o)){var s,a,u=o.path,c=void 0;if(o.snap)n.contains(u)?(c=hc.relativePath(n,u),r=r.addWrite(c,o.snap)):u.contains(n)&&(c=hc.relativePath(u,n),r=r.addWrite(hc.Empty,o.snap.getChild(c)));else{if(!o.children)throw na("WriteRecord should have .snap or .children");n.contains(u)?(c=hc.relativePath(n,u),r=r.addWrites(c,o.children)):u.contains(n)&&((c=hc.relativePath(u,n)).isEmpty()?r=r.addWrites(hc.Empty,o.children):(s=Na(o.children,c.getFront()))&&(a=s.getChild(c.popFront()),r=r.addWrite(hc.Empty,a)))}}}return r},nf);function nf(){this.visibleWrites_=Zl.Empty,this.allWrites_=[],this.lastWriteId_=-1}var rf=(of.prototype.calcCompleteEventCache=function(t,e,n){return this.writeTree_.calcCompleteEventCache(this.treePath_,t,e,n)},of.prototype.calcCompleteEventChildren=function(t){return this.writeTree_.calcCompleteEventChildren(this.treePath_,t)},of.prototype.calcEventCacheAfterServerOverwrite=function(t,e,n){return this.writeTree_.calcEventCacheAfterServerOverwrite(this.treePath_,t,e,n)},of.prototype.shadowingWrite=function(t){return this.writeTree_.shadowingWrite(this.treePath_.child(t))},of.prototype.calcIndexedSlice=function(t,e,n,r,i){return this.writeTree_.calcIndexedSlice(this.treePath_,t,e,n,r,i)},of.prototype.calcCompleteChild=function(t,e){return this.writeTree_.calcCompleteChild(this.treePath_,t,e)},of.prototype.child=function(t){return new of(this.treePath_.child(t),this.writeTree_)},of);function of(t,e){this.treePath_=t,this.writeTree_=e}var sf=(af.prototype.applyUserOverwrite=function(t,e,n,r){return this.pendingWriteTree_.addOverwrite(t,e,n,r),r?this.applyOperationToSyncPoints_(new Tl(vl.User,t,e)):[]},af.prototype.applyUserMerge=function(t,e,n){this.pendingWriteTree_.addMerge(t,e,n);var r=_l.fromObject(e);return this.applyOperationToSyncPoints_(new Cl(vl.User,t,r))},af.prototype.ackUserWrite=function(t,e){void 0===e&&(e=!1);var n=this.pendingWriteTree_.getWrite(t);if(this.pendingWriteTree_.removeWrite(t)){var r=_l.Empty;return null!=n.snap?r=r.set(hc.Empty,!0):ic(n.children,function(t,e){r=r.set(new hc(t),e)}),this.applyOperationToSyncPoints_(new ml(n.path,r,e))}return[]},af.prototype.applyServerOverwrite=function(t,e){return this.applyOperationToSyncPoints_(new Tl(vl.Server,t,e))},af.prototype.applyServerMerge=function(t,e){var n=_l.fromObject(e);return this.applyOperationToSyncPoints_(new Cl(vl.Server,t,n))},af.prototype.applyListenComplete=function(t){return this.applyOperationToSyncPoints_(new El(vl.Server,t))},af.prototype.applyTaggedQueryOverwrite=function(t,e,n){var r=this.queryKeyForTag_(n);if(null==r)return[];var i=af.parseQueryKey_(r),o=i.path,s=i.queryId,a=hc.relativePath(o,t),u=new Tl(vl.forServerTaggedQuery(s),a,e);return this.applyTaggedOperation_(o,u)},af.prototype.applyTaggedQueryMerge=function(t,e,n){var r=this.queryKeyForTag_(n);if(r){var i=af.parseQueryKey_(r),o=i.path,s=i.queryId,a=hc.relativePath(o,t),u=_l.fromObject(e),c=new Cl(vl.forServerTaggedQuery(s),a,u);return this.applyTaggedOperation_(o,c)}return[]},af.prototype.applyTaggedListenComplete=function(t,e){var n=this.queryKeyForTag_(e);if(n){var r=af.parseQueryKey_(n),i=r.path,o=r.queryId,s=hc.relativePath(i,t),a=new El(vl.forServerTaggedQuery(o),s);return this.applyTaggedOperation_(i,a)}return[]},af.prototype.addEventRegistration=function(t,e){var r=t.path,i=null,o=!1;this.syncPointTree_.foreachOnPath(r,function(t,e){var n=hc.relativePath(t,r);i=i||e.getCompleteServerCache(n),o=o||e.hasCompleteView()});var n,s=this.syncPointTree_.get(r);s?(o=o||s.hasCompleteView(),i=i||s.getCompleteServerCache(hc.Empty)):(s=new $l,this.syncPointTree_=this.syncPointTree_.set(r,s)),null!=i?n=!0:(n=!1,i=Oh.EMPTY_NODE,this.syncPointTree_.subtree(r).foreachChild(function(t,e){var n=e.getCompleteServerCache(hc.Empty);n&&(i=i.updateImmediateChild(t,n))}));var a,u,c=s.viewExistsForQuery(t);c||t.getQueryParams().loadsAllData()||(a=af.makeQueryKey_(t),ea(!this.queryToTagMap.has(a),"View does not exist, but we have a tag"),u=af.getNextQueryTag_(),this.queryToTagMap.set(a,u),this.tagToQueryMap.set(u,a));var h,l=this.pendingWriteTree_.childWrites(r),f=s.addEventRegistration(t,e,l,i,n);return c||o||(h=s.viewForQuery(t),f=f.concat(this.setupListener_(t,h))),f},af.prototype.removeEventRegistration=function(t,e,n){var r=this,i=t.path,o=this.syncPointTree_.get(i),s=[];if(o&&("default"===t.queryIdentifier()||o.viewExistsForQuery(t))){var a=o.removeEventRegistration(t,e,n);o.isEmpty()&&(this.syncPointTree_=this.syncPointTree_.remove(i));var u=a.removed,s=a.events,c=-1!==u.findIndex(function(t){return t.getQueryParams().loadsAllData()}),h=this.syncPointTree_.findOnPath(i,function(t,e){return e.hasCompleteView()});if(c&&!h){var l=this.syncPointTree_.subtree(i);if(!l.isEmpty())for(var f=this.collectDistinctViewsForSubTree_(l),p=0;p<f.length;++p){var d=f[p],v=d.getQuery(),y=this.createListenerForView_(d);this.listenProvider_.startListening(af.queryForListening_(v),this.tagForQuery_(v),y.hashFn,y.onComplete)}}!h&&0<u.length&&!n&&(c?this.listenProvider_.stopListening(af.queryForListening_(t),null):u.forEach(function(t){var e=r.queryToTagMap.get(af.makeQueryKey_(t));r.listenProvider_.stopListening(af.queryForListening_(t),e)})),this.removeTags_(u)}return s},af.prototype.calcCompleteEventCache=function(i,t){var e=this.pendingWriteTree_,n=this.syncPointTree_.findOnPath(i,function(t,e){var n=hc.relativePath(t,i),r=e.getCompleteServerCache(n);if(r)return r});return e.calcCompleteEventCache(i,n,t,!0)},af.prototype.collectDistinctViewsForSubTree_=function(t){return t.fold(function(t,e,n){if(e&&e.hasCompleteView())return[e.getCompleteView()];var r=[];return e&&(r=e.getQueryViews()),ic(n,function(t,e){r=r.concat(e)}),r})},af.prototype.removeTags_=function(t){for(var e=0;e<t.length;++e){var n,r,i=t[e];i.getQueryParams().loadsAllData()||(n=af.makeQueryKey_(i),r=this.queryToTagMap.get(n),this.queryToTagMap.delete(n),this.tagToQueryMap.delete(r))}},af.queryForListening_=function(t){return t.getQueryParams().loadsAllData()&&!t.getQueryParams().isDefault()?t.getRef():t},af.prototype.setupListener_=function(t,e){var n=t.path,r=this.tagForQuery_(t),i=this.createListenerForView_(e),o=this.listenProvider_.startListening(af.queryForListening_(t),r,i.hashFn,i.onComplete),s=this.syncPointTree_.subtree(n);if(r)ea(!s.value.hasCompleteView(),"If we're adding a query, it shouldn't be shadowed");else for(var a=s.fold(function(t,e,n){if(!t.isEmpty()&&e&&e.hasCompleteView())return[e.getCompleteView().getQuery()];var r=[];return e&&(r=r.concat(e.getQueryViews().map(function(t){return t.getQuery()}))),ic(n,function(t,e){r=r.concat(e)}),r}),u=0;u<a.length;++u){var c=a[u];this.listenProvider_.stopListening(af.queryForListening_(c),this.tagForQuery_(c))}return o},af.prototype.createListenerForView_=function(t){var n=this,r=t.getQuery(),i=this.tagForQuery_(r);return{hashFn:function(){return(t.getServerCache()||Oh.EMPTY_NODE).hash()},onComplete:function(t){if("ok"===t)return i?n.applyTaggedListenComplete(r.path,i):n.applyListenComplete(r.path);var e=function(t,e){var n="Unknown Error";"too_big"===t?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===t?n="Client doesn't have permission to access the desired data.":"unavailable"===t&&(n="The service is unavailable");var r=new Error(t+" at "+e.path.toString()+": "+n);return r.code=t.toUpperCase(),r}(t,r);return n.removeEventRegistration(r,null,e)}}},af.makeQueryKey_=function(t){return t.path.toString()+"$"+t.queryIdentifier()},af.parseQueryKey_=function(t){var e=t.indexOf("$");return ea(-1!==e&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new hc(t.substr(0,e))}},af.prototype.queryKeyForTag_=function(t){return this.tagToQueryMap.get(t)},af.prototype.tagForQuery_=function(t){var e=af.makeQueryKey_(t);return this.queryToTagMap.get(e)},af.getNextQueryTag_=function(){return af.nextQueryTag_++},af.prototype.applyTaggedOperation_=function(t,e){var n=this.syncPointTree_.get(t);ea(n,"Missing sync point for query tag that we're tracking");var r=this.pendingWriteTree_.childWrites(t);return n.applyOperation(e,r,null)},af.prototype.applyOperationToSyncPoints_=function(t){return this.applyOperationHelper_(t,this.syncPointTree_,null,this.pendingWriteTree_.childWrites(hc.Empty))},af.prototype.applyOperationHelper_=function(t,e,n,r){if(t.path.isEmpty())return this.applyOperationDescendantsHelper_(t,e,n,r);var i=e.get(hc.Empty);null==n&&null!=i&&(n=i.getCompleteServerCache(hc.Empty));var o,s,a=[],u=t.path.getFront(),c=t.operationForChild(u),h=e.children.get(u);return h&&c&&(o=n?n.getImmediateChild(u):null,s=r.child(u),a=a.concat(this.applyOperationHelper_(c,h,o,s))),i&&(a=a.concat(i.applyOperation(t,r,n))),a},af.prototype.applyOperationDescendantsHelper_=function(o,t,s,a){var u=this,e=t.get(hc.Empty);null==s&&null!=e&&(s=e.getCompleteServerCache(hc.Empty));var c=[];return t.children.inorderTraversal(function(t,e){var n=s?s.getImmediateChild(t):null,r=a.child(t),i=o.operationForChild(t);i&&(c=c.concat(u.applyOperationDescendantsHelper_(i,e,n,r)))}),e&&(c=c.concat(e.applyOperation(o,a,s))),c},af.nextQueryTag_=1,af);function af(t){this.listenProvider_=t,this.syncPointTree_=_l.Empty,this.pendingWriteTree_=new ef,this.tagToQueryMap=new Map,this.queryToTagMap=new Map}var uf=(cf.prototype.getNode=function(t){return this.rootNode_.getChild(t)},cf.prototype.updateSnapshot=function(t,e){this.rootNode_=this.rootNode_.updateChild(t,e)},cf);function cf(){this.rootNode_=Oh.EMPTY_NODE}var hf=(lf.prototype.incrementCounter=function(t,e){void 0===e&&(e=1),Ca(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=e},lf.prototype.get=function(){return ia(this.counters_)},lf);function lf(){this.counters_={}}var ff=(pf.getCollection=function(t){var e=t.toString();return this.collections_[e]||(this.collections_[e]=new hf),this.collections_[e]},pf.getOrCreateReporter=function(t,e){var n=t.toString();return this.reporters_[n]||(this.reporters_[n]=e()),this.reporters_[n]},pf.collections_={},pf.reporters_={},pf);function pf(){}var df=(vf.prototype.get=function(){var t=this.collection_.get(),n=Hs({},t);return this.last_&&ic(this.last_,function(t,e){n[t]=n[t]-e}),this.last_=t,n},vf);function vf(t){this.collection_=t,this.last_=null}var yf=(gf.prototype.includeStat=function(t){this.statsToReport_[t]=!0},gf.prototype.reportStats_=function(){var n=this,t=this.statsListener_.get(),r={},i=!1;ic(t,function(t,e){0<e&&Ca(n.statsToReport_,t)&&(r[t]=e,i=!0)}),i&&this.server_.reportStats(r),ac(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))},gf);function gf(t,e){this.server_=e,this.statsToReport_={},this.statsListener_=new df(t);var n=1e4+2e4*Math.random();ac(this.reportStats_.bind(this),Math.floor(n))}var mf=(bf.prototype.queueEvents=function(t){for(var e=null,n=0;n<t.length;n++){var r=t[n],i=r.getPath();null===e||i.equals(e.getPath())||(this.eventLists_.push(e),e=null),null===e&&(e=new _f(i)),e.add(r)}e&&this.eventLists_.push(e)},bf.prototype.raiseEventsAtPath=function(e,t){this.queueEvents(t),this.raiseQueuedEventsMatchingPredicate_(function(t){return t.equals(e)})},bf.prototype.raiseEventsForChangedPath=function(e,t){this.queueEvents(t),this.raiseQueuedEventsMatchingPredicate_(function(t){return t.contains(e)||e.contains(t)})},bf.prototype.raiseQueuedEventsMatchingPredicate_=function(t){this.recursionDepth_++;for(var e=!0,n=0;n<this.eventLists_.length;n++){var r=this.eventLists_[n];r&&(t(r.getPath())?(this.eventLists_[n].raise(),this.eventLists_[n]=null):e=!1)}e&&(this.eventLists_=[]),this.recursionDepth_--},bf);function bf(){this.eventLists_=[],this.recursionDepth_=0}var _f=(wf.prototype.add=function(t){this.events_.push(t)},wf.prototype.raise=function(){for(var t=0;t<this.events_.length;t++){var e,n=this.events_[t];null!==n&&(this.events_[t]=null,e=n.getEventRunner(),Xu&&Ju("event: "+n.toString()),sc(e))}},wf.prototype.getPath=function(){return this.path_},wf);function wf(t){this.path_=t,this.events_=[]}var Ef=(If.prototype.trigger=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Array.isArray(this.listeners_[t]))for(var r=Xs(this.listeners_[t]),i=0;i<r.length;i++)r[i].callback.apply(r[i].context,e)},If.prototype.on=function(t,e,n){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:e,context:n});var r=this.getInitialEvent(t);r&&e.apply(n,r)},If.prototype.off=function(t,e,n){this.validateEventType_(t);for(var r=this.listeners_[t]||[],i=0;i<r.length;i++)if(r[i].callback===e&&(!n||n===r[i].context))return void r.splice(i,1)},If.prototype.validateEventType_=function(e){ea(this.allowedEvents_.find(function(t){return t===e}),"Unknown event: "+e)},If);function If(t){this.allowedEvents_=t,this.listeners_={},ea(Array.isArray(t)&&0<t.length,"Requires a non-empty array")}var Tf,Sf=(Gs(Cf,Tf=Ef),Cf.getInstance=function(){return new Cf},Cf.prototype.getInitialEvent=function(t){return ea("visible"===t,"Unknown event type: "+t),[this.visible_]},Cf);function Cf(){var e,t,n=Tf.call(this,["visible"])||this;return"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(t="visibilitychange",e="hidden"):void 0!==document.mozHidden?(t="mozvisibilitychange",e="mozHidden"):void 0!==document.msHidden?(t="msvisibilitychange",e="msHidden"):void 0!==document.webkitHidden&&(t="webkitvisibilitychange",e="webkitHidden")),n.visible_=!0,t&&document.addEventListener(t,function(){var t=!document[e];t!==n.visible_&&(n.visible_=t,n.trigger("visible",t))},!1),n}var Nf,Af=(Gs(kf,Nf=Ef),kf.getInstance=function(){return new kf},kf.prototype.getInitialEvent=function(t){return ea("online"===t,"Unknown event type: "+t),[this.online_]},kf.prototype.currentlyOnline=function(){return this.online_},kf);function kf(){var t=Nf.call(this,["online"])||this;return t.online_=!0,"undefined"==typeof window||void 0===window.addEventListener||ca()||(window.addEventListener("online",function(){t.online_||(t.online_=!0,t.trigger("online",!0))},!1),window.addEventListener("offline",function(){t.online_&&(t.online_=!1,t.trigger("online",!1))},!1)),t}var Of=(Rf.prototype.closeAfter=function(t,e){this.closeAfterResponse=t,this.onClose=e,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)},Rf.prototype.handleResponse=function(t,e){var n=this;this.pendingResponses[t]=e;for(var r=this;this.pendingResponses[this.currentResponseNum];){if("break"===function(){var e=r.pendingResponses[r.currentResponseNum];delete r.pendingResponses[r.currentResponseNum];for(var t=0;t<e.length;++t)!function(t){e[t]&&sc(function(){n.onMessage_(e[t])})}(t);if(r.currentResponseNum===r.closeAfterResponse)return r.onClose&&(r.onClose(),r.onClose=null),"break";r.currentResponseNum++}())break}},Rf);function Rf(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}var Pf="pLPCommand",Df="pRTLPCB",xf=(Lf.prototype.open=function(t,e){var n,r,i,s=this;this.curSegmentNum=0,this.onDisconnect_=e,this.myPacketOrderer=new Of(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(function(){s.log_("Timed out trying to connect."),s.onClosed_(),s.connectTimeoutTimer_=null},Math.floor(3e4)),n=function(){var t,e;s.isClosed_||(s.scriptTagHolder=new Mf(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=Ys(t,5),r=n[0],i=n[1],o=n[2];n[3],n[4];if(s.incrementIncomingBytes_(t),s.scriptTagHolder)if(s.connectTimeoutTimer_&&(clearTimeout(s.connectTimeoutTimer_),s.connectTimeoutTimer_=null),s.everConnected_=!0,"start"===r)s.id=i,s.password=o;else{if("close"!==r)throw new Error("Unrecognized command received: "+r);i?(s.scriptTagHolder.sendNewPolls=!1,s.myPacketOrderer.closeAfter(i,function(){s.onClosed_()})):s.onClosed_()}},function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=Ys(t,2),r=n[0],i=n[1];s.incrementIncomingBytes_(t),s.myPacketOrderer.handleResponse(r,i)},function(){s.onClosed_()},s.urlFn),(t={start:"t"}).ser=Math.floor(1e8*Math.random()),s.scriptTagHolder.uniqueCallbackIdentifier&&(t.cb=s.scriptTagHolder.uniqueCallbackIdentifier),t.v="5",s.transportSessionId&&(t.s=s.transportSessionId),s.lastSessionId&&(t.ls=s.lastSessionId),s.applicationId&&(t.p=s.applicationId),"undefined"!=typeof location&&location.href&&-1!==location.href.indexOf(dc)&&(t.r="f"),e=s.urlFn(t),s.log_("Connecting via long-poll to "+e),s.scriptTagHolder.addTag(e,function(){}))},"complete"===document.readyState?n():(r=!1,i=function(){document.body?r||(r=!0,n()):setTimeout(i,Math.floor(10))},document.addEventListener?(document.addEventListener("DOMContentLoaded",i,!1),window.addEventListener("load",i,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",function(){"complete"===document.readyState&&i()}),window.attachEvent("onload",i)))},Lf.prototype.start=function(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)},Lf.forceAllow=function(){Lf.forceAllow_=!0},Lf.forceDisallow=function(){Lf.forceDisallow_=!0},Lf.isAvailable=function(){return!!Lf.forceAllow_||!(Lf.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI)},Lf.prototype.markConnectionHealthy=function(){},Lf.prototype.shutdown_=function(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)},Lf.prototype.onClosed_=function(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))},Lf.prototype.close=function(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())},Lf.prototype.send=function(t){var e=Ta(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);for(var n,r=(n=Js(e),ra.encodeByteArray(n,!0)),i=Wu(r,1840),o=0;o<i.length;o++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[o]),this.curSegmentNum++},Lf.prototype.addDisconnectPingFrame=function(t,e){this.myDisconnFrame=document.createElement("iframe");var n={dframe:"t"};n.id=t,n.pw=e,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)},Lf.prototype.incrementIncomingBytes_=function(t){var e=Ta(t).length;this.bytesReceived+=e,this.stats_.incrementCounter("bytes_received",e)},Lf);function Lf(t,e,n,r,i){this.connId=t,this.repoInfo=e,this.applicationId=n,this.transportSessionId=r,this.lastSessionId=i,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Zu(t),this.stats_=ff.getCollection(e),this.urlFn=function(t){return e.connectionURL(yc,t)}}var Mf=(Ff.createIFrame_=function(){var e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||Ju("No IE domain setting required")}catch(t){var n=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+n+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e},Ff.prototype.close=function(){var t=this;this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(function(){null!==t.myIFrame&&(document.body.removeChild(t.myIFrame),t.myIFrame=null)},Math.floor(0)));var e=this.onDisconnect;e&&(this.onDisconnect=null,e())},Ff.prototype.startLongPoll=function(t,e){for(this.myID=t,this.myPW=e,this.alive=!0;this.newRequest_(););},Ff.prototype.newRequest_=function(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(0<this.pendingSegs.length?2:1)){this.currentSerial++;var t={};t.id=this.myID,t.pw=this.myPW,t.ser=this.currentSerial;for(var e=this.urlFn(t),n="",r=0;0<this.pendingSegs.length;){if(!(this.pendingSegs[0].d.length+30+n.length<=1870))break;var i=this.pendingSegs.shift(),n=n+"&seg"+r+"="+i.seg+"&ts"+r+"="+i.ts+"&d"+r+"="+i.d;r++}return e+=n,this.addLongPollTag_(e,this.currentSerial),!0}return!1},Ff.prototype.enqueueSegment=function(t,e,n){this.pendingSegs.push({seg:t,ts:e,d:n}),this.alive&&this.newRequest_()},Ff.prototype.addLongPollTag_=function(t,e){var n=this;this.outstandingRequests.add(e);function r(){n.outstandingRequests.delete(e),n.newRequest_()}var i=setTimeout(r,Math.floor(25e3));this.addTag(t,function(){clearTimeout(i),r()})},Ff.prototype.addTag=function(t,n){var r=this;setTimeout(function(){try{if(!r.sendNewPolls)return;var e=r.myIFrame.doc.createElement("script");e.type="text/javascript",e.async=!0,e.src=t,e.onload=e.onreadystatechange=function(){var t=e.readyState;t&&"loaded"!==t&&"complete"!==t||(e.onload=e.onreadystatechange=null,e.parentNode&&e.parentNode.removeChild(e),n())},e.onerror=function(){Ju("Long-poll script failed to load: "+t),r.sendNewPolls=!1,r.close()},r.myIFrame.doc.body.appendChild(e)}catch(t){}},Math.floor(1))},Ff);function Ff(t,e,n,r){this.onDisconnect=n,this.urlFn=r,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,this.uniqueCallbackIdentifier=Qu(),window[Pf+this.uniqueCallbackIdentifier]=t,window[Df+this.uniqueCallbackIdentifier]=e,this.myIFrame=Ff.createIFrame_();var i="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length)&&(i='<script>document.domain="'+document.domain+'";<\/script>');var o="<html><body>"+i+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(t){Ju("frame writing exception"),t.stack&&Ju(t.stack),Ju(t)}}var Uf="";function jf(t){Uf=t}var Vf=null;"undefined"!=typeof MozWebSocket?Vf=MozWebSocket:"undefined"!=typeof WebSocket&&(Vf=WebSocket);var qf=(Bf.connectionURL_=function(t,e,n){var r={v:"5"};return"undefined"!=typeof location&&location.href&&-1!==location.href.indexOf(dc)&&(r.r="f"),e&&(r.s=e),n&&(r.ls=n),t.connectionURL(vc,r)},Bf.prototype.open=function(t,e){var n,r=this;this.onDisconnect=e,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Hu.set("previous_websocket_failure",!0);try{fa()||(n={headers:{"X-Firebase-GMPID":this.applicationId||""}},this.mySock=new Vf(this.connURL,[],n))}catch(t){this.log_("Error instantiating WebSocket.");var i=t.message||t.data;return i&&this.log_(i),void this.onClosed_()}this.mySock.onopen=function(){r.log_("Websocket connected."),r.everConnected_=!0},this.mySock.onclose=function(){r.log_("Websocket connection was disconnected."),r.mySock=null,r.onClosed_()},this.mySock.onmessage=function(t){r.handleIncomingFrame(t)},this.mySock.onerror=function(t){r.log_("WebSocket error.  Closing connection.");var e=t.message||t.data;e&&r.log_(e),r.onClosed_()}},Bf.prototype.start=function(){},Bf.forceDisallow=function(){Bf.forceDisallow_=!0},Bf.isAvailable=function(){var t,e=!1;return"undefined"!=typeof navigator&&navigator.userAgent&&((t=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/))&&1<t.length&&parseFloat(t[1])<4.4&&(e=!0)),!e&&null!==Vf&&!Bf.forceDisallow_},Bf.previouslyFailed=function(){return Hu.isInMemoryStorage||!0===Hu.get("previous_websocket_failure")},Bf.prototype.markConnectionHealthy=function(){Hu.remove("previous_websocket_failure")},Bf.prototype.appendFrame_=function(t){var e,n;this.frames.push(t),this.frames.length===this.totalFrames&&(e=this.frames.join(""),this.frames=null,n=Ia(e),this.onMessage(n))},Bf.prototype.handleNewFrameCount_=function(t){this.totalFrames=t,this.frames=[]},Bf.prototype.extractFrameCount_=function(t){if(ea(null===this.frames,"We already have a frame buffer"),t.length<=6){var e=Number(t);if(!isNaN(e))return this.handleNewFrameCount_(e),null}return this.handleNewFrameCount_(1),t},Bf.prototype.handleIncomingFrame=function(t){var e,n;null!==this.mySock&&(e=t.data,this.bytesReceived+=e.length,this.stats_.incrementCounter("bytes_received",e.length),this.resetKeepAlive(),null!==this.frames?this.appendFrame_(e):null!==(n=this.extractFrameCount_(e))&&this.appendFrame_(n))},Bf.prototype.send=function(t){this.resetKeepAlive();var e=Ta(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);var n=Wu(e,16384);1<n.length&&this.sendString_(String(n.length));for(var r=0;r<n.length;r++)this.sendString_(n[r])},Bf.prototype.shutdown_=function(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)},Bf.prototype.onClosed_=function(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))},Bf.prototype.close=function(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())},Bf.prototype.resetKeepAlive=function(){var t=this;clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(function(){t.mySock&&t.sendString_("0"),t.resetKeepAlive()},Math.floor(45e3))},Bf.prototype.sendString_=function(t){try{this.mySock.send(t)}catch(t){this.log_("Exception thrown from WebSocket.send():",t.message||t.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}},Bf.responsesRequiredToBeHealthy=2,Bf.healthyTimeout=3e4,Bf);function Bf(t,e,n,r,i){this.connId=t,this.applicationId=n,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Zu(this.connId),this.stats_=ff.getCollection(e),this.connURL=Bf.connectionURL_(e,r,i),this.nodeAdmin=e.nodeAdmin}var Wf=(Object.defineProperty(Gf,"ALL_TRANSPORTS",{get:function(){return[xf,qf]},enumerable:!1,configurable:!0}),Gf.prototype.initTransports_=function(t){var e,n,r=qf&&qf.isAvailable(),i=r&&!qf.previouslyFailed();if(t.webSocketOnly&&(r||ju("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[qf];else{var o=this.transports_=[];try{for(var s=Qs(Gf.ALL_TRANSPORTS),a=s.next();!a.done;a=s.next()){var u=a.value;u&&u.isAvailable()&&o.push(u)}}catch(t){e={error:t}}finally{try{a&&!a.done&&(n=s.return)&&n.call(s)}finally{if(e)throw e.error}}}},Gf.prototype.initialTransport=function(){if(0<this.transports_.length)return this.transports_[0];throw new Error("No transports available")},Gf.prototype.upgradeTransport=function(){return 1<this.transports_.length?this.transports_[1]:null},Gf);function Gf(t){this.initTransports_(t)}var Hf=(Kf.prototype.start_=function(){var t=this,e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,void 0,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(function(){t.conn_&&t.conn_.open(n,r)},Math.floor(0));var i=e.healthyTimeout||0;0<i&&(this.healthyTimeout_=ac(function(){t.healthyTimeout_=null,t.isHealthy_||(t.conn_&&102400<t.conn_.bytesReceived?(t.log_("Connection exceeded healthy timeout but has received "+t.conn_.bytesReceived+" bytes.  Marking connection healthy."),t.isHealthy_=!0,t.conn_.markConnectionHealthy()):t.conn_&&10240<t.conn_.bytesSent?t.log_("Connection exceeded healthy timeout but has sent "+t.conn_.bytesSent+" bytes.  Leaving connection alive."):(t.log_("Closing unhealthy connection after timeout."),t.close()))},Math.floor(i)))},Kf.prototype.nextTransportId_=function(){return"c:"+this.id+":"+this.connectionCount++},Kf.prototype.disconnReceiver_=function(e){var n=this;return function(t){e===n.conn_?n.onConnectionLost_(t):e===n.secondaryConn_?(n.log_("Secondary connection lost."),n.onSecondaryConnectionLost_()):n.log_("closing an old connection")}},Kf.prototype.connReceiver_=function(e){var n=this;return function(t){2!==n.state_&&(e===n.rx_?n.onPrimaryMessageReceived_(t):e===n.secondaryConn_?n.onSecondaryMessageReceived_(t):n.log_("message on old connection"))}},Kf.prototype.sendRequest=function(t){var e={t:"d",d:t};this.sendData_(e)},Kf.prototype.tryCleanupConnection=function(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)},Kf.prototype.onSecondaryControl_=function(t){var e;"t"in t&&("a"===(e=t.t)?this.upgradeIfSecondaryHealthy_():"r"===e?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===e&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_()))},Kf.prototype.onSecondaryMessageReceived_=function(t){var e=Bu("t",t),n=Bu("d",t);if("c"===e)this.onSecondaryControl_(n);else{if("d"!==e)throw new Error("Unknown protocol layer: "+e);this.pendingDataMessages.push(n)}},Kf.prototype.upgradeIfSecondaryHealthy_=function(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))},Kf.prototype.proceedWithUpgrade_=function(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()},Kf.prototype.onPrimaryMessageReceived_=function(t){var e=Bu("t",t),n=Bu("d",t);"c"===e?this.onControl_(n):"d"===e&&this.onDataMessage_(n)},Kf.prototype.onDataMessage_=function(t){this.onPrimaryResponse_(),this.onMessage_(t)},Kf.prototype.onPrimaryResponse_=function(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))},Kf.prototype.onControl_=function(t){var e=Bu("t",t);if("d"in t){var n=t.d;if("h"===e)this.onHandshake_(n);else if("n"===e){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(var r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===e?this.onConnectionShutdown_(n):"r"===e?this.onReset_(n):"e"===e?Fu("Server Error: "+n):"o"===e?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Fu("Unknown control packet command: "+e)}},Kf.prototype.onHandshake_=function(t){var e=t.ts,n=t.v,r=t.h;this.sessionId=t.s,this.repoInfo_.updateHost(r),0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,e),"5"!==n&&ju("Protocol version mismatch detected"),this.tryStartUpgrade_())},Kf.prototype.tryStartUpgrade_=function(){var t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)},Kf.prototype.startUpgrade_=function(t){var e=this;this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),ac(function(){e.secondaryConn_&&(e.log_("Timed out trying to upgrade."),e.secondaryConn_.close())},Math.floor(6e4))},Kf.prototype.onReset_=function(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.updateHost(t),1===this.state_?this.close():(this.closeConnections_(),this.start_())},Kf.prototype.onConnectionEstablished_=function(t,e){var n=this;this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(e,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):ac(function(){n.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))},Kf.prototype.sendPingOnPrimaryIfNecessary_=function(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))},Kf.prototype.onSecondaryConnectionLost_=function(){var t=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==t&&this.rx_!==t||this.close()},Kf.prototype.onConnectionLost_=function(t){this.conn_=null,t||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Hu.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()},Kf.prototype.onConnectionShutdown_=function(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()},Kf.prototype.sendData_=function(t){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(t)},Kf.prototype.close=function(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))},Kf.prototype.closeConnections_=function(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)},Kf);function Kf(t,e,n,r,i,o,s,a){this.id=t,this.repoInfo_=e,this.applicationId_=n,this.onMessage_=r,this.onReady_=i,this.onDisconnect_=o,this.onKill_=s,this.lastSessionId=a,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Zu("c:"+this.id+":"),this.transportManager_=new Wf(e),this.log_("Connection created"),this.start_()}var zf=(Qf.prototype.put=function(t,e,n,r){},Qf.prototype.merge=function(t,e,n,r){},Qf.prototype.refreshAuthToken=function(t){},Qf.prototype.onDisconnectPut=function(t,e,n){},Qf.prototype.onDisconnectMerge=function(t,e,n){},Qf.prototype.onDisconnectCancel=function(t,e){},Qf.prototype.reportStats=function(t){},Qf);function Qf(){}var Yf,Xf=1e3,$f=3e5,Jf=(Gs(Zf,Yf=zf),Zf.prototype.sendRequest=function(t,e,n){var r=++this.requestNumber_,i={r:r,a:t,b:e};this.log_(Ta(i)),ea(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),n&&(this.requestCBHash_[r]=n)},Zf.prototype.listen=function(t,e,n,r){var i=t.queryIdentifier(),o=t.path.toString();this.log_("Listen called for "+o+" "+i),this.listens.has(o)||this.listens.set(o,new Map),ea(t.getQueryParams().isDefault()||!t.getQueryParams().loadsAllData(),"listen() called for non-default but complete query"),ea(!this.listens.get(o).has(i),"listen() called twice for same path/queryId.");var s={onComplete:r,hashFn:e,query:t,tag:n};this.listens.get(o).set(i,s),this.connected_&&this.sendListen_(s)},Zf.prototype.sendListen_=function(r){var i=this,o=r.query,s=o.path.toString(),a=o.queryIdentifier();this.log_("Listen on "+s+" for "+a);var t={p:s};r.tag&&(t.q=o.queryObject(),t.t=r.tag),t.h=r.hashFn(),this.sendRequest("q",t,function(t){var e=t.d,n=t.s;Zf.warnOnListenWarnings_(e,o),(i.listens.get(s)&&i.listens.get(s).get(a))===r&&(i.log_("listen response",t),"ok"!==n&&i.removeListen_(s,a),r.onComplete&&r.onComplete(n,e))})},Zf.warnOnListenWarnings_=function(t,e){var n,r,i;t&&"object"==typeof t&&Ca(t,"w")&&(n=Na(t,"w"),Array.isArray(n)&&~n.indexOf("no_index")&&(r='".indexOn": "'+e.getQueryParams().getIndex().toString()+'"',i=e.path.toString(),ju("Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding "+r+" at "+i+" to your security rules for better performance.")))},Zf.prototype.refreshAuthToken=function(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},function(){}),this.reduceReconnectDelayIfAdminCredential_(t)},Zf.prototype.reduceReconnectDelayIfAdminCredential_=function(t){var e;(t&&40===t.length||"object"==typeof(e=Sa(t).claims)&&!0===e.admin)&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)},Zf.prototype.tryAuth=function(){var r,t,e,n,i=this;this.connected_&&this.authToken_&&(r=this.authToken_,t=!!(n=Sa(r).claims)&&"object"==typeof n&&n.hasOwnProperty("iat")?"auth":"gauth",e={cred:r},null===this.authOverride_?e.noauth=!0:"object"==typeof this.authOverride_&&(e.authvar=this.authOverride_),this.sendRequest(t,e,function(t){var e=t.s,n=t.d||"error";i.authToken_===r&&("ok"===e?i.invalidAuthTokenCount_=0:i.onAuthRevoked_(e,n))}))},Zf.prototype.unlisten=function(t,e){var n=t.path.toString(),r=t.queryIdentifier();this.log_("Unlisten called for "+n+" "+r),ea(t.getQueryParams().isDefault()||!t.getQueryParams().loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,t.queryObject(),e)},Zf.prototype.sendUnlisten_=function(t,e,n,r){this.log_("Unlisten on "+t+" for "+e);var i={p:t};r&&(i.q=n,i.t=r),this.sendRequest("n",i)},Zf.prototype.onDisconnectPut=function(t,e,n){this.connected_?this.sendOnDisconnect_("o",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:e,onComplete:n})},Zf.prototype.onDisconnectMerge=function(t,e,n){this.connected_?this.sendOnDisconnect_("om",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:e,onComplete:n})},Zf.prototype.onDisconnectCancel=function(t,e){this.connected_?this.sendOnDisconnect_("oc",t,null,e):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:e})},Zf.prototype.sendOnDisconnect_=function(t,e,n,r){var i={p:e,d:n};this.log_("onDisconnect "+t,i),this.sendRequest(t,i,function(t){r&&setTimeout(function(){r(t.s,t.d)},Math.floor(0))})},Zf.prototype.put=function(t,e,n,r){this.putInternal("p",t,e,n,r)},Zf.prototype.merge=function(t,e,n,r){this.putInternal("m",t,e,n,r)},Zf.prototype.putInternal=function(t,e,n,r,i){var o={p:e,d:n};void 0!==i&&(o.h=i),this.outstandingPuts_.push({action:t,request:o,onComplete:r}),this.outstandingPutCount_++;var s=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(s):this.log_("Buffering put: "+e)},Zf.prototype.sendPut_=function(e){var n=this,r=this.outstandingPuts_[e].action,t=this.outstandingPuts_[e].request,i=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(r,t,function(t){n.log_(r+" response",t),delete n.outstandingPuts_[e],n.outstandingPutCount_--,0===n.outstandingPutCount_&&(n.outstandingPuts_=[]),i&&i(t.s,t.d)})},Zf.prototype.reportStats=function(t){var e,n=this;this.connected_&&(e={c:t},this.log_("reportStats",e),this.sendRequest("s",e,function(t){var e;"ok"!==t.s&&(e=t.d,n.log_("reportStats","Error sending stats: "+e))}))},Zf.prototype.onDataMessage_=function(t){if("r"in t){this.log_("from server: "+Ta(t));var e=t.r,n=this.requestCBHash_[e];n&&(delete this.requestCBHash_[e],n(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}},Zf.prototype.onDataPush_=function(t,e){this.log_("handleServerMessage",t,e),"d"===t?this.onDataUpdate_(e.p,e.d,!1,e.t):"m"===t?this.onDataUpdate_(e.p,e.d,!0,e.t):"c"===t?this.onListenRevoked_(e.p,e.q):"ac"===t?this.onAuthRevoked_(e.s,e.d):"sd"===t?this.onSecurityDebugPacket_(e):Fu("Unrecognized action received from server: "+Ta(t)+"\nAre you using the latest client?")},Zf.prototype.onReady_=function(t,e){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=e,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)},Zf.prototype.scheduleConnect_=function(t){var e=this;ea(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(function(){e.establishConnectionTimer_=null,e.establishConnection_()},Math.floor(t))},Zf.prototype.onVisible_=function(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Xf,this.realtime_||this.scheduleConnect_(0)),this.visible_=t},Zf.prototype.onOnline_=function(t){t?(this.log_("Browser went online."),this.reconnectDelay_=Xf,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())},Zf.prototype.onRealtimeDisconnect_=function(){var t,e;this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()&&(this.visible_?this.lastConnectionEstablishedTime_&&(3e4<(new Date).getTime()-this.lastConnectionEstablishedTime_&&(this.reconnectDelay_=Xf),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime()),t=(new Date).getTime()-this.lastConnectionAttemptTime_,e=Math.max(0,this.reconnectDelay_-t),e=Math.random()*e,this.log_("Trying to reconnect in "+e+"ms"),this.scheduleConnect_(e),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)),this.onConnectStatus_(!1)},Zf.prototype.establishConnection_=function(){var e,n,r,i,o,s,a,u,c,t,h=this;this.shouldReconnect_()&&(this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null,e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),i=this.id+":"+Zf.nextConnectionId_++,s=(o=this).lastSessionId,a=!1,u=null,c=function(){u?u.close():(a=!0,r())},this.realtime_={close:c,sendRequest:function(t){ea(u,"sendRequest call when we're not connected not allowed."),u.sendRequest(t)}},t=this.forceTokenRefresh_,this.forceTokenRefresh_=!1,this.authTokenProvider_.getToken(t).then(function(t){a?Ju("getToken() completed but was canceled"):(Ju("getToken() completed. Creating connection."),o.authToken_=t&&t.accessToken,u=new Hf(i,o.repoInfo_,o.applicationId_,e,n,r,function(t){ju(t+" ("+o.repoInfo_.toString()+")"),o.interrupt("server_kill")},s))}).then(null,function(t){o.log_("Failed to get token: "+t),a||(h.repoInfo_.nodeAdmin&&ju(t),c())}))},Zf.prototype.interrupt=function(t){Ju("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())},Zf.prototype.resume=function(t){Ju("Resuming connection for reason: "+t),delete this.interruptReasons_[t],Aa(this.interruptReasons_)&&(this.reconnectDelay_=Xf,this.realtime_||this.scheduleConnect_(0))},Zf.prototype.handleTimestamp_=function(t){var e=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:e})},Zf.prototype.cancelSentTransactions_=function(){for(var t=0;t<this.outstandingPuts_.length;t++){var e=this.outstandingPuts_[t];e&&"h"in e.request&&e.queued&&(e.onComplete&&e.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])},Zf.prototype.onListenRevoked_=function(t,e){var n=e?e.map(function(t){return rc(t)}).join("$"):"default",r=this.removeListen_(t,n);r&&r.onComplete&&r.onComplete("permission_denied")},Zf.prototype.removeListen_=function(t,e){var n,r,i=new hc(t).toString();return this.listens.has(i)?(r=(n=this.listens.get(i)).get(e),n.delete(e),0===n.size&&this.listens.delete(i)):r=void 0,r},Zf.prototype.onAuthRevoked_=function(t,e){Ju("Auth token revoked: "+t+"/"+e),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==t&&"permission_denied"!==t||(this.invalidAuthTokenCount_++,3<=this.invalidAuthTokenCount_&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))},Zf.prototype.onSecurityDebugPacket_=function(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))},Zf.prototype.restoreState_=function(){var e,t,n,r;this.tryAuth();try{for(var i=Qs(this.listens.values()),o=i.next();!o.done;o=i.next()){var s=o.value;try{for(var a=(n=void 0,Qs(s.values())),u=a.next();!u.done;u=a.next()){var c=u.value;this.sendListen_(c)}}catch(t){n={error:t}}finally{try{u&&!u.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}}}catch(t){e={error:t}}finally{try{o&&!o.done&&(t=i.return)&&t.call(i)}finally{if(e)throw e.error}}for(var h=0;h<this.outstandingPuts_.length;h++)this.outstandingPuts_[h]&&this.sendPut_(h);for(;this.onDisconnectRequestQueue_.length;){var l=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(l.action,l.pathString,l.data,l.onComplete)}},Zf.prototype.sendConnectStats_=function(){var t={};t["sdk.js."+Uf.replace(/\./g,"-")]=1,ca()?t["framework.cordova"]=1:la()&&(t["framework.reactnative"]=1),this.reportStats(t)},Zf.prototype.shouldReconnect_=function(){var t=Af.getInstance().currentlyOnline();return Aa(this.interruptReasons_)&&t},Zf.nextPersistentConnectionId_=0,Zf.nextConnectionId_=0,Zf);function Zf(t,e,n,r,i,o,s){var a=Yf.call(this)||this;if(a.repoInfo_=t,a.applicationId_=e,a.onDataUpdate_=n,a.onConnectStatus_=r,a.onServerInfoUpdate_=i,a.authTokenProvider_=o,a.authOverride_=s,a.id=Zf.nextPersistentConnectionId_++,a.log_=Zu("p:"+a.id+":"),a.interruptReasons_={},a.listens=new Map,a.outstandingPuts_=[],a.outstandingPutCount_=0,a.onDisconnectRequestQueue_=[],a.connected_=!1,a.reconnectDelay_=Xf,a.maxReconnectDelay_=$f,a.securityDebugCallback_=null,a.lastSessionId=null,a.establishConnectionTimer_=null,a.visible_=!1,a.requestCBHash_={},a.requestNumber_=0,a.realtime_=null,a.authToken_=null,a.forceTokenRefresh_=!1,a.invalidAuthTokenCount_=0,a.firstConnection_=!0,a.lastConnectionAttemptTime_=null,a.lastConnectionEstablishedTime_=null,s&&!fa())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");return a.scheduleConnect_(0),Sf.getInstance().on("visible",a.onVisible_,a),-1===t.host.indexOf("fblocal")&&Af.getInstance().on("online",a.onOnline_,a),a}var tp,ep=(Gs(np,tp=zf),np.prototype.reportStats=function(t){throw new Error("Method not implemented.")},np.getListenId_=function(t,e){return void 0!==e?"tag$"+e:(ea(t.getQueryParams().isDefault(),"should have a tag if it's not a default query."),t.path.toString())},np.prototype.listen=function(t,e,r,i){var o=this,s=t.path.toString();this.log_("Listen called for "+s+" "+t.queryIdentifier());var a=np.getListenId_(t,r),u={};this.listens_[a]=u;var n=t.getQueryParams().toRestQueryStringParameters();this.restRequest_(s+".json",n,function(t,e){var n=e;404===t&&(t=n=null),null===t&&o.onDataUpdate_(s,n,!1,r),Na(o.listens_,a)===u&&i(t?401===t?"permission_denied":"rest_error:"+t:"ok",null)})},np.prototype.unlisten=function(t,e){var n=np.getListenId_(t,e);delete this.listens_[n]},np.prototype.refreshAuthToken=function(t){},np.prototype.restRequest_=function(i,o,s){var a=this;void 0===o&&(o={}),o.format="export",this.authTokenProvider_.getToken(!1).then(function(t){var e=t&&t.accessToken;e&&(o.auth=e);var n=(a.repoInfo_.secure?"https://":"http://")+a.repoInfo_.host+i+"?ns="+a.repoInfo_.namespace+function(t){for(var n=[],e=0,r=Object.entries(t);e<r.length;e++){var i=r[e];!function(e,t){Array.isArray(t)?t.forEach(function(t){n.push(encodeURIComponent(e)+"="+encodeURIComponent(t))}):n.push(encodeURIComponent(e)+"="+encodeURIComponent(t))}(i[0],i[1])}return n.length?"&"+n.join("&"):""}(o);a.log_("Sending REST request for "+n);var r=new XMLHttpRequest;r.onreadystatechange=function(){if(s&&4===r.readyState){a.log_("REST Response for "+n+" received. status:",r.status,"response:",r.responseText);var t=null;if(200<=r.status&&r.status<300){try{t=Ia(r.responseText)}catch(t){ju("Failed to parse JSON response for "+n+": "+r.responseText)}s(null,t)}else 401!==r.status&&404!==r.status&&ju("Got unsuccessful REST response for "+n+" Status: "+r.status),s(r.status);s=null}},r.open("GET",n,!0),r.send()})},np);function np(t,e,n){var r=tp.call(this)||this;return r.repoInfo_=t,r.onDataUpdate_=e,r.authTokenProvider_=n,r.log_=Zu("p:rest:"),r.listens_={},r}var rp="repo_interrupt",ip=(op.prototype.toString=function(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host},op.prototype.name=function(){return this.repoInfo_.namespace},op.prototype.serverTime=function(){var t=this.infoData_.getNode(new hc(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t},op.prototype.generateServerValues=function(){return(t=(t={timestamp:this.serverTime()})||{}).timestamp=t.timestamp||(new Date).getTime(),t;var t},op.prototype.onDataUpdate_=function(t,e,n,r){this.dataUpdateCount++;var i=new hc(t);e=this.interceptServerDataCallback_?this.interceptServerDataCallback_(t,e):e;var o,s,a,u,c=[],h=i;0<(c=r?n?(o=ka(e,function(t){return Mh(t)}),this.serverSyncTree_.applyTaggedQueryMerge(i,o,r)):(s=Mh(e),this.serverSyncTree_.applyTaggedQueryOverwrite(i,s,r)):n?(a=ka(e,function(t){return Mh(t)}),this.serverSyncTree_.applyServerMerge(i,a)):(u=Mh(e),this.serverSyncTree_.applyServerOverwrite(i,u))).length&&(h=this.rerunTransactions_(i)),this.eventQueue_.raiseEventsForChangedPath(h,c)},op.prototype.interceptServerData_=function(t){this.interceptServerDataCallback_=t},op.prototype.onConnectStatus_=function(t){this.updateInfo_("connected",t),!1===t&&this.runOnDisconnectEvents_()},op.prototype.onServerInfoUpdate_=function(t){var n=this;ic(t,function(t,e){n.updateInfo_(t,e)})},op.prototype.updateInfo_=function(t,e){var n=new hc("/.info/"+t),r=Mh(e);this.infoData_.updateSnapshot(n,r);var i=this.infoSyncTree_.applyServerOverwrite(n,r);this.eventQueue_.raiseEventsForChangedPath(n,i)},op.prototype.getNextWriteId_=function(){return this.nextWriteId_++},op.prototype.setWithPriority=function(i,t,e,o){var s=this;this.log_("set",{path:i.toString(),value:t,priority:e});var n=this.generateServerValues(),r=Mh(t,e),a=this.serverSyncTree_.calcCompleteEventCache(i),u=sl(r,a,n),c=this.getNextWriteId_(),h=this.serverSyncTree_.applyUserOverwrite(i,u,c,!0);this.eventQueue_.queueEvents(h),this.server_.put(i.toString(),r.val(!0),function(t,e){var n="ok"===t;n||ju("set at "+i+" failed: "+t);var r=s.serverSyncTree_.ackUserWrite(c,!n);s.eventQueue_.raiseEventsForChangedPath(i,r),s.callOnCompleteCallback(o,t,e)});var l=this.abortTransactions_(i);this.rerunTransactions_(l),this.eventQueue_.raiseEventsForChangedPath(l,[])},op.prototype.update=function(o,t,s){var a=this;this.log_("update",{path:o.toString(),value:t});var u,e,n=!0,r=this.generateServerValues(),i={};ic(t,function(t,e){n=!1,i[t]=ol(o.child(t),Mh(e),a.serverSyncTree_,r)}),n?(Ju("update() called with empty data.  Don't do anything."),this.callOnCompleteCallback(s,"ok")):(u=this.getNextWriteId_(),e=this.serverSyncTree_.applyUserMerge(o,i,u),this.eventQueue_.queueEvents(e),this.server_.merge(o.toString(),t,function(t,e){var n="ok"===t;n||ju("update at "+o+" failed: "+t);var r=a.serverSyncTree_.ackUserWrite(u,!n),i=0<r.length?a.rerunTransactions_(o):o;a.eventQueue_.raiseEventsForChangedPath(i,r),a.callOnCompleteCallback(s,t,e)}),ic(t,function(t){var e=a.abortTransactions_(o.child(t));a.rerunTransactions_(e)}),this.eventQueue_.raiseEventsForChangedPath(o,[]))},op.prototype.runOnDisconnectEvents_=function(){var r=this;this.log_("onDisconnectEvents");var i=this.generateServerValues(),o=new pl;this.onDisconnect_.forEachTree(hc.Empty,function(t,e){var n=ol(t,e,r.serverSyncTree_,i);o.remember(t,n)});var s=[];o.forEachTree(hc.Empty,function(t,e){s=s.concat(r.serverSyncTree_.applyServerOverwrite(t,e));var n=r.abortTransactions_(t);r.rerunTransactions_(n)}),this.onDisconnect_=new pl,this.eventQueue_.raiseEventsForChangedPath(hc.Empty,s)},op.prototype.onDisconnectCancel=function(n,r){var i=this;this.server_.onDisconnectCancel(n.toString(),function(t,e){"ok"===t&&i.onDisconnect_.forget(n),i.callOnCompleteCallback(r,t,e)})},op.prototype.onDisconnectSet=function(n,t,r){var i=this,o=Mh(t);this.server_.onDisconnectPut(n.toString(),o.val(!0),function(t,e){"ok"===t&&i.onDisconnect_.remember(n,o),i.callOnCompleteCallback(r,t,e)})},op.prototype.onDisconnectSetWithPriority=function(n,t,e,r){var i=this,o=Mh(t,e);this.server_.onDisconnectPut(n.toString(),o.val(!0),function(t,e){"ok"===t&&i.onDisconnect_.remember(n,o),i.callOnCompleteCallback(r,t,e)})},op.prototype.onDisconnectUpdate=function(r,n,i){var o=this;if(Aa(n))return Ju("onDisconnect().update() called with empty data.  Don't do anything."),void this.callOnCompleteCallback(i,"ok");this.server_.onDisconnectMerge(r.toString(),n,function(t,e){"ok"===t&&ic(n,function(t,e){var n=Mh(e);o.onDisconnect_.remember(r.child(t),n)}),o.callOnCompleteCallback(i,t,e)})},op.prototype.addEventCallbackForQuery=function(t,e){var n=".info"===t.path.getFront()?this.infoSyncTree_.addEventRegistration(t,e):this.serverSyncTree_.addEventRegistration(t,e);this.eventQueue_.raiseEventsAtPath(t.path,n)},op.prototype.removeEventCallbackForQuery=function(t,e){var n=".info"===t.path.getFront()?this.infoSyncTree_.removeEventRegistration(t,e):this.serverSyncTree_.removeEventRegistration(t,e);this.eventQueue_.raiseEventsAtPath(t.path,n)},op.prototype.interrupt=function(){this.persistentConnection_&&this.persistentConnection_.interrupt(rp)},op.prototype.resume=function(){this.persistentConnection_&&this.persistentConnection_.resume(rp)},op.prototype.stats=function(t){var e,i;void 0===t&&(t=!1),"undefined"!=typeof console&&(e=t?(this.statsListener_||(this.statsListener_=new df(this.stats_)),this.statsListener_.get()):this.stats_.get(),i=Object.keys(e).reduce(function(t,e){return Math.max(e.length,t)},0),ic(e,function(t,e){for(var n=t,r=t.length;r<i+2;r++)n+=" ";console.log(n+e)}))},op.prototype.statsIncrementCounter=function(t){this.stats_.incrementCounter(t),this.statsReporter_.includeStat(t)},op.prototype.log_=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="";this.persistentConnection_&&(n=this.persistentConnection_.id+":"),Ju.apply(void 0,Xs([n],t))},op.prototype.callOnCompleteCallback=function(r,i,o){r&&sc(function(){var t,e,n;"ok"===i?r(null):(e=t=(i||"error").toUpperCase(),o&&(e+=": "+o),(n=new Error(e)).code=t,r(n))})},Object.defineProperty(op.prototype,"database",{get:function(){return this.__database||(this.__database=new Np(this))},enumerable:!1,configurable:!0}),op);function op(t,e,n,r){var s=this;if(this.repoInfo_=t,this.app=n,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new mf,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=new pl,this.persistentConnection_=null,this.stats_=ff.getCollection(t),e||0<=("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i))this.server_=new ep(this.repoInfo_,this.onDataUpdate_.bind(this),r),setTimeout(this.onConnectStatus_.bind(this,!0),0);else{var i=n.options.databaseAuthVariableOverride;if(null!=i){if("object"!=typeof i)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Ta(i)}catch(t){throw new Error("Invalid authOverride provided: "+t)}}this.persistentConnection_=new Jf(this.repoInfo_,n.options.appId,this.onDataUpdate_.bind(this),this.onConnectStatus_.bind(this),this.onServerInfoUpdate_.bind(this),r,i),this.server_=this.persistentConnection_}r.addTokenChangeListener(function(t){s.server_.refreshAuthToken(t)}),this.statsReporter_=ff.getOrCreateReporter(t,function(){return new yf(s.stats_,s.server_)}),this.transactionsInit_(),this.infoData_=new uf,this.infoSyncTree_=new sf({startListening:function(t,e,n,r){var i=[],o=s.infoData_.getNode(t.path);return o.isEmpty()||(i=s.infoSyncTree_.applyServerOverwrite(t.path,o),setTimeout(function(){r("ok")},0)),i},stopListening:function(){}}),this.updateInfo_("connected",!1),this.serverSyncTree_=new sf({startListening:function(r,t,e,i){return s.server_.listen(r,e,t,function(t,e){var n=i(t,e);s.eventQueue_.raiseEventsForChangedPath(r.path,n)}),[]},stopListening:function(t,e){s.server_.unlisten(t,e)}})}var sp=(ap.prototype.getStartPost=function(){return this.startPost_},ap.prototype.getEndPost=function(){return this.endPost_},ap.prototype.matches=function(t){return this.index_.compare(this.getStartPost(),t)<=0&&this.index_.compare(t,this.getEndPost())<=0},ap.prototype.updateChild=function(t,e,n,r,i,o){return this.matches(new Gc(e,n))||(n=Oh.EMPTY_NODE),this.indexedFilter_.updateChild(t,e,n,r,i,o)},ap.prototype.updateFullNode=function(t,e,n){e.isLeafNode()&&(e=Oh.EMPTY_NODE);var r=(r=e.withIndex(this.index_)).updatePriority(Oh.EMPTY_NODE),i=this;return e.forEachChild(ch,function(t,e){i.matches(new Gc(t,e))||(r=r.updateImmediateChild(t,Oh.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(t,r,n)},ap.prototype.updatePriority=function(t,e){return t},ap.prototype.filtersNodes=function(){return!0},ap.prototype.getIndexedFilter=function(){return this.indexedFilter_},ap.prototype.getIndex=function(){return this.index_},ap.getStartPost_=function(t){if(t.hasStart()){var e=t.getIndexStartName();return t.getIndex().makePost(t.getIndexStartValue(),e)}return t.getIndex().minPost()},ap.getEndPost_=function(t){if(t.hasEnd()){var e=t.getIndexEndName();return t.getIndex().makePost(t.getIndexEndValue(),e)}return t.getIndex().maxPost()},ap);function ap(t){this.indexedFilter_=new xl(t.getIndex()),this.index_=t.getIndex(),this.startPost_=ap.getStartPost_(t),this.endPost_=ap.getEndPost_(t)}var up=(cp.prototype.updateChild=function(t,e,n,r,i,o){return this.rangedFilter_.matches(new Gc(e,n))||(n=Oh.EMPTY_NODE),t.getImmediateChild(e).equals(n)?t:t.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(t,e,n,r,i,o):this.fullLimitUpdateChild_(t,e,n,i,o)},cp.prototype.updateFullNode=function(t,e,n){var r;if(e.isLeafNode()||e.isEmpty())r=Oh.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<e.numChildren()&&e.isIndexed(this.index_)){r=Oh.EMPTY_NODE.withIndex(this.index_);var i=void 0;i=this.reverse_?e.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):e.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);for(var o=0;i.hasNext()&&o<this.limit_;){var s=i.getNext();if(!(this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),s)<=0:this.index_.compare(s,this.rangedFilter_.getEndPost())<=0))break;r=r.updateImmediateChild(s.name,s.node),o++}}else{r=(r=e.withIndex(this.index_)).updatePriority(Oh.EMPTY_NODE);var a,u=void 0,c=void 0,h=void 0,i=void 0;h=this.reverse_?(i=r.getReverseIterator(this.index_),u=this.rangedFilter_.getEndPost(),c=this.rangedFilter_.getStartPost(),a=this.index_.getCompare(),function(t,e){return a(e,t)}):(i=r.getIterator(this.index_),u=this.rangedFilter_.getStartPost(),c=this.rangedFilter_.getEndPost(),this.index_.getCompare());for(var o=0,l=!1;i.hasNext();){s=i.getNext();!l&&h(u,s)<=0&&(l=!0),l&&o<this.limit_&&h(s,c)<=0?o++:r=r.updateImmediateChild(s.name,Oh.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(t,r,n)},cp.prototype.updatePriority=function(t,e){return t},cp.prototype.filtersNodes=function(){return!0},cp.prototype.getIndexedFilter=function(){return this.rangedFilter_.getIndexedFilter()},cp.prototype.getIndex=function(){return this.index_},cp.prototype.fullLimitUpdateChild_=function(t,e,n,r,i){var o,s;s=this.reverse_?(o=this.index_.getCompare(),function(t,e){return o(e,t)}):this.index_.getCompare();var a=t;ea(a.numChildren()===this.limit_,"");var u=new Gc(e,n),c=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),h=this.rangedFilter_.matches(u);if(a.hasChild(e)){for(var l=a.getImmediateChild(e),f=r.getChildAfterChild(this.index_,c,this.reverse_);null!=f&&(f.name===e||a.hasChild(f.name));)f=r.getChildAfterChild(this.index_,f,this.reverse_);var p=null==f?1:s(f,u);if(h&&!n.isEmpty()&&0<=p)return null!=i&&i.trackChildChange(Pl.childChangedChange(e,n,l)),a.updateImmediateChild(e,n);null!=i&&i.trackChildChange(Pl.childRemovedChange(e,l));var d=a.updateImmediateChild(e,Oh.EMPTY_NODE);return null!=f&&this.rangedFilter_.matches(f)?(null!=i&&i.trackChildChange(Pl.childAddedChange(f.name,f.node)),d.updateImmediateChild(f.name,f.node)):d}return!n.isEmpty()&&h&&0<=s(c,u)?(null!=i&&(i.trackChildChange(Pl.childRemovedChange(c.name,c.node)),i.trackChildChange(Pl.childAddedChange(e,n))),a.updateImmediateChild(e,n).updateImmediateChild(c.name,Oh.EMPTY_NODE)):t},cp);function cp(t){this.rangedFilter_=new sp(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft()}var hp=(lp.prototype.hasStart=function(){return this.startSet_},lp.prototype.isViewFromLeft=function(){return""===this.viewFrom_?this.startSet_:this.viewFrom_===lp.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_LEFT},lp.prototype.getIndexStartValue=function(){return ea(this.startSet_,"Only valid if start has been set"),this.indexStartValue_},lp.prototype.getIndexStartName=function(){return ea(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:tc},lp.prototype.hasEnd=function(){return this.endSet_},lp.prototype.getIndexEndValue=function(){return ea(this.endSet_,"Only valid if end has been set"),this.indexEndValue_},lp.prototype.getIndexEndName=function(){return ea(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:ec},lp.prototype.hasLimit=function(){return this.limitSet_},lp.prototype.hasAnchoredLimit=function(){return this.limitSet_&&""!==this.viewFrom_},lp.prototype.getLimit=function(){return ea(this.limitSet_,"Only valid if limit has been set"),this.limit_},lp.prototype.getIndex=function(){return this.index_},lp.prototype.copy_=function(){var t=new lp;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t},lp.prototype.limit=function(t){var e=this.copy_();return e.limitSet_=!0,e.limit_=t,e.viewFrom_="",e},lp.prototype.limitToFirst=function(t){var e=this.copy_();return e.limitSet_=!0,e.limit_=t,e.viewFrom_=lp.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_LEFT,e},lp.prototype.limitToLast=function(t){var e=this.copy_();return e.limitSet_=!0,e.limit_=t,e.viewFrom_=lp.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_RIGHT,e},lp.prototype.startAt=function(t,e){var n=this.copy_();return n.startSet_=!0,void 0===t&&(t=null),n.indexStartValue_=t,null!=e?(n.startNameSet_=!0,n.indexStartName_=e):(n.startNameSet_=!1,n.indexStartName_=""),n},lp.prototype.endAt=function(t,e){var n=this.copy_();return n.endSet_=!0,void 0===t&&(t=null),n.indexEndValue_=t,void 0!==e?(n.endNameSet_=!0,n.indexEndName_=e):(n.endNameSet_=!1,n.indexEndName_=""),n},lp.prototype.orderBy=function(t){var e=this.copy_();return e.index_=t,e},lp.prototype.getQueryObject=function(){var t,e=lp.WIRE_PROTOCOL_CONSTANTS_,n={};return this.startSet_&&(n[e.INDEX_START_VALUE]=this.indexStartValue_,this.startNameSet_&&(n[e.INDEX_START_NAME]=this.indexStartName_)),this.endSet_&&(n[e.INDEX_END_VALUE]=this.indexEndValue_,this.endNameSet_&&(n[e.INDEX_END_NAME]=this.indexEndName_)),this.limitSet_&&(n[e.LIMIT]=this.limit_,""===(t=this.viewFrom_)&&(t=this.isViewFromLeft()?e.VIEW_FROM_LEFT:e.VIEW_FROM_RIGHT),n[e.VIEW_FROM]=t),this.index_!==ch&&(n[e.INDEX]=this.index_.toString()),n},lp.prototype.loadsAllData=function(){return!(this.startSet_||this.endSet_||this.limitSet_)},lp.prototype.isDefault=function(){return this.loadsAllData()&&this.index_===ch},lp.prototype.getNodeFilter=function(){return this.loadsAllData()?new xl(this.getIndex()):new(this.hasLimit()?up:sp)(this)},lp.prototype.toRestQueryStringParameters=function(){var t,e=lp.REST_QUERY_CONSTANTS_,n={};return this.isDefault()||(t=this.index_===ch?e.PRIORITY_INDEX:this.index_===jh?e.VALUE_INDEX:this.index_===Zc?e.KEY_INDEX:(ea(this.index_ instanceof Vh,"Unrecognized index type!"),this.index_.toString()),n[e.ORDER_BY]=Ta(t),this.startSet_&&(n[e.START_AT]=Ta(this.indexStartValue_),this.startNameSet_&&(n[e.START_AT]+=","+Ta(this.indexStartName_))),this.endSet_&&(n[e.END_AT]=Ta(this.indexEndValue_),this.endNameSet_&&(n[e.END_AT]+=","+Ta(this.indexEndName_))),this.limitSet_&&(this.isViewFromLeft()?n[e.LIMIT_TO_FIRST]=this.limit_:n[e.LIMIT_TO_LAST]=this.limit_)),n},lp.WIRE_PROTOCOL_CONSTANTS_={INDEX_START_VALUE:"sp",INDEX_START_NAME:"sn",INDEX_END_VALUE:"ep",INDEX_END_NAME:"en",LIMIT:"l",VIEW_FROM:"vf",VIEW_FROM_LEFT:"l",VIEW_FROM_RIGHT:"r",INDEX:"i"},lp.REST_QUERY_CONSTANTS_={ORDER_BY:"orderBy",PRIORITY_INDEX:"$priority",VALUE_INDEX:"$value",KEY_INDEX:"$key",START_AT:"startAt",END_AT:"endAt",LIMIT_TO_FIRST:"limitToFirst",LIMIT_TO_LAST:"limitToLast"},lp.DEFAULT=new lp,lp);function lp(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=ch}var fp,pp=(Gs(dp,fp=Zh),dp.prototype.getKey=function(){return Ma("Reference.key",0,0,arguments.length),this.path.isEmpty()?null:this.path.getBack()},dp.prototype.child=function(t){var e,n,r,i;return Ma("Reference.child",1,1,arguments.length),"number"==typeof t?t=String(t):t instanceof hc||(null===this.path.getFront()?(e="Reference.child",i=!(n=1),r=(r=t)&&r.replace(/^\/*\.info(\/|$)/,"/"),Ac(e,n,r,i)):Ac("Reference.child",1,t,!1)),new dp(this.repo,this.path.child(t))},dp.prototype.getParent=function(){Ma("Reference.parent",0,0,arguments.length);var t=this.path.parent();return null===t?null:new dp(this.repo,t)},dp.prototype.getRoot=function(){Ma("Reference.root",0,0,arguments.length);for(var t=this;null!==t.getParent();)t=t.getParent();return t},dp.prototype.databaseProp=function(){return this.repo.database},dp.prototype.set=function(t,e){Ma("Reference.set",1,2,arguments.length),kc("Reference.set",this.path),Ic("Reference.set",1,t,this.path,!1),Ua("Reference.set",2,e,!0);var n=new sa;return this.repo.setWithPriority(this.path,t,null,n.wrapCallback(e)),n.promise},dp.prototype.update=function(t,e){if(Ma("Reference.update",1,2,arguments.length),kc("Reference.update",this.path),Array.isArray(t)){for(var n={},r=0;r<t.length;++r)n[""+r]=t[r];t=n,ju("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Tc("Reference.update",1,t,this.path,!1),Ua("Reference.update",2,e,!0);var i=new sa;return this.repo.update(this.path,t,i.wrapCallback(e)),i.promise},dp.prototype.setWithPriority=function(t,e,n){if(Ma("Reference.setWithPriority",2,3,arguments.length),kc("Reference.setWithPriority",this.path),Ic("Reference.setWithPriority",1,t,this.path,!1),Sc("Reference.setWithPriority",2,e,!1),Ua("Reference.setWithPriority",3,n,!0),".length"===this.getKey()||".keys"===this.getKey())throw"Reference.setWithPriority failed: "+this.getKey()+" is a read-only object.";var r=new sa;return this.repo.setWithPriority(this.path,t,e,r.wrapCallback(n)),r.promise},dp.prototype.remove=function(t){return Ma("Reference.remove",0,1,arguments.length),kc("Reference.remove",this.path),Ua("Reference.remove",1,t,!0),this.set(null,t)},dp.prototype.transaction=function(t,r,e){if(Ma("Reference.transaction",1,3,arguments.length),kc("Reference.transaction",this.path),Ua("Reference.transaction",1,t,!1),Ua("Reference.transaction",2,r,!0),function(t,e,n,r){if((!r||void 0!==n)&&"boolean"!=typeof n)throw new Error(Fa(t,e,r)+"must be a boolean.")}("Reference.transaction",3,e,!0),".length"===this.getKey()||".keys"===this.getKey())throw"Reference.transaction failed: "+this.getKey()+" is a read-only object.";void 0===e&&(e=!0);var i=new sa;"function"==typeof r&&i.promise.catch(function(){});return this.repo.startTransaction(this.path,t,function(t,e,n){t?i.reject(t):i.resolve(new Uc(e,n)),"function"==typeof r&&r(t,e,n)},e),i.promise},dp.prototype.setPriority=function(t,e){Ma("Reference.setPriority",1,2,arguments.length),kc("Reference.setPriority",this.path),Sc("Reference.setPriority",1,t,!1),Ua("Reference.setPriority",2,e,!0);var n=new sa;return this.repo.setWithPriority(this.path.child(".priority"),t,null,n.wrapCallback(e)),n.promise},dp.prototype.push=function(t,e){Ma("Reference.push",0,2,arguments.length),kc("Reference.push",this.path),Ic("Reference.push",1,t,this.path,!0),Ua("Reference.push",2,e,!0);var n=this.repo.serverTime(),r=Wc(n),i=this.child(r),o=this.child(r),s=null!=t?i.set(t,e).then(function(){return o}):Promise.resolve(o);return i.then=s.then.bind(s),i.catch=s.then.bind(s,void 0),"function"==typeof e&&s.catch(function(){}),i},dp.prototype.onDisconnect=function(){return kc("Reference.onDisconnect",this.path),new Mc(this.repo,this.path)},Object.defineProperty(dp.prototype,"database",{get:function(){return this.databaseProp()},enumerable:!1,configurable:!0}),Object.defineProperty(dp.prototype,"key",{get:function(){return this.getKey()},enumerable:!1,configurable:!0}),Object.defineProperty(dp.prototype,"parent",{get:function(){return this.getParent()},enumerable:!1,configurable:!0}),Object.defineProperty(dp.prototype,"root",{get:function(){return this.getRoot()},enumerable:!1,configurable:!0}),dp);function dp(t,e){if(!(t instanceof ip))throw new Error("new Reference() no longer supported - use app.database().");return fp.call(this,t,e,hp.DEFAULT,!1)||this}Zh.__referenceConstructor=pp,$l.__referenceConstructor=pp;var vp,yp,gp=function(){this.children={},this.childCount=0,this.value=null},mp=(bp.prototype.subTree=function(t){for(var e=t instanceof hc?t:new hc(t),n=this,r=e.getFront();null!==r;)n=new bp(r,n,Na(n.node_.children,r)||new gp),r=(e=e.popFront()).getFront();return n},bp.prototype.getValue=function(){return this.node_.value},bp.prototype.setValue=function(t){ea(void 0!==t,"Cannot set value to undefined"),this.node_.value=t,this.updateParents_()},bp.prototype.clear=function(){this.node_.value=null,this.node_.children={},this.node_.childCount=0,this.updateParents_()},bp.prototype.hasChildren=function(){return 0<this.node_.childCount},bp.prototype.isEmpty=function(){return null===this.getValue()&&!this.hasChildren()},bp.prototype.forEachChild=function(n){var r=this;ic(this.node_.children,function(t,e){n(new bp(t,r,e))})},bp.prototype.forEachDescendant=function(e,t,n){t&&!n&&e(this),this.forEachChild(function(t){t.forEachDescendant(e,!0,n)}),t&&n&&e(this)},bp.prototype.forEachAncestor=function(t,e){for(var n=e?this:this.parent();null!==n;){if(t(n))return!0;n=n.parent()}return!1},bp.prototype.forEachImmediateDescendantWithValue=function(e){this.forEachChild(function(t){null!==t.getValue()?e(t):t.forEachImmediateDescendantWithValue(e)})},bp.prototype.path=function(){return new hc(null===this.parent_?this.name_:this.parent_.path()+"/"+this.name_)},bp.prototype.name=function(){return this.name_},bp.prototype.parent=function(){return this.parent_},bp.prototype.updateParents_=function(){null!==this.parent_&&this.parent_.updateChild_(this.name_,this)},bp.prototype.updateChild_=function(t,e){var n=e.isEmpty(),r=Ca(this.node_.children,t);n&&r?(delete this.node_.children[t],this.node_.childCount--,this.updateParents_()):n||r||(this.node_.children[t]=e.node_,this.node_.childCount++,this.updateParents_())},bp);function bp(t,e,n){void 0===t&&(t=""),void 0===e&&(e=null),void 0===n&&(n=new gp),this.name_=t,this.parent_=e,this.node_=n}(yp=vp=vp||{})[yp.RUN=0]="RUN",yp[yp.SENT=1]="SENT",yp[yp.COMPLETED=2]="COMPLETED",yp[yp.SENT_NEEDS_ABORT=3]="SENT_NEEDS_ABORT",yp[yp.NEEDS_ABORT=4]="NEEDS_ABORT",ip.MAX_TRANSACTION_RETRIES_=25,ip.prototype.transactionsInit_=function(){this.transactionQueueTree_=new mp},ip.prototype.startTransaction=function(t,e,n,r){this.log_("transaction on "+t);function i(){}var o=new pp(this,t);o.on("value",i);var s={path:t,update:e,onComplete:n,status:null,order:Qu(),applyLocally:r,retryCount:0,unwatcher:function(){o.off("value",i)},abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},a=this.getLatestState_(t);s.currentInputSnapshot=a;var u,c,h,l,f,p,d,v,y=s.update(a.val());void 0===y?(s.unwatcher(),s.currentOutputSnapshotRaw=null,s.currentOutputSnapshotResolved=null,s.onComplete&&(u=new Bh(s.currentInputSnapshot,new pp(this,s.path),ch),s.onComplete(null,!1,u))):(Lc("transaction failed: Data returned ",y,s.path),s.status=vp.RUN,(h=(c=this.transactionQueueTree_.subTree(t)).getValue()||[]).push(s),c.setValue(h),l=void 0,"object"==typeof y&&null!==y&&Ca(y,".priority")?(l=Na(y,".priority"),ea(Ec(l),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):l=(this.serverSyncTree_.calcCompleteEventCache(t)||Oh.EMPTY_NODE).getPriority().val(),f=this.generateServerValues(),p=Mh(y,l),d=sl(p,a,f),s.currentOutputSnapshotRaw=p,s.currentOutputSnapshotResolved=d,s.currentWriteId=this.getNextWriteId_(),v=this.serverSyncTree_.applyUserOverwrite(t,d,s.currentWriteId,s.applyLocally),this.eventQueue_.raiseEventsForChangedPath(t,v),this.sendReadyTransactions_())},ip.prototype.getLatestState_=function(t,e){return this.serverSyncTree_.calcCompleteEventCache(t,e)||Oh.EMPTY_NODE},ip.prototype.sendReadyTransactions_=function(t){var e,n=this;void 0===t&&(t=this.transactionQueueTree_),t||this.pruneCompletedTransactionsBelowNode_(t),null!==t.getValue()?(e=this.buildTransactionQueue_(t),ea(0<e.length,"Sending zero length transaction queue"),e.every(function(t){return t.status===vp.RUN})&&this.sendTransactionQueue_(t.path(),e)):t.hasChildren()&&t.forEachChild(function(t){n.sendReadyTransactions_(t)})},ip.prototype.sendTransactionQueue_=function(a,u){for(var c=this,t=u.map(function(t){return t.currentWriteId}),e=this.getLatestState_(a,t),n=e,r=e.hash(),i=0;i<u.length;i++){var o=u[i];ea(o.status===vp.RUN,"tryToSendTransactionQueue_: items in queue should all be run."),o.status=vp.SENT,o.retryCount++;var s=hc.relativePath(a,o.path),n=n.updateChild(s,o.currentOutputSnapshotRaw)}var h=n.val(!0),l=a;this.server_.put(l.toString(),h,function(t){c.log_("transaction put response",{path:l.toString(),status:t});var e=[];if("ok"===t){for(var n,r,i,o=[],s=0;s<u.length;s++){u[s].status=vp.COMPLETED,e=e.concat(c.serverSyncTree_.ackUserWrite(u[s].currentWriteId)),u[s].onComplete&&(n=u[s].currentOutputSnapshotResolved,r=new pp(c,u[s].path),i=new Bh(n,r,ch),o.push(u[s].onComplete.bind(null,null,!0,i))),u[s].unwatcher()}c.pruneCompletedTransactionsBelowNode_(c.transactionQueueTree_.subTree(a)),c.sendReadyTransactions_(),c.eventQueue_.raiseEventsForChangedPath(a,e);for(s=0;s<o.length;s++)sc(o[s])}else{if("datastale"===t)for(s=0;s<u.length;s++)u[s].status===vp.SENT_NEEDS_ABORT?u[s].status=vp.NEEDS_ABORT:u[s].status=vp.RUN;else{ju("transaction at "+l.toString()+" failed: "+t);for(s=0;s<u.length;s++)u[s].status=vp.NEEDS_ABORT,u[s].abortReason=t}c.rerunTransactions_(a)}},r)},ip.prototype.rerunTransactions_=function(t){var e=this.getAncestorTransactionNode_(t),n=e.path(),r=this.buildTransactionQueue_(e);return this.rerunTransactionQueue_(r,n),n},ip.prototype.rerunTransactionQueue_=function(t,e){if(0!==t.length){for(var n,r=[],i=[],o=t.filter(function(t){return t.status===vp.RUN}).map(function(t){return t.currentWriteId}),s=0;s<t.length;s++){var a,u,c,h,l,f,p,d,v,y=t[s],g=hc.relativePath(e,y.path),m=!1,b=void 0;ea(null!==g,"rerunTransactionsUnderNode_: relativePath should not be null."),y.status===vp.NEEDS_ABORT?(m=!0,b=y.abortReason,i=i.concat(this.serverSyncTree_.ackUserWrite(y.currentWriteId,!0))):y.status===vp.RUN&&(i=y.retryCount>=ip.MAX_TRANSACTION_RETRIES_?(m=!0,b="maxretry",i.concat(this.serverSyncTree_.ackUserWrite(y.currentWriteId,!0))):(a=this.getLatestState_(y.path,o),y.currentInputSnapshot=a,void 0!==(u=t[s].update(a.val()))?(Lc("transaction failed: Data returned ",u,y.path),c=Mh(u),"object"==typeof u&&null!=u&&Ca(u,".priority")||(c=c.updatePriority(a.getPriority())),h=y.currentWriteId,l=this.generateServerValues(),f=sl(c,a,l),y.currentOutputSnapshotRaw=c,y.currentOutputSnapshotResolved=f,y.currentWriteId=this.getNextWriteId_(),o.splice(o.indexOf(h),1),(i=i.concat(this.serverSyncTree_.applyUserOverwrite(y.path,f,y.currentWriteId,y.applyLocally))).concat(this.serverSyncTree_.ackUserWrite(h,!0))):(m=!0,b="nodata",i.concat(this.serverSyncTree_.ackUserWrite(y.currentWriteId,!0))))),this.eventQueue_.raiseEventsForChangedPath(e,i),i=[],m&&(t[s].status=vp.COMPLETED,n=t[s].unwatcher,setTimeout(n,Math.floor(0)),t[s].onComplete&&("nodata"===b?(p=new pp(this,t[s].path),d=t[s].currentInputSnapshot,v=new Bh(d,p,ch),r.push(t[s].onComplete.bind(null,null,!1,v))):r.push(t[s].onComplete.bind(null,new Error(b),!1,null))))}this.pruneCompletedTransactionsBelowNode_(this.transactionQueueTree_);for(s=0;s<r.length;s++)sc(r[s]);this.sendReadyTransactions_()}},ip.prototype.getAncestorTransactionNode_=function(t){for(var e=this.transactionQueueTree_,n=t.getFront();null!==n&&null===e.getValue();)e=e.subTree(n),n=(t=t.popFront()).getFront();return e},ip.prototype.buildTransactionQueue_=function(t){var e=[];return this.aggregateTransactionQueuesForNode_(t,e),e.sort(function(t,e){return t.order-e.order}),e},ip.prototype.aggregateTransactionQueuesForNode_=function(t,e){var n=this,r=t.getValue();if(null!==r)for(var i=0;i<r.length;i++)e.push(r[i]);t.forEachChild(function(t){n.aggregateTransactionQueuesForNode_(t,e)})},ip.prototype.pruneCompletedTransactionsBelowNode_=function(t){var e=this,n=t.getValue();if(n){for(var r=0,i=0;i<n.length;i++)n[i].status!==vp.COMPLETED&&(n[r]=n[i],r++);n.length=r,t.setValue(0<n.length?n:null)}t.forEachChild(function(t){e.pruneCompletedTransactionsBelowNode_(t)})},ip.prototype.abortTransactions_=function(t){var e=this,n=this.getAncestorTransactionNode_(t).path(),r=this.transactionQueueTree_.subTree(t);return r.forEachAncestor(function(t){e.abortTransactionsOnNode_(t)}),this.abortTransactionsOnNode_(r),r.forEachDescendant(function(t){e.abortTransactionsOnNode_(t)}),n},ip.prototype.abortTransactionsOnNode_=function(t){var e=t.getValue();if(null!==e){for(var n=[],r=[],i=-1,o=0;o<e.length;o++){e[o].status===vp.SENT_NEEDS_ABORT||(e[o].status===vp.SENT?(ea(i===o-1,"All SENT items should be at beginning of queue."),e[i=o].status=vp.SENT_NEEDS_ABORT,e[o].abortReason="set"):(ea(e[o].status===vp.RUN,"Unexpected transaction status in abort"),e[o].unwatcher(),r=r.concat(this.serverSyncTree_.ackUserWrite(e[o].currentWriteId,!0)),e[o].onComplete&&n.push(e[o].onComplete.bind(null,new Error("set"),!1,null))))}-1===i?t.setValue(null):e.length=i+1,this.eventQueue_.raiseEventsForChangedPath(t.path(),r);for(o=0;o<n.length;o++)sc(n[o])}};var _p=(wp.prototype.getToken=function(t){return this.auth_?this.auth_.getToken(t).catch(function(t){return t&&"auth/token-not-initialized"===t.code?(Ju("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)}):Promise.resolve(null)},wp.prototype.addTokenChangeListener=function(e){this.auth_?this.auth_.addAuthTokenListener(e):(setTimeout(function(){return e(null)},0),this.authProvider_.get().then(function(t){return t.addAuthTokenListener(e)}))},wp.prototype.removeTokenChangeListener=function(e){this.authProvider_.get().then(function(t){return t.removeAuthTokenListener(e)})},wp.prototype.notifyForInvalidToken=function(){var t='Provided authentication credentials for the app named "'+this.app_.name+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.app_.options?t+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.app_.options?t+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':t+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',ju(t)},wp);function wp(t,e){var n=this;this.app_=t,this.authProvider_=e,this.auth_=null,this.auth_=e.getImmediate({optional:!0}),this.auth_||e.get().then(function(t){return n.auth_=t})}var Ep=(Ip.prototype.getToken=function(t){return Promise.resolve({accessToken:Ip.EMULATOR_AUTH_TOKEN})},Ip.prototype.addTokenChangeListener=function(t){t(Ip.EMULATOR_AUTH_TOKEN)},Ip.prototype.removeTokenChangeListener=function(t){},Ip.prototype.notifyForInvalidToken=function(){},Ip.EMULATOR_AUTH_TOKEN="owner",Ip);function Ip(){}var Tp,Sp=(Cp.getInstance=function(){return Tp=Tp||new Cp},Cp.prototype.interrupt=function(){var e,t,n,r;try{for(var i=Qs(Object.keys(this.repos_)),o=i.next();!o.done;o=i.next()){var s=o.value;try{for(var a=(n=void 0,Qs(Object.keys(this.repos_[s]))),u=a.next();!u.done;u=a.next()){var c=u.value;this.repos_[s][c].interrupt()}}catch(t){n={error:t}}finally{try{u&&!u.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}}}catch(t){e={error:t}}finally{try{o&&!o.done&&(t=i.return)&&t.call(i)}finally{if(e)throw e.error}}},Cp.prototype.resume=function(){var e,t,n,r;try{for(var i=Qs(Object.keys(this.repos_)),o=i.next();!o.done;o=i.next()){var s=o.value;try{for(var a=(n=void 0,Qs(Object.keys(this.repos_[s]))),u=a.next();!u.done;u=a.next()){var c=u.value;this.repos_[s][c].resume()}}catch(t){n={error:t}}finally{try{u&&!u.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}}}catch(t){e={error:t}}finally{try{o&&!o.done&&(t=i.return)&&t.call(i)}finally{if(e)throw e.error}}},Cp.prototype.databaseFromApp=function(t,e,n,r){var i=n||t.options.databaseURL;void 0===i&&(t.options.projectId||Uu("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Ju("Using default host for project ",t.options.projectId),i=t.options.projectId+"-default-rtdb.firebaseio.com");var o,s=bc(i,r),a=s.repoInfo,u=void 0;"undefined"!=typeof process&&(u=process.env.FIREBASE_DATABASE_EMULATOR_HOST),u?(o=!0,i="http://"+u+"?ns="+a.namespace,a=(s=bc(i,r)).repoInfo):o=!s.repoInfo.secure;var c=r&&o?new Ep:new _p(t,e);return Oc("Invalid Firebase Database URL",1,s),s.path.isEmpty()||Uu("Database URL must point to the root of a Firebase Database (not including a child path)."),this.createRepo(a,t,c).database},Cp.prototype.deleteRepo=function(t){var e=Na(this.repos_,t.app.name);e&&Na(e,t.repoInfo_.toURLString())===t||Uu("Database "+t.app.name+"("+t.repoInfo_+") has already been deleted."),t.interrupt(),delete e[t.repoInfo_.toURLString()]},Cp.prototype.createRepo=function(t,e,n){var r=Na(this.repos_,e.name);r||(r={},this.repos_[e.name]=r);var i=Na(r,t.toURLString());return i&&Uu("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),i=new ip(t,this.useRestClient_,e,n),r[t.toURLString()]=i},Cp.prototype.forceRestClient=function(t){this.useRestClient_=t},Cp);function Cp(){this.repos_={},this.useRestClient_=!1}var Np=(Object.defineProperty(Ap.prototype,"app",{get:function(){return this.repo_.app},enumerable:!1,configurable:!0}),Ap.prototype.ref=function(t){return this.checkDeleted_("ref"),Ma("database.ref",0,1,arguments.length),t instanceof pp?this.refFromURL(t.toString()):void 0!==t?this.root_.child(t):this.root_},Ap.prototype.refFromURL=function(t){var e="database.refFromURL";this.checkDeleted_(e),Ma(e,1,1,arguments.length);var n=bc(t,this.repo_.repoInfo_.nodeAdmin);Oc(e,1,n);var r=n.repoInfo;return r.host!==this.repo_.repoInfo_.host&&Uu(e+": Host name does not match the current database: (found "+r.host+" but expected "+this.repo_.repoInfo_.host+")"),this.ref(n.path.toString())},Ap.prototype.checkDeleted_=function(t){null===this.repo_&&Uu("Cannot call "+t+" on a deleted database.")},Ap.prototype.goOffline=function(){Ma("database.goOffline",0,0,arguments.length),this.checkDeleted_("goOffline"),this.repo_.interrupt()},Ap.prototype.goOnline=function(){Ma("database.goOnline",0,0,arguments.length),this.checkDeleted_("goOnline"),this.repo_.resume()},Ap.ServerValue={TIMESTAMP:{".sv":"timestamp"},increment:function(t){return{".sv":{increment:t}}}},Ap);function Ap(t){(this.repo_=t)instanceof ip||Uu("Don't call new Database() directly - please use firebase.database()."),this.root_=new pp(t,hc.Empty),this.INTERNAL=new kp(this)}var kp=(Op.prototype.delete=function(){return Ks(this,void 0,void 0,function(){return zs(this,function(t){return this.database.checkDeleted_("delete"),Sp.getInstance().deleteRepo(this.database.repo_),this.database.repo_=null,this.database.root_=null,this.database.INTERNAL=null,this.database=null,[2]})})},Op);function Op(t){this.database=t}var Rp=Object.freeze({__proto__:null,forceLongPolling:function(){qf.forceDisallow(),xf.forceAllow()},forceWebSockets:function(){xf.forceDisallow()},isWebSocketsAvailable:function(){return qf.isAvailable()},setSecurityDebugCallback:function(t,e){t.repo.persistentConnection_.securityDebugCallback_=e},stats:function(t,e){t.repo.stats(e)},statsIncrementCounter:function(t,e){t.repo.statsIncrementCounter(e)},dataUpdateCount:function(t){return t.repo.dataUpdateCount},interceptServerData:function(t,e){return t.repo.interceptServerData_(e)},initStandalone:function(t){var e=t.app,n=t.url,r=t.version,i=t.customAuthImpl,o=t.namespace,s=t.nodeAdmin,a=void 0!==s&&s;jf(r);var u=new Ya("auth-internal",new Ja("database-standalone"));return u.setComponent(new Ka("auth-internal",function(){return i},"PRIVATE")),{instance:Sp.getInstance().databaseFromApp(e,u,n,a),namespace:o}}}),Pp=Jf;Jf.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)},Jf.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};var Dp,xp=Object.freeze({__proto__:null,DataConnection:Pp,RealTimeConnection:Hf,hijackHash:function(i){var o=Jf.prototype.put;return Jf.prototype.put=function(t,e,n,r){void 0!==r&&(r=i()),o.call(this,t,e,n,r)},function(){Jf.prototype.put=o}},ConnectionTarget:gc,queryIdentifier:function(t){return t.queryIdentifier()},forceRestClient:function(t){Sp.getInstance().forceRestClient(t)}}),Lp=Np.ServerValue;jf((Dp=Hl).SDK_VERSION),Dp.INTERNAL.registerComponent(new Ka("database",function(t,e){var n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal");return Sp.getInstance().databaseFromApp(n,r,e)},"PUBLIC").setServiceProps({Reference:pp,Query:Zh,Database:Np,DataSnapshot:Bh,enableLogging:Mu,INTERNAL:Rp,ServerValue:Lp,TEST_ACCESS:xp}).setMultipleInstances(!0)),Dp.registerVersion("@firebase/database","0.6.13");var Mp=function(t,e){return(Mp=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function Fp(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}var Up,jp="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Vp={},qp=jp||self;function Bp(){}function Wp(t){var e=typeof t;return"object"!=e?e:t?Array.isArray(t)?"array":e:"null"}function Gp(t){var e=Wp(t);return"array"==e||"object"==e&&"number"==typeof t.length}function Hp(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var Kp="closure_uid_"+(1e9*Math.random()>>>0),zp=0;function Qp(t,e,n){return t.call.apply(t.bind,arguments)}function Yp(e,n,t){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var t=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(t,r),e.apply(n,t)}}return function(){return e.apply(n,arguments)}}function Xp(t,e,n){return(Xp=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Qp:Yp).apply(null,arguments)}function $p(e){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}var Jp=Date.now;function Zp(t,e){function n(){}n.prototype=e.prototype,t.S=e.prototype,t.prototype=new n,t.prototype.constructor=t}function td(){this.j=this.j,this.i=this.i}td.prototype.j=!1,td.prototype.ja=function(){var t;!this.j&&(this.j=!0,this.G(),0)&&(t=this,Object.prototype.hasOwnProperty.call(t,Kp)&&t[Kp]||(t[Kp]=++zp))},td.prototype.G=function(){if(this.i)for(;this.i.length;)this.i.shift()()};var ed=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},nd=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};function rd(){return Array.prototype.concat.apply([],arguments)}function id(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function od(t){return/^[\s\xa0]*$/.test(t)}var sd,ad=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function ud(t,e){return-1!=t.indexOf(e)}function cd(t,e){return t<e?-1:e<t?1:0}t:{var hd=qp.navigator;if(hd){var ld=hd.userAgent;if(ld){sd=ld;break t}}sd=""}function fd(t,e,n){for(var r in t)e.call(n,t[r],r,t)}function pd(t){var e,n={};for(e in t)n[e]=t[e];return n}var dd="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function vd(t){for(var e,n,r=1;r<arguments.length;r++){for(e in n=arguments[r])t[e]=n[e];for(var i=0;i<dd.length;i++)e=dd[i],Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e])}}function yd(t){return yd[" "](t),t}yd[" "]=Bp;var gd,md,bd=ud(sd,"Opera"),_d=ud(sd,"Trident")||ud(sd,"MSIE"),wd=ud(sd,"Edge"),Ed=wd||_d,Id=ud(sd,"Gecko")&&!(ud(sd.toLowerCase(),"webkit")&&!ud(sd,"Edge"))&&!(ud(sd,"Trident")||ud(sd,"MSIE"))&&!ud(sd,"Edge"),Td=ud(sd.toLowerCase(),"webkit")&&!ud(sd,"Edge");function Sd(){var t=qp.document;return t?t.documentMode:void 0}t:{var Cd="",Nd=(md=sd,Id?/rv:([^\);]+)(\)|;)/.exec(md):wd?/Edge\/([\d\.]+)/.exec(md):_d?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(md):Td?/WebKit\/(\S+)/.exec(md):bd?/(?:Version)[ \/]?(\S+)/.exec(md):void 0);if(Nd&&(Cd=Nd?Nd[1]:""),_d){var Ad=Sd();if(null!=Ad&&Ad>parseFloat(Cd)){gd=String(Ad);break t}}gd=Cd}var kd={};function Od(a){return t=a,e=function(){for(var t=0,e=ad(String(gd)).split("."),n=ad(String(a)).split("."),r=Math.max(e.length,n.length),i=0;0==t&&i<r;i++){var o=e[i]||"",s=n[i]||"";do{if(o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==o[0].length&&0==s[0].length)break;t=cd(0==o[1].length?0:parseInt(o[1],10),0==s[1].length?0:parseInt(s[1],10))||cd(0==o[2].length,0==s[2].length)||cd(o[2],s[2]),o=o[3],s=s[3]}while(0==t)}return 0<=t},n=kd,Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t);var t,e,n}var Rd=qp.document&&_d?Sd()||(parseInt(gd,10)||void 0):void 0,Pd=!_d||9<=Number(Rd),Dd=_d&&!Od("9"),xd=function(){if(!qp.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{qp.addEventListener("test",Bp,e),qp.removeEventListener("test",Bp,e)}catch(t){}return t}();function Ld(t,e){this.type=t,this.a=this.target=e,this.defaultPrevented=!1}function Md(t,e){if(Ld.call(this,t?t.type:""),this.relatedTarget=this.a=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.c=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.a=e,e=t.relatedTarget){if(Id){t:{try{yd(e.nodeName);var i=!0;break t}catch(t){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:Fd[t.pointerType]||"",(this.c=t).defaultPrevented&&this.b()}}Ld.prototype.b=function(){this.defaultPrevented=!0},Zp(Md,Ld);var Fd={2:"touch",3:"pen",4:"mouse"};Md.prototype.b=function(){Md.S.b.call(this);var t=this.c;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,Dd)try{(t.ctrlKey||112<=t.keyCode&&t.keyCode<=123)&&(t.keyCode=-1)}catch(t){}};var Ud="closure_listenable_"+(1e6*Math.random()|0),jd=0;function Vd(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.ca=i,this.key=++jd,this.Y=this.Z=!1}function qd(t){t.Y=!0,t.listener=null,t.proxy=null,t.src=null,t.ca=null}function Bd(t){this.src=t,this.a={},this.b=0}function Wd(t,e){var n,r,i,o=e.type;o in t.a&&(n=t.a[o],(i=0<=(r=ed(n,e)))&&Array.prototype.splice.call(n,r,1),i&&(qd(e),0==t.a[o].length&&(delete t.a[o],t.b--)))}function Gd(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.Y&&o.listener==e&&o.capture==!!n&&o.ca==r)return i}return-1}Bd.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var s=Gd(t,e,r,i);return-1<s?(e=t[s],n||(e.Z=!1)):((e=new Vd(e,this.src,o,!!r,i)).Z=n,t.push(e)),e};var Hd="closure_lm_"+(1e6*Math.random()|0),Kd={};function zd(t,e,n,r,i){if(r&&r.once)return function t(e,n,r,i,o){if(Array.isArray(n)){for(var s=0;s<n.length;s++)t(e,n[s],r,i,o);return null}r=ev(r);return e&&e[Ud]?e.wa(n,r,Hp(i)?!!i.capture:!!i,o):Qd(e,n,r,!0,i,o)}(t,e,n,r,i);if(Array.isArray(e)){for(var o=0;o<e.length;o++)zd(t,e[o],n,r,i);return null}return n=ev(n),t&&t[Ud]?t.va(e,n,Hp(r)?!!r.capture:!!r,i):Qd(t,e,n,!1,r,i)}function Qd(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s=Hp(i)?!!i.capture:!!i;if(s&&!Pd)return null;var a,u,c=Zd(t);if(c||(t[Hd]=c=new Bd(t)),(n=c.add(e,n,r,s,o)).proxy)return n;if(a=Jd,r=u=Pd?function(t){return a.call(u.src,u.listener,t)}:function(t){if(!(t=a.call(u.src,u.listener,t)))return t},(n.proxy=r).src=t,r.listener=n,t.addEventListener)xd||(i=s),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(Xd(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function Yd(t){var e,n,r;"number"!=typeof t&&t&&!t.Y&&((e=t.src)&&e[Ud]?Wd(e.c,t):(n=t.type,r=t.proxy,e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(Xd(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=Zd(e))?(Wd(n,t),0==n.b&&(n.src=null,e[Hd]=null)):qd(t)))}function Xd(t){return t in Kd?Kd[t]:Kd[t]="on"+t}function $d(t,e){var n=t.listener,r=t.ca||t.src;return t.Z&&Yd(t),n.call(r,e)}function Jd(t,e){if(t.Y)return!0;if(Pd)return $d(t,new Md(e,this));if(!e)t:{e=["window","event"];for(var n=qp,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}return $d(t,e=new Md(e,this))}function Zd(t){return(t=t[Hd])instanceof Bd?t:null}var tv="__closure_events_fn_"+(1e9*Math.random()>>>0);function ev(e){return"function"==Wp(e)?e:(e[tv]||(e[tv]=function(t){return e.handleEvent(t)}),e[tv])}function nv(){td.call(this),this.c=new Bd(this),(this.J=this).C=null}function rv(t,e,n,r){if(!(e=t.c.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s,a,u=e[o];u&&!u.Y&&u.capture==n&&(s=u.listener,a=u.ca||u.src,u.Z&&Wd(t.c,u),i=!1!==s.call(a,r)&&i)}return i&&!r.defaultPrevented}Zp(nv,td),nv.prototype[Ud]=!0,(Up=nv.prototype).addEventListener=function(t,e,n,r){zd(this,t,e,n,r)},Up.removeEventListener=function(t,e,n,r){!function t(e,n,r,i,o){if(Array.isArray(n))for(var s=0;s<n.length;s++)t(e,n[s],r,i,o);else i=Hp(i)?!!i.capture:!!i,r=ev(r),e&&e[Ud]?(e=e.c,(n=String(n).toString())in e.a&&-1<(r=Gd(s=e.a[n],r,i,o))&&(qd(s[r]),Array.prototype.splice.call(s,r,1),0==s.length&&(delete e.a[n],e.b--))):(e=e&&Zd(e))&&(n=e.a[n.toString()],e=-1,n&&(e=Gd(n,r,i,o)),(r=-1<e?n[e]:null)&&Yd(r))}(this,t,e,n,r)},Up.dispatchEvent=function(t){var e,n=this.C;if(n)for(e=[];n;n=n.C)e.push(n);n=this.J;var r=t.type||t;if("string"==typeof t?t=new Ld(t,n):t instanceof Ld?t.target=t.target||n:(s=t,vd(t=new Ld(r,n),s)),s=!0,e)for(var i=e.length-1;0<=i;i--)var o=t.a=e[i],s=rv(o,r,!0,t)&&s;if(s=rv(o=t.a=n,r,!0,t)&&s,s=rv(o,r,!1,t)&&s,e)for(i=0;i<e.length;i++)s=rv(o=t.a=e[i],r,!1,t)&&s;return s},Up.G=function(){if(nv.S.G.call(this),this.c){var t,e=this.c;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)qd(n[r]);delete e.a[t],e.b--}}this.C=null},Up.va=function(t,e,n,r){return this.c.add(String(t),e,!1,n,r)},Up.wa=function(t,e,n,r){return this.c.add(String(t),e,!0,n,r)};var iv=qp.JSON.stringify;function ov(){this.b=this.a=null}var sv,av=(uv.prototype.get=function(){var t;return 0<this.b?(this.b--,t=this.a,this.a=t.next,t.next=null):t=this.c(),t},new uv(function(){return new cv},function(t){t.reset()},100));function uv(t,e,n){this.f=n,this.c=t,this.g=e,this.b=0,this.a=null}function cv(){this.next=this.b=this.a=null}function hv(t,e){var n;sv||(n=qp.Promise.resolve(void 0),sv=function(){n.then(pv)}),lv||(sv(),lv=!0),fv.add(t,e)}ov.prototype.add=function(t,e){var n=av.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},cv.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null};var lv=!(cv.prototype.reset=function(){this.next=this.b=this.a=null}),fv=new ov;function pv(){for(var t,e,n;n=e=void 0,n=null,(e=fv).a&&(n=e.a,e.a=e.a.next,e.a||(e.b=null),n.next=null),t=n;){try{t.a.call(t.b)}catch(t){!function(t){qp.setTimeout(function(){throw t},0)}(t)}var r=av;r.g(t),r.b<r.f&&(r.b++,t.next=r.a,r.a=t)}lv=!1}function dv(t,e){nv.call(this),this.b=t||1,this.a=e||qp,this.f=Xp(this.Ya,this),this.g=Jp()}function vv(t){t.aa=!1,t.M&&(t.a.clearTimeout(t.M),t.M=null)}function yv(t,e,n){if("function"==Wp(t))n&&(t=Xp(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=Xp(t.handleEvent,t)}return 2147483647<Number(e)?-1:qp.setTimeout(t,e||0)}Zp(dv,nv),(Up=dv.prototype).aa=!1,Up.M=null,Up.Ya=function(){var t;this.aa&&(0<(t=Jp()-this.g)&&t<.8*this.b?this.M=this.a.setTimeout(this.f,this.b-t):(this.M&&(this.a.clearTimeout(this.M),this.M=null),this.dispatchEvent("tick"),this.aa&&(vv(this),this.start())))},Up.start=function(){this.aa=!0,this.M||(this.M=this.a.setTimeout(this.f,this.b),this.g=Jp())},Up.G=function(){dv.S.G.call(this),vv(this),delete this.a};var gv,mv,bv,_v=(Mp(mv=Ev,bv=gv=td),mv.prototype=null===bv?Object.create(bv):(wv.prototype=bv.prototype,new wv),Ev.prototype.f=function(t){this.b=arguments,this.a?this.c=!0:function t(e){e.a=yv(function(){e.a=null,e.c&&(e.c=!1,t(e))},e.h);var n=e.b;e.b=null,e.g.apply(null,n)}(this)},Ev.prototype.G=function(){gv.prototype.G.call(this),this.a&&(qp.clearTimeout(this.a),this.a=null,this.c=!1,this.b=null)},Ev);function wv(){this.constructor=mv}function Ev(t,e,n){var r=gv.call(this)||this;return r.g=null!=n?t.bind(n):t,r.h=e,r.b=null,r.c=!1,r.a=null,r}function Iv(t){td.call(this),this.b=t,this.a={}}Zp(Iv,td);var Tv=[];function Sv(t,e,n,r){Array.isArray(n)||(n&&(Tv[0]=n.toString()),n=Tv);for(var i=0;i<n.length;i++){var o=zd(e,n[i],r||t.handleEvent,!1,t.b||t);if(!o)break;t.a[o.key]=o}}function Cv(t){fd(t.a,function(t,e){this.a.hasOwnProperty(e)&&Yd(t)},t),t.a={}}function Nv(){this.a=!0}function Av(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+function(t,e){if(!t.a)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(r.length<2)){var i=r[1];if(Array.isArray(i)&&!(i.length<1)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var s=1;s<i.length;s++)i[s]=""}}}return iv(n)}catch(t){return e}}(t,n)+(r?" "+r:"")})}Iv.prototype.G=function(){Iv.S.G.call(this),Cv(this)},Iv.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Nv.prototype.info=function(){};var kv=null;function Ov(){return kv=kv||new nv}function Rv(t){Ld.call(this,"serverreachability",t)}function Pv(t){var e=Ov();e.dispatchEvent(new Rv(e))}function Dv(t){Ld.call(this,"statevent",t)}function xv(t){var e=Ov();e.dispatchEvent(new Dv(e))}function Lv(t){Ld.call(this,"timingevent",t)}function Mv(t,e){if("function"!=Wp(t))throw Error("Fn must not be null and must be a function");return qp.setTimeout(function(){t()},e)}Zp(Rv,Ld),Zp(Dv,Ld),Zp(Lv,Ld);var Fv={NO_ERROR:0,Za:1,gb:2,fb:3,bb:4,eb:5,hb:6,Da:7,TIMEOUT:8,kb:9},Uv={ab:"complete",ob:"success",Ea:"error",Da:"abort",mb:"ready",nb:"readystatechange",TIMEOUT:"timeout",ib:"incrementaldata",lb:"progress",cb:"downloadprogress",pb:"uploadprogress"};function jv(){}function Vv(t){var e;return(e=t.a)||(e=t.a={}),e}function qv(){}jv.prototype.a=null;var Bv,Wv={OPEN:"a",$a:"b",Ea:"c",jb:"d"};function Gv(){Ld.call(this,"d")}function Hv(){Ld.call(this,"c")}function Kv(){}function zv(t,e,n,r){this.g=t,this.c=e,this.f=n,this.T=r||1,this.J=new Iv(this),this.P=Qv,t=Ed?125:void 0,this.R=new dv(t),this.B=null,this.b=!1,this.j=this.l=this.i=this.H=this.u=this.U=this.o=null,this.s=[],this.a=null,this.D=0,this.h=this.m=null,this.N=-1,this.A=!1,this.O=0,this.F=null,this.W=this.C=this.V=this.I=!1}Zp(Gv,Ld),Zp(Hv,Ld),Zp(Kv,jv),Bv=new Kv;var Qv=45e3,Yv={},Xv={};function $v(t,e,n){t.H=1,t.i=my(fy(e)),t.j=n,t.I=!0,Jv(t,null)}function Jv(t,e){t.u=Jp(),ty(t),t.l=fy(t.i);var s,a,u,c,h,l,n=t.l,r=t.T;Array.isArray(r)||(r=[String(r)]),Ry(n.b,"t",r),t.D=0,t.a=Tg(t.g,t.g.C?e:null),0<t.O&&(t.F=new _v(Xp(t.Ca,t,t.a),t.O)),Sv(t.J,t.a,"readystatechange",t.Wa),e=t.B?pd(t.B):{},t.j?(t.m||(t.m="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.a.ba(t.l,t.m,t.j,e)):(t.m="GET",t.a.ba(t.l,t.m,null,e)),Pv(1),s=t.c,a=t.m,u=t.l,c=t.f,h=t.T,l=t.j,s.info(function(){if(s.a)if(l)for(var t="",e=l.split("&"),n=0;n<e.length;n++){var r,i,o=e[n].split("=");1<o.length&&(r=o[0],o=o[1],t=2<=(i=r.split("_")).length&&"type"==i[1]?t+(r+"=")+o+"&":t+(r+"=redacted&"))}else t=null;else t=l;return"XMLHTTP REQ ("+c+") [attempt "+h+"]: "+a+"\n"+u+"\n"+t})}function Zv(t,e,n){for(var r,i,o,s,a=!0;!t.A&&t.D<n.length;){var u=(i=n,s=o=void 0,o=(r=t).D,-1==(s=i.indexOf("\n",o))?Xv:(o=Number(i.substring(o,s)),isNaN(o)?Yv:(s+=1)+o>i.length?Xv:(i=i.substr(s,o),r.D=s+o,i)));if(u==Xv){4==e&&(t.h=4,xv(14),a=!1),Av(t.c,t.f,null,"[Incomplete Response]");break}if(u==Yv){t.h=4,xv(15),Av(t.c,t.f,n,"[Invalid Chunk]"),a=!1;break}Av(t.c,t.f,u,null),oy(t,u)}4==e&&0==n.length&&(t.h=1,xv(16),a=!1),t.b=t.b&&a,a?0<n.length&&!t.W&&(t.W=!0,(e=t.g).a==t&&e.V&&!e.F&&(e.c.info("Great, no buffering proxy detected. Bytes received: "+n.length),yg(e),e.F=!0)):(Av(t.c,t.f,n,"[Invalid Chunked Response]"),iy(t),ry(t))}function ty(t){t.U=Jp()+t.P,ey(t,t.P)}function ey(t,e){if(null!=t.o)throw Error("WatchDog timer not null");t.o=Mv(Xp(t.Ua,t),e)}function ny(t){t.o&&(qp.clearTimeout(t.o),t.o=null)}function ry(t){0==t.g.v||t.A||bg(t.g,t)}function iy(t){ny(t);var e=t.F;e&&"function"==typeof e.ja&&e.ja(),t.F=null,vv(t.R),Cv(t.J),t.a&&(e=t.a,t.a=null,e.abort(),e.ja())}function oy(t,e){try{var n,r,i,o,s,a,u,c,h,l,f,p=t.g;if(0!=p.v&&(p.a==t||Uy(p.b,t)))if(p.I=t.N,!t.C&&Uy(p.b,t)&&3==p.v){try{var d=p.ka.a.parse(e)}catch(t){d=null}if(Array.isArray(d)&&3==d.length){var v=d;if(0==v[0]){t:if(!p.j){if(p.a){if(!(p.a.u+3e3<t.u))break t;mg(p),ag(p)}vg(p),xv(18)}}else p.oa=v[1],0<p.oa-p.P&&v[2]<37500&&p.H&&0==p.o&&!p.m&&(p.m=Mv(Xp(p.Ra,p),6e3));if(Fy(p.b)<=1&&p.ea){try{p.ea()}catch(t){}p.ea=void 0}}else wg(p,11)}else if(!t.C&&p.a!=t||mg(p),!od(e))for(e=d=p.ka.a.parse(e),d=0;d<e.length;d++){v=e[d],p.P=v[0],v=v[1],2==p.v?"c"==v[0]?(p.J=v[1],p.ga=v[2],null!=(n=v[3])&&(p.ha=n,p.c.info("VER="+p.ha)),null!=(r=v[4])&&(p.pa=r,p.c.info("SVER="+p.pa)),null!=(i=v[5])&&"number"==typeof i&&0<i&&(o=1.5*i,p.D=o,p.c.info("backChannelRequestTimeoutMs_="+o)),o=p,(s=t.a)&&(!(a=s.a?s.a.getResponseHeader("X-Client-Wire-Protocol"):null)||!(u=o.b).a&&(ud(a,"spdy")||ud(a,"quic")||ud(a,"h2"))&&(u.f=u.g,u.a=new Set,u.b&&(jy(u,u.b),u.b=null)),!o.A||(c=s.a?s.a.getResponseHeader("X-HTTP-Session-Id"):null)&&(o.na=c,gy(o.B,o.A,c))),p.v=3,p.f&&p.f.ta(),p.V&&(p.N=Jp()-t.u,p.c.info("Handshake RTT: "+p.N+"ms")),h=t,(o=p).la=Ig(o,o.C?o.ga:null,o.fa),h.C?(Vy(o.b,h),l=h,(f=o.D)&&l.setTimeout(f),l.o&&(ny(l),ty(l)),o.a=h):dg(o),0<p.g.length&&hg(p)):"stop"!=v[0]&&"close"!=v[0]||wg(p,7):3==p.v&&("stop"==v[0]||"close"==v[0]?"stop"==v[0]?wg(p,7):sg(p):"noop"!=v[0]&&p.f&&p.f.sa(v),p.o=0)}Pv(4)}catch(t){}}function sy(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(Gp(t)||"string"==typeof t)nd(t,e,void 0);else{if(t.L&&"function"==typeof t.L)var n=t.L();else if(t.K&&"function"==typeof t.K)n=void 0;else if(Gp(t)||"string"==typeof t){n=[];for(var r=t.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,t)n[r++]=i;i=(r=function(t){if(t.K&&"function"==typeof t.K)return t.K();if("string"==typeof t)return t.split("");if(Gp(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t)).length;for(var o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}}function ay(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof ay)for(n=t.L(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function uy(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];cy(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){for(var i={},n=e=0;e<t.a.length;)cy(i,r=t.a[e])||(i[t.a[n++]=r]=1),e++;t.a.length=n}}function cy(t,e){return Object.prototype.hasOwnProperty.call(t,e)}(Up=zv.prototype).setTimeout=function(t){this.P=t},Up.Wa=function(t){t=t.target;var e=this.F;e&&3==ng(t)?e.f():this.Ca(t)},Up.Ca=function(t){try{if(t==this.a)t:{var e=ng(this.a),n=this.a.ua(),r=this.a.X();if(!(e<3||3==e&&!Ed&&!this.a.$())){this.A||4!=e||7==n||Pv(8==n||r<=0?3:2),ny(this);var i=this.a.X();this.N=i;var o=this.a.$();if(this.b=200==i,c=this.c,h=this.m,l=this.l,f=this.f,p=this.T,d=e,v=i,c.info(function(){return"XMLHTTP RESP ("+f+") [ attempt "+p+"]: "+h+"\n"+l+"\n"+d+" "+v}),this.b){if(this.V&&!this.C){e:{if(this.a){var s,a=this.a;if((s=a.a?a.a.getResponseHeader("X-HTTP-Initial-Response"):null)&&!od(s)){var u=s;break e}}u=null}if(!u){this.b=!1,this.h=3,xv(12),iy(this),ry(this);break t}Av(this.c,this.f,u,"Initial handshake response via X-HTTP-Initial-Response"),this.C=!0,oy(this,u)}this.I?(Zv(this,e,o),Ed&&this.b&&3==e&&(Sv(this.J,this.R,"tick",this.Va),this.R.start())):(Av(this.c,this.f,o,null),oy(this,o)),4==e&&iy(this),this.b&&!this.A&&(4==e?bg(this.g,this):(this.b=!1,ty(this)))}else 400==i&&0<o.indexOf("Unknown SID")?(this.h=3,xv(12)):(this.h=0,xv(13)),iy(this),ry(this)}}}catch(t){}var c,h,l,f,p,d,v},Up.Va=function(){var t,e;this.a&&(t=ng(this.a),e=this.a.$(),this.D<e.length&&(ny(this),Zv(this,t,e),this.b&&4!=t&&ty(this)))},Up.cancel=function(){this.A=!0,iy(this)},Up.Ua=function(){this.o=null;var t,e,n=Jp();0<=n-this.U?(t=this.c,e=this.l,t.info(function(){return"TIMEOUT: "+e}),2!=this.H&&(Pv(3),xv(17)),iy(this),this.h=2,ry(this)):ey(this,this.U-n)},(Up=ay.prototype).K=function(){uy(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},Up.L=function(){return uy(this),this.a.concat()},Up.get=function(t,e){return cy(this.b,t)?this.b[t]:e},Up.set=function(t,e){cy(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},Up.forEach=function(t,e){for(var n=this.L(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var hy=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function ly(t,e){var n;this.c=this.j=this.f="",this.h=null,this.i=this.g="",this.a=!1,t instanceof ly?(this.a=void 0!==e?e:t.a,py(this,t.f),this.j=t.j,dy(this,t.c),vy(this,t.h),this.g=t.g,e=t.b,(n=new Ny).c=e.c,e.a&&(n.a=new ay(e.a),n.b=e.b),yy(this,n),this.i=t.i):t&&(n=String(t).match(hy))?(this.a=!!e,py(this,n[1]||"",!0),this.j=by(n[2]||""),dy(this,n[3]||"",!0),vy(this,n[4]),this.g=by(n[5]||"",!0),yy(this,n[6]||"",!0),this.i=by(n[7]||"")):(this.a=!!e,this.b=new Ny(null,this.a))}function fy(t){return new ly(t)}function py(t,e,n){t.f=n?by(e,!0):e,t.f&&(t.f=t.f.replace(/:$/,""))}function dy(t,e,n){t.c=n?by(e,!0):e}function vy(t,e){if(e){if(e=Number(e),isNaN(e)||e<0)throw Error("Bad port number "+e);t.h=e}else t.h=null}function yy(t,e,n){var r,i;e instanceof Ny?(t.b=e,r=t.b,(i=t.a)&&!r.f&&(Ay(r),r.c=null,r.a.forEach(function(t,e){var n=e.toLowerCase();e!=n&&(ky(this,e),Ry(this,n,t))},r)),r.f=i):(n||(e=_y(e,Sy)),t.b=new Ny(e,t.a))}function gy(t,e,n){t.b.set(e,n)}function my(t){return gy(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Jp()).toString(36)),t}function by(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function _y(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,wy),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function wy(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}ly.prototype.toString=function(){var t=[],e=this.f;e&&t.push(_y(e,Ey,!0),":");var n=this.c;return!n&&"file"!=e||(t.push("//"),(e=this.j)&&t.push(_y(e,Ey,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.h)&&t.push(":",String(n))),(n=this.g)&&(this.c&&"/"!=n.charAt(0)&&t.push("/"),t.push(_y(n,"/"==n.charAt(0)?Ty:Iy,!0))),(n=this.b.toString())&&t.push("?",n),(n=this.i)&&t.push("#",_y(n,Cy)),t.join("")};var Ey=/[#\/\?@]/g,Iy=/[#\?:]/g,Ty=/[#\?]/g,Sy=/[#\?@]/g,Cy=/#/g;function Ny(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function Ay(n){n.a||(n.a=new ay,n.b=0,n.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r,i=t[n].indexOf("="),o=null;0<=i?(r=t[n].substring(0,i),o=t[n].substring(i+1)):r=t[n],e(r,o?decodeURIComponent(o.replace(/\+/g," ")):"")}}}(n.c,function(t,e){n.add(decodeURIComponent(t.replace(/\+/g," ")),e)}))}function ky(t,e){Ay(t),e=Py(t,e),cy(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,cy((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&uy(t)))}function Oy(t,e){return Ay(t),e=Py(t,e),cy(t.a.b,e)}function Ry(t,e,n){ky(t,e),0<n.length&&(t.c=null,t.a.set(Py(t,e),id(n)),t.b+=n.length)}function Py(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}function Dy(t,e){this.b=t,this.a=e}function xy(t){this.g=t||Ly,t=qp.PerformanceNavigationTiming?0<(t=qp.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):!!(qp.ia&&qp.ia.ya&&qp.ia.ya()&&qp.ia.ya().qb),this.f=t?this.g:1,this.a=null,1<this.f&&(this.a=new Set),this.b=null,this.c=[]}(Up=Ny.prototype).add=function(t,e){Ay(this),this.c=null,t=Py(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},Up.forEach=function(n,r){Ay(this),this.a.forEach(function(t,e){nd(t,function(t){n.call(r,t,e,this)},this)},this)},Up.L=function(){Ay(this);for(var t=this.a.K(),e=this.a.L(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},Up.K=function(t){Ay(this);var e=[];if("string"==typeof t)Oy(this,t)&&(e=rd(e,this.a.get(Py(this,t))));else{t=this.a.K();for(var n=0;n<t.length;n++)e=rd(e,t[n])}return e},Up.set=function(t,e){return Ay(this),this.c=null,Oy(this,t=Py(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},Up.get=function(t,e){return t&&0<(t=this.K(t)).length?String(t[0]):e},Up.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.L(),n=0;n<e.length;n++)for(var r=e[n],i=encodeURIComponent(String(r)),r=this.K(r),o=0;o<r.length;o++){var s=i;""!==r[o]&&(s+="="+encodeURIComponent(String(r[o]))),t.push(s)}return this.c=t.join("&")};var Ly=10;function My(t){return t.b||t.a&&t.a.size>=t.f}function Fy(t){return t.b?1:t.a?t.a.size:0}function Uy(t,e){return t.b?t.b==e:t.a&&t.a.has(e)}function jy(t,e){t.a?t.a.add(e):t.b=e}function Vy(t,e){t.b&&t.b==e?t.b=null:t.a&&t.a.has(e)&&t.a.delete(e)}function qy(t){var e,n;if(null!=t.b)return t.c.concat(t.b.s);if(null==t.a||0===t.a.size)return id(t.c);var r=t.c;try{for(var i=Fp(t.a.values()),o=i.next();!o.done;o=i.next())var s=o.value,r=r.concat(s.s)}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}function By(){}function Wy(){this.a=new By}function Gy(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(t){}}xy.prototype.cancel=function(){var e,t;if(this.c=qy(this),this.b)this.b.cancel(),this.b=null;else if(this.a&&0!==this.a.size){try{for(var n=Fp(this.a.values()),r=n.next();!r.done;r=n.next()){r.value.cancel()}}catch(t){e={error:t}}finally{try{r&&!r.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}this.a.clear()}},By.prototype.stringify=function(t){return qp.JSON.stringify(t,void 0)},By.prototype.parse=function(t){return qp.JSON.parse(t,void 0)};var Hy=qp.JSON.parse;function Ky(t){nv.call(this),this.headers=new ay,this.H=t||null,this.b=!1,this.s=this.a=null,this.B="",this.h=0,this.f="",this.g=this.A=this.l=this.u=!1,this.o=0,this.m=null,this.I=zy,this.D=this.F=!1}Zp(Ky,nv);var zy="",Qy=/^https?$/i,Yy=["POST","PUT"];function Xy(t){return"content-type"==t.toLowerCase()}function $y(t,e){t.b=!1,t.a&&(t.g=!0,t.a.abort(),t.g=!1),t.f=e,t.h=5,Jy(t),tg(t)}function Jy(t){t.u||(t.u=!0,t.dispatchEvent("complete"),t.dispatchEvent("error"))}function Zy(t){if(t.b&&void 0!==Vp&&(!t.s[1]||4!=ng(t)||2!=t.X()))if(t.l&&4==ng(t))yv(t.za,0,t);else if(t.dispatchEvent("readystatechange"),4==ng(t)){t.b=!1;try{var e,n,r,i,o=t.X();t:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var s=!0;break t;default:s=!1}if((e=s)||((n=0===o)&&(!(i=String(t.B).match(hy)[1]||null)&&qp.self&&qp.self.location&&(i=(r=qp.self.location.protocol).substr(0,r.length-1)),n=!Qy.test(i?i.toLowerCase():"")),e=n),e)t.dispatchEvent("complete"),t.dispatchEvent("success");else{t.h=6;try{var a=2<ng(t)?t.a.statusText:""}catch(t){a=""}t.f=a+" ["+t.X()+"]",Jy(t)}}finally{tg(t)}}}function tg(t,e){if(t.a){eg(t);var n=t.a,r=t.s[0]?Bp:null;t.a=null,t.s=null,e||t.dispatchEvent("ready");try{n.onreadystatechange=r}catch(t){}}}function eg(t){t.a&&t.D&&(t.a.ontimeout=null),t.m&&(qp.clearTimeout(t.m),t.m=null)}function ng(t){return t.a?t.a.readyState:0}function rg(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}var i;r||(i="",fd(n,function(t,e){i+=e,i+=":",i+=t,i+="\r\n"}),n=i,"string"==typeof t?null!=n&&encodeURIComponent(String(n)):gy(t,e,n))}function ig(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function og(t){this.pa=0,this.g=[],this.c=new Nv,this.ga=this.la=this.B=this.fa=this.a=this.na=this.A=this.W=this.i=this.O=this.l=null,this.La=this.R=0,this.Ia=ig("failFast",!1,t),this.H=this.m=this.j=this.h=this.f=null,this.T=!0,this.I=this.oa=this.P=-1,this.U=this.o=this.u=0,this.Fa=ig("baseRetryDelayMs",5e3,t),this.Ma=ig("retryDelaySeedMs",1e4,t),this.Ja=ig("forwardChannelMaxRetries",2,t),this.ma=ig("forwardChannelRequestTimeoutMs",2e4,t),this.Ka=t&&t.g||void 0,this.D=void 0,this.C=t&&t.supportsCrossDomainXhr||!1,this.J="",this.b=new xy(t&&t.concurrentRequestLimit),this.ka=new Wy,this.da=t&&t.fastHandshake||!1,this.Ga=t&&t.b||!1,t&&t.f&&(this.c.a=!1),t&&t.forceLongPolling&&(this.T=!1),this.V=!this.da&&this.T&&t&&t.c||!1,this.ea=void 0,this.N=0,this.F=!1,this.s=null}function sg(t){var e,n;ug(t),3==t.v&&(e=t.R++,gy(n=fy(t.B),"SID",t.J),gy(n,"RID",e),gy(n,"TYPE","terminate"),fg(t,n),(e=new zv(t,t.c,e,void 0)).H=2,e.i=my(fy(n)),n=!1,qp.navigator&&qp.navigator.sendBeacon&&(n=qp.navigator.sendBeacon(e.i.toString(),"")),!n&&qp.Image&&((new Image).src=e.i,n=!0),n||(e.a=Tg(e.g,null),e.a.ba(e.i)),e.u=Jp(),ty(e)),Eg(t)}function ag(t){t.a&&(yg(t),t.a.cancel(),t.a=null)}function ug(t){ag(t),t.j&&(qp.clearTimeout(t.j),t.j=null),mg(t),t.b.cancel(),t.h&&("number"==typeof t.h&&qp.clearTimeout(t.h),t.h=null)}function cg(t,e){t.g.push(new Dy(t.La++,e)),3==t.v&&hg(t)}function hg(t){My(t.b)||t.h||(t.h=!0,hv(t.Ba,t),t.u=0)}function lg(t,e){var n=e?e.f:t.R++,r=fy(t.B);gy(r,"SID",t.J),gy(r,"RID",n),gy(r,"AID",t.P),fg(t,r),t.i&&t.l&&rg(r,t.i,t.l),n=new zv(t,t.c,n,t.u+1),null===t.i&&(n.B=t.l),e&&(t.g=e.s.concat(t.g)),e=pg(t,n,1e3),n.setTimeout(Math.round(.5*t.ma)+Math.round(.5*t.ma*Math.random())),jy(t.b,n),$v(n,r,e)}function fg(t,n){t.f&&sy({},function(t,e){gy(n,e,t)})}function pg(t,e,n){n=Math.min(t.g.length,n);var r=t.f?Xp(t.f.Ha,t.f,t):null;t:for(var i=t.g,o=-1;;){var s=["count="+n];-1==o?0<n?(o=i[0].b,s.push("ofs="+o)):o=0:s.push("ofs="+o);for(var a=!0,u=0;u<n;u++){var c=i[u].b,h=i[u].a;if((c-=o)<0)o=Math.max(0,i[u].b-100),a=!1;else try{!function(t,r,e){var i=e||"";try{sy(t,function(t,e){var n=t;Hp(t)&&(n=iv(t)),r.push(i+e+"="+encodeURIComponent(n))})}catch(t){throw r.push(i+"type="+encodeURIComponent("_badmap")),t}}(h,s,"req"+c+"_")}catch(t){r&&r(h)}}if(a){r=s.join("&");break t}}return t=t.g.splice(0,n),e.s=t,r}function dg(t){t.a||t.j||(t.U=1,hv(t.Aa,t),t.o=0)}function vg(t){return!(t.a||t.j||3<=t.o)&&(t.U++,t.j=Mv(Xp(t.Aa,t),_g(t,t.o)),t.o++,1)}function yg(t){null!=t.s&&(qp.clearTimeout(t.s),t.s=null)}function gg(t){t.a=new zv(t,t.c,"rpc",t.U),null===t.i&&(t.a.B=t.l),t.a.O=0;var e=fy(t.la);gy(e,"RID","rpc"),gy(e,"SID",t.J),gy(e,"CI",t.H?"0":"1"),gy(e,"AID",t.P),fg(t,e),gy(e,"TYPE","xmlhttp"),t.i&&t.l&&rg(e,t.i,t.l),t.D&&t.a.setTimeout(t.D);var n=t.a;t=t.ga,n.H=1,n.i=my(fy(e)),n.j=null,n.I=!0,Jv(n,t)}function mg(t){null!=t.m&&(qp.clearTimeout(t.m),t.m=null)}function bg(t,e){var n,r=null;if(t.a==e){mg(t),yg(t),t.a=null;var i=2}else{if(!Uy(t.b,e))return;r=e.s,Vy(t.b,e),i=1}if(t.I=e.N,0!=t.v)if(e.b){1==i?(r=e.j?e.j.length:0,e=Jp()-e.u,n=t.u,(i=Ov()).dispatchEvent(new Lv(i)),hg(t)):dg(t)}else if(3==(n=e.h)||0==n&&0<t.I||!(1==i&&function(t,e){if(!(Fy(t.b)>=t.b.f-(t.h?1:0))){if(t.h)return t.g=e.s.concat(t.g),1;if(!(1==t.v||2==t.v||t.u>=(t.Ia?0:t.Ja)))return t.h=Mv(Xp(t.Ba,t,e),_g(t,t.u)),t.u++,1}}(t,e)||2==i&&vg(t)))switch(r&&0<r.length&&(e=t.b,e.c=e.c.concat(r)),n){case 1:wg(t,5);break;case 4:wg(t,10);break;case 3:wg(t,6);break;default:wg(t,2)}}function _g(t,e){var n=t.Fa+Math.floor(Math.random()*t.Ma);return t.f||(n*=2),n*e}function wg(t,e){var n,r,i,o,s,a;t.c.info("Error code "+e),2==e?(n=null,t.f&&(n=null),r=Xp(t.Xa,t),n||(n=new ly("//www.google.com/images/cleardot.gif"),qp.location&&"http"==qp.location.protocol||py(n,"https"),my(n)),i=n.toString(),o=r,a=new Nv,qp.Image?((s=new Image).onload=$p(Gy,a,s,"TestLoadImage: loaded",!0,o),s.onerror=$p(Gy,a,s,"TestLoadImage: error",!1,o),s.onabort=$p(Gy,a,s,"TestLoadImage: abort",!1,o),s.ontimeout=$p(Gy,a,s,"TestLoadImage: timeout",!1,o),qp.setTimeout(function(){s.ontimeout&&s.ontimeout()},1e4),s.src=i):o(!1)):xv(2),t.v=0,t.f&&t.f.ra(e),Eg(t),ug(t)}function Eg(t){t.v=0,t.I=-1,t.f&&(0==qy(t.b).length&&0==t.g.length||(t.b.c.length=0,id(t.g),t.g.length=0),t.f.qa())}function Ig(t,e,n){var r,i,o,s,a,u,c,h=(r=n)instanceof ly?fy(r):new ly(r,void 0);return""!=h.c?(e&&dy(h,e+"."+h.c),vy(h,h.h)):(i=qp.location,o=i.protocol,s=e?e+"."+i.hostname:i.hostname,a=+i.port,u=n,c=new ly(null,void 0),o&&py(c,o),s&&dy(c,s),a&&vy(c,a),u&&(c.g=u),h=c),t.W&&fd(t.W,function(t,e){gy(h,e,t)}),e=t.A,n=t.na,e&&n&&gy(h,e,n),gy(h,"VER",t.ha),fg(t,h),h}function Tg(t,e){if(e&&!t.C)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Ky(t.Ka)).F=t.C,e}function Sg(){}function Cg(){if(_d&&!(10<=Number(Rd)))throw Error("Environmental error: no available transport.")}function Ng(t,e){nv.call(this),this.a=new og(e),this.l=t,this.b=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.a.l=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.a&&(t?t["X-WebChannel-Client-Profile"]=e.a:t={"X-WebChannel-Client-Profile":e.a}),this.a.O=t,(t=e&&e.httpHeadersOverwriteParam)&&!od(t)&&(this.a.i=t),this.h=e&&e.supportsCrossDomainXhr||!1,this.g=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!od(e)&&(this.a.A=e,null!==(t=this.b)&&e in t&&(e in(t=this.b)&&delete t[e])),this.f=new Og(this)}function Ag(t){Gv.call(this);var e=t.__sm__;if(e){t:{for(var n in e){t=n;break t}t=void 0}(this.c=t)?(t=this.c,this.data=null!==e&&t in e?e[t]:void 0):this.data=e}else this.data=t}function kg(){Hv.call(this),this.status=1}function Og(t){this.a=t}(Up=Ky.prototype).ba=function(t,e,n,r){if(this.a)throw Error("[goog.net.XhrIo] Object is active with another request="+this.B+"; newUri="+t);e=e?e.toUpperCase():"GET",this.B=t,this.f="",this.h=0,this.u=!1,this.b=!0,this.a=new XMLHttpRequest,this.s=this.H?Vv(this.H):Vv(Bv),this.a.onreadystatechange=Xp(this.za,this);try{this.A=!0,this.a.open(e,String(t),!0),this.A=!1}catch(t){return void $y(this,t)}t=n||"";var i,o=new ay(this.headers);r&&sy(r,function(t,e){o.set(e,t)}),r=function(t){t:{for(var e=Xy,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return e<0?null:"string"==typeof t?t.charAt(e):t[e]}(o.L()),n=qp.FormData&&t instanceof qp.FormData,0<=ed(Yy,e)&&!r&&!n&&o.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),o.forEach(function(t,e){this.a.setRequestHeader(e,t)},this),this.I&&(this.a.responseType=this.I),"withCredentials"in this.a&&this.a.withCredentials!==this.F&&(this.a.withCredentials=this.F);try{eg(this),0<this.o&&((this.D=(i=this.a,_d&&Od(9)&&"number"==typeof i.timeout&&void 0!==i.ontimeout))?(this.a.timeout=this.o,this.a.ontimeout=Xp(this.xa,this)):this.m=yv(this.xa,this.o,this)),this.l=!0,this.a.send(t),this.l=!1}catch(t){$y(this,t)}},Up.xa=function(){void 0!==Vp&&this.a&&(this.f="Timed out after "+this.o+"ms, aborting",this.h=8,this.dispatchEvent("timeout"),this.abort(8))},Up.abort=function(t){this.a&&this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1,this.h=t||7,this.dispatchEvent("complete"),this.dispatchEvent("abort"),tg(this))},Up.G=function(){this.a&&(this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1),tg(this,!0)),Ky.S.G.call(this)},Up.za=function(){this.j||(this.A||this.l||this.g?Zy(this):this.Ta())},Up.Ta=function(){Zy(this)},Up.X=function(){try{return 2<ng(this)?this.a.status:-1}catch(t){return-1}},Up.$=function(){try{return this.a?this.a.responseText:""}catch(t){return""}},Up.Na=function(t){if(this.a){var e=this.a.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),Hy(e)}},Up.ua=function(){return this.h},Up.Qa=function(){return"string"==typeof this.f?this.f:String(this.f)},(Up=og.prototype).ha=8,Up.v=1,Up.Ba=function(t){if(this.h)if(this.h=null,1==this.v){if(!t){this.R=Math.floor(1e5*Math.random()),t=this.R++;var e,n=new zv(this,this.c,t,void 0),r=this.l;if(this.O&&(r?vd(r=pd(r),this.O):r=this.O),null===this.i&&(n.B=r),this.da)t:{for(var i=e=0;i<this.g.length;i++){var o=this.g[i];if("__data__"in o.a&&"string"==typeof(o=o.a.__data__)?o=o.length:o=void 0,void 0===o)break;if(4096<(e+=o)){e=i;break t}if(4096===e||i===this.g.length-1){e=i+1;break t}}e=1e3}else e=1e3;e=pg(this,n,e),gy(i=fy(this.B),"RID",t),gy(i,"CVER",22),this.A&&gy(i,"X-HTTP-Session-Id",this.A),fg(this,i),this.i&&r&&rg(i,this.i,r),jy(this.b,n),this.Ga&&gy(i,"TYPE","init"),this.da?(gy(i,"$req",e),gy(i,"SID","null"),n.V=!0,$v(n,i,null)):$v(n,i,e),this.v=2}}else 3==this.v&&(t?lg(this,t):0==this.g.length||My(this.b)||lg(this))},Up.Aa=function(){var t;this.j=null,gg(this),this.V&&!(this.F||null==this.a||this.N<=0)&&(t=2*this.N,this.c.info("BP detection timer enabled: "+t),this.s=Mv(Xp(this.Sa,this),t))},Up.Sa=function(){this.s&&(this.s=null,this.c.info("BP detection timeout reached."),this.c.info("Buffering proxy detected and switch to long-polling!"),this.H=!1,this.F=!0,ag(this),gg(this))},Up.Ra=function(){null!=this.m&&(this.m=null,ag(this),vg(this),xv(19))},Up.Xa=function(t){t?(this.c.info("Successfully pinged google.com"),xv(2)):(this.c.info("Failed to ping google.com"),xv(1))},(Up=Sg.prototype).ta=function(){},Up.sa=function(){},Up.ra=function(){},Up.qa=function(){},Up.Ha=function(){},Cg.prototype.a=function(t,e){return new Ng(t,e)},Zp(Ng,nv),(Up=Ng.prototype).addEventListener=function(t,e,n,r){Ng.S.addEventListener.call(this,t,e,n,r)},Up.removeEventListener=function(t,e,n,r){Ng.S.removeEventListener.call(this,t,e,n,r)},Up.Oa=function(){this.a.f=this.f,this.h&&(this.a.C=!0);var t=this.a,e=this.l,n=this.b||void 0;xv(0),t.fa=e,t.W=n||{},t.H=t.T,t.B=Ig(t,null,t.fa),hg(t)},Up.close=function(){sg(this.a)},Up.Pa=function(t){var e;"string"==typeof t?((e={}).__data__=t,cg(this.a,e)):this.g?((e={}).__data__=iv(t),cg(this.a,e)):cg(this.a,t)},Up.G=function(){this.a.f=null,delete this.f,sg(this.a),delete this.a,Ng.S.G.call(this)},Zp(Ag,Gv),Zp(kg,Hv),Zp(Og,Sg),Og.prototype.ta=function(){this.a.dispatchEvent("a")},Og.prototype.sa=function(t){this.a.dispatchEvent(new Ag(t))},Og.prototype.ra=function(t){this.a.dispatchEvent(new kg)},Og.prototype.qa=function(){this.a.dispatchEvent("b")},Cg.prototype.createWebChannel=Cg.prototype.a,Ng.prototype.send=Ng.prototype.Pa,Ng.prototype.open=Ng.prototype.Oa,Fv.NO_ERROR=0,Fv.TIMEOUT=8,Fv.HTTP_ERROR=6,Uv.COMPLETE="complete",(qv.EventType=Wv).OPEN="a",Wv.CLOSE="b",Wv.ERROR="c",Wv.MESSAGE="d",nv.prototype.listen=nv.prototype.va,Ky.prototype.listenOnce=Ky.prototype.wa,Ky.prototype.getLastError=Ky.prototype.Qa,Ky.prototype.getLastErrorCode=Ky.prototype.ua,Ky.prototype.getStatus=Ky.prototype.X,Ky.prototype.getResponseJson=Ky.prototype.Na,Ky.prototype.getResponseText=Ky.prototype.$,Ky.prototype.send=Ky.prototype.ba;var Rg,Pg={createWebChannelTransport:function(){return new Cg},ErrorCode:Fv,EventType:Uv,WebChannel:qv,XhrIo:Ky},Dg=Pg.createWebChannelTransport,xg=Pg.ErrorCode,Lg=Pg.EventType,Mg=Pg.WebChannel,Fg=Pg.XhrIo,Ug={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},jg=(Gs(qg,Rg=Error),qg),Vg=new cu("@firebase/firestore");function qg(t,e){var n=this;return(n=Rg.call(this,e)||this).code=t,n.message=e,n.name="FirebaseError",n.toString=function(){return n.name+": [code="+n.code+"]: "+n.message},n}function Bg(){return Vg.logLevel}function Wg(t){for(var e,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];Vg.logLevel<=eu.DEBUG&&(e=n.map(Kg),Vg.debug.apply(Vg,$s(["Firestore (7.21.1): "+t],e)))}function Gg(t){for(var e,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];Vg.logLevel<=eu.ERROR&&(e=n.map(Kg),Vg.error.apply(Vg,$s(["Firestore (7.21.1): "+t],e)))}function Hg(t){for(var e,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];Vg.logLevel<=eu.WARN&&(e=n.map(Kg),Vg.warn.apply(Vg,$s(["Firestore (7.21.1): "+t],e)))}function Kg(e){if("string"==typeof e)return e;try{return JSON.stringify(e)}catch(t){return e}}function zg(t){void 0===t&&(t="Unexpected state");var e="FIRESTORE (7.21.1) INTERNAL ASSERTION FAILED: "+t;throw Gg(e),new Error(e)}function Qg(t){t||zg()}function Yg(t){var e,n=0;for(e in t)Object.prototype.hasOwnProperty.call(t,e)&&n++;return n}function Xg(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function $g(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var Jg,Zg,tm=(Object.defineProperty(um.prototype,"length",{get:function(){return this.t},enumerable:!1,configurable:!0}),um.prototype.isEqual=function(t){return 0===um.i(this,t)},um.prototype.child=function(t){var e=this.segments.slice(this.offset,this.limit());return t instanceof um?t.forEach(function(t){e.push(t)}):e.push(t),this.o(e)},um.prototype.limit=function(){return this.offset+this.length},um.prototype.u=function(t){return t=void 0===t?1:t,this.o(this.segments,this.offset+t,this.length-t)},um.prototype.h=function(){return this.o(this.segments,this.offset,this.length-1)},um.prototype.l=function(){return this.segments[this.offset]},um.prototype._=function(){return this.get(this.length-1)},um.prototype.get=function(t){return this.segments[this.offset+t]},um.prototype.m=function(){return 0===this.length},um.prototype.T=function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},um.prototype.I=function(t){if(this.length+1!==t.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},um.prototype.forEach=function(t){for(var e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])},um.prototype.A=function(){return this.segments.slice(this.offset,this.limit())},um.i=function(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){var i=t.get(r),o=e.get(r);if(i<o)return-1;if(o<i)return 1}return t.length<e.length?-1:t.length>e.length?1:0},um),em=(Gs(am,Zg=tm),am.prototype.o=function(t,e,n){return new am(t,e,n)},am.prototype.R=function(){return this.A().join("/")},am.prototype.toString=function(){return this.R()},am.P=function(t){if(0<=t.indexOf("//"))throw new jg(Ug.INVALID_ARGUMENT,"Invalid path ("+t+"). Paths must not contain // in them.");return new am(t.split("/").filter(function(t){return 0<t.length}))},am.g=function(){return new am([])},am),nm=/^[_a-zA-Z][_a-zA-Z0-9]*$/,rm=(Gs(sm,Jg=tm),sm.prototype.o=function(t,e,n){return new sm(t,e,n)},sm.V=function(t){return nm.test(t)},sm.prototype.R=function(){return this.A().map(function(t){return t=t.replace("\\","\\\\").replace("`","\\`"),sm.V(t)||(t="`"+t+"`"),t}).join(".")},sm.prototype.toString=function(){return this.R()},sm.prototype.p=function(){return 1===this.length&&"__name__"===this.get(0)},sm.v=function(){return new sm(["__name__"])},sm.S=function(t){for(var e=[],n="",r=0,i=function(){if(0===n.length)throw new jg(Ug.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");e.push(n),n=""},o=!1;r<t.length;){var s=t[r];if("\\"===s){if(r+1===t.length)throw new jg(Ug.INVALID_ARGUMENT,"Path has trailing escape character: "+t);var a=t[r+1];if("\\"!==a&&"."!==a&&"`"!==a)throw new jg(Ug.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);n+=a,r+=2}else"`"===s?o=!o:"."!==s||o?n+=s:i(),r++}if(i(),o)throw new jg(Ug.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new sm(e)},sm.g=function(){return new sm([])},sm),im=(om.D=function(t){return new om(em.P(t))},om.C=function(t){return new om(em.P(t).u(5))},om.prototype.N=function(t){return 2<=this.path.length&&this.path.get(this.path.length-2)===t},om.prototype.isEqual=function(t){return null!==t&&0===em.i(this.path,t.path)},om.prototype.toString=function(){return this.path.toString()},om.i=function(t,e){return em.i(t.path,e.path)},om.F=function(t){return t.length%2==0},om.$=function(t){return new om(new em(t.slice()))},om);function om(t){this.path=t}function sm(){return null!==Jg&&Jg.apply(this,arguments)||this}function am(){return null!==Zg&&Zg.apply(this,arguments)||this}function um(t,e,n){void 0===e?e=0:e>t.length&&zg(),void 0===n?n=t.length-e:n>t.length-e&&zg(),this.segments=t,this.offset=e,this.t=n}function cm(t,e){if(0!==e.length)throw new jg(Ug.INVALID_ARGUMENT,"Function "+t+"() does not support arguments, but was called with "+Nm(e.length,"argument")+".")}function hm(t,e,n){if(e.length!==n)throw new jg(Ug.INVALID_ARGUMENT,"Function "+t+"() requires "+Nm(n,"argument")+", but was called with "+Nm(e.length,"argument")+".")}function lm(t,e,n){if(e.length<n)throw new jg(Ug.INVALID_ARGUMENT,"Function "+t+"() requires at least "+Nm(n,"argument")+", but was called with "+Nm(e.length,"argument")+".")}function fm(t,e,n,r){if(e.length<n||e.length>r)throw new jg(Ug.INVALID_ARGUMENT,"Function "+t+"() requires between "+n+" and "+r+" arguments, but was called with "+Nm(e.length,"argument")+".")}function pm(t,e,n,r){bm(t,e,Cm(n)+" argument",r)}function dm(t,e,n,r){void 0!==r&&pm(t,e,n,r)}function vm(t,e,n,r){bm(t,e,n+" option",r)}function ym(t,e,n,r){void 0!==r&&vm(t,e,n,r)}function gm(t,e,n,r,u){void 0!==r&&function(t,e,n){for(var r=[],i=0,o=u;i<o.length;i++){var s=o[i];if(s===n)return;r.push(wm(s))}var a=wm(n);throw new jg(Ug.INVALID_ARGUMENT,"Invalid value "+a+" provided to function "+t+'() for option "'+e+'". Acceptable values: '+r.join(", "))}(t,n,r)}function mm(t,e,n,r){if(!e.some(function(t){return t===r}))throw new jg(Ug.INVALID_ARGUMENT,"Invalid value "+wm(r)+" provided to function "+t+"() for its "+Cm(n)+" argument. Acceptable values: "+e.join(", "));return r}function bm(t,e,n,r){if(!("object"===e?_m(r):"non-empty string"===e?"string"==typeof r&&""!==r:typeof r===e)){var i=wm(r);throw new jg(Ug.INVALID_ARGUMENT,"Function "+t+"() requires its "+n+" to be of type "+e+", but it was: "+i)}}function _m(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}function wm(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return 20<e.length&&(e=e.substring(0,20)+"..."),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"!=typeof e)return"function"==typeof e?"a function":zg();if(e instanceof Array)return"an array";var t=function(){if(e.constructor){var t=/function\s+([^\s(]+)\s*\(/.exec(e.constructor.toString());if(t&&1<t.length)return t[1]}return null}();return t?"a custom "+t+" object":"an object"}function Em(t,e,n){if(void 0===n)throw new jg(Ug.INVALID_ARGUMENT,"Function "+t+"() requires a valid "+Cm(e)+" argument, but it was undefined.")}function Im(n,t,r){Xg(t,function(t,e){if(r.indexOf(t)<0)throw new jg(Ug.INVALID_ARGUMENT,"Unknown option '"+t+"' passed to function "+n+"(). Available options: "+r.join(", "))})}function Tm(t,e,n,r){var i=wm(r);return new jg(Ug.INVALID_ARGUMENT,"Function "+t+"() requires its "+Cm(n)+" argument to be a "+e+", but it was: "+i)}function Sm(t,e,n){if(n<=0)throw new jg(Ug.INVALID_ARGUMENT,"Function "+t+"() requires its "+Cm(e)+" argument to be a positive number, but it was: "+n+".")}function Cm(t){switch(t){case 1:return"first";case 2:return"second";case 3:return"third";default:return t+"th"}}function Nm(t,e){return t+" "+e+(1===t?"":"s")}var Am=(km.k=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length,n="";n.length<20;)for(var r=function(t){var e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(var r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}(40),i=0;i<r.length;++i)n.length<20&&r[i]<e&&(n+=t.charAt(r[i]%t.length));return n},km);function km(){}function Om(t,e){return t<e?-1:e<t?1:0}function Rm(t,n,r){return t.length===n.length&&t.every(function(t,e){return r(t,n[e])})}function Pm(t){return t+"\0"}var Dm=(xm.fromBase64String=function(t){return new xm(atob(t))},xm.fromUint8Array=function(t){return new xm(function(t){for(var e="",n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(t))},xm.prototype.toBase64=function(){return t=this.M,btoa(t);var t},xm.prototype.toUint8Array=function(){return function(t){for(var e=new Uint8Array(t.length),n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.M)},xm.prototype.O=function(){return 2*this.M.length},xm.prototype.L=function(t){return Om(this.M,t.M)},xm.prototype.isEqual=function(t){return this.M===t.M},xm);function xm(t){this.M=t}Dm.B=new Dm("");var Lm=(Mm.fromBase64String=function(t){try{return new Mm(Dm.fromBase64String(t))}catch(t){throw new jg(Ug.INVALID_ARGUMENT,"Failed to construct Bytes from Base64 string: "+t)}},Mm.fromUint8Array=function(t){return new Mm(Dm.fromUint8Array(t))},Mm.prototype.toBase64=function(){return this.q.toBase64()},Mm.prototype.toUint8Array=function(){return this.q.toUint8Array()},Mm.prototype.toString=function(){return"Bytes(base64: "+this.toBase64()+")"},Mm.prototype.isEqual=function(t){return this.q.isEqual(t.q)},Mm);function Mm(t){this.q=t}function Fm(){if("undefined"==typeof Uint8Array)throw new jg(Ug.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function Um(){if("undefined"==typeof atob)throw new jg(Ug.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}function jm(t,e,n,r,i){this.U=t,this.persistenceKey=e,this.host=n,this.ssl=r,this.forceLongPolling=i}var Vm,qm=(Gs(Xm,Vm=Lm),Xm.fromBase64String=function(t){hm("Blob.fromBase64String",arguments,1),pm("Blob.fromBase64String","string",1,t),Um();try{return new Xm(Dm.fromBase64String(t))}catch(t){throw new jg(Ug.INVALID_ARGUMENT,"Failed to construct Blob from Base64 string: "+t)}},Xm.fromUint8Array=function(t){if(hm("Blob.fromUint8Array",arguments,1),Fm(),!(t instanceof Uint8Array))throw Tm("Blob.fromUint8Array","Uint8Array",1,t);return new Xm(Dm.fromUint8Array(t))},Xm.prototype.toBase64=function(){return hm("Blob.toBase64",arguments,0),Um(),Vm.prototype.toBase64.call(this)},Xm.prototype.toUint8Array=function(){return hm("Blob.toUint8Array",arguments,0),Fm(),Vm.prototype.toUint8Array.call(this)},Xm.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},Xm),Bm=(Object.defineProperty(Ym.prototype,"W",{get:function(){return"(default)"===this.database},enumerable:!1,configurable:!0}),Ym.prototype.isEqual=function(t){return t instanceof Ym&&t.projectId===this.projectId&&t.database===this.database},Ym.prototype.L=function(t){return Om(this.projectId,t.projectId)||Om(this.database,t.database)},Ym),Wm=(Qm.prototype.get=function(t){var e=this.j(t),n=this.G[e];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var o=i[r],s=o[0],a=o[1];if(this.K(s,t))return a}},Qm.prototype.has=function(t){return void 0!==this.get(t)},Qm.prototype.set=function(t,e){var n=this.j(t),r=this.G[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(this.K(r[i][0],t))return void(r[i]=[t,e]);r.push([t,e])}else this.G[n]=[[t,e]]},Qm.prototype.delete=function(t){var e=this.j(t),n=this.G[e];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.K(n[r][0],t))return 1===n.length?delete this.G[e]:n.splice(r,1),!0;return!1},Qm.prototype.forEach=function(a){Xg(this.G,function(t,e){for(var n=0,r=e;n<r.length;n++){var i=r[n],o=i[0],s=i[1];a(o,s)}})},Qm.prototype.m=function(){return $g(this.G)},Qm),Gm=(zm.now=function(){return zm.fromMillis(Date.now())},zm.fromDate=function(t){return zm.fromMillis(t.getTime())},zm.fromMillis=function(t){var e=Math.floor(t/1e3);return new zm(e,1e6*(t-1e3*e))},zm.prototype.toDate=function(){return new Date(this.toMillis())},zm.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},zm.prototype.H=function(t){return this.seconds===t.seconds?Om(this.nanoseconds,t.nanoseconds):Om(this.seconds,t.seconds)},zm.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},zm.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},zm.prototype.toJSON=function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}},zm.prototype.valueOf=function(){var t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},zm),Hm=(Km.Y=function(t){return new Km(t)},Km.min=function(){return new Km(new Gm(0,0))},Km.prototype.L=function(t){return this.timestamp.H(t.timestamp)},Km.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},Km.prototype.J=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},Km.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},Km.prototype.X=function(){return this.timestamp},Km);function Km(t){this.timestamp=t}function zm(t,e){if(this.seconds=t,(this.nanoseconds=e)<0)throw new jg(Ug.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(1e9<=e)throw new jg(Ug.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new jg(Ug.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(253402300800<=t)throw new jg(Ug.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}function Qm(t,e){this.j=t,this.K=e,this.G={}}function Ym(t,e){this.projectId=t,this.database=e||"(default)"}function Xm(){return null!==Vm&&Vm.apply(this,arguments)||this}function $m(t){return null==t}function Jm(t){return 0===t&&1/t==-1/0}function Zm(t){return"number"==typeof t&&Number.isInteger(t)&&!Jm(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var tb=function(t,e,n,r,i,o,s){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=s,this.Z=null};function eb(t,e,n,r,i,o,s){return void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),new tb(t,e,n,r,i,o,s)}function nb(t){var e,n=t;return null===n.Z&&(e=n.path.R(),null!==n.collectionGroup&&(e+="|cg:"+n.collectionGroup),e+="|f:",e+=n.filters.map(function(t){return(e=t).field.R()+e.op.toString()+n_(e.value);var e}).join(","),e+="|ob:",e+=n.orderBy.map(function(t){return(e=t).field.R()+e.dir;var e}).join(","),$m(n.limit)||(e+="|l:",e+=n.limit),n.startAt&&(e+="|lb:",e+=ME(n.startAt)),n.endAt&&(e+="|ub:",e+=ME(n.endAt)),n.Z=e),n.Z}function rb(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(var n,r,i=0;i<t.orderBy.length;i++)if(n=t.orderBy[i],r=e.orderBy[i],n.dir!==r.dir||!n.field.isEqual(r.field))return!1;if(t.filters.length!==e.filters.length)return!1;for(var o,s,a=0;a<t.filters.length;a++)if(o=t.filters[a],s=e.filters[a],o.op!==s.op||!o.field.isEqual(s.field)||!Jb(o.value,s.value))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!UE(t.startAt,e.startAt)&&UE(t.endAt,e.endAt)}function ib(t){return im.F(t.path)&&null===t.collectionGroup&&0===t.filters.length}function ob(t){this.count=t}var sb,ab,ub=(cb.prototype.nt=function(t){return new cb(this.target,this.targetId,this.tt,t,this.et,this.lastLimboFreeSnapshotVersion,this.resumeToken)},cb.prototype.st=function(t,e){return new cb(this.target,this.targetId,this.tt,this.sequenceNumber,e,this.lastLimboFreeSnapshotVersion,t)},cb.prototype.it=function(t){return new cb(this.target,this.targetId,this.tt,this.sequenceNumber,this.et,t,this.resumeToken)},cb);function cb(t,e,n,r,i,o,s){void 0===i&&(i=Hm.min()),void 0===o&&(o=Hm.min()),void 0===s&&(s=Dm.B),this.target=t,this.targetId=e,this.tt=n,this.sequenceNumber=r,this.et=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s}function hb(t){switch(t){case Ug.OK:return zg(),0;case Ug.CANCELLED:case Ug.UNKNOWN:case Ug.DEADLINE_EXCEEDED:case Ug.RESOURCE_EXHAUSTED:case Ug.INTERNAL:case Ug.UNAVAILABLE:case Ug.UNAUTHENTICATED:return;case Ug.INVALID_ARGUMENT:case Ug.NOT_FOUND:case Ug.ALREADY_EXISTS:case Ug.PERMISSION_DENIED:case Ug.FAILED_PRECONDITION:case Ug.ABORTED:case Ug.OUT_OF_RANGE:case Ug.UNIMPLEMENTED:case Ug.DATA_LOSS:return 1;default:return zg(),0}}function lb(t){if(void 0===t)return Gg("GRPC error has no .code"),Ug.UNKNOWN;switch(t){case sb.OK:return Ug.OK;case sb.CANCELLED:return Ug.CANCELLED;case sb.UNKNOWN:return Ug.UNKNOWN;case sb.DEADLINE_EXCEEDED:return Ug.DEADLINE_EXCEEDED;case sb.RESOURCE_EXHAUSTED:return Ug.RESOURCE_EXHAUSTED;case sb.INTERNAL:return Ug.INTERNAL;case sb.UNAVAILABLE:return Ug.UNAVAILABLE;case sb.UNAUTHENTICATED:return Ug.UNAUTHENTICATED;case sb.INVALID_ARGUMENT:return Ug.INVALID_ARGUMENT;case sb.NOT_FOUND:return Ug.NOT_FOUND;case sb.ALREADY_EXISTS:return Ug.ALREADY_EXISTS;case sb.PERMISSION_DENIED:return Ug.PERMISSION_DENIED;case sb.FAILED_PRECONDITION:return Ug.FAILED_PRECONDITION;case sb.ABORTED:return Ug.ABORTED;case sb.OUT_OF_RANGE:return Ug.OUT_OF_RANGE;case sb.UNIMPLEMENTED:return Ug.UNIMPLEMENTED;case sb.DATA_LOSS:return Ug.DATA_LOSS;default:return zg()}}(ab=sb=sb||{})[ab.OK=0]="OK",ab[ab.CANCELLED=1]="CANCELLED",ab[ab.UNKNOWN=2]="UNKNOWN",ab[ab.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ab[ab.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ab[ab.NOT_FOUND=5]="NOT_FOUND",ab[ab.ALREADY_EXISTS=6]="ALREADY_EXISTS",ab[ab.PERMISSION_DENIED=7]="PERMISSION_DENIED",ab[ab.UNAUTHENTICATED=16]="UNAUTHENTICATED",ab[ab.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ab[ab.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ab[ab.ABORTED=10]="ABORTED",ab[ab.OUT_OF_RANGE=11]="OUT_OF_RANGE",ab[ab.UNIMPLEMENTED=12]="UNIMPLEMENTED",ab[ab.INTERNAL=13]="INTERNAL",ab[ab.UNAVAILABLE=14]="UNAVAILABLE",ab[ab.DATA_LOSS=15]="DATA_LOSS";var fb=(gb.prototype.rt=function(t,e){return new gb(this.i,this.root.rt(t,e,this.i).copy(null,null,db.ot,null,null))},gb.prototype.remove=function(t){return new gb(this.i,this.root.remove(t,this.i).copy(null,null,db.ot,null,null))},gb.prototype.get=function(t){for(var e=this.root;!e.m();){var n=this.i(t,e.key);if(0===n)return e.value;n<0?e=e.left:0<n&&(e=e.right)}return null},gb.prototype.indexOf=function(t){for(var e=0,n=this.root;!n.m();){var r=this.i(t,n.key);if(0===r)return e+n.left.size;n=r<0?n.left:(e+=n.left.size+1,n.right)}return-1},gb.prototype.m=function(){return this.root.m()},Object.defineProperty(gb.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),gb.prototype.at=function(){return this.root.at()},gb.prototype.ct=function(){return this.root.ct()},gb.prototype.ut=function(t){return this.root.ut(t)},gb.prototype.forEach=function(n){this.ut(function(t,e){return n(t,e),!1})},gb.prototype.toString=function(){var n=[];return this.ut(function(t,e){return n.push(t+":"+e),!1}),"{"+n.join(", ")+"}"},gb.prototype.ht=function(t){return this.root.ht(t)},gb.prototype.lt=function(){return new pb(this.root,null,this.i,!1)},gb.prototype._t=function(t){return new pb(this.root,t,this.i,!1)},gb.prototype.ft=function(){return new pb(this.root,null,this.i,!0)},gb.prototype.dt=function(t){return new pb(this.root,t,this.i,!0)},gb),pb=(yb.prototype.Et=function(){var t=this.Tt.pop(),e={key:t.key,value:t.value};if(this.wt)for(t=t.left;!t.m();)this.Tt.push(t),t=t.right;else for(t=t.right;!t.m();)this.Tt.push(t),t=t.left;return e},yb.prototype.It=function(){return 0<this.Tt.length},yb.prototype.At=function(){if(0===this.Tt.length)return null;var t=this.Tt[this.Tt.length-1];return{key:t.key,value:t.value}},yb),db=(vb.prototype.copy=function(t,e,n,r,i){return new vb(null!=t?t:this.key,null!=e?e:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)},vb.prototype.m=function(){return!1},vb.prototype.ut=function(t){return this.left.ut(t)||t(this.key,this.value)||this.right.ut(t)},vb.prototype.ht=function(t){return this.right.ht(t)||t(this.key,this.value)||this.left.ht(t)},vb.prototype.min=function(){return this.left.m()?this:this.left.min()},vb.prototype.at=function(){return this.min().key},vb.prototype.ct=function(){return this.right.m()?this.key:this.right.ct()},vb.prototype.rt=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.rt(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.rt(t,e,n))).Rt()},vb.prototype.Pt=function(){if(this.left.m())return vb.EMPTY;var t=this;return t.left.gt()||t.left.left.gt()||(t=t.yt()),(t=t.copy(null,null,null,t.left.Pt(),null)).Rt()},vb.prototype.remove=function(t,e){var n,r=this;if(e(t,r.key)<0)r.left.m()||r.left.gt()||r.left.left.gt()||(r=r.yt()),r=r.copy(null,null,null,r.left.remove(t,e),null);else{if(r.left.gt()&&(r=r.Vt()),r.right.m()||r.right.gt()||r.right.left.gt()||(r=r.bt()),0===e(t,r.key)){if(r.right.m())return vb.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.Pt())}r=r.copy(null,null,null,null,r.right.remove(t,e))}return r.Rt()},vb.prototype.gt=function(){return this.color},vb.prototype.Rt=function(){var t=this;return t.right.gt()&&!t.left.gt()&&(t=t.vt()),t.left.gt()&&t.left.left.gt()&&(t=t.Vt()),t.left.gt()&&t.right.gt()&&(t=t.St()),t},vb.prototype.yt=function(){var t=this.St();return t.right.left.gt()&&(t=(t=(t=t.copy(null,null,null,null,t.right.Vt())).vt()).St()),t},vb.prototype.bt=function(){var t=this.St();return t.left.left.gt()&&(t=(t=t.Vt()).St()),t},vb.prototype.vt=function(){var t=this.copy(null,null,vb.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)},vb.prototype.Vt=function(){var t=this.copy(null,null,vb.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)},vb.prototype.St=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},vb.prototype.Dt=function(){var t=this.Ct();return Math.pow(2,t)<=this.size+1},vb.prototype.Ct=function(){if(this.gt()&&this.left.gt())throw zg();if(this.right.gt())throw zg();var t=this.left.Ct();if(t!==this.right.Ct())throw zg();return t+(this.gt()?0:1)},vb);function vb(t,e,n,r,i){this.key=t,this.value=e,this.color=null!=n?n:vb.RED,this.left=null!=r?r:vb.EMPTY,this.right=null!=i?i:vb.EMPTY,this.size=this.left.size+1+this.right.size}function yb(t,e,n,r){this.wt=r,this.Tt=[];for(var i=1;!t.m();)if(i=e?n(t.key,e):1,r&&(i*=-1),i<0)t=this.wt?t.left:t.right;else{if(0===i){this.Tt.push(t);break}this.Tt.push(t),t=this.wt?t.right:t.left}}function gb(t,e){this.i=t,this.root=e||db.EMPTY}function mb(){this.size=0}db.EMPTY=null,db.RED=!0,db.ot=!1,db.EMPTY=(Object.defineProperty(mb.prototype,"key",{get:function(){throw zg()},enumerable:!1,configurable:!0}),Object.defineProperty(mb.prototype,"value",{get:function(){throw zg()},enumerable:!1,configurable:!0}),Object.defineProperty(mb.prototype,"color",{get:function(){throw zg()},enumerable:!1,configurable:!0}),Object.defineProperty(mb.prototype,"left",{get:function(){throw zg()},enumerable:!1,configurable:!0}),Object.defineProperty(mb.prototype,"right",{get:function(){throw zg()},enumerable:!1,configurable:!0}),mb.prototype.copy=function(t,e,n,r,i){return this},mb.prototype.rt=function(t,e,n){return new db(t,e)},mb.prototype.remove=function(t,e){return this},mb.prototype.m=function(){return!0},mb.prototype.ut=function(t){return!1},mb.prototype.ht=function(t){return!1},mb.prototype.at=function(){return null},mb.prototype.ct=function(){return null},mb.prototype.gt=function(){return!1},mb.prototype.Dt=function(){return!0},mb.prototype.Ct=function(){return 0},new mb);var bb=(Ib.prototype.has=function(t){return null!==this.data.get(t)},Ib.prototype.first=function(){return this.data.at()},Ib.prototype.last=function(){return this.data.ct()},Object.defineProperty(Ib.prototype,"size",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),Ib.prototype.indexOf=function(t){return this.data.indexOf(t)},Ib.prototype.forEach=function(n){this.data.ut(function(t,e){return n(t),!1})},Ib.prototype.Nt=function(t,e){for(var n=this.data._t(t[0]);n.It();){var r=n.Et();if(0<=this.i(r.key,t[1]))return;e(r.key)}},Ib.prototype.Ft=function(t,e){for(var n=void 0!==e?this.data._t(e):this.data.lt();n.It();)if(!t(n.Et().key))return},Ib.prototype.xt=function(t){var e=this.data._t(t);return e.It()?e.Et().key:null},Ib.prototype.lt=function(){return new _b(this.data.lt())},Ib.prototype._t=function(t){return new _b(this.data._t(t))},Ib.prototype.add=function(t){return this.copy(this.data.remove(t).rt(t,!0))},Ib.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},Ib.prototype.m=function(){return this.data.m()},Ib.prototype.$t=function(t){var e=this;return e.size<t.size&&(e=t,t=this),t.forEach(function(t){e=e.add(t)}),e},Ib.prototype.isEqual=function(t){if(!(t instanceof Ib))return!1;if(this.size!==t.size)return!1;for(var e=this.data.lt(),n=t.data.lt();e.It();){var r=e.Et().key,i=n.Et().key;if(0!==this.i(r,i))return!1}return!0},Ib.prototype.A=function(){var e=[];return this.forEach(function(t){e.push(t)}),e},Ib.prototype.toString=function(){var e=[];return this.forEach(function(t){return e.push(t)}),"SortedSet("+e.toString()+")"},Ib.prototype.copy=function(t){var e=new Ib(this.i);return e.data=t,e},Ib),_b=(Eb.prototype.Et=function(){return this.kt.Et().key},Eb.prototype.It=function(){return this.kt.It()},Eb),wb=new fb(im.i);function Eb(t){this.kt=t}function Ib(t){this.i=t,this.data=new fb(this.i)}var Tb=new fb(im.i);var Sb=new fb(im.i),Cb=new bb(im.i);function Nb(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=Cb,r=0,i=t;r<i.length;r++)var o=i[r],n=n.add(o);return n}var Ab=new bb(Om);var kb=(Hb.Lt=function(t){return new Hb(t.i)},Hb.prototype.has=function(t){return null!=this.Mt.get(t)},Hb.prototype.get=function(t){return this.Mt.get(t)},Hb.prototype.first=function(){return this.Ot.at()},Hb.prototype.last=function(){return this.Ot.ct()},Hb.prototype.m=function(){return this.Ot.m()},Hb.prototype.indexOf=function(t){var e=this.Mt.get(t);return e?this.Ot.indexOf(e):-1},Object.defineProperty(Hb.prototype,"size",{get:function(){return this.Ot.size},enumerable:!1,configurable:!0}),Hb.prototype.forEach=function(n){this.Ot.ut(function(t,e){return n(t),!1})},Hb.prototype.add=function(t){var e=this.delete(t.key);return e.copy(e.Mt.rt(t.key,t),e.Ot.rt(t,null))},Hb.prototype.delete=function(t){var e=this.get(t);return e?this.copy(this.Mt.remove(t),this.Ot.remove(e)):this},Hb.prototype.isEqual=function(t){if(!(t instanceof Hb))return!1;if(this.size!==t.size)return!1;for(var e=this.Ot.lt(),n=t.Ot.lt();e.It();){var r=e.Et().key,i=n.Et().key;if(!r.isEqual(i))return!1}return!0},Hb.prototype.toString=function(){var e=[];return this.forEach(function(t){e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"},Hb.prototype.copy=function(t,e){var n=new Hb;return n.i=this.i,n.Mt=t,n.Ot=e,n},Hb),Ob=(Gb.prototype.track=function(t){var e=t.doc.key,n=this.Bt.get(e);!n||0!==t.type&&3===n.type?this.Bt=this.Bt.rt(e,t):3===t.type&&1!==n.type?this.Bt=this.Bt.rt(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.Bt=this.Bt.rt(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.Bt=this.Bt.rt(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.Bt=this.Bt.remove(e):1===t.type&&2===n.type?this.Bt=this.Bt.rt(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.Bt=this.Bt.rt(e,{type:2,doc:t.doc}):zg()},Gb.prototype.qt=function(){var n=[];return this.Bt.ut(function(t,e){n.push(e)}),n},Gb),Rb=(Wb.Kt=function(t,e,n,r){var i=[];return e.forEach(function(t){i.push({type:0,doc:t})}),new Wb(t,e,kb.Lt(e),i,n,r,!0,!1)},Object.defineProperty(Wb.prototype,"hasPendingWrites",{get:function(){return!this.Qt.m()},enumerable:!1,configurable:!0}),Wb.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.Wt===t.Wt&&this.Qt.isEqual(t.Qt)&&oE(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.Ut.isEqual(t.Ut)))return!1;var e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0},Wb),Pb=(Bb.Jt=function(t,e){var n=new Map;return n.set(t,Db.Xt(t,e)),new Bb(Hm.min(),n,Ab,wb,Nb())},Bb),Db=(qb.Xt=function(t,e){return new qb(Dm.B,e,Nb(),Nb(),Nb())},qb),xb=function(t,e,n,r){this.se=t,this.removedTargetIds=e,this.key=n,this.ie=r},Lb=function(t,e){this.targetId=t,this.re=e},Mb=function(t,e,n,r){void 0===n&&(n=Dm.B),void 0===r&&(r=null),this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r},Fb=(Object.defineProperty(Vb.prototype,"Zt",{get:function(){return this.ue},enumerable:!1,configurable:!0}),Object.defineProperty(Vb.prototype,"resumeToken",{get:function(){return this.ce},enumerable:!1,configurable:!0}),Object.defineProperty(Vb.prototype,"le",{get:function(){return 0!==this.oe},enumerable:!1,configurable:!0}),Object.defineProperty(Vb.prototype,"_e",{get:function(){return this.he},enumerable:!1,configurable:!0}),Vb.prototype.fe=function(t){0<t.O()&&(this.he=!0,this.ce=t)},Vb.prototype.de=function(){var n=Nb(),r=Nb(),i=Nb();return this.ae.forEach(function(t,e){switch(e){case 0:n=n.add(t);break;case 2:r=r.add(t);break;case 1:i=i.add(t);break;default:zg()}}),new Db(this.ce,this.ue,n,r,i)},Vb.prototype.we=function(){this.he=!1,this.ae=zb()},Vb.prototype.me=function(t,e){this.he=!0,this.ae=this.ae.rt(t,e)},Vb.prototype.Te=function(t){this.he=!0,this.ae=this.ae.remove(t)},Vb.prototype.Ee=function(){this.oe+=1},Vb.prototype.Ie=function(){--this.oe},Vb.prototype.Ae=function(){this.he=!0,this.ue=!0},Vb),Ub=(jb.prototype.pe=function(t){for(var e=0,n=t.se;e<n.length;e++){var r=n[e];t.ie instanceof Vw?this.be(r,t.ie):t.ie instanceof qw&&this.ve(r,t.key,t.ie)}for(var i=0,o=t.removedTargetIds;i<o.length;i++){var s=o[i];this.ve(s,t.key,t.ie)}},jb.prototype.Se=function(n){var r=this;this.De(n,function(t){var e=r.Ce(t);switch(n.state){case 0:r.Ne(t)&&e.fe(n.resumeToken);break;case 1:e.Ie(),e.le||e.we(),e.fe(n.resumeToken);break;case 2:e.Ie(),e.le||r.removeTarget(t);break;case 3:r.Ne(t)&&(e.Ae(),e.fe(n.resumeToken));break;case 4:r.Ne(t)&&(r.Fe(t),e.fe(n.resumeToken));break;default:zg()}})},jb.prototype.De=function(t,n){var r=this;0<t.targetIds.length?t.targetIds.forEach(n):this.Pe.forEach(function(t,e){r.Ne(e)&&n(e)})},jb.prototype.xe=function(t){var e,n,r=t.targetId,i=t.re.count,o=this.$e(r);o&&(ib(e=o.target)?0===i?(n=new im(e.path),this.ve(r,n,new qw(n,Hm.min()))):Qg(1===i):this.ke(r)!==i&&(this.Fe(r),this.Ve=this.Ve.add(r)))},jb.prototype.Me=function(i){var o=this,s=new Map;this.Pe.forEach(function(t,e){var n,r=o.$e(e);r&&(t.Zt&&ib(r.target)&&(n=new im(r.target.path),null!==o.ge.get(n)||o.Oe(e,n)||o.ve(e,n,new qw(n,i))),t._e&&(s.set(e,t.de()),t.we()))});var r=Nb();this.ye.forEach(function(t,e){var n=!0;e.Ft(function(t){var e=o.$e(t);return!e||2===e.tt||(n=!1)}),n&&(r=r.add(t))});var t=new Pb(i,s,this.Ve,this.ge,r);return this.ge=wb,this.ye=Kb(),this.Ve=new bb(Om),t},jb.prototype.be=function(t,e){var n;this.Ne(t)&&(n=this.Oe(t,e.key)?2:0,this.Ce(t).me(e.key,n),this.ge=this.ge.rt(e.key,e),this.ye=this.ye.rt(e.key,this.Le(e.key).add(t)))},jb.prototype.ve=function(t,e,n){var r;this.Ne(t)&&(r=this.Ce(t),this.Oe(t,e)?r.me(e,1):r.Te(e),this.ye=this.ye.rt(e,this.Le(e).delete(t)),n&&(this.ge=this.ge.rt(e,n)))},jb.prototype.removeTarget=function(t){this.Pe.delete(t)},jb.prototype.ke=function(t){var e=this.Ce(t).de();return this.Re.Be(t).size+e.te.size-e.ne.size},jb.prototype.Ee=function(t){this.Ce(t).Ee()},jb.prototype.Ce=function(t){var e=this.Pe.get(t);return e||(e=new Fb,this.Pe.set(t,e)),e},jb.prototype.Le=function(t){var e=this.ye.get(t);return e||(e=new bb(Om),this.ye=this.ye.rt(t,e)),e},jb.prototype.Ne=function(t){var e=null!==this.$e(t);return e||Wg("WatchChangeAggregator","Detected inactive target",t),e},jb.prototype.$e=function(t){var e=this.Pe.get(t);return e&&e.le?null:this.Re.qe(t)},jb.prototype.Fe=function(e){var n=this;this.Pe.set(e,new Fb),this.Re.Be(e).forEach(function(t){n.ve(e,t,null)})},jb.prototype.Oe=function(t,e){return this.Re.Be(t).has(e)},jb);function jb(t){this.Re=t,this.Pe=new Map,this.ge=wb,this.ye=Kb(),this.Ve=new bb(Om)}function Vb(){this.oe=0,this.ae=zb(),this.ce=Dm.B,this.ue=!1,this.he=!0}function qb(t,e,n,r,i){this.resumeToken=t,this.Zt=e,this.te=n,this.ee=r,this.ne=i}function Bb(t,e,n,r,i){this.et=t,this.Gt=e,this.zt=n,this.Ht=r,this.Yt=i}function Wb(t,e,n,r,i,o,s,a){this.query=t,this.docs=e,this.Ut=n,this.docChanges=r,this.Qt=i,this.fromCache=o,this.Wt=s,this.jt=a}function Gb(){this.Bt=new fb(im.i)}function Hb(n){this.i=n?function(t,e){return n(t,e)||im.i(t.key,e.key)}:function(t,e){return im.i(t.key,e.key)},this.Mt=Tb,this.Ot=new fb(this.i)}function Kb(){return new fb(im.i)}function zb(){return new fb(im.i)}function Qb(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Yb(t){var e=r_(t.mapValue.fields.__local_write_time__.timestampValue);return new Gm(e.seconds,e.nanos)}var Xb=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function $b(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Qb(t)?4:10:zg()}function Jb(r,i){var t,e,n,o=$b(r);if(o!==$b(i))return!1;switch(o){case 0:return!0;case 1:return r.booleanValue===i.booleanValue;case 4:return Yb(r).isEqual(Yb(i));case 3:return function(t){if("string"==typeof r.timestampValue&&"string"==typeof t.timestampValue&&r.timestampValue.length===t.timestampValue.length)return r.timestampValue===t.timestampValue;var e=r_(r.timestampValue),n=r_(t.timestampValue);return e.seconds===n.seconds&&e.nanos===n.nanos}(i);case 5:return r.stringValue===i.stringValue;case 6:return n=i,o_(r.bytesValue).isEqual(o_(n.bytesValue));case 7:return r.referenceValue===i.referenceValue;case 8:return e=i,i_((t=r).geoPointValue.latitude)===i_(e.geoPointValue.latitude)&&i_(t.geoPointValue.longitude)===i_(e.geoPointValue.longitude);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return i_(t.integerValue)===i_(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){var n=i_(t.doubleValue),r=i_(e.doubleValue);return n===r?Jm(n)===Jm(r):isNaN(n)&&isNaN(r)}return!1}(r,i);case 9:return Rm(r.arrayValue.values||[],i.arrayValue.values||[],Jb);case 10:return function(){var t,e=r.mapValue.fields||{},n=i.mapValue.fields||{};if(Yg(e)!==Yg(n))return!1;for(t in e)if(e.hasOwnProperty(t)&&(void 0===n[t]||!Jb(e[t],n[t])))return!1;return!0}();default:return zg()}}function Zb(t,e){return void 0!==(t.values||[]).find(function(t){return Jb(t,e)})}function t_(t,e){var n,r,i,o,s,a,u,c,h,l,f=$b(t),p=$b(e);if(f!==p)return Om(f,p);switch(f){case 0:return 0;case 1:return Om(t.booleanValue,e.booleanValue);case 2:return c=e,h=i_(t.integerValue||t.doubleValue),l=i_(c.integerValue||c.doubleValue),h<l?-1:l<h?1:h===l?0:isNaN(h)?isNaN(l)?0:-1:1;case 3:return e_(t.timestampValue,e.timestampValue);case 4:return e_(Yb(t),Yb(e));case 5:return Om(t.stringValue,e.stringValue);case 6:return o=t.bytesValue,s=e.bytesValue,a=o_(o),u=o_(s),a.L(u);case 7:return function(t,e){for(var n=t.split("/"),r=e.split("/"),i=0;i<n.length&&i<r.length;i++){var o=Om(n[i],r[i]);if(0!==o)return o}return Om(n.length,r.length)}(t.referenceValue,e.referenceValue);case 8:return n=t.geoPointValue,r=e.geoPointValue,0!==(i=Om(i_(n.latitude),i_(r.latitude)))?i:Om(i_(n.longitude),i_(r.longitude));case 9:return function(t,e){for(var n=t.values||[],r=e.values||[],i=0;i<n.length&&i<r.length;++i){var o=t_(n[i],r[i]);if(o)return o}return Om(n.length,r.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){var n=t.fields||{},r=Object.keys(n),i=e.fields||{},o=Object.keys(i);r.sort(),o.sort();for(var s=0;s<r.length&&s<o.length;++s){var a=Om(r[s],o[s]);if(0!==a)return a;var u=t_(n[r[s]],i[o[s]]);if(0!==u)return u}return Om(r.length,o.length)}(t.mapValue,e.mapValue);default:throw zg()}}function e_(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return Om(t,e);var n=r_(t),r=r_(e),i=Om(n.seconds,r.seconds);return 0!==i?i:Om(n.nanos,r.nanos)}function n_(t){return function s(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?"time("+(t=r_(i.timestampValue)).seconds+","+t.nanos+")":"stringValue"in i?i.stringValue:"bytesValue"in i?o_(i.bytesValue).toBase64():"referenceValue"in i?(n=i.referenceValue,im.C(n).toString()):"geoPointValue"in i?"geo("+(e=i.geoPointValue).latitude+","+e.longitude+")":"arrayValue"in i?function(){for(var t="[",e=!0,n=0,r=i.arrayValue.values||[];n<r.length;n++){e?e=!1:t+=",",t+=s(r[n])}return t+"]"}():"mapValue"in i?function(t){for(var e="{",n=!0,r=0,i=Object.keys(t.fields||{}).sort();r<i.length;r++){var o=i[r];n?n=!1:e+=",",e+=o+":"+s(t.fields[o])}return e+"}"}(i.mapValue):zg();var t,e,n}(t)}function r_(t){if(Qg(!!t),"string"!=typeof t)return{seconds:i_(t.seconds),nanos:i_(t.nanos)};var e,n=0,r=Xb.exec(t);Qg(!!r),r[1]&&(e=((e=r[1])+"000000000").substr(0,9),n=Number(e));var i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:n}}function i_(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function o_(t){return"string"==typeof t?Dm.fromBase64String(t):Dm.fromUint8Array(t)}function s_(t,e){return{referenceValue:"projects/"+t.projectId+"/databases/"+t.database+"/documents/"+e.path.R()}}function a_(t){return t&&"integerValue"in t}function u_(t){return!!t&&"arrayValue"in t}function c_(t){return t&&"nullValue"in t}function h_(t){return t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function l_(t){return t&&"mapValue"in t}var f_={asc:"ASCENDING",desc:"DESCENDING"},p_={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},d_=function(t,e){this.U=t,this.Ue=e};function v_(t){return{integerValue:""+t}}function y_(t,e){if(t.Ue){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Jm(e)?"-0":e}}function g_(t,e){return Zm(e)?v_(e):y_(t,e)}function m_(t,e){return t.Ue?new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+e.nanoseconds).slice(-9)+"Z":{seconds:""+e.seconds,nanos:e.nanoseconds}}function b_(t,e){return t.Ue?e.toBase64():e.toUint8Array()}function __(t){return Qg(!!t),Hm.Y((e=r_(t),new Gm(e.seconds,e.nanos)));var e}function w_(t,e){return new em(["projects",t.projectId,"databases",t.database]).child("documents").child(e).R()}function E_(t){var e=em.P(t);return Qg(U_(e)),e}function I_(t,e){return w_(t.U,e.path)}function T_(t,e){var n=E_(e);return Qg(n.get(1)===t.U.projectId),Qg(!n.get(3)&&!t.U.database||n.get(3)===t.U.database),new im(A_(n))}function S_(t,e){return w_(t.U,e)}function C_(t){var e=E_(t);return 4===e.length?em.g():A_(e)}function N_(t){return new em(["projects",t.U.projectId,"databases",t.U.database]).R()}function A_(t){return Qg(4<t.length&&"documents"===t.get(4)),t.u(5)}function k_(t,e,n){return{name:I_(t,e),fields:n.proto.mapValue.fields}}function O_(t,e){var n,r,i,o,s,a;if(e instanceof gw)n={update:k_(t,e.key,e.value)};else if(e instanceof Aw)n={delete:I_(t,e.key)};else if(e instanceof mw)n={update:k_(t,e.key,e.data),updateMask:(r=e.Qe,i=[],r.fields.forEach(function(t){return i.push(t.R())}),{fieldPaths:i})};else if(e instanceof Iw)n={transform:{document:I_(t,e.key),fieldTransforms:e.fieldTransforms.map(function(t){var e=t.transform;if(e instanceof W_)return{fieldPath:t.field.R(),setToServerValue:"REQUEST_TIME"};if(e instanceof G_)return{fieldPath:t.field.R(),appendMissingElements:{values:e.elements}};if(e instanceof Y_)return{fieldPath:t.field.R(),removeAllFromArray:{values:e.elements}};if(e instanceof Z_)return{fieldPath:t.field.R(),increment:e.We};throw zg()})}};else{if(!(e instanceof kw))return zg();n={verify:I_(t,e.key)}}return e.Ke.je||(n.currentDocument=void 0!==(o=e.Ke).updateTime?{updateTime:(s=t,a=o.updateTime,m_(s,a.X()))}:void 0!==o.exists?{exists:o.exists}:zg()),n}function R_(e,t){var n,r,i=t.currentDocument?void 0!==(n=t.currentDocument).updateTime?aw.updateTime(__(n.updateTime)):void 0!==n.exists?aw.exists(n.exists):aw.Ge():aw.Ge();if(t.update){t.update.name;var o=T_(e,t.update.name),s=new Ow({mapValue:{fields:t.update.fields}});if(t.updateMask){var a=(r=t.updateMask.fieldPaths||[],new rw(r.map(function(t){return rm.S(t)})));return new mw(o,s,a,i)}return new gw(o,s,i)}if(t.delete){var u=T_(e,t.delete);return new Aw(u,i)}if(t.transform){var c=T_(e,t.transform.document),h=t.transform.fieldTransforms.map(function(t){return function(t,e){var n,r,i=null;"setToServerValue"in e?(Qg("REQUEST_TIME"===e.setToServerValue),i=new W_):"appendMissingElements"in e?(n=e.appendMissingElements.values||[],i=new G_(n)):"removeAllFromArray"in e?(r=e.removeAllFromArray.values||[],i=new Y_(r)):"increment"in e?i=new Z_(t,e.increment):zg();var o=rm.S(e.fieldPath);return new iw(o,i)}(e,t)});return Qg(!0===i.exists),new Iw(c,h)}if(t.verify){var l=T_(e,t.verify);return new kw(l,i)}return zg()}function P_(t,e){return{documents:[S_(t,e.path)]}}function D_(t,e){var n={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(n.parent=S_(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=S_(t,r.h()),n.structuredQuery.from=[{collectionId:r._()}]);var i=function(t){if(0!==t.length){var e=t.map(function(t){if("=="===t.op){if(h_(t.value))return{unaryFilter:{field:M_(t.field),op:"IS_NAN"}};if(c_(t.value))return{unaryFilter:{field:M_(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(h_(t.value))return{unaryFilter:{field:M_(t.field),op:"IS_NOT_NAN"}};if(c_(t.value))return{unaryFilter:{field:M_(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:M_(t.field),op:(e=t.op,p_[e]),value:t.value}};var e});return 1===e.length?e[0]:{compositeFilter:{op:"AND",filters:e}}}}(e.filters);i&&(n.structuredQuery.where=i);var o=function(t){if(0!==t.length)return t.map(function(t){return{field:M_((e=t).field),direction:(n=e.dir,f_[n])};var e,n})}(e.orderBy);o&&(n.structuredQuery.orderBy=o);var s,a=(s=e.limit,t.Ue||$m(s)?s:{value:s});return null!==a&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=x_(e.startAt)),e.endAt&&(n.structuredQuery.endAt=x_(e.endAt)),n}function x_(t){return{before:t.before,values:t.position}}function L_(t){var e=!!t.before,n=t.values||[];return new RE(n,e)}function M_(t){return{fieldPath:t.R()}}function F_(t){return rm.S(t.fieldPath)}function U_(t){return 4<=t.length&&"projects"===t.get(0)&&"databases"===t.get(2)}function j_(){this.ze=void 0}function V_(t,e){return t instanceof Z_?a_(n=e)||n&&"doubleValue"in n?e:{integerValue:0}:null;var n}var q_,B_,W_=(Gs(K_,B_=j_),K_),G_=(Gs(H_,q_=j_),H_);function H_(t){var e=this;return(e=q_.call(this)||this).elements=t,e}function K_(){return null!==B_&&B_.apply(this,arguments)||this}function z_(t,e){for(var n=nw(e),r=0,i=t.elements;r<i.length;r++)!function(e){n.some(function(t){return Jb(t,e)})||n.push(e)}(i[r]);return{arrayValue:{values:n}}}var Q_,Y_=(Gs(X_,Q_=j_),X_);function X_(t){var e=this;return(e=Q_.call(this)||this).elements=t,e}function $_(t,e){for(var n=nw(e),r=0,i=t.elements;r<i.length;r++)!function(e){n=n.filter(function(t){return!Jb(t,e)})}(i[r]);return{arrayValue:{values:n}}}var J_,Z_=(Gs(tw,J_=j_),tw);function tw(t,e){var n=this;return(n=J_.call(this)||this).serializer=t,n.We=e,n}function ew(t){return i_(t.integerValue||t.doubleValue)}function nw(t){return u_(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}var rw=(ow.prototype.He=function(t){for(var e=0,n=this.fields;e<n.length;e++)if(n[e].T(t))return!0;return!1},ow.prototype.isEqual=function(t){return Rm(this.fields,t.fields,function(t,e){return t.isEqual(e)})},ow),iw=function(t,e){this.field=t,this.transform=e};function ow(t){(this.fields=t).sort(rm.i)}function sw(t,e){this.version=t,this.transformResults=e}var aw=(uw.Ge=function(){return new uw},uw.exists=function(t){return new uw(void 0,t)},uw.updateTime=function(t){return new uw(t)},Object.defineProperty(uw.prototype,"je",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!1,configurable:!0}),uw.prototype.isEqual=function(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)},uw);function uw(t,e){this.updateTime=t,this.exists=e}function cw(t,e){return void 0!==t.updateTime?e instanceof Vw&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e instanceof Vw}function hw(){}function lw(t,e,n){return t instanceof gw?new Vw(t.key,n.version,t.value,{hasCommittedMutations:!0}):t instanceof mw?function(t,e,n){if(!cw(t.Ke,e))return new Bw(t.key,n.version);var r=ww(t,e);return new Vw(t.key,n.version,r,{hasCommittedMutations:!0})}(t,e,n):t instanceof Iw?function(t,e,n){if(Qg(null!=n.transformResults),!cw(t.Ke,e))return new Bw(t.key,n.version);var r=e,i=function(t,e,n){var r=[];Qg(t.length===n.length);for(var i,o,s,a=0;a<n.length;a++){var u=t[a],c=u.transform,h=null;e instanceof Vw&&(h=e.field(u.field)),r.push((i=c,o=h,s=n[a],i instanceof G_?z_(i,o):i instanceof Y_?$_(i,o):s))}return r}(t.fieldTransforms,e,n.transformResults),o=n.version,s=Sw(t,r.data(),i);return new Vw(t.key,o,s,{hasCommittedMutations:!0})}(t,e,n):new qw(t.key,n.version,{hasCommittedMutations:!0})}function fw(t,e,n,r){return t instanceof gw?function(t,e){if(!cw(t.Ke,e))return e;var n=dw(e);return new Vw(t.key,n,t.value,{Ye:!0})}(t,e):t instanceof mw?function(t,e){if(!cw(t.Ke,e))return e;var n=dw(e),r=ww(t,e);return new Vw(t.key,n,r,{Ye:!0})}(t,e):t instanceof Iw?function(t,e,n,r){if(!cw(t.Ke,e))return e;var i=e,o=function(t,e,n,r){for(var i,o,s,a,u,c,h,l=[],f=0,p=t;f<p.length;f++){var d=p[f],v=d.transform,y=null;n instanceof Vw&&(y=n.field(d.field)),null===y&&r instanceof Vw&&(y=r.field(d.field)),l.push((o=y,s=e,h=c=u=a=void 0,(i=v)instanceof W_?(h={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}},o&&(h.fields.__previous_value__=o),{mapValue:h}):i instanceof G_?z_(i,o):i instanceof Y_?$_(i,o):(u=V_(a=i,o),c=ew(u)+ew(a.We),a_(u)&&a_(a.We)?v_(c):y_(a.serializer,c))))}return l}(t.fieldTransforms,n,e,r),s=Sw(t,i.data(),o);return new Vw(t.key,i.version,s,{Ye:!0})}(t,e,r,n):(o=e,cw((i=t).Ke,o)?new qw(i.key,Hm.min()):o);var i,o}function pw(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.Ke.isEqual(e.Ke)&&(0===t.type?t.value.isEqual(e.value):1===t.type?t.data.isEqual(e.data)&&t.Qe.isEqual(e.Qe):2!==t.type||Rm(t.fieldTransforms,t.fieldTransforms,function(t,e){return r=e,(n=t).field.isEqual(r.field)&&(i=n.transform,o=r.transform,i instanceof G_&&o instanceof G_||i instanceof Y_&&o instanceof Y_?Rm(i.elements,o.elements,Jb):i instanceof Z_&&o instanceof Z_?Jb(i.We,o.We):i instanceof W_&&o instanceof W_);var n,r,i,o}))}function dw(t){return t instanceof Vw?t.version:Hm.min()}var vw,yw,gw=(Gs(_w,yw=hw),_w),mw=(Gs(bw,vw=hw),bw);function bw(t,e,n,r){var i=this;return(i=vw.call(this)||this).key=t,i.data=e,i.Qe=n,i.Ke=r,i.type=1,i}function _w(t,e,n){var r=this;return(r=yw.call(this)||this).key=t,r.value=e,r.Ke=n,r.type=0,r}function ww(t,e){return n=t,r=e instanceof Vw?e.data():Ow.empty(),i=new Rw(r),n.Qe.fields.forEach(function(t){var e;t.m()||(null!==(e=n.data.field(t))?i.set(t,e):i.delete(t))}),i.Je();var n,r,i}var Ew,Iw=(Gs(Tw,Ew=hw),Tw);function Tw(t,e){var n=this;return(n=Ew.call(this)||this).key=t,n.fieldTransforms=e,n.type=2,n.Ke=aw.exists(!0),n}function Sw(t,e,n){for(var r=new Rw(e),i=0;i<t.fieldTransforms.length;i++){var o=t.fieldTransforms[i];r.set(o.field,n[i])}return r.Je()}var Cw,Nw,Aw=(Gs(Lw,Nw=hw),Lw),kw=(Gs(xw,Cw=hw),xw),Ow=(Dw.empty=function(){return new Dw({mapValue:{}})},Dw.prototype.field=function(t){if(t.m())return this.proto;for(var e=this.proto,n=0;n<t.length-1;++n){if(!e.mapValue.fields)return null;if(!l_(e=e.mapValue.fields[t.get(n)]))return null}return(e=(e.mapValue.fields||{})[t._()])||null},Dw.prototype.isEqual=function(t){return Jb(this.proto,t.proto)},Dw),Rw=(Pw.prototype.set=function(t,e){return this.tn(t,e),this},Pw.prototype.delete=function(t){return this.tn(t,null),this},Pw.prototype.tn=function(t,e){for(var n=this.Ze,r=0;r<t.length-1;++r)var i=t.get(r),o=n.get(i),n=(o instanceof Map||(o=o&&10===$b(o)?new Map(Object.entries(o.mapValue.fields||{})):new Map,n.set(i,o)),o);n.set(t._(),e)},Pw.prototype.Je=function(){var t=this.en(rm.g(),this.Ze);return null!=t?new Ow(t):this.Xe},Pw.prototype.en=function(r,t){var i=this,o=!1,e=this.Xe.field(r),s=l_(e)?Object.assign({},e.mapValue.fields):{};return t.forEach(function(t,e){var n;t instanceof Map?null!=(n=i.en(r.child(e),t))&&(s[e]=n,o=!0):null!==t?(s[e]=t,o=!0):s.hasOwnProperty(e)&&(delete s[e],o=!0)}),o?{mapValue:{fields:s}}:null},Pw);function Pw(t){void 0===t&&(t=Ow.empty()),this.Xe=t,this.Ze=new Map}function Dw(t){this.proto=t}function xw(t,e){var n=this;return(n=Cw.call(this)||this).key=t,n.Ke=e,n.type=4,n}function Lw(t,e){var n=this;return(n=Nw.call(this)||this).key=t,n.Ke=e,n.type=3,n}function Mw(t,e){this.key=t,this.version=e}var Fw,Uw,jw,Vw=(Gs(Kw,jw=Mw),Kw.prototype.field=function(t){return this.nn.field(t)},Kw.prototype.data=function(){return this.nn},Kw.prototype.sn=function(){return this.nn.proto},Kw.prototype.isEqual=function(t){return t instanceof Kw&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.Ye===t.Ye&&this.hasCommittedMutations===t.hasCommittedMutations&&this.nn.isEqual(t.nn)},Kw.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+this.nn.toString()+", {hasLocalMutations: "+this.Ye+"}), {hasCommittedMutations: "+this.hasCommittedMutations+"})"},Object.defineProperty(Kw.prototype,"hasPendingWrites",{get:function(){return this.Ye||this.hasCommittedMutations},enumerable:!1,configurable:!0}),Kw),qw=(Gs(Hw,Uw=Mw),Hw.prototype.toString=function(){return"NoDocument("+this.key+", "+this.version+")"},Object.defineProperty(Hw.prototype,"hasPendingWrites",{get:function(){return this.hasCommittedMutations},enumerable:!1,configurable:!0}),Hw.prototype.isEqual=function(t){return t instanceof Hw&&t.hasCommittedMutations===this.hasCommittedMutations&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},Hw),Bw=(Gs(Gw,Fw=Mw),Gw.prototype.toString=function(){return"UnknownDocument("+this.key+", "+this.version+")"},Object.defineProperty(Gw.prototype,"hasPendingWrites",{get:function(){return!0},enumerable:!1,configurable:!0}),Gw.prototype.isEqual=function(t){return t instanceof Gw&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},Gw),Ww=function(t,e,n,r,i,o,s,a){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o="F"),void 0===s&&(s=null),void 0===a&&(a=null),this.path=t,this.collectionGroup=e,this.rn=n,this.filters=r,this.limit=i,this.on=o,this.startAt=s,this.endAt=a,this.an=null,this.cn=null,this.startAt,this.endAt};function Gw(){return null!==Fw&&Fw.apply(this,arguments)||this}function Hw(t,e,n){var r=this;return(r=Uw.call(this,t,e)||this).hasCommittedMutations=!(!n||!n.hasCommittedMutations),r}function Kw(t,e,n,r){var i=this;return(i=jw.call(this,t,e)||this).nn=n,i.Ye=!!r.Ye,i.hasCommittedMutations=!!r.hasCommittedMutations,i}function zw(t,e,n,r,i,o,s,a){return new Ww(t,e,n,r,i,o,s,a)}function Qw(t){return new Ww(t)}function Yw(t){return!$m(t.limit)&&"F"===t.on}function Xw(t){return!$m(t.limit)&&"L"===t.on}function $w(t){return 0<t.rn.length?t.rn[0].field:null}function Jw(t){for(var e=0,n=t.filters;e<n.length;e++){var r=n[e];if(r.un())return r.field}return null}function Zw(t){return null!==t.collectionGroup}function tE(t){var e=t;if(null===e.an){e.an=[];var n=Jw(e),r=$w(e);if(null!==n&&null===r)n.p()||e.an.push(new jE(n)),e.an.push(new jE(rm.v(),"asc"));else{for(var i,o=!1,s=0,a=e.rn;s<a.length;s++){var u=a[s];e.an.push(u),u.field.p()&&(o=!0)}o||(i=0<e.rn.length?e.rn[e.rn.length-1].dir:"asc",e.an.push(new jE(rm.v(),i)))}}return e.an}function eE(t){var e=t;if(!e.cn)if("F"===e.on)e.cn=eb(e.path,e.collectionGroup,tE(e),e.filters,e.limit,e.startAt,e.endAt);else{for(var n=[],r=0,i=tE(e);r<i.length;r++){var o=i[r],s="desc"===o.dir?"asc":"desc";n.push(new jE(o.field,s))}var a=e.endAt?new RE(e.endAt.position,!e.endAt.before):null,u=e.startAt?new RE(e.startAt.position,!e.startAt.before):null;e.cn=eb(e.path,e.collectionGroup,n,e.filters,e.limit,a,u)}return e.cn}function nE(t,e,n){return new Ww(t.path,t.collectionGroup,t.rn.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function rE(t,e){return new Ww(t.path,t.collectionGroup,t.rn.slice(),t.filters.slice(),t.limit,t.on,e,t.endAt)}function iE(t,e){return new Ww(t.path,t.collectionGroup,t.rn.slice(),t.filters.slice(),t.limit,t.on,t.startAt,e)}function oE(t,e){return rb(eE(t),eE(e))&&t.on===e.on}function sE(t){return nb(eE(t))+"|lt:"+t.on}function aE(t){return"Query(target="+(e=eE(t),n=e.path.R(),null!==e.collectionGroup&&(n+=" collectionGroup="+e.collectionGroup),0<e.filters.length&&(n+=", filters: ["+e.filters.map(function(t){return(e=t).field.R()+" "+e.op+" "+n_(e.value);var e}).join(", ")+"]"),$m(e.limit)||(n+=", limit: "+e.limit),0<e.orderBy.length&&(n+=", orderBy: ["+e.orderBy.map(function(t){return(e=t).field.R()+" ("+e.dir+")";var e}).join(", ")+"]"),e.startAt&&(n+=", startAt: "+ME(e.startAt)),e.endAt&&(n+=", endAt: "+ME(e.endAt)),"Target("+n+")")+"; limitType="+t.on+")";var e,n}function uE(i,t){return r=i,o=t.key.path,(null!==r.collectionGroup?t.key.N(r.collectionGroup)&&r.path.T(o):im.F(r.path)?r.path.isEqual(o):r.path.I(o))&&function(t){for(var e=0,n=i.rn;e<n.length;e++){var r=n[e];if(!r.field.p()&&null===t.field(r.field))return}return 1}(t)&&function(t){for(var e=0,n=i.filters;e<n.length;e++)if(!n[e].matches(t))return;return 1}(t)&&(n=t,(!(e=i).startAt||FE(e.startAt,tE(e),n))&&(!e.endAt||!FE(e.endAt,tE(e),n)));var e,n,r,o}function cE(a){return function(t,e){for(var n=!1,r=0,i=tE(a);r<i.length;r++){var o=i[r],s=function(t,i,e){var n=t.field.p()?im.i(i.key,e.key):function(t,e){var n=i.field(t),r=e.field(t);return null!==n&&null!==r?t_(n,r):zg()}(t.field,e);switch(t.dir){case"asc":return n;case"desc":return-1*n;default:return zg()}}(o,t,e);if(0!==s)return s;n=n||o.field.p()}return 0}}var hE,lE=(Gs(fE,hE=function(){}),fE.create=function(t,e,n){if(t.p())return"in"===e||"not-in"===e?this.hn(t,e,n):new yE(t,e,n);if(c_(n)){if("=="!==e&&"!="!==e)throw new jg(Ug.INVALID_ARGUMENT,"Invalid query. Null only supports '==' and '!=' comparisons.");return new fE(t,e,n)}if(h_(n)){if("=="!==e&&"!="!==e)throw new jg(Ug.INVALID_ARGUMENT,"Invalid query. NaN only supports '==' and '!=' comparisons.");return new fE(t,e,n)}return"array-contains"===e?new NE(t,n):"in"===e?new AE(t,n):"not-in"===e?new kE(t,n):"array-contains-any"===e?new OE(t,n):new fE(t,e,n)},fE.hn=function(t,e,n){return new("in"===e?gE:mE)(t,n)},fE.prototype.matches=function(t){var e=t.field(this.field);return"!="===this.op?null!==e&&this.ln(t_(e,this.value)):null!==e&&$b(this.value)===$b(e)&&this.ln(t_(e,this.value))},fE.prototype.ln=function(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return 0<t;case">=":return 0<=t;default:return zg()}},fE.prototype.un=function(){return 0<=["<","<=",">",">=","!=","not-in"].indexOf(this.op)},fE);function fE(t,e,n){var r=this;return(r=hE.call(this)||this).field=t,r.op=e,r.value=n,r}var pE,dE,vE,yE=(Gs(wE,vE=lE),wE.prototype.matches=function(t){var e=im.i(t.key,this.key);return this.ln(e)},wE),gE=(Gs(_E,dE=lE),_E.prototype.matches=function(e){return this.keys.some(function(t){return t.isEqual(e.key)})},_E),mE=(Gs(bE,pE=lE),bE.prototype.matches=function(e){return!this.keys.some(function(t){return t.isEqual(e.key)})},bE);function bE(t,e){var n=this;return(n=pE.call(this,t,"not-in",e)||this).keys=EE(0,e),n}function _E(t,e){var n=this;return(n=dE.call(this,t,"in",e)||this).keys=EE(0,e),n}function wE(t,e,n){var r=this;return(r=vE.call(this,t,e,n)||this).key=im.C(n.referenceValue),r}function EE(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map(function(t){return im.C(t.referenceValue)})}var IE,TE,SE,CE,NE=(Gs(LE,CE=lE),LE.prototype.matches=function(t){var e=t.field(this.field);return u_(e)&&Zb(e.arrayValue,this.value)},LE),AE=(Gs(xE,SE=lE),xE.prototype.matches=function(t){var e=t.field(this.field);return null!==e&&Zb(this.value.arrayValue,e)},xE),kE=(Gs(DE,TE=lE),DE.prototype.matches=function(t){if(Zb(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var e=t.field(this.field);return null!==e&&!Zb(this.value.arrayValue,e)},DE),OE=(Gs(PE,IE=lE),PE.prototype.matches=function(t){var e=this,n=t.field(this.field);return!(!u_(n)||!n.arrayValue.values)&&n.arrayValue.values.some(function(t){return Zb(e.value.arrayValue,t)})},PE),RE=function(t,e){this.position=t,this.before=e};function PE(t,e){return IE.call(this,t,"array-contains-any",e)||this}function DE(t,e){return TE.call(this,t,"not-in",e)||this}function xE(t,e){return SE.call(this,t,"in",e)||this}function LE(t,e){return CE.call(this,t,"array-contains",e)||this}function ME(t){return(t.before?"b":"a")+":"+t.position.map(n_).join(",")}function FE(t,e,n){for(var r=0,i=0;i<t.position.length;i++){var o=e[i],s=t.position[i],r=o.field.p()?im.i(im.C(s.referenceValue),n.key):t_(s,n.field(o.field));if("desc"===o.dir&&(r*=-1),0!==r)break}return t.before?r<=0:r<0}function UE(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.before!==e.before||t.position.length!==e.position.length)return!1;for(var n=0;n<t.position.length;n++)if(!Jb(t.position[n],e.position[n]))return!1;return!0}var jE=function(t,e){void 0===e&&(e="asc"),this.field=t,this.dir=e};function VE(){var n=this;this.promise=new Promise(function(t,e){n.resolve=t,n.reject=e})}var qE,BE=($E.prototype.reset=function(){this.Tn=0},$E.prototype.An=function(){this.Tn=this.mn},$E.prototype.Rn=function(t){var e=this;this.cancel();var n=Math.floor(this.Tn+this.Pn()),r=Math.max(0,Date.now()-this.In),i=Math.max(0,n-r);0<i&&Wg("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.Tn+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.En=this._n.gn(this.fn,i,function(){return e.In=Date.now(),t()}),this.Tn*=this.wn,this.Tn<this.dn&&(this.Tn=this.dn),this.Tn>this.mn&&(this.Tn=this.mn)},$E.prototype.yn=function(){null!==this.En&&(this.En.Vn(),this.En=null)},$E.prototype.cancel=function(){null!==this.En&&(this.En.cancel(),this.En=null)},$E.prototype.Pn=function(){return(Math.random()-.5)*this.Tn},$E),WE=(XE.prototype.catch=function(t){return this.next(void 0,t)},XE.prototype.next=function(r,i){var o=this;return this.Sn&&zg(),this.Sn=!0,this.vn?this.error?this.Dn(i,this.error):this.Cn(r,this.result):new XE(function(e,n){o.pn=function(t){o.Cn(r,t).next(e,n)},o.bn=function(t){o.Dn(i,t).next(e,n)}})},XE.prototype.Nn=function(){var n=this;return new Promise(function(t,e){n.next(t,e)})},XE.prototype.Fn=function(t){try{var e=t();return e instanceof XE?e:XE.resolve(e)}catch(t){return XE.reject(t)}},XE.prototype.Cn=function(t,e){return t?this.Fn(function(){return t(e)}):XE.resolve(e)},XE.prototype.Dn=function(t,e){return t?this.Fn(function(){return t(e)}):XE.reject(e)},XE.resolve=function(n){return new XE(function(t,e){t(n)})},XE.reject=function(n){return new XE(function(t,e){e(n)})},XE.xn=function(t){return new XE(function(e,n){var r=0,i=0,o=!1;t.forEach(function(t){++r,t.next(function(){++i,o&&i===r&&e()},function(t){return n(t)})}),o=!0,i===r&&e()})},XE.$n=function(t){for(var n=XE.resolve(!1),e=0,r=t;e<r.length;e++)!function(e){n=n.next(function(t){return t?XE.resolve(t):e()})}(r[e]);return n},XE.forEach=function(t,n){var r=this,i=[];return t.forEach(function(t,e){i.push(n.call(r,t,e))}),this.xn(i)},XE),GE=(YE.delete=function(t){return Wg("SimpleDb","Removing database:",t),rI(window.indexedDB.deleteDatabase(t)).Nn()},YE.On=function(){if("undefined"==typeof indexedDB)return!1;if(YE.Ln())return!0;var t=ua(),e=YE.Mn(t),n=0<e&&e<10,r=YE.Bn(t),i=0<r&&r<4.5;return!(0<t.indexOf("MSIE ")||0<t.indexOf("Trident/")||0<t.indexOf("Edge/")||n||i)},YE.Ln=function(){var t;return"undefined"!=typeof process&&"YES"===(null===(t=process.env)||void 0===t?void 0:t.qn)},YE.Un=function(t,e){return t.store(e)},YE.Mn=function(t){var e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(n)},YE.Bn=function(t){var e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)},YE.prototype.Qn=function(){return Ks(this,void 0,void 0,function(){var e,o=this;return zs(this,function(t){switch(t.label){case 0:return this.db?[3,2]:(Wg("SimpleDb","Opening database:",this.name),e=this,[4,new Promise(function(n,r){var i=indexedDB.open(o.name,o.version);i.onsuccess=function(t){var e=t.target.result;n(e)},i.onblocked=function(){r(new KE("Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(t){var e=t.target.error;"VersionError"===e.name?r(new jg(Ug.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):r(new KE(e))},i.onupgradeneeded=function(t){Wg("SimpleDb",'Database "'+o.name+'" requires upgrade from version:',t.oldVersion);var e=t.target.result;o.kn.createOrUpgrade(e,i.transaction,t.oldVersion,o.version).next(function(){Wg("SimpleDb","Database upgrade to version "+o.version+" complete")})}})]);case 1:e.db=t.sent(),t.label=2;case 2:return[2,(this.Wn&&(this.db.onversionchange=function(t){return o.Wn(t)}),this.db)]}})})},YE.prototype.jn=function(e){this.Wn=e,this.db&&(this.db.onversionchange=function(t){return e(t)})},YE.prototype.runTransaction=function(r,c,h){return Ks(this,void 0,void 0,function(){var s,a,e,u,n;return zs(this,function(t){switch(t.label){case 0:s="readonly"===r,a=0,e=function(){var e,n,r,i,o;return zs(this,function(t){switch(t.label){case 0:++a,t.label=1;case 1:return t.trys.push([1,4,,5]),[4,u.Qn()];case 2:return u.db=t.sent(),e=ZE.open(u.db,s?"readonly":"readwrite",c),n=h(e).catch(function(t){return e.abort(t),WE.reject(t)}).Nn(),r={},n.catch(function(){}),[4,e.Kn];case 3:return[2,(r.value=(t.sent(),n),r)];case 4:return i=t.sent(),o="FirebaseError"!==i.name&&a<3,Wg("SimpleDb","Transaction failed with error:",i.message,"Retrying:",o),u.close(),o?[3,5]:[2,{value:Promise.reject(i)}];case 5:return[2]}})},u=this,t.label=1;case 1:return[5,e()];case 2:if("object"==typeof(n=t.sent()))return[2,n.value];t.label=3;case 3:return[3,1];case 4:return[2]}})})},YE.prototype.close=function(){this.db&&this.db.close(),this.db=void 0},YE),HE=(Object.defineProperty(QE.prototype,"vn",{get:function(){return this.zn},enumerable:!1,configurable:!0}),Object.defineProperty(QE.prototype,"Yn",{get:function(){return this.Hn},enumerable:!1,configurable:!0}),Object.defineProperty(QE.prototype,"cursor",{set:function(t){this.Gn=t},enumerable:!1,configurable:!0}),QE.prototype.done=function(){this.zn=!0},QE.prototype.Jn=function(t){this.Hn=t},QE.prototype.delete=function(){return rI(this.Gn.delete())},QE),KE=(Gs(zE,qE=jg),zE);function zE(t){var e=this;return(e=qE.call(this,Ug.UNAVAILABLE,"IndexedDB transaction failed: "+t)||this).name="IndexedDbTransactionError",e}function QE(t){this.Gn=t,this.zn=!1,this.Hn=null}function YE(t,e,n){this.name=t,this.version=e,this.kn=n,12.2===YE.Mn(ua())&&Gg("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}function XE(t){var e=this;this.pn=null,this.bn=null,this.result=void 0,this.error=void 0,this.vn=!1,this.Sn=!1,t(function(t){e.vn=!0,e.result=t,e.pn&&e.pn(t)},function(t){e.vn=!0,e.error=t,e.bn&&e.bn(t)})}function $E(t,e,n,r,i){void 0===n&&(n=1e3),void 0===r&&(r=1.5),void 0===i&&(i=6e4),this._n=t,this.fn=e,this.dn=n,this.wn=r,this.mn=i,this.Tn=0,this.En=null,this.In=Date.now(),this.reset()}function JE(t){return"IndexedDbTransactionError"===t.name}var ZE=(nI.open=function(t,e,n){try{return new nI(t.transaction(n,e))}catch(t){throw new KE(t)}},Object.defineProperty(nI.prototype,"Kn",{get:function(){return this.Xn.promise},enumerable:!1,configurable:!0}),nI.prototype.abort=function(t){t&&this.Xn.reject(t),this.aborted||(Wg("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},nI.prototype.store=function(t){var e=this.transaction.objectStore(t);return new tI(e)},nI),tI=(eI.prototype.put=function(t,e){var n=void 0!==e?(Wg("SimpleDb","PUT",this.store.name,t,e),this.store.put(e,t)):(Wg("SimpleDb","PUT",this.store.name,"<auto-key>",t),this.store.put(t));return rI(n)},eI.prototype.add=function(t){return Wg("SimpleDb","ADD",this.store.name,t,t),rI(this.store.add(t))},eI.prototype.get=function(e){var n=this;return rI(this.store.get(e)).next(function(t){return void 0===t&&(t=null),Wg("SimpleDb","GET",n.store.name,e,t),t})},eI.prototype.delete=function(t){return Wg("SimpleDb","DELETE",this.store.name,t),rI(this.store.delete(t))},eI.prototype.count=function(){return Wg("SimpleDb","COUNT",this.store.name),rI(this.store.count())},eI.prototype.Zn=function(t,e){var n=this.cursor(this.options(t,e)),r=[];return this.ts(n,function(t,e){r.push(e)}).next(function(){return r})},eI.prototype.es=function(t,e){Wg("SimpleDb","DELETE ALL",this.store.name);var n=this.options(t,e);n.ns=!1;var r=this.cursor(n);return this.ts(r,function(t,e,n){return n.delete()})},eI.prototype.ss=function(t,e){var n;e?n=t:(n={},e=t);var r=this.cursor(n);return this.ts(r,e)},eI.prototype.rs=function(i){var t=this.cursor({});return new WE(function(n,r){t.onerror=function(t){var e=oI(t.target.error);r(e)},t.onsuccess=function(t){var e=t.target.result;e?i(e.primaryKey,e.value).next(function(t){t?e.continue():n()}):n()}})},eI.prototype.ts=function(t,s){var a=[];return new WE(function(o,e){t.onerror=function(t){e(t.target.error)},t.onsuccess=function(t){var e,n,r,i=t.target.result;i?(e=new HE(i),(n=s(i.primaryKey,i.value,e))instanceof WE&&(r=n.catch(function(t){return e.done(),WE.reject(t)}),a.push(r)),e.vn?o():null===e.Yn?i.continue():i.continue(e.Yn)):o()}}).next(function(){return WE.xn(a)})},eI.prototype.options=function(t,e){var n=void 0;return void 0!==t&&("string"==typeof t?n=t:e=t),{index:n,range:e}},eI.prototype.cursor=function(t){var e="next";if(t.reverse&&(e="prev"),t.index){var n=this.store.index(t.index);return t.ns?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)},eI);function eI(t){this.store=t}function nI(t){var n=this;this.transaction=t,this.aborted=!1,this.Xn=new VE,this.transaction.oncomplete=function(){n.Xn.resolve()},this.transaction.onabort=function(){t.error?n.Xn.reject(new KE(t.error)):n.Xn.resolve()},this.transaction.onerror=function(t){var e=oI(t.target.error);n.Xn.reject(new KE(e))}}function rI(t){return new WE(function(n,r){t.onsuccess=function(t){var e=t.target.result;n(e)},t.onerror=function(t){var e=oI(t.target.error);r(e)}})}var iI=!1;function oI(t){var e=GE.Mn(ua());if(12.2<=e&&e<13){var n="An internal error was encountered in the Indexed Database server";if(0<=t.message.indexOf(n)){var r=new jg("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return iI||(iI=!0,setTimeout(function(){throw r},0)),r}}return t}function sI(){return"undefined"!=typeof window?window:null}function aI(){return"undefined"!=typeof document?document:null}var uI=(lI.ls=function(t,e,n,r,i){var o=new lI(t,e,Date.now()+n,r,i);return o.start(n),o},lI.prototype.start=function(t){var e=this;this._s=setTimeout(function(){return e.fs()},t)},lI.prototype.Vn=function(){return this.fs()},lI.prototype.cancel=function(t){null!==this._s&&(this.clearTimeout(),this.hs.reject(new jg(Ug.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},lI.prototype.fs=function(){var e=this;this.os.ds(function(){return null!==e._s?(e.clearTimeout(),e.op().then(function(t){return e.hs.resolve(t)})):Promise.resolve()})},lI.prototype.clearTimeout=function(){null!==this._s&&(this.us(this),clearTimeout(this._s),this._s=null)},lI),cI=(Object.defineProperty(hI.prototype,"Vs",{get:function(){return this.Es},enumerable:!1,configurable:!0}),hI.prototype.ds=function(t){this.enqueue(t)},hI.prototype.ps=function(t){this.bs(),this.vs(t)},hI.prototype.Ss=function(){var t;this.Es||(this.Es=!0,(t=aI())&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.ys))},hI.prototype.enqueue=function(t){return this.bs(),this.Es?new Promise(function(t){}):this.vs(t)},hI.prototype.Ds=function(t){var e=this;this.Ts.push(t),this.ds(function(){return e.Cs()})},hI.prototype.Cs=function(){return Ks(this,void 0,void 0,function(){var e,n=this;return zs(this,function(t){switch(t.label){case 0:if(0===this.Ts.length)return[3,5];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,this.Ts[0]()];case 2:return t.sent(),this.Ts.shift(),this.gs.reset(),[3,4];case 3:if(!JE(e=t.sent()))throw e;return Wg("AsyncQueue","Operation failed with retryable error: "+e),[3,4];case 4:0<this.Ts.length&&this.gs.Rn(function(){return n.Cs()}),t.label=5;case 5:return[2]}})})},hI.prototype.vs=function(t){var r=this,e=this.ws.then(function(){return r.Rs=!0,t().catch(function(t){throw r.As=t,r.Rs=!1,Gg("INTERNAL UNHANDLED ERROR: ",(n=(e=t).message||"",e.stack&&(n=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),n)),t;var e,n}).then(function(t){return r.Rs=!1,t})});return this.ws=e},hI.prototype.gn=function(t,e,n){var r=this;this.bs(),-1<this.Ps.indexOf(t)&&(e=0);var i=uI.ls(this,t,e,n,function(t){return r.Ns(t)});return this.Is.push(i),i},hI.prototype.bs=function(){this.As&&zg()},hI.prototype.Fs=function(){},hI.prototype.xs=function(){return Ks(this,void 0,void 0,function(){var e;return zs(this,function(t){switch(t.label){case 0:return[4,e=this.ws];case 1:t.sent(),t.label=2;case 2:if(e!==this.ws)return[3,0];t.label=3;case 3:return[2]}})})},hI.prototype.$s=function(t){for(var e=0,n=this.Is;e<n.length;e++)if(n[e].fn===t)return!0;return!1},hI.prototype.ks=function(r){var i=this;return this.xs().then(function(){i.Is.sort(function(t,e){return t.cs-e.cs});for(var t=0,e=i.Is;t<e.length;t++){var n=e[t];if(n.Vn(),"all"!==r&&n.fn===r)break}return i.xs()})},hI.prototype.Ms=function(t){this.Ps.push(t)},hI.prototype.Ns=function(t){var e=this.Is.indexOf(t);this.Is.splice(e,1)},hI);function hI(){var e=this;this.ws=Promise.resolve(),this.Ts=[],this.Es=!1,this.Is=[],this.As=null,this.Rs=!1,this.Ps=[],this.gs=new BE(this,"async_queue_retry"),this.ys=function(){var t=aI();t&&Wg("AsyncQueue","Visibility state changed to  ",t.visibilityState),e.gs.yn()};var t=aI();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this.ys)}function lI(t,e,n,r,i){this.os=t,this.fn=e,this.cs=n,this.op=r,this.us=i,this.hs=new VE,this.then=this.hs.promise.then.bind(this.hs.promise),this.hs.promise.catch(function(t){})}function fI(t,e){if(Gg("AsyncQueue",e+": "+t),JE(t))return new jg(Ug.UNAVAILABLE,e+": "+t);throw t}function pI(){this.Os=void 0,this.listeners=[]}function dI(){this.Ls=new Wm(sE,oE),this.onlineState="Unknown",this.Bs=new Set}function vI(u,c){return Ks(this,void 0,void 0,function(){var e,n,r,i,o,s,a;return zs(this,function(t){switch(t.label){case 0:if(e=u,n=c.query,r=!1,(i=e.Ls.get(n))||(r=!0,i=new pI),!r)return[3,4];t.label=1;case 1:return t.trys.push([1,3,,4]),o=i,[4,e.qs(n)];case 2:return o.Os=t.sent(),[3,4];case 3:return s=t.sent(),a=fI(s,"Initialization of query '"+aE(c.query)+"' failed"),[2,void c.onError(a)];case 4:return e.Ls.set(n,i),i.listeners.push(c),c.Us(e.onlineState),i.Os&&c.Qs(i.Os)&&gI(e),[2]}})})}function yI(s,a){return Ks(this,void 0,void 0,function(){var e,n,r,i,o;return zs(this,function(t){return e=s,n=a.query,r=!1,(i=e.Ls.get(n))&&0<=(o=i.listeners.indexOf(a))&&(i.listeners.splice(o,1),r=0===i.listeners.length),r?[2,(e.Ls.delete(n),e.Ws(n))]:[2]})})}function gI(t){t.Bs.forEach(function(t){t.next()})}var mI=(wI.prototype.Qs=function(t){if(!this.options.includeMetadataChanges){for(var e=[],n=0,r=t.docChanges;n<r.length;n++){var i=r[n];3!==i.type&&e.push(i)}t=new Rb(t.query,t.docs,t.Ut,e,t.Qt,t.fromCache,t.Wt,!0)}var o=!1;return this.Ks?this.zs(t)&&(this.js.next(t),o=!0):this.Hs(t,this.onlineState)&&(this.Ys(t),o=!0),this.Gs=t,o},wI.prototype.onError=function(t){this.js.error(t)},wI.prototype.Us=function(t){this.onlineState=t;var e=!1;return this.Gs&&!this.Ks&&this.Hs(this.Gs,t)&&(this.Ys(this.Gs),e=!0),e},wI.prototype.Hs=function(t,e){if(!t.fromCache)return!0;var n="Offline"!==e;return!(this.options.Js&&n||t.docs.m()&&"Offline"!==e)},wI.prototype.zs=function(t){if(0<t.docChanges.length)return!0;var e=this.Gs&&this.Gs.hasPendingWrites!==t.hasPendingWrites;return!(!t.Wt&&!e)&&!0===this.options.includeMetadataChanges},wI.prototype.Ys=function(t){t=Rb.Kt(t.query,t.docs,t.Qt,t.fromCache),this.Ks=!0,this.js.next(t)},wI),bI=(_I.prototype.Xs=function(){return null!=this.uid},_I.prototype.Zs=function(){return this.Xs()?"uid:"+this.uid:"anonymous-user"},_I.prototype.isEqual=function(t){return t.uid===this.uid},_I);function _I(t){this.uid=t}function wI(t,e,n){this.query=t,this.js=e,this.Ks=!1,this.Gs=null,this.onlineState="Unknown",this.options=n||{}}bI.UNAUTHENTICATED=new bI(null),bI.ti=new bI("google-credentials-uid"),bI.ei=new bI("first-party-uid");var EI=(II.prototype.si=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},II.prototype.next=function(){var t=++this.previousValue;return this.ii&&this.ii(t),t},II);function II(t,e){var n=this;this.previousValue=t,e&&(e.ni=function(t){return n.si(t)},this.ii=function(t){return e.ri(t)})}function TI(t,e){return"firestore_clients_"+t+"_"+e}function SI(t,e,n){var r="firestore_mutations_"+t+"_"+n;return e.Xs()&&(r+="_"+e.uid),r}function CI(t,e){return"firestore_targets_"+t+"_"+e}EI.oi=-1;var NI=(ZI.ai=function(t,e,n){var r=JSON.parse(n),i="object"==typeof r&&-1!==["pending","acknowledged","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error),o=void 0;return i&&r.error&&(i="string"==typeof r.error.message&&"string"==typeof r.error.code)&&(o=new jg(r.error.code,r.error.message)),i?new ZI(t,e,r.state,o):(Gg("SharedClientState","Failed to parse mutation state for ID '"+e+"': "+n),null)},ZI.prototype.ci=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},ZI),AI=(JI.ai=function(t,e){var n=JSON.parse(e),r="object"==typeof n&&-1!==["not-current","current","rejected"].indexOf(n.state)&&(void 0===n.error||"object"==typeof n.error),i=void 0;return r&&n.error&&(r="string"==typeof n.error.message&&"string"==typeof n.error.code)&&(i=new jg(n.error.code,n.error.message)),r?new JI(t,n.state,i):(Gg("SharedClientState","Failed to parse target state for ID '"+t+"': "+e),null)},JI.prototype.ci=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},JI),kI=($I.ai=function(t,e){for(var n=JSON.parse(e),r="object"==typeof n&&n.activeTargetIds instanceof Array,i=Ab,o=0;r&&o<n.activeTargetIds.length;++o)r=Zm(n.activeTargetIds[o]),i=i.add(n.activeTargetIds[o]);return r?new $I(t,i):(Gg("SharedClientState","Failed to parse client data for instance '"+t+"': "+e),null)},$I),OI=(XI.ai=function(t){var e=JSON.parse(t);return"object"==typeof e&&-1!==["Unknown","Online","Offline"].indexOf(e.onlineState)&&"string"==typeof e.clientId?new XI(e.clientId,e.onlineState):(Gg("SharedClientState","Failed to parse online state: "+t),null)},XI),RI=(YI.prototype.ui=function(t){this.activeTargetIds=this.activeTargetIds.add(t)},YI.prototype.hi=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},YI.prototype.ci=function(){var t={activeTargetIds:this.activeTargetIds.A(),updateTimeMs:Date.now()};return JSON.stringify(t)},YI),PI=(QI.On=function(t){return!(!t||!t.localStorage)},QI.prototype.start=function(){return Ks(this,void 0,void 0,function(){var e,n,r,i,o,s,a,u,c,h,l,f=this;return zs(this,function(t){switch(t.label){case 0:return[4,this._i.Vi()];case 1:for(e=t.sent(),n=0,r=e;n<r.length;n++)(i=r[n])!==this.li&&(o=this.getItem(TI(this.persistenceKey,i)))&&(s=kI.ai(i,o))&&(this.mi=this.mi.rt(s.clientId,s));for(this.pi(),(a=this.storage.getItem(this.yi))&&(u=this.bi(a))&&this.vi(u),c=0,h=this.Ei;c<h.length;c++)l=h[c],this.wi(l);return this.Ei=[],this.window.addEventListener("unload",function(){return f.Si()}),this.Ti=!0,[2]}})})},QI.prototype.ri=function(t){this.setItem(this.Ai,JSON.stringify(t))},QI.prototype.Di=function(){return this.Ci(this.mi)},QI.prototype.Ni=function(n){var r=!1;return this.mi.forEach(function(t,e){e.activeTargetIds.has(n)&&(r=!0)}),r},QI.prototype.Fi=function(t){this.xi(t,"pending")},QI.prototype.$i=function(t,e,n){this.xi(t,e,n),this.ki(t)},QI.prototype.Mi=function(t){var e,n,r="not-current";return this.Ni(t)&&(!(e=this.storage.getItem(CI(this.persistenceKey,t)))||(n=AI.ai(t,e))&&(r=n.state)),this.Oi.ui(t),this.pi(),r},QI.prototype.Li=function(t){this.Oi.hi(t),this.pi()},QI.prototype.Bi=function(t){return this.Oi.activeTargetIds.has(t)},QI.prototype.qi=function(t){this.removeItem(CI(this.persistenceKey,t))},QI.prototype.Ui=function(t,e,n){this.Qi(t,e,n)},QI.prototype.Wi=function(t,e,n){var r=this;e.forEach(function(t){r.ki(t)}),this.currentUser=t,n.forEach(function(t){r.Fi(t)})},QI.prototype.ji=function(t){this.Ki(t)},QI.prototype.Si=function(){this.Ti&&(this.window.removeEventListener("storage",this.di),this.removeItem(this.Ii),this.Ti=!1)},QI.prototype.getItem=function(t){var e=this.storage.getItem(t);return Wg("SharedClientState","READ",t,e),e},QI.prototype.setItem=function(t,e){Wg("SharedClientState","SET",t,e),this.storage.setItem(t,e)},QI.prototype.removeItem=function(t){Wg("SharedClientState","REMOVE",t),this.storage.removeItem(t)},QI.prototype.wi=function(t){var e=this,a=t;if(a.storageArea===this.storage){if(Wg("SharedClientState","EVENT",a.key,a.newValue),a.key===this.Ii)return void Gg("Received WebStorage notification for local change. Another client might have garbage-collected our state");this._n.Ds(function(){return Ks(e,void 0,void 0,function(){var e,n,r,i,o,s;return zs(this,function(t){if(this.Ti){if(null!==a.key)if(this.Ri.test(a.key)){if(null==a.newValue)return e=this.Gi(a.key),[2,this.zi(e,null)];if(n=this.Hi(a.key,a.newValue))return[2,this.zi(n.clientId,n)]}else if(this.Pi.test(a.key)){if(null!==a.newValue&&(r=this.Yi(a.key,a.newValue)))return[2,this.Ji(r)]}else if(this.gi.test(a.key)){if(null!==a.newValue&&(i=this.Xi(a.key,a.newValue)))return[2,this.Zi(i)]}else if(a.key===this.yi){if(null!==a.newValue&&(o=this.bi(a.newValue)))return[2,this.vi(o)]}else a.key===this.Ai&&(s=function(t){var e=EI.oi;if(null!=t)try{var n=JSON.parse(t);Qg("number"==typeof n),e=n}catch(t){Gg("SharedClientState","Failed to read sequence number from WebStorage",t)}return e}(a.newValue))!==EI.oi&&this.ni(s)}else this.Ei.push(a);return[2]})})})}},Object.defineProperty(QI.prototype,"Oi",{get:function(){return this.mi.get(this.li)},enumerable:!1,configurable:!0}),QI.prototype.pi=function(){this.setItem(this.Ii,this.Oi.ci())},QI.prototype.xi=function(t,e,n){var r=new NI(this.currentUser,t,e,n),i=SI(this.persistenceKey,this.currentUser,t);this.setItem(i,r.ci())},QI.prototype.ki=function(t){var e=SI(this.persistenceKey,this.currentUser,t);this.removeItem(e)},QI.prototype.Ki=function(t){var e={clientId:this.li,onlineState:t};this.storage.setItem(this.yi,JSON.stringify(e))},QI.prototype.Qi=function(t,e,n){var r=CI(this.persistenceKey,t),i=new AI(t,e,n);this.setItem(r,i.ci())},QI.prototype.Gi=function(t){var e=this.Ri.exec(t);return e?e[1]:null},QI.prototype.Hi=function(t,e){var n=this.Gi(t);return kI.ai(n,e)},QI.prototype.Yi=function(t,e){var n=this.Pi.exec(t),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return NI.ai(new bI(i),r,e)},QI.prototype.Xi=function(t,e){var n=this.gi.exec(t),r=Number(n[1]);return AI.ai(r,e)},QI.prototype.bi=function(t){return OI.ai(t)},QI.prototype.Ji=function(e){return Ks(this,void 0,void 0,function(){return zs(this,function(t){return e.user.uid===this.currentUser.uid?[2,this._i.tr(e.batchId,e.state,e.error)]:(Wg("SharedClientState","Ignoring mutation for non-active user "+e.user.uid),[2])})})},QI.prototype.Zi=function(t){return this._i.er(t.targetId,t.state,t.error)},QI.prototype.zi=function(t,e){var n=this,r=e?this.mi.rt(t,e):this.mi.remove(t),i=this.Ci(this.mi),o=this.Ci(r),s=[],a=[];return o.forEach(function(t){i.has(t)||s.push(t)}),i.forEach(function(t){o.has(t)||a.push(t)}),this._i.nr(s,a).then(function(){n.mi=r})},QI.prototype.vi=function(t){this.mi.get(t.clientId)&&this.fi(t.onlineState)},QI.prototype.Ci=function(t){var n=Ab;return t.forEach(function(t,e){n=n.$t(e.activeTargetIds)}),n},QI),DI=(zI.prototype.Fi=function(t){},zI.prototype.$i=function(t,e,n){},zI.prototype.Mi=function(t){return this.sr.ui(t),this.ir[t]||"not-current"},zI.prototype.Ui=function(t,e,n){this.ir[t]=e},zI.prototype.Li=function(t){this.sr.hi(t)},zI.prototype.Bi=function(t){return this.sr.activeTargetIds.has(t)},zI.prototype.qi=function(t){delete this.ir[t]},zI.prototype.Di=function(){return this.sr.activeTargetIds},zI.prototype.Ni=function(t){return this.sr.activeTargetIds.has(t)},zI.prototype.start=function(){return this.sr=new RI,Promise.resolve()},zI.prototype.Wi=function(t,e,n){},zI.prototype.ji=function(t){},zI.prototype.Si=function(){},zI.prototype.ri=function(t){},zI),xI=(KI.prototype.ar=function(t,e,n){for(var r=n.cr,i=0;i<this.mutations.length;i++){var o=this.mutations[i];o.key.isEqual(t)&&(e=lw(o,e,r[i]))}return e},KI.prototype.ur=function(t,e){for(var n=0,r=this.baseMutations;n<r.length;n++){var i=r[n];i.key.isEqual(t)&&(e=fw(i,e,e,this.rr))}for(var o=e,s=0,a=this.mutations;s<a.length;s++){var u=a[s];u.key.isEqual(t)&&(e=fw(u,e,o,this.rr))}return e},KI.prototype.hr=function(n){var r=this,i=n;return this.mutations.forEach(function(t){var e=r.ur(t.key,n.get(t.key));e&&(i=i.rt(t.key,e))}),i},KI.prototype.keys=function(){return this.mutations.reduce(function(t,e){return t.add(e.key)},Nb())},KI.prototype.isEqual=function(t){return this.batchId===t.batchId&&Rm(this.mutations,t.mutations,pw)&&Rm(this.baseMutations,t.baseMutations,pw)},KI),LI=(HI.from=function(t,e,n){Qg(t.mutations.length===n.length);for(var r=Sb,i=t.mutations,o=0;o<i.length;o++)r=r.rt(i[o].key,n[o].version);return new HI(t,e,n,r)},HI),MI=(Object.defineProperty(GI.prototype,"readTime",{get:function(){return this.mr},set:function(t){this.mr=t},enumerable:!1,configurable:!0}),GI.prototype.Tr=function(t,e){this.Er(),this.readTime=e,this.dr.set(t.key,t)},GI.prototype.Ir=function(t,e){this.Er(),e&&(this.readTime=e),this.dr.set(t,null)},GI.prototype.Ar=function(t,e){this.Er();var n=this.dr.get(e);return void 0!==n?WE.resolve(n):this.Rr(t,e)},GI.prototype.getEntries=function(t,e){return this.Pr(t,e)},GI.prototype.apply=function(t){return this.Er(),this.wr=!0,this.gr(t)},GI.prototype.Er=function(){},GI),FI="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",UI=(WI.prototype.Vr=function(t){this.yr.push(t)},WI.prototype.pr=function(){this.yr.forEach(function(t){return t()})},WI),jI=(BI.prototype.Dr=function(e,n){var r=this;return this.vr.Cr(e,n).next(function(t){return r.Nr(e,n,t)})},BI.prototype.Nr=function(t,r,i){return this.br.Ar(t,r).next(function(t){for(var e=0,n=i;e<n.length;e++)t=n[e].ur(r,t);return t})},BI.prototype.Fr=function(t,e,i){var o=wb;return e.forEach(function(t,e){for(var n=0,r=i;n<r.length;n++)e=r[n].ur(t,e);o=o.rt(t,e)}),o},BI.prototype.$r=function(e,t){var n=this;return this.br.getEntries(e,t).next(function(t){return n.kr(e,t)})},BI.prototype.kr=function(r,i){var o=this;return this.vr.Mr(r,i).next(function(t){var e=o.Fr(r,i,t),n=wb;return e.forEach(function(t,e){e=e||new qw(t,Hm.min()),n=n.rt(t,e)}),n})},BI.prototype.Or=function(t,e,n){return r=e,im.F(r.path)&&null===r.collectionGroup&&0===r.filters.length?this.Lr(t,e.path):Zw(e)?this.Br(t,e,n):this.qr(t,e,n);var r},BI.prototype.Lr=function(t,e){return this.Dr(t,new im(e)).next(function(t){var e=Tb;return t instanceof Vw&&(e=e.rt(t.key,t)),e})},BI.prototype.Br=function(i,o,s){var a=this,u=o.collectionGroup,c=Tb;return this.Sr.Ur(i,u).next(function(t){return WE.forEach(t,function(t){var e,n,r=(e=o,n=t.child(u),new Ww(n,null,e.rn.slice(),e.filters.slice(),e.limit,e.on,e.startAt,e.endAt));return a.qr(i,r,s).next(function(t){t.forEach(function(t,e){c=c.rt(t,e)})})}).next(function(){return c})})},BI.prototype.qr=function(e,n,t){var h,l,r=this;return this.br.Or(e,n,t).next(function(t){return h=t,r.vr.Qr(e,n)}).next(function(t){return l=t,r.Wr(e,l,h).next(function(t){h=t;for(var e=0,n=l;e<n.length;e++)for(var r=n[e],i=0,o=r.mutations;i<o.length;i++){var s=o[i],a=s.key,u=h.get(a),c=fw(s,u,u,r.rr);h=c instanceof Vw?h.rt(a,c):h.remove(a)}})}).next(function(){return h.forEach(function(t,e){uE(n,e)||(h=h.remove(t))}),h})},BI.prototype.Wr=function(t,e,n){for(var r=Nb(),i=0,o=e;i<o.length;i++)for(var s=0,a=o[i].mutations;s<a.length;s++){var u=a[s];u instanceof mw&&null===n.get(u.key)&&(r=r.add(u.key))}var c=n;return this.br.getEntries(t,r).next(function(t){return t.forEach(function(t,e){null!==e&&e instanceof Vw&&(c=c.rt(t,e))}),c})},BI),VI=(qI.Gr=function(t,e){for(var n=Nb(),r=Nb(),i=0,o=e.docChanges;i<o.length;i++){var s=o[i];switch(s.type){case 0:n=n.add(s.doc.key);break;case 1:r=r.add(s.doc.key)}}return new qI(t,e.fromCache,n,r)},qI);function qI(t,e,n,r){this.targetId=t,this.fromCache=e,this.jr=n,this.Kr=r}function BI(t,e,n){this.br=t,this.vr=e,this.Sr=n}function WI(){this.yr=[]}function GI(){this.dr=new Wm(function(t){return t.toString()},function(t,e){return t.isEqual(e)}),this.wr=!1}function HI(t,e,n,r){this.batch=t,this.lr=e,this.cr=n,this._r=r}function KI(t,e,n,r){this.batchId=t,this.rr=e,this.baseMutations=n,this.mutations=r}function zI(){this.sr=new RI,this.ir={},this.fi=null,this.ni=null}function QI(t,e,n,r,i){this.window=t,this._n=e,this.persistenceKey=n,this.li=r,this._i=null,this.fi=null,this.ni=null,this.di=this.wi.bind(this),this.mi=new fb(Om),this.Ti=!1,this.Ei=[];var o=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.Ii=TI(this.persistenceKey,this.li),this.Ai="firestore_sequence_number_"+this.persistenceKey,this.mi=this.mi.rt(this.li,new RI),this.Ri=new RegExp("^firestore_clients_"+o+"_([^_]*)$"),this.Pi=new RegExp("^firestore_mutations_"+o+"_(\\d+)(?:_(.*))?$"),this.gi=new RegExp("^firestore_targets_"+o+"_(\\d+)$"),this.yi="firestore_online_state_"+this.persistenceKey,this.window.addEventListener("storage",this.di)}function YI(){this.activeTargetIds=Ab}function XI(t,e){this.clientId=t,this.onlineState=e}function $I(t,e){this.clientId=t,this.activeTargetIds=e}function JI(t,e,n){this.targetId=t,this.state=e,this.error=n}function ZI(t,e,n,r){this.user=t,this.batchId=e,this.state=n,this.error=r}function tT(t,e){var n=t[0],r=t[1],i=e[0],o=e[1],s=Om(n,i);return 0===s?Om(r,o):s}var eT=(oT.prototype.Yr=function(){return++this.Hr},oT.prototype.Jr=function(t){var e,n=[t,this.Yr()];this.buffer.size<this.zr?this.buffer=this.buffer.add(n):tT(n,e=this.buffer.last())<0&&(this.buffer=this.buffer.delete(e).add(n))},Object.defineProperty(oT.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!1,configurable:!0}),oT),nT={Xr:!1,Zr:0,eo:0,no:0},rT=(iT.oo=function(t){return new iT(t,iT.ao,iT.co)},iT);function iT(t,e,n){this.so=t,this.io=e,this.ro=n}function oT(t){this.zr=t,this.buffer=new bb(tT),this.Hr=0}rT.uo=-1,rT.ho=1048576,rT.lo=41943040,rT.ao=10,rT.co=1e3,rT._o=new rT(rT.lo,rT.ao,rT.co),rT.fo=new rT(rT.uo,0,0);var sT=(cT.prototype.start=function(t){this.do.params.so!==rT.uo&&this.To(t)},cT.prototype.stop=function(){this.mo&&(this.mo.cancel(),this.mo=null)},Object.defineProperty(cT.prototype,"Ti",{get:function(){return null!==this.mo},enumerable:!1,configurable:!0}),cT.prototype.To=function(n){var t=this,e=this.wo?3e5:6e4;Wg("LruGarbageCollector","Garbage collection scheduled in "+e+"ms"),this.mo=this.os.gn("lru_garbage_collection",e,function(){return Ks(t,void 0,void 0,function(){var e;return zs(this,function(t){switch(t.label){case 0:this.mo=null,this.wo=!0,t.label=1;case 1:return t.trys.push([1,3,,7]),[4,n.Eo(this.do)];case 2:return t.sent(),[3,7];case 3:return JE(e=t.sent())?(Wg("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e),[3,6]):[3,4];case 4:return[4,US(e)];case 5:t.sent(),t.label=6;case 6:return[3,7];case 7:return[4,this.To(n)];case 8:return t.sent(),[2]}})})})},cT),aT=(uT.prototype.Ao=function(t,e){return this.Io.Ro(t).next(function(t){return Math.floor(e/100*t)})},uT.prototype.Po=function(t,e){var n=this;if(0===e)return WE.resolve(EI.oi);var r=new eT(e);return this.Io.De(t,function(t){return r.Jr(t.sequenceNumber)}).next(function(){return n.Io.yo(t,function(t){return r.Jr(t)})}).next(function(){return r.maxValue})},uT.prototype.Vo=function(t,e,n){return this.Io.Vo(t,e,n)},uT.prototype.po=function(t,e){return this.Io.po(t,e)},uT.prototype.bo=function(e,n){var r=this;return this.params.so===rT.uo?(Wg("LruGarbageCollector","Garbage collection skipped; disabled"),WE.resolve(nT)):this.vo(e).next(function(t){return t<r.params.so?(Wg("LruGarbageCollector","Garbage collection skipped; Cache size "+t+" is lower than threshold "+r.params.so),nT):r.So(e,n)})},uT.prototype.vo=function(t){return this.Io.vo(t)},uT.prototype.So=function(e,n){var r,i,o,s,a,u,c,h=this,l=Date.now();return this.Ao(e,this.params.io).next(function(t){return i=t>h.params.ro?(Wg("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+h.params.ro+" from "+t),h.params.ro):t,s=Date.now(),h.Po(e,i)}).next(function(t){return r=t,a=Date.now(),h.Vo(e,r,n)}).next(function(t){return o=t,u=Date.now(),h.po(e,r)}).next(function(t){return c=Date.now(),Bg()<=eu.DEBUG&&Wg("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(s-l)+"ms\n\tDetermined least recently used "+i+" in "+(a-s)+"ms\n\tRemoved "+o+" targets in "+(u-a)+"ms\n\tRemoved "+t+" documents in "+(c-u)+"ms\nTotal Duration: "+(c-l)+"ms"),WE.resolve({Xr:!0,Zr:i,eo:o,no:t})})},uT);function uT(t,e){this.Io=t,this.params=e}function cT(t,e){this.do=t,this.os=e,this.wo=!1,this.mo=null}function hT(t){for(var e="",n=0;n<t.length;n++)0<e.length&&(e=lT(e)),e=function(t,e){for(var n=e,r=t.length,i=0;i<r;i++){var o=t.charAt(i);switch(o){case"\0":n+="";break;case"":n+="";break;default:n+=o}}return n}(t.get(n),e);return lT(e)}function lT(t){return t+""}function fT(t){var e=t.length;if(Qg(2<=e),2===e)return Qg(""===t.charAt(0)&&""===t.charAt(1)),em.g();for(var n=e-2,r=[],i="",o=0;o<e;){var s=t.indexOf("",o);switch((s<0||n<s)&&zg(),t.charAt(s+1)){case"":var a=t.substring(o,s),u=void 0;0===i.length?u=a:(u=i+=a,i=""),r.push(u);break;case"":i+=t.substring(o,s),i+="\0";break;case"":i+=t.substring(o,s+1);break;default:zg()}o=s+2}return new em(r)}var pT=function(t){this.Do=t};function dT(t,e){if(e.document)return n=t.Do,r=e.document,i=!!e.hasCommittedMutations,o=T_(n,r.name),s=__(r.updateTime),a=new Ow({mapValue:{fields:r.fields}}),new Vw(o,s,a,{hasCommittedMutations:!!i});var n,r,i,o,s,a;if(e.noDocument){var u=im.$(e.noDocument.path),c=bT(e.noDocument.readTime);return new qw(u,c,{hasCommittedMutations:!!e.hasCommittedMutations})}if(e.unknownDocument){var h=im.$(e.unknownDocument.path),l=bT(e.unknownDocument.version);return new Bw(h,l)}return zg()}function vT(t,e,n){var r,i,o=yT(n),s=e.key.path.h().A();if(e instanceof Vw){var a={name:I_(r=t.Do,(i=e).key),fields:i.sn().mapValue.fields,updateTime:m_(r,i.version.X())},u=e.hasCommittedMutations;return new JT(null,null,a,u,o,s)}if(e instanceof qw){var c=e.key.path.A(),h=mT(e.version),l=e.hasCommittedMutations;return new JT(null,new XT(c,h),null,l,o,s)}if(e instanceof Bw){var f=e.key.path.A(),p=mT(e.version);return new JT(new $T(f,p),null,null,!0,o,s)}return zg()}function yT(t){var e=t.X();return[e.seconds,e.nanoseconds]}function gT(t){var e=new Gm(t[0],t[1]);return Hm.Y(e)}function mT(t){var e=t.X();return new qT(e.seconds,e.nanoseconds)}function bT(t){var e=new Gm(t.seconds,t.nanoseconds);return Hm.Y(e)}function _T(e,t){var n=(t.baseMutations||[]).map(function(t){return R_(e.Do,t)}),r=t.mutations.map(function(t){return R_(e.Do,t)}),i=Gm.fromMillis(t.localWriteTimeMs);return new xI(t.batchId,i,n,r)}function wT(t){var e,n=bT(t.readTime),r=void 0!==t.lastLimboFreeSnapshotVersion?bT(t.lastLimboFreeSnapshotVersion):Hm.min(),i=void 0!==t.query.documents?(Qg(1===(e=t.query).documents.length),eE(Qw(C_(e.documents[0])))):function(t){var e,n=C_(t.parent),r=t.structuredQuery,i=r.from?r.from.length:0,o=null;0<i&&(Qg(1===i),(e=r.from[0]).allDescendants?o=e.collectionId:n=n.child(e.collectionId));var s=[];r.where&&(s=function t(e){return e?void 0!==e.unaryFilter?[function(t){switch(t.unaryFilter.op){case"IS_NAN":var e=F_(t.unaryFilter.field);return lE.create(e,"==",{doubleValue:NaN});case"IS_NULL":var n=F_(t.unaryFilter.field);return lE.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=F_(t.unaryFilter.field);return lE.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=F_(t.unaryFilter.field);return lE.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return zg()}}(e)]:void 0!==e.fieldFilter?[(n=e,lE.create(F_(n.fieldFilter.field),function(){switch(n.fieldFilter.op){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return zg()}}(),n.fieldFilter.value))]:void 0!==e.compositeFilter?e.compositeFilter.filters.map(t).reduce(function(t,e){return t.concat(e)}):zg():[];var n}(r.where));var a=[];r.orderBy&&(a=r.orderBy.map(function(t){return new jE(F_((e=t).field),function(){switch(e.direction){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}());var e}));var u,c,h=null;r.limit&&(u=r.limit,h=$m(c="object"==typeof u?u.value:u)?null:c);var l=null;r.startAt&&(l=L_(r.startAt));var f=null;return r.endAt&&(f=L_(r.endAt)),eE(zw(n,o,a,s,h,"F",l,f))}(t.query);return new ub(i,t.targetId,0,t.lastListenSequenceNumber,n,r,Dm.fromBase64String(t.resumeToken))}function ET(t,e){var n=mT(e.et),r=mT(e.lastLimboFreeSnapshotVersion),i=(ib(e.target)?P_:D_)(t.Do,e.target),o=e.resumeToken.toBase64();return new tS(e.targetId,nb(e.target),n,o,e.sequenceNumber,r,i)}var IT=(TT.Fo=function(t,e,n,r){return Qg(""!==t.uid),new TT(t.Xs()?t.uid:"",e,n,r)},TT.prototype.xo=function(t){var r=!0,e=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return NT(t).ss({index:zT.userMutationsIndex,range:e},function(t,e,n){r=!1,n.done()}).next(function(){return r})},TT.prototype.$o=function(d,v,y,g){var m=this,b=AT(d),_=NT(d);return _.add({}).next(function(t){Qg("number"==typeof t);for(var e,n,r,i,o,s=new xI(t,v,y,g),a=(e=m.serializer,n=m.userId,i=(r=s).baseMutations.map(function(t){return O_(e.Do,t)}),o=r.mutations.map(function(t){return O_(e.Do,t)}),new zT(n,r.batchId,r.rr.toMillis(),i,o)),u=[],c=new bb(function(t,e){return Om(t.R(),e.R())}),h=0,l=g;h<l.length;h++){var f=l[h],p=QT.key(m.userId,f.key.path,t),c=c.add(f.key.path.h());u.push(_.put(a)),u.push(b.put(p,QT.PLACEHOLDER))}return c.forEach(function(t){u.push(m.Sr.ko(d,t))}),d.Vr(function(){m.No[t]=s.keys()}),WE.xn(u).next(function(){return s})})},TT.prototype.Mo=function(t,e){var n=this;return NT(t).get(e).next(function(t){return t?(Qg(t.userId===n.userId),_T(n.serializer,t)):null})},TT.prototype.Oo=function(t,n){var r=this;return this.No[n]?WE.resolve(this.No[n]):this.Mo(t,n).next(function(t){if(t){var e=t.keys();return r.No[n]=e}return null})},TT.prototype.Lo=function(t,e){var r=this,i=e+1,n=IDBKeyRange.lowerBound([this.userId,i]),o=null;return NT(t).ss({index:zT.userMutationsIndex,range:n},function(t,e,n){e.userId===r.userId&&(Qg(e.batchId>=i),o=_T(r.serializer,e)),n.done()}).next(function(){return o})},TT.prototype.Bo=function(t){var e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),r=-1;return NT(t).ss({index:zT.userMutationsIndex,range:e,reverse:!0},function(t,e,n){r=e.batchId,n.done()}).next(function(){return r})},TT.prototype.qo=function(t){var e=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return NT(t).Zn(zT.userMutationsIndex,n).next(function(t){return t.map(function(t){return _T(e.serializer,t)})})},TT.prototype.Cr=function(a,u){var c=this,t=QT.prefixForPath(this.userId,u.path),e=IDBKeyRange.lowerBound(t),h=[];return AT(a).ss({range:e},function(t,e,n){var r=t[0],i=t[1],o=t[2],s=fT(i);if(r===c.userId&&u.path.isEqual(s))return NT(a).get(o).next(function(t){if(!t)throw zg();Qg(t.userId===c.userId),h.push(_T(c.serializer,t))});n.done()}).next(function(){return h})},TT.prototype.Mr=function(r,t){var u=this,c=new bb(Om),i=[];return t.forEach(function(a){var t=QT.prefixForPath(u.userId,a.path),e=IDBKeyRange.lowerBound(t),n=AT(r).ss({range:e},function(t,e,n){var r=t[0],i=t[1],o=t[2],s=fT(i);r===u.userId&&a.path.isEqual(s)?c=c.add(o):n.done()});i.push(n)}),WE.xn(i).next(function(){return u.Uo(r,c)})},TT.prototype.Qr=function(t,e){var a=this,u=e.path,c=u.length+1,n=QT.prefixForPath(this.userId,u),r=IDBKeyRange.lowerBound(n),h=new bb(Om);return AT(t).ss({range:r},function(t,e,n){var r=t[0],i=t[1],o=t[2],s=fT(i);r===a.userId&&u.T(s)?s.length===c&&(h=h.add(o)):n.done()}).next(function(){return a.Uo(t,h)})},TT.prototype.Uo=function(e,t){var n=this,r=[],i=[];return t.forEach(function(t){i.push(NT(e).get(t).next(function(t){if(null===t)throw zg();Qg(t.userId===n.userId),r.push(_T(n.serializer,t))}))}),WE.xn(i).next(function(){return r})},TT.prototype.Qo=function(e,n){var r=this;return CT(e.Wo,this.userId,n).next(function(t){return e.Vr(function(){r.jo(n.batchId)}),WE.forEach(t,function(t){return r.Co.Ko(e,t)})})},TT.prototype.jo=function(t){delete this.No[t]},TT.prototype.Go=function(n){var o=this;return this.xo(n).next(function(t){if(!t)return WE.resolve();var e=IDBKeyRange.lowerBound(QT.prefixForUser(o.userId)),i=[];return AT(n).ss({range:e},function(t,e,n){var r;t[0]===o.userId?(r=fT(t[1]),i.push(r)):n.done()}).next(function(){Qg(0===i.length)})})},TT.prototype.zo=function(t,e){return ST(t,this.userId,e)},TT.prototype.Ho=function(t){var e=this;return kT(t).get(this.userId).next(function(t){return t||new KT(e.userId,-1,"")})},TT);function TT(t,e,n,r){this.userId=t,this.serializer=e,this.Sr=n,this.Co=r,this.No={}}function ST(t,o,e){var n=QT.prefixForPath(o,e.path),s=n[1],r=IDBKeyRange.lowerBound(n),a=!1;return AT(t).ss({range:r,ns:!0},function(t,e,n){var r=t[0],i=t[1];t[2],r===o&&i===s&&(a=!0),n.done()}).next(function(){return a})}function CT(t,e,n){var r=t.store(zT.store),i=t.store(QT.store),o=[],s=IDBKeyRange.only(n.batchId),a=0,u=r.ss({range:s},function(t,e,n){return a++,n.delete()});o.push(u.next(function(){Qg(1===a)}));for(var c=[],h=0,l=n.mutations;h<l.length;h++){var f=l[h],p=QT.key(e,f.key.path,n.batchId);o.push(i.delete(p)),c.push(f.key)}return WE.xn(o).next(function(){return c})}function NT(t){return _S.Un(t,zT.store)}function AT(t){return _S.Un(t,QT.store)}function kT(t){return _S.Un(t,KT.store)}var OT,RT=(PT.prototype.Tr=function(t,e,n){return xT(t).put(LT(e),n)},PT.prototype.Ir=function(t,e){var n=xT(t),r=LT(e);return n.delete(r)},PT.prototype.updateMetadata=function(e,n){var r=this;return this.getMetadata(e).next(function(t){return t.byteSize+=n,r.Yo(e,t)})},PT.prototype.Ar=function(t,e){var n=this;return xT(t).get(LT(e)).next(function(t){return n.Jo(t)})},PT.prototype.Xo=function(t,e){var n=this;return xT(t).get(LT(e)).next(function(t){var e=n.Jo(t);return e?{Zo:e,size:MT(t)}:null})},PT.prototype.getEntries=function(t,e){var r=this,i=wb;return this.ta(t,e,function(t,e){var n=r.Jo(e);i=i.rt(t,n)}).next(function(){return i})},PT.prototype.ea=function(t,e){var r=this,i=wb,o=new fb(im.i);return this.ta(t,e,function(t,e){var n=r.Jo(e);o=n?(i=i.rt(t,n),o.rt(t,MT(e))):(i=i.rt(t,null),o.rt(t,0))}).next(function(){return{na:i,sa:o}})},PT.prototype.ta=function(t,e,i){if(e.m())return WE.resolve();var n=IDBKeyRange.bound(e.first().path.A(),e.last().path.A()),o=e.lt(),s=o.Et();return xT(t).ss({range:n},function(t,e,n){for(var r=im.$(t);s&&im.i(s,r)<0;)i(s,null),s=o.Et();s&&s.isEqual(r)&&(i(s,e),s=o.It()?o.Et():null),s?n.Jn(s.path.A()):n.done()}).next(function(){for(;s;)i(s,null),s=o.It()?o.Et():null})},PT.prototype.Or=function(t,i,e){var n,r,o,s=this,a=Tb,u=i.path.length+1,c={};return e.isEqual(Hm.min())?(n=i.path.A(),c.range=IDBKeyRange.lowerBound(n)):(r=i.path.A(),o=yT(e),c.range=IDBKeyRange.lowerBound([r,o],!0),c.index=JT.collectionReadTimeIndex),xT(t).ss(c,function(t,e,n){var r;t.length===u&&(r=dT(s.serializer,e),i.path.T(r.key.path)?r instanceof Vw&&uE(i,r)&&(a=a.rt(r.key,r)):n.done())}).next(function(){return a})},PT.prototype.ia=function(t,e){var r=this,i=wb,o=yT(e),n=xT(t),s=IDBKeyRange.lowerBound(o,!0);return n.ss({index:JT.readTimeIndex,range:s},function(t,e){var n=dT(r.serializer,e);i=i.rt(n.key,n),o=e.readTime}).next(function(){return{ra:i,readTime:gT(o)}})},PT.prototype.oa=function(t){var e=xT(t),r=Hm.min();return e.ss({index:JT.readTimeIndex,reverse:!0},function(t,e,n){e.readTime&&(r=gT(e.readTime)),n.done()}).next(function(){return r})},PT.prototype.aa=function(t){return new PT.ca(this,!!t&&t.ua)},PT.prototype.ha=function(t){return this.getMetadata(t).next(function(t){return t.byteSize})},PT.prototype.getMetadata=function(t){return DT(t).get(ZT.key).next(function(t){return Qg(!!t),t})},PT.prototype.Yo=function(t,e){return DT(t).put(ZT.key,e)},PT.prototype.Jo=function(t){if(t){var e=dT(this.serializer,t);return e instanceof qw&&e.version.isEqual(Hm.min())?null:e}return null},PT);function PT(t,e){this.serializer=t,this.Sr=e}function DT(t){return _S.Un(t,ZT.store)}function xT(t){return _S.Un(t,JT.store)}function LT(t){return t.path.A()}function MT(t){var e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw zg();e=t.noDocument}return JSON.stringify(e).length}function FT(t,e){var n=this;return(n=OT.call(this)||this).la=t,n.ua=e,n._a=new Wm(function(t){return t.toString()},function(t,e){return t.isEqual(e)}),n}RT.ca=(Gs(FT,OT=MI),FT.prototype.gr=function(s){var a=this,u=[],c=0,h=new bb(function(t,e){return Om(t.R(),e.R())});return this.dr.forEach(function(t,e){var n,r,i,o=a._a.get(t);e?(n=vT(a.la.serializer,e,a.readTime),h=h.add(t.path.h()),r=MT(n),c+=r-o,u.push(a.la.Tr(s,t,n))):(c-=o,a.ua?(i=vT(a.la.serializer,new qw(t,Hm.min()),a.readTime),u.push(a.la.Tr(s,t,i))):u.push(a.la.Ir(s,t)))}),h.forEach(function(t){u.push(a.la.Sr.ko(s,t))}),u.push(this.la.updateMetadata(s,c)),WE.xn(u)},FT.prototype.Rr=function(t,e){var n=this;return this.la.Xo(t,e).next(function(t){return null===t?(n._a.set(e,0),null):(n._a.set(e,t.size),t.Zo)})},FT.prototype.Pr=function(t,e){var n=this;return this.la.ea(t,e).next(function(t){var e=t.na;return t.sa.forEach(function(t,e){n._a.set(t,e)}),e})},FT);var UT=(HT.prototype.ko=function(t,e){return this.fa.add(e),WE.resolve()},HT.prototype.Ur=function(t,e){return WE.resolve(this.fa.getEntries(e))},HT),jT=(GT.prototype.add=function(t){var e=t._(),n=t.h(),r=this.index[e]||new bb(em.i),i=!r.has(n);return this.index[e]=r.add(n),i},GT.prototype.has=function(t){var e=t._(),n=t.h(),r=this.index[e];return r&&r.has(n)},GT.prototype.getEntries=function(t){return(this.index[t]||new bb(em.i)).A()},GT),VT=(WT.prototype.createOrUpgrade=function(n,r,t,e){var i=this;Qg(t<e&&0<=t&&e<=10);var o,s=new ZE(r);t<1&&1<=e&&(n.createObjectStore(BT.store),(o=n).createObjectStore(KT.store,{keyPath:KT.keyPath}),o.createObjectStore(zT.store,{keyPath:zT.keyPath,autoIncrement:!0}).createIndex(zT.userMutationsIndex,zT.userMutationsKeyPath,{unique:!0}),o.createObjectStore(QT.store),iS(n),n.createObjectStore(JT.store));var a,u=WE.resolve();return t<3&&3<=e&&(0!==t&&((a=n).deleteObjectStore(eS.store),a.deleteObjectStore(tS.store),a.deleteObjectStore(nS.store),iS(n)),u=u.next(function(){return t=s.store(nS.store),e=new nS(0,0,Hm.min().X(),0),t.put(nS.key,e);var t,e})),t<4&&4<=e&&(0!==t&&(u=u.next(function(){return r=n,(i=s).store(zT.store).Zn().next(function(t){r.deleteObjectStore(zT.store),r.createObjectStore(zT.store,{keyPath:zT.keyPath,autoIncrement:!0}).createIndex(zT.userMutationsIndex,zT.userMutationsKeyPath,{unique:!0});var e=i.store(zT.store),n=t.map(function(t){return e.put(t)});return WE.xn(n)});var r,i})),u=u.next(function(){n.createObjectStore(oS.store,{keyPath:oS.keyPath})})),t<5&&5<=e&&(u=u.next(function(){return i.removeAcknowledgedMutations(s)})),t<6&&6<=e&&(u=u.next(function(){return n.createObjectStore(ZT.store),i.addDocumentGlobal(s)})),t<7&&7<=e&&(u=u.next(function(){return i.ensureSequenceNumbers(s)})),t<8&&8<=e&&(u=u.next(function(){return i.createCollectionParentIndex(n,s)})),t<9&&9<=e&&(u=u.next(function(){var t,e;(e=n).objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges"),(t=r.objectStore(JT.store)).createIndex(JT.readTimeIndex,JT.readTimeIndexPath,{unique:!1}),t.createIndex(JT.collectionReadTimeIndex,JT.collectionReadTimeIndexPath,{unique:!1})})),t<10&&10<=e&&(u=u.next(function(){return i.rewriteCanonicalIds(s)})),u},WT.prototype.addDocumentGlobal=function(e){var n=0;return e.store(JT.store).ss(function(t,e){n+=MT(e)}).next(function(){var t=new ZT(n);return e.store(ZT.store).put(ZT.key,t)})},WT.prototype.removeAcknowledgedMutations=function(r){var i=this,t=r.store(KT.store),e=r.store(zT.store);return t.Zn().next(function(t){return WE.forEach(t,function(n){var t=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return e.Zn(zT.userMutationsIndex,t).next(function(t){return WE.forEach(t,function(t){Qg(t.userId===n.userId);var e=_T(i.serializer,t);return CT(r,n.userId,e).next(function(){})})})})})},WT.prototype.ensureSequenceNumbers=function(t){var s=t.store(eS.store),e=t.store(JT.store);return t.store(nS.store).get(nS.key).next(function(i){var o=[];return e.ss(function(t,e){var n=new em(t),r=[0,hT(n)];o.push(s.get(r).next(function(t){return t?WE.resolve():s.put(new eS(0,hT(n),i.highestListenSequenceNumber))}))}).next(function(){return WE.xn(o)})})},WT.prototype.createCollectionParentIndex=function(t,e){t.createObjectStore(rS.store,{keyPath:rS.keyPath});function i(t){if(o.add(t)){var e=t._(),n=t.h();return r.put({collectionId:e,parent:hT(n)})}}var r=e.store(rS.store),o=new jT;return e.store(JT.store).ss({ns:!0},function(t,e){var n=new em(t);return i(n.h())}).next(function(){return e.store(QT.store).ss({ns:!0},function(t,e){t[0];var n=t[1],r=(t[2],fT(n));return i(r.h())})})},WT.prototype.rewriteCanonicalIds=function(t){var i=this,o=t.store(tS.store);return o.ss(function(t,e){var n=wT(e),r=ET(i.serializer,n);return o.put(r)})},WT),qT=function(t,e){this.seconds=t,this.nanoseconds=e},BT=function(t,e,n){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=n};function WT(t){this.serializer=t}function GT(){this.index={}}function HT(){this.fa=new jT}BT.store="owner",BT.key="owner";var KT=function(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n};KT.store="mutationQueues",KT.keyPath="userId";var zT=function(t,e,n,r,i){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i};zT.store="mutations",zT.keyPath="batchId",zT.userMutationsIndex="userMutationsIndex",zT.userMutationsKeyPath=["userId","batchId"];var QT=(YT.prefixForUser=function(t){return[t]},YT.prefixForPath=function(t,e){return[t,hT(e)]},YT.key=function(t,e,n){return[t,hT(e),n]},YT);function YT(){}QT.store="documentMutations",QT.PLACEHOLDER=new QT;var XT=function(t,e){this.path=t,this.readTime=e},$T=function(t,e){this.path=t,this.version=e},JT=function(t,e,n,r,i,o){this.unknownDocument=t,this.noDocument=e,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=o};JT.store="remoteDocuments",JT.readTimeIndex="readTimeIndex",JT.readTimeIndexPath="readTime",JT.collectionReadTimeIndex="collectionReadTimeIndex",JT.collectionReadTimeIndexPath=["parentPath","readTime"];var ZT=function(t){this.byteSize=t};ZT.store="remoteDocumentGlobal",ZT.key="remoteDocumentGlobalKey";var tS=function(t,e,n,r,i,o,s){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=o,this.query=s};tS.store="targets",tS.keyPath="targetId",tS.queryTargetsIndexName="queryTargetsIndex",tS.queryTargetsKeyPath=["canonicalId","targetId"];var eS=function(t,e,n){this.targetId=t,this.path=e,this.sequenceNumber=n};eS.store="targetDocuments",eS.keyPath=["targetId","path"],eS.documentTargetsIndex="documentTargetsIndex",eS.documentTargetsKeyPath=["path","targetId"];var nS=function(t,e,n,r){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n,this.targetCount=r};nS.key="targetGlobalKey",nS.store="targetGlobal";var rS=function(t,e){this.collectionId=t,this.parent=e};function iS(t){t.createObjectStore(eS.store,{keyPath:eS.keyPath}).createIndex(eS.documentTargetsIndex,eS.documentTargetsKeyPath,{unique:!0}),t.createObjectStore(tS.store,{keyPath:tS.keyPath}).createIndex(tS.queryTargetsIndexName,tS.queryTargetsKeyPath,{unique:!0}),t.createObjectStore(nS.store)}rS.store="collectionParents",rS.keyPath=["collectionId","parent"];var oS=function(t,e,n,r){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=n,this.inForeground=r};oS.store="clientMetadata",oS.keyPath="clientId";var sS=$s($s($s([KT.store,zT.store,QT.store,JT.store,tS.store,BT.store,nS.store,eS.store],[oS.store]),[ZT.store]),[rS.store]),aS=(uS.prototype.ko=function(t,e){var n=this;if(this.da.has(e))return WE.resolve();var r=e._(),i=e.h();t.Vr(function(){n.da.add(e)});var o={collectionId:r,parent:hT(i)};return cS(t).put(o)},uS.prototype.Ur=function(t,i){var o=[],e=IDBKeyRange.bound([i,""],[Pm(i),""],!1,!0);return cS(t).Zn(e).next(function(t){for(var e=0,n=t;e<n.length;e++){var r=n[e];if(r.collectionId!==i)break;o.push(fT(r.parent))}return o})},uS);function uS(){this.da=new jT}function cS(t){return _S.Un(t,rS.store)}var hS=(pS.prototype.next=function(){return this.wa+=2,this.wa},pS.ma=function(){return new pS(0)},pS.Ta=function(){return new pS(-1)},pS),lS=(fS.prototype.Ea=function(n){var r=this;return this.Ia(n).next(function(t){var e=new hS(t.highestTargetId);return t.highestTargetId=e.next(),r.Aa(n,t).next(function(){return t.highestTargetId})})},fS.prototype.Ra=function(t){return this.Ia(t).next(function(t){return Hm.Y(new Gm(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))})},fS.prototype.Pa=function(t){return this.Ia(t).next(function(t){return t.highestListenSequenceNumber})},fS.prototype.ga=function(e,n,r){var i=this;return this.Ia(e).next(function(t){return t.highestListenSequenceNumber=n,r&&(t.lastRemoteSnapshotVersion=r.X()),n>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=n),i.Aa(e,t)})},fS.prototype.ya=function(e,n){var r=this;return this.Va(e,n).next(function(){return r.Ia(e).next(function(t){return t.targetCount+=1,r.pa(n,t),r.Aa(e,t)})})},fS.prototype.ba=function(t,e){return this.Va(t,e)},fS.prototype.va=function(e,t){var n=this;return this.Sa(e,t.targetId).next(function(){return dS(e).delete(t.targetId)}).next(function(){return n.Ia(e)}).next(function(t){return Qg(0<t.targetCount),--t.targetCount,n.Aa(e,t)})},fS.prototype.Vo=function(r,i,o){var s=this,a=0,u=[];return dS(r).ss(function(t,e){var n=wT(e);n.sequenceNumber<=i&&null===o.get(n.targetId)&&(a++,u.push(s.va(r,n)))}).next(function(){return WE.xn(u)}).next(function(){return a})},fS.prototype.De=function(t,r){return dS(t).ss(function(t,e){var n=wT(e);r(n)})},fS.prototype.Ia=function(t){return vS(t).get(nS.key).next(function(t){return Qg(null!==t),t})},fS.prototype.Aa=function(t,e){return vS(t).put(nS.key,e)},fS.prototype.Va=function(t,e){return dS(t).put(ET(this.serializer,e))},fS.prototype.pa=function(t,e){var n=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,n=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,n=!0),n},fS.prototype.Da=function(t){return this.Ia(t).next(function(t){return t.targetCount})},fS.prototype.Ca=function(t,i){var e=nb(i),n=IDBKeyRange.bound([e,Number.NEGATIVE_INFINITY],[e,Number.POSITIVE_INFINITY]),o=null;return dS(t).ss({range:n,index:tS.queryTargetsIndexName},function(t,e,n){var r=wT(e);rb(i,r.target)&&(o=r,n.done())}).next(function(){return o})},fS.prototype.Na=function(n,t,r){var i=this,o=[],s=yS(n);return t.forEach(function(t){var e=hT(t.path);o.push(s.put(new eS(r,e))),o.push(i.Co.Fa(n,r,t))}),WE.xn(o)},fS.prototype.xa=function(n,t,r){var i=this,o=yS(n);return WE.forEach(t,function(t){var e=hT(t.path);return WE.xn([o.delete([r,e]),i.Co.$a(n,r,t)])})},fS.prototype.Sa=function(t,e){var n=yS(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return n.delete(r)},fS.prototype.ka=function(t,e){var n=IDBKeyRange.bound([e],[e+1],!1,!0),r=yS(t),o=Nb();return r.ss({range:n,ns:!0},function(t,e,n){var r=fT(t[1]),i=new im(r);o=o.add(i)}).next(function(){return o})},fS.prototype.zo=function(t,e){var n=hT(e.path),r=IDBKeyRange.bound([n],[Pm(n)],!1,!0),i=0;return yS(t).ss({index:eS.documentTargetsIndex,ns:!0,range:r},function(t,e,n){var r=t[0];t[1],0!==r&&(i++,n.done())}).next(function(){return 0<i})},fS.prototype.qe=function(t,e){return dS(t).get(e).next(function(t){return t?wT(t):null})},fS);function fS(t,e){this.Co=t,this.serializer=e}function pS(t){this.wa=t}function dS(t){return _S.Un(t,tS.store)}function vS(t){return _S.Un(t,nS.store)}function yS(t){return _S.Un(t,eS.store)}var gS,mS="Failed to obtain exclusive access to the persistence layer. To allow shared access, make sure to invoke `enablePersistence()` with `synchronizeTabs:true` in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",bS=(Gs(ES,gS=UI),ES),_S=(wS.Un=function(t,e){if(t instanceof bS)return GE.Un(t.Wo,e);throw zg()},wS.prototype.start=function(){var e=this;return this.Ja().then(function(){if(!e.isPrimary&&!e.allowTabSynchronization)throw new jg(Ug.FAILED_PRECONDITION,mS);return e.Xa(),e.Za(),e.tc(),e.runTransaction("getHighestListenSequenceNumber","readonly",function(t){return e.Ha.Pa(t)})}).then(function(t){e.Ba=new EI(t,e.Oa)}).then(function(){e.qa=!0}).catch(function(t){return e.za&&e.za.close(),Promise.reject(t)})},wS.prototype.ec=function(n){var t=this;return this.Ka=function(e){return Ks(t,void 0,void 0,function(){return zs(this,function(t){return this.Ti?[2,n(e)]:[2]})})},n(this.isPrimary)},wS.prototype.nc=function(n){var t=this;this.za.jn(function(e){return Ks(t,void 0,void 0,function(){return zs(this,function(t){switch(t.label){case 0:return null===e.newVersion?[4,n()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})})},wS.prototype.sc=function(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this._n.ds(function(){return Ks(e,void 0,void 0,function(){return zs(this,function(t){switch(t.label){case 0:return this.Ti?[4,this.Ja()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})}))},wS.prototype.Ja=function(){var n=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",function(e){return TS(e).put(new oS(n.clientId,Date.now(),n.networkEnabled,n.inForeground)).next(function(){if(n.isPrimary)return n.ic(e).next(function(t){t||(n.isPrimary=!1,n._n.Ds(function(){return n.Ka(!1)}))})}).next(function(){return n.rc(e)}).next(function(t){return n.isPrimary&&!t?n.oc(e).next(function(){return!1}):!!t&&n.ac(e).next(function(){return!0})})}).catch(function(t){if(JE(t))return Wg("IndexedDbPersistence","Failed to extend owner lease: ",t),n.isPrimary;if(!n.allowTabSynchronization)throw t;return Wg("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1}).then(function(t){n.isPrimary!==t&&n._n.Ds(function(){return n.Ka(t)}),n.isPrimary=t})},wS.prototype.ic=function(t){var e=this;return IS(t).get(BT.key).next(function(t){return WE.resolve(e.cc(t))})},wS.prototype.uc=function(t){return TS(t).delete(this.clientId)},wS.prototype.hc=function(){return Ks(this,void 0,void 0,function(){var e,n,r,i,o=this;return zs(this,function(t){switch(t.label){case 0:return!this.isPrimary||this.lc(this.ja,18e5)?[3,2]:(this.ja=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",function(t){var r=wS.Un(t,oS.store);return r.Zn().next(function(t){var e=o._c(t,18e5),n=t.filter(function(t){return-1===e.indexOf(t)});return WE.forEach(n,function(t){return r.delete(t.clientId)}).next(function(){return n})})}).catch(function(){return[]})]);case 1:if(e=t.sent(),this.Ya)for(n=0,r=e;n<r.length;n++)i=r[n],this.Ya.removeItem(this.fc(i.clientId));t.label=2;case 2:return[2]}})})},wS.prototype.tc=function(){var t=this;this.Wa=this._n.gn("client_metadata_refresh",4e3,function(){return t.Ja().then(function(){return t.hc()}).then(function(){return t.tc()})})},wS.prototype.cc=function(t){return!!t&&t.ownerId===this.clientId},wS.prototype.rc=function(e){var i=this;return this.La?WE.resolve(!0):IS(e).get(BT.key).next(function(t){if(null!==t&&i.lc(t.leaseTimestampMs,5e3)&&!i.dc(t.ownerId)){if(i.cc(t)&&i.networkEnabled)return!0;if(!i.cc(t)){if(!t.allowTabSynchronization)throw new jg(Ug.FAILED_PRECONDITION,mS);return!1}}return!(!i.networkEnabled||!i.inForeground)||TS(e).Zn().next(function(t){return void 0===i._c(t,5e3).find(function(t){if(i.clientId!==t.clientId){var e=!i.networkEnabled&&t.networkEnabled,n=!i.inForeground&&t.inForeground,r=i.networkEnabled===t.networkEnabled;if(e||n&&r)return!0}return!1})})}).next(function(t){return i.isPrimary!==t&&Wg("IndexedDbPersistence","Client "+(t?"is":"is not")+" eligible for a primary lease."),t})},wS.prototype.Si=function(){return Ks(this,void 0,void 0,function(){var n=this;return zs(this,function(t){switch(t.label){case 0:return this.qa=!1,this.wc(),this.Wa&&(this.Wa.cancel(),this.Wa=null),this.mc(),this.Tc(),[4,this.za.runTransaction("readwrite",[BT.store,oS.store],function(t){var e=new bS(t,EI.oi);return n.oc(e).next(function(){return n.uc(e)})})];case 1:return t.sent(),this.za.close(),this.Ec(),[2]}})})},wS.prototype._c=function(t,e){var n=this;return t.filter(function(t){return n.lc(t.updateTimeMs,e)&&!n.dc(t.clientId)})},wS.prototype.Vi=function(){var e=this;return this.runTransaction("getActiveClients","readonly",function(t){return TS(t).Zn().next(function(t){return e._c(t,18e5).map(function(t){return t.clientId})})})},Object.defineProperty(wS.prototype,"Ti",{get:function(){return this.qa},enumerable:!1,configurable:!0}),wS.prototype.Ic=function(t){return IT.Fo(t,this.serializer,this.Sr,this.Co)},wS.prototype.Ac=function(){return this.Ha},wS.prototype.Rc=function(){return this.br},wS.prototype.Pc=function(){return this.Sr},wS.prototype.runTransaction=function(e,n,r){var i=this;Wg("IndexedDbPersistence","Starting transaction:",e);var o,t="readonly"===n?"readonly":"readwrite";return this.za.runTransaction(t,sS,function(t){return o=new bS(t,i.Ba?i.Ba.next():EI.oi),"readwrite-primary"===n?i.ic(o).next(function(t){return!!t||i.rc(o)}).next(function(t){if(!t)throw Gg("Failed to obtain primary lease for action '"+e+"'."),i.isPrimary=!1,i._n.Ds(function(){return i.Ka(!1)}),new jg(Ug.FAILED_PRECONDITION,FI);return r(o)}).next(function(t){return i.ac(o).next(function(){return t})}):i.gc(o).next(function(){return r(o)})}).then(function(t){return o.pr(),t})},wS.prototype.gc=function(t){var e=this;return IS(t).get(BT.key).next(function(t){if(null!==t&&e.lc(t.leaseTimestampMs,5e3)&&!e.dc(t.ownerId)&&!e.cc(t)&&!(e.La||e.allowTabSynchronization&&t.allowTabSynchronization))throw new jg(Ug.FAILED_PRECONDITION,mS)})},wS.prototype.ac=function(t){var e=new BT(this.clientId,this.allowTabSynchronization,Date.now());return IS(t).put(BT.key,e)},wS.On=function(){return GE.On()},wS.prototype.oc=function(t){var e=this,n=IS(t);return n.get(BT.key).next(function(t){return e.cc(t)?(Wg("IndexedDbPersistence","Releasing primary lease."),n.delete(BT.key)):WE.resolve()})},wS.prototype.lc=function(t,e){var n=Date.now();return!(t<n-e||n<t&&(Gg("Detected an update time that is in the future: "+t+" > "+n),1))},wS.prototype.Xa=function(){var t=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Qa=function(){t._n.ds(function(){return t.inForeground="visible"===t.document.visibilityState,t.Ja()})},this.document.addEventListener("visibilitychange",this.Qa),this.inForeground="visible"===this.document.visibilityState)},wS.prototype.mc=function(){this.Qa&&(this.document.removeEventListener("visibilitychange",this.Qa),this.Qa=null)},wS.prototype.Za=function(){var t,e=this;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.Ua=function(){e.wc(),e._n.ds(function(){return e.Si()})},this.window.addEventListener("unload",this.Ua))},wS.prototype.Tc=function(){this.Ua&&(this.window.removeEventListener("unload",this.Ua),this.Ua=null)},wS.prototype.dc=function(t){var e;try{var n=null!==(null===(e=this.Ya)||void 0===e?void 0:e.getItem(this.fc(t)));return Wg("IndexedDbPersistence","Client '"+t+"' "+(n?"is":"is not")+" zombied in LocalStorage"),n}catch(t){return Gg("IndexedDbPersistence","Failed to get zombied client id.",t),!1}},wS.prototype.wc=function(){if(this.Ya)try{this.Ya.setItem(this.fc(this.clientId),String(Date.now()))}catch(t){Gg("Failed to set zombie client id.",t)}},wS.prototype.Ec=function(){if(this.Ya)try{this.Ya.removeItem(this.fc(this.clientId))}catch(t){}},wS.prototype.fc=function(t){return"firestore_zombie_"+this.persistenceKey+"_"+t},wS);function wS(t,e,n,r,i,o,s,a,u,c){if(this.allowTabSynchronization=t,this.persistenceKey=e,this.clientId=n,this._n=i,this.window=o,this.document=s,this.Oa=u,this.La=c,this.Ba=null,this.qa=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Ua=null,this.inForeground=!1,this.Qa=null,this.Wa=null,this.ja=Number.NEGATIVE_INFINITY,this.Ka=function(t){return Promise.resolve()},!wS.On())throw new jg(Ug.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.Co=new SS(this,r),this.Ga=e+"main",this.serializer=new pT(a),this.za=new GE(this.Ga,10,new VT(this.serializer)),this.Ha=new lS(this.Co,this.serializer),this.Sr=new aS,this.br=new RT(this.serializer,this.Sr),this.window&&this.window.localStorage?this.Ya=this.window.localStorage:(this.Ya=null,!1===c&&Gg("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}function ES(t,e){var n=this;return(n=gS.call(this)||this).Wo=t,n.Ma=e,n}function IS(t){return _S.Un(t,BT.store)}function TS(t){return _S.Un(t,oS.store)}var SS=(CS.prototype.Ro=function(t){var n=this.yc(t);return this.db.Ac().Da(t).next(function(e){return n.next(function(t){return e+t})})},CS.prototype.yc=function(t){var e=0;return this.yo(t,function(t){e++}).next(function(){return e})},CS.prototype.De=function(t,e){return this.db.Ac().De(t,e)},CS.prototype.yo=function(t,n){return this.Vc(t,function(t,e){return n(e)})},CS.prototype.Fa=function(t,e,n){return NS(t,n)},CS.prototype.$a=function(t,e,n){return NS(t,n)},CS.prototype.Vo=function(t,e,n){return this.db.Ac().Vo(t,e,n)},CS.prototype.Ko=NS,CS.prototype.bc=function(t,e){return r=e,i=!1,kT(n=t).rs(function(t){return ST(n,t,r).next(function(t){return t&&(i=!0),WE.resolve(!t)})}).next(function(){return i});var n,r,i},CS.prototype.po=function(r,i){var o=this,s=this.db.Rc().aa(),a=[],u=0;return this.Vc(r,function(e,t){var n;t<=i&&(n=o.bc(r,e).next(function(t){if(!t)return u++,s.Ar(r,e).next(function(){return s.Ir(e),yS(r).delete([0,hT(e.path)])})}),a.push(n))}).next(function(){return WE.xn(a)}).next(function(){return s.apply(r)}).next(function(){return u})},CS.prototype.removeTarget=function(t,e){var n=e.nt(t.Ma);return this.db.Ac().ba(t,n)},CS.prototype.vc=NS,CS.prototype.Vc=function(t,o){var s,e=yS(t),a=EI.oi;return e.ss({index:eS.documentTargetsIndex},function(t,e){var n=t[0],r=(t[1],e.path),i=e.sequenceNumber;0===n?(a!==EI.oi&&o(new im(fT(s)),a),a=i,s=r):a=EI.oi}).next(function(){a!==EI.oi&&o(new im(fT(s)),a)})},CS.prototype.vo=function(t){return this.db.Rc().ha(t)},CS);function CS(t,e){this.db=t,this.do=new aT(this,e)}function NS(t,e){return yS(t).put((n=t.Ma,new eS(0,hT(e.path),n)));var n}function AS(t,e){var n=t.projectId;return t.W||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}var kS=(OS.prototype.Eo=function(e){var n=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",function(t){return e.bo(t,n.Dc)})},OS);function OS(t,e,n){this.persistence=t,this.Sc=e,this.Dc=new fb(Om),this.Cc=new Wm(nb,rb),this.Nc=Hm.min(),this.vr=t.Ic(n),this.Fc=t.Rc(),this.Ha=t.Ac(),this.xc=new jI(this.Fc,this.vr,this.persistence.Pc()),this.Sc.$c(this.xc)}function RS(t,h){var l=t;return l.persistence.runTransaction("Acknowledge batch","readwrite-primary",function(t){var e,n,i,o,s,r,a,u=h.batch.keys(),c=l.Fc.aa({ua:!0});return e=l,n=t,o=c,s=(i=h).batch,r=s.keys(),a=WE.resolve(),r.forEach(function(r){a=a.next(function(){return o.Ar(n,r)}).next(function(t){var e=t,n=i._r.get(r);Qg(null!==n),(!e||e.version.L(n)<0)&&(e=s.ar(r,e,i))&&o.Tr(e,i.lr)})}),a.next(function(){return e.vr.Qo(n,s)}).next(function(){return c.apply(t)}).next(function(){return l.vr.Go(t)}).next(function(){return l.xc.$r(t,u)})})}function PS(t){var e=t;return e.persistence.runTransaction("Get last remote snapshot version","readonly",function(t){return e.Ha.Ra(t)})}function DS(t,s){var h=t,l=s.et,f=h.Dc;return h.persistence.runTransaction("Apply remote event","readwrite-primary",function(u){var i=h.Fc.aa({ua:!0});f=h.Dc;var c=[];s.Gt.forEach(function(t,e){var n,r,i,o,s,a=f.get(e);a&&(c.push(h.Ha.xa(u,t.ne,e).next(function(){return h.Ha.Na(u,t.te,e)})),0<(n=t.resumeToken).O()&&(r=a.st(n,l).nt(u.Ma),f=f.rt(e,r),i=a,s=t,Qg(0<(o=r).resumeToken.O()),(0===i.resumeToken.O()||3e8<=o.et.J()-i.et.J()||0<s.te.size+s.ee.size+s.ne.size)&&c.push(h.Ha.ba(u,r))))});var t,o=wb,n=Nb();return s.Ht.forEach(function(t,e){n=n.add(t)}),c.push(i.getEntries(u,n).next(function(r){s.Ht.forEach(function(t,e){var n=r.get(t);e instanceof qw&&e.version.isEqual(Hm.min())?(i.Ir(t,l),o=o.rt(t,e)):null==n||0<e.version.L(n.version)||0===e.version.L(n.version)&&n.hasPendingWrites?(i.Tr(e,l),o=o.rt(t,e)):Wg("LocalStore","Ignoring outdated watch update for ",t,". Current version:",n.version," Watch version:",e.version),s.Yt.has(t)&&c.push(h.persistence.Co.vc(u,t))})})),l.isEqual(Hm.min())||(t=h.Ha.Ra(u).next(function(t){return h.Ha.ga(u,u.Ma,l)}),c.push(t)),WE.xn(c).next(function(){return i.apply(u)}).next(function(){return h.xc.kr(u,o)})}).then(function(t){return h.Dc=f,t})}function xS(t,r){var i=t;return i.persistence.runTransaction("Allocate target","readwrite",function(e){var n;return i.Ha.Ca(e,r).next(function(t){return t?(n=t,WE.resolve(n)):i.Ha.Ea(e).next(function(t){return n=new ub(r,t,0,e.Ma),i.Ha.ya(e,n).next(function(){return n})})})}).then(function(t){var e=i.Dc.get(t.targetId);return(null===e||0<t.et.L(e.et))&&(i.Dc=i.Dc.rt(t.targetId,t),i.Cc.set(r,t.targetId)),t})}function LS(o,s,a){return Ks(this,void 0,void 0,function(){var e,n,r,i;return zs(this,function(t){switch(t.label){case 0:n=(e=o).Dc.get(s),r=a?"readwrite":"readwrite-primary",t.label=1;case 1:return t.trys.push([1,4,,5]),a?[3,3]:[4,e.persistence.runTransaction("Release target",r,function(t){return e.persistence.Co.removeTarget(t,n)})];case 2:t.sent(),t.label=3;case 3:return[3,5];case 4:if(!JE(i=t.sent()))throw i;return Wg("LocalStore","Failed to update sequence numbers for target "+s+": "+i),[3,5];case 5:return e.Dc=e.Dc.remove(s),e.Cc.delete(n.target),[2]}})})}function MS(t,s,a){var u=t,c=Hm.min(),h=Nb();return u.persistence.runTransaction("Execute query","readonly",function(e){return t=u,n=e,r=eE(s),(void 0!==(o=(i=t).Cc.get(r))?WE.resolve(i.Dc.get(o)):i.Ha.Ca(n,r)).next(function(t){if(t)return c=t.lastLimboFreeSnapshotVersion,u.Ha.ka(e,t.targetId).next(function(t){h=t})}).next(function(){return u.Sc.Or(e,s,a?c:Hm.min(),a?h:Nb())}).next(function(t){return{documents:t,kc:h}});var t,n,r,i,o})}function FS(t,e){var n=t,r=n.Ha,i=n.Dc.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",function(t){return r.qe(t,e).next(function(t){return t?t.target:null})})}function US(e){return Ks(this,void 0,void 0,function(){return zs(this,function(t){if(e.code!==Ug.FAILED_PRECONDITION||e.message!==FI)throw e;return Wg("LocalStore","Unexpectedly lost primary lease"),[2]})})}function jS(t,e){this.user=e,this.type="OAuth",this.zc={},this.zc.Authorization="Bearer "+t}function VS(t,e,n,r,i){var o=this;this.Gu=t,this.zu=e,this.os=n,this.Hu={},this.Yu=[],this.Ju=new Map,this.Xu=new Set,this.Zu=[],this.th=i,this.th.eh(function(t){n.ds(function(){return Ks(o,void 0,void 0,function(){return zs(this,function(t){switch(t.label){case 0:return wC(this)?(Wg("RemoteStore","Restarting streams for network reachability change."),[4,function(n){return Ks(this,void 0,void 0,function(){var e;return zs(this,function(t){switch(t.label){case 0:return(e=n).Xu.add(4),[4,pC(e)];case 1:return t.sent(),e.nh.set("Unknown"),e.Xu.delete(4),[4,fC(e)];case 2:return t.sent(),[2]}})})}(this)]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})})}),this.nh=new tC(n,r)}var qS,BS,WS,GS=(lC.prototype.m=function(){return this.Mc.m()},lC.prototype.Fa=function(t,e){var n=new HS(t,e);this.Mc=this.Mc.add(n),this.Lc=this.Lc.add(n)},lC.prototype.qc=function(t,e){var n=this;t.forEach(function(t){return n.Fa(t,e)})},lC.prototype.$a=function(t,e){this.Uc(new HS(t,e))},lC.prototype.Qc=function(t,e){var n=this;t.forEach(function(t){return n.$a(t,e)})},lC.prototype.Wc=function(t){var e=this,n=new im(new em([])),r=new HS(n,t),i=new HS(n,t+1),o=[];return this.Lc.Nt([r,i],function(t){e.Uc(t),o.push(t.key)}),o},lC.prototype.jc=function(){var e=this;this.Mc.forEach(function(t){return e.Uc(t)})},lC.prototype.Uc=function(t){this.Mc=this.Mc.delete(t),this.Lc=this.Lc.delete(t)},lC.prototype.Kc=function(t){var e=new im(new em([])),n=new HS(e,t),r=new HS(e,t+1),i=Nb();return this.Lc.Nt([n,r],function(t){i=i.add(t.key)}),i},lC.prototype.zo=function(t){var e=new HS(t,0),n=this.Mc.xt(e);return null!==n&&t.isEqual(n.key)},lC),HS=(hC.Oc=function(t,e){return im.i(t.key,e.key)||Om(t.Gc,e.Gc)},hC.Bc=function(t,e){return Om(t.Gc,e.Gc)||im.i(t.key,e.key)},hC),KS=(cC.prototype.getToken=function(){return Promise.resolve(null)},cC.prototype.Yc=function(){},cC.prototype.Jc=function(t){(this.Hc=t)(bI.UNAUTHENTICATED)},cC.prototype.Xc=function(){this.Hc=null},cC),zS=(uC.prototype.getToken=function(){var e=this,n=this.eu,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(function(t){return e.eu!==n?(Wg("FirebaseCredentialsProvider","getToken aborted due to token change."),e.getToken()):t?(Qg("string"==typeof t.accessToken),new jS(t.accessToken,e.currentUser)):null}):Promise.resolve(null)},uC.prototype.Yc=function(){this.forceRefresh=!0},uC.prototype.Jc=function(t){this.Hc=t,this.tu&&t(this.currentUser)},uC.prototype.Xc=function(){this.auth&&this.auth.removeAuthTokenListener(this.Zc),this.Zc=null,this.Hc=null},uC.prototype.nu=function(){var t=this.auth&&this.auth.getUid();return Qg(null===t||"string"==typeof t),new bI(t)},uC),QS=(Object.defineProperty(aC.prototype,"zc",{get:function(){var t={"X-Goog-AuthUser":this.iu},e=this.su.auth.getAuthHeaderValueForFirstParty([]);return e&&(t.Authorization=e),t},enumerable:!1,configurable:!0}),aC),YS=(sC.prototype.getToken=function(){return Promise.resolve(new QS(this.su,this.iu))},sC.prototype.Jc=function(t){t(bI.ei)},sC.prototype.Xc=function(){},sC.prototype.Yc=function(){},sC),XS=(oC.prototype.hu=function(){return 1===this.state||2===this.state||4===this.state},oC.prototype.lu=function(){return 2===this.state},oC.prototype.start=function(){3!==this.state?this.auth():this._u()},oC.prototype.stop=function(){return Ks(this,void 0,void 0,function(){return zs(this,function(t){switch(t.label){case 0:return this.hu()?[4,this.close(0)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})},oC.prototype.fu=function(){this.state=0,this.gs.reset()},oC.prototype.du=function(){var t=this;this.lu()&&null===this.uu&&(this.uu=this._n.gn(this.ru,6e4,function(){return t.wu()}))},oC.prototype.mu=function(t){this.Tu(),this.stream.send(t)},oC.prototype.wu=function(){return Ks(this,void 0,void 0,function(){return zs(this,function(t){return this.lu()?[2,this.close(0)]:[2]})})},oC.prototype.Tu=function(){this.uu&&(this.uu.cancel(),this.uu=null)},oC.prototype.close=function(e,n){return Ks(this,void 0,void 0,function(){return zs(this,function(t){switch(t.label){case 0:return this.Tu(),this.gs.cancel(),this.cu++,3!==e?this.gs.reset():n&&n.code===Ug.RESOURCE_EXHAUSTED?(Gg(n.toString()),Gg("Using maximum backoff delay to prevent overloading the backend."),this.gs.An()):n&&n.code===Ug.UNAUTHENTICATED&&this.au.Yc(),null!==this.stream&&(this.Eu(),this.stream.close(),this.stream=null),this.state=e,[4,this.listener.Iu(n)];case 1:return t.sent(),[2]}})})},oC.prototype.Eu=function(){},oC.prototype.auth=function(){var n=this;this.state=1;var t=this.Au(this.cu),e=this.cu;this.au.getToken().then(function(t){n.cu===e&&n.Ru(t)},function(e){t(function(){var t=new jg(Ug.UNKNOWN,"Fetching auth token failed: "+e.message);return n.Pu(t)})})},oC.prototype.Ru=function(t){var e=this,n=this.Au(this.cu);this.stream=this.gu(t),this.stream.yu(function(){n(function(){return e.state=2,e.listener.yu()})}),this.stream.Iu(function(t){n(function(){return e.Pu(t)})}),this.stream.onMessage(function(t){n(function(){return e.onMessage(t)})})},oC.prototype._u=function(){var t=this;this.state=4,this.gs.Rn(function(){return Ks(t,void 0,void 0,function(){return zs(this,function(t){return this.state=0,this.start(),[2]})})})},oC.prototype.Pu=function(t){return Wg("PersistentStream","close with error: "+t),this.stream=null,this.close(3,t)},oC.prototype.Au=function(e){var n=this;return function(t){n._n.ds(function(){return n.cu===e?t():(Wg("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())})}},oC),$S=(Gs(iC,WS=XS),iC.prototype.gu=function(t){return this.ou.Vu("Listen",t)},iC.prototype.onMessage=function(t){this.gs.reset();var e=function(t,e){var n,r,i,o;if("targetChange"in e){e.targetChange;var s="NO_CHANGE"===(o=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===o?1:"REMOVE"===o?2:"CURRENT"===o?3:"RESET"===o?4:zg(),a=e.targetChange.targetIds||[],u=(i=e.targetChange.resumeToken,t.Ue?(Qg(void 0===i||"string"==typeof i),Dm.fromBase64String(i||"")):(Qg(void 0===i||i instanceof Uint8Array),Dm.fromUint8Array(i||new Uint8Array))),c=e.targetChange.cause,h=c&&(r=void 0===(n=c).code?Ug.UNKNOWN:lb(n.code),new jg(r,n.message||"")),l=new Mb(s,a,u,h||null)}else if("documentChange"in e){e.documentChange;var f=e.documentChange;f.document,f.document.name,f.document.updateTime;var p=T_(t,f.document.name),d=__(f.document.updateTime),v=new Ow({mapValue:{fields:f.document.fields}}),y=new Vw(p,d,v,{}),g=f.targetIds||[],m=f.removedTargetIds||[];l=new xb(g,m,y.key,y)}else if("documentDelete"in e){e.documentDelete;var b=e.documentDelete;b.document;var _=T_(t,b.document),w=b.readTime?__(b.readTime):Hm.min(),E=new qw(_,w),I=b.removedTargetIds||[];l=new xb([],I,E.key,E)}else if("documentRemove"in e){e.documentRemove;var T=e.documentRemove;T.document;var S=T_(t,T.document),C=T.removedTargetIds||[];l=new xb([],C,S,null)}else{if(!("filter"in e))return zg();e.filter;var N=e.filter;N.targetId;var A=N.count||0,k=new ob(A),O=N.targetId;l=new Lb(O,k)}return l}(this.serializer,t),n=function(t){if(!("targetChange"in t))return Hm.min();var e=t.targetChange;return(!e.targetIds||!e.targetIds.length)&&e.readTime?__(e.readTime):Hm.min()}(t);return this.listener.pu(e,n)},iC.prototype.bu=function(t){var e,n,r,i,o={};o.database=N_(this.serializer),o.addTarget=(e=this.serializer,i=(n=t).target,(r=ib(i)?{documents:P_(e,i)}:{query:D_(e,i)}).targetId=n.targetId,0<n.resumeToken.O()&&(r.resumeToken=b_(e,n.resumeToken)),r);var s,a,u=(this.serializer,s=t,null==(a=function(){switch(s.tt){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return zg()}}())?null:{"goog-listen-tags":a});u&&(o.labels=u),this.mu(o)},iC.prototype.vu=function(t){var e={};e.database=N_(this.serializer),e.removeTarget=t,this.mu(e)},iC),JS=(Gs(rC,BS=XS),Object.defineProperty(rC.prototype,"Du",{get:function(){return this.Su},enumerable:!1,configurable:!0}),rC.prototype.start=function(){this.Su=!1,this.lastStreamToken=void 0,BS.prototype.start.call(this)},rC.prototype.Eu=function(){this.Su&&this.Cu([])},rC.prototype.gu=function(t){return this.ou.Vu("Write",t)},rC.prototype.onMessage=function(t){if(Qg(!!t.streamToken),this.lastStreamToken=t.streamToken,this.Su){this.gs.reset();var e=(r=t.writeResults,i=t.commitTime,r&&0<r.length?(Qg(void 0!==i),r.map(function(t){return function(t,e){var n=t.updateTime?__(t.updateTime):__(e);n.isEqual(Hm.min())&&(n=__(e));var r=null;return t.transformResults&&0<t.transformResults.length&&(r=t.transformResults),new sw(n,r)}(t,i)})):[]),n=__(t.commitTime);return this.listener.Nu(n,e)}var r,i;return Qg(!t.writeResults||0===t.writeResults.length),this.Su=!0,this.listener.Fu()},rC.prototype.xu=function(){var t={};t.database=N_(this.serializer),this.mu(t)},rC.prototype.Cu=function(t){var e=this,n={streamToken:this.lastStreamToken,writes:t.map(function(t){return O_(e.serializer,t)})};this.mu(n)},rC),ZS=(Gs(nC,qS=function(){}),nC.prototype.ku=function(){if(this.$u)throw new jg(Ug.FAILED_PRECONDITION,"The client has already been terminated.")},nC.prototype.Mu=function(e,n,r){var i=this;return this.ku(),this.credentials.getToken().then(function(t){return i.ou.Mu(e,n,r,t)}).catch(function(t){throw t.code===Ug.UNAUTHENTICATED&&i.credentials.Yc(),t})},nC.prototype.Ou=function(e,n,r){var i=this;return this.ku(),this.credentials.getToken().then(function(t){return i.ou.Ou(e,n,r,t)}).catch(function(t){throw t.code===Ug.UNAUTHENTICATED&&i.credentials.Yc(),t})},nC.prototype.terminate=function(){this.$u=!1},nC),tC=(eC.prototype.Uu=function(){var t=this;0===this.Lu&&(this.Qu("Unknown"),this.Bu=this.os.gn("online_state_timeout",1e4,function(){return t.Bu=null,t.Wu("Backend didn't respond within 10 seconds."),t.Qu("Offline"),Promise.resolve()}))},eC.prototype.ju=function(t){"Online"===this.state?this.Qu("Unknown"):(this.Lu++,1<=this.Lu&&(this.Ku(),this.Wu("Connection failed 1 times. Most recent error: "+t.toString()),this.Qu("Offline")))},eC.prototype.set=function(t){this.Ku(),this.Lu=0,"Online"===t&&(this.qu=!1),this.Qu(t)},eC.prototype.Qu=function(t){t!==this.state&&(this.state=t,this.fi(t))},eC.prototype.Wu=function(t){var e="Could not reach Cloud Firestore backend. "+t+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.qu?(Gg(e),this.qu=!1):Wg("OnlineStateTracker",e)},eC.prototype.Ku=function(){null!==this.Bu&&(this.Bu.cancel(),this.Bu=null)},eC);function eC(t,e){this.os=t,this.fi=e,this.state="Unknown",this.Lu=0,this.Bu=null,this.qu=!0}function nC(t,e,n){var r=this;return(r=qS.call(this)||this).credentials=t,r.ou=e,r.serializer=n,r.$u=!1,r}function rC(t,e,n,r,i){var o=this;return(o=BS.call(this,t,"write_stream_connection_backoff","write_stream_idle",e,n,i)||this).serializer=r,o.Su=!1,o}function iC(t,e,n,r,i){var o=this;return(o=WS.call(this,t,"listen_stream_connection_backoff","listen_stream_idle",e,n,i)||this).serializer=r,o}function oC(t,e,n,r,i,o){this._n=t,this.ru=n,this.ou=r,this.au=i,this.listener=o,this.state=0,this.cu=0,this.uu=null,this.stream=null,this.gs=new BE(t,e)}function sC(t,e){this.su=t,this.iu=e}function aC(t,e){this.su=t,this.iu=e,this.type="FirstParty",this.user=bI.ei}function uC(t){var e=this;this.Zc=null,this.currentUser=bI.UNAUTHENTICATED,this.tu=!1,this.eu=0,this.Hc=null,this.forceRefresh=!1,this.Zc=function(){e.eu++,e.currentUser=e.nu(),e.tu=!0,e.Hc&&e.Hc(e.currentUser)},this.eu=0,this.auth=t.getImmediate({optional:!0}),this.auth?this.auth.addAuthTokenListener(this.Zc):(this.Zc(null),t.get().then(function(t){e.auth=t,e.Zc&&e.auth.addAuthTokenListener(e.Zc)},function(){}))}function cC(){this.Hc=null}function hC(t,e){this.key=t,this.Gc=e}function lC(){this.Mc=new bb(HS.Oc),this.Lc=new bb(HS.Bc)}function fC(r){return Ks(this,void 0,void 0,function(){var e,n;return zs(this,function(t){switch(t.label){case 0:if(!wC(r))return[3,4];e=0,n=r.Zu,t.label=1;case 1:return e<n.length?[4,(0,n[e])(!0)]:[3,4];case 2:t.sent(),t.label=3;case 3:return e++,[3,1];case 4:return[2]}})})}function pC(r){return Ks(this,void 0,void 0,function(){var e,n;return zs(this,function(t){switch(t.label){case 0:e=0,n=r.Zu,t.label=1;case 1:return e<n.length?[4,(0,n[e])(!1)]:[3,4];case 2:t.sent(),t.label=3;case 3:return e++,[3,1];case 4:return[2]}})})}function dC(n){return Ks(this,void 0,void 0,function(){var e;return zs(this,function(t){switch(t.label){case 0:return e=n,Wg("RemoteStore","RemoteStore shutting down."),e.Xu.add(5),[4,pC(e)];case 1:return t.sent(),e.th.Si(),e.nh.set("Unknown"),[2]}})})}function vC(t,e){var n=t;n.Ju.has(e.targetId)||(n.Ju.set(e.targetId,e),_C(n)?bC(n):OC(n).lu()&&gC(n,e))}function yC(t,e){var n=t,r=OC(n);n.Ju.delete(e),r.lu()&&mC(n,e),0===n.Ju.size&&(r.lu()?r.du():wC(n)&&n.nh.set("Unknown"))}function gC(t,e){t.sh.Ee(e.targetId),OC(t).bu(e)}function mC(t,e){t.sh.Ee(e),OC(t).vu(e)}function bC(e){e.sh=new Ub({Be:function(t){return e.Hu.Be(t)},qe:function(t){return e.Ju.get(t)||null}}),OC(e).start(),e.nh.Uu()}function _C(t){return wC(t)&&!OC(t).hu()&&0<t.Ju.size}function wC(t){return 0===t.Xu.size}function EC(t){t.sh=void 0}function IC(a,u,c){return Ks(this,void 0,void 0,function(){var n,o,s;return zs(this,function(t){switch(t.label){case 0:if(a.nh.set("Online"),!(u instanceof Mb&&2===u.state&&u.cause))return[3,6];t.label=1;case 1:return t.trys.push([1,3,,5]),[4,function(o,s){return Ks(this,void 0,void 0,function(){var e,n,r,i;return zs(this,function(t){switch(t.label){case 0:e=s.cause,n=0,r=s.targetIds,t.label=1;case 1:return n<r.length?(i=r[n],o.Ju.has(i)?[4,o.Hu.ih(i,e)]:[3,3]):[3,5];case 2:t.sent(),o.Ju.delete(i),o.sh.removeTarget(i),t.label=3;case 3:t.label=4;case 4:return n++,[3,1];case 5:return[2]}})})}(a,u)];case 2:return t.sent(),[3,5];case 3:return n=t.sent(),Wg("RemoteStore","Failed to remove targets %s: %s ",u.targetIds.join(","),n),[4,TC(a,n)];case 4:return t.sent(),[3,5];case 5:return[3,13];case 6:if(u instanceof xb?a.sh.pe(u):u instanceof Lb?a.sh.xe(u):a.sh.Se(u),c.isEqual(Hm.min()))return[3,13];t.label=7;case 7:return t.trys.push([7,11,,13]),[4,PS(a.Gu)];case 8:return o=t.sent(),0<=c.L(o)?[4,(i=c,(e=(r=a).sh.Me(i)).Gt.forEach(function(t,e){var n;0<t.resumeToken.O()&&((n=r.Ju.get(e))&&r.Ju.set(e,n.st(t.resumeToken,i)))}),e.zt.forEach(function(t){var e,n=r.Ju.get(t);n&&(r.Ju.set(t,n.st(Dm.B,n.et)),mC(r,t),e=new ub(n.target,t,1,n.sequenceNumber),gC(r,e))}),r.Hu.rh(e))]:[3,10];case 9:t.sent(),t.label=10;case 10:return[3,13];case 11:return Wg("RemoteStore","Failed to raise snapshot:",s=t.sent()),[4,TC(a,s)];case 12:return t.sent(),[3,13];case 13:return[2]}var r,i,e})})}function TC(n,r,i){return Ks(this,void 0,void 0,function(){var e=this;return zs(this,function(t){switch(t.label){case 0:if(!JE(r))throw r;return n.Xu.add(1),[4,pC(n)];case 1:return t.sent(),n.nh.set("Offline"),i=i||function(){return PS(n.Gu)},n.os.Ds(function(){return Ks(e,void 0,void 0,function(){return zs(this,function(t){switch(t.label){case 0:return Wg("RemoteStore","Retrying IndexedDB access"),[4,i()];case 1:return t.sent(),n.Xu.delete(1),[4,fC(n)];case 2:return t.sent(),[2]}})})}),[2]}})})}function SC(e,n){return n().catch(function(t){return TC(e,t,n)})}function CC(c){return Ks(this,void 0,void 0,function(){var i,o,s,a,u;return zs(this,function(t){switch(t.label){case 0:o=RC(i=c),s=0<i.Yu.length?i.Yu[i.Yu.length-1].batchId:-1,t.label=1;case 1:if(!(wC(i)&&i.Yu.length<10))return[3,7];t.label=2;case 2:return t.trys.push([2,4,,6]),[4,(e=i.Gu,n=s,(r=e).persistence.runTransaction("Get next mutation batch","readonly",function(t){return void 0===n&&(n=-1),r.vr.Lo(t,n)}))];case 3:return null===(a=t.sent())?(0===i.Yu.length&&o.du(),[3,7]):(s=a.batchId,function(t,e){t.Yu.push(e);var n=RC(t);n.lu()&&n.Du&&n.Cu(e.mutations)}(i,a),[3,6]);case 4:return u=t.sent(),[4,TC(i,u)];case 5:return t.sent(),[3,6];case 6:return[3,1];case 7:return NC(i)&&AC(i),[2]}var e,n,r})})}function NC(t){return wC(t)&&!RC(t).hu()&&0<t.Yu.length}function AC(t){RC(t).start()}function kC(n,r){return Ks(this,void 0,void 0,function(){var e;return zs(this,function(t){switch(t.label){case 0:return e=n,r?(e.Xu.delete(2),[4,fC(e)]):[3,2];case 1:return t.sent(),[3,5];case 2:return r?[3,4]:(e.Xu.add(2),[4,pC(e)]);case 3:t.sent(),e.nh.set("Unknown"),t.label=4;case 4:t.label=5;case 5:return[2]}})})}function OC(n){var t,e,r,i,o=this;return n.uh||(n.uh=(t=n.zu,e=n.os,r={yu:function(n){return Ks(this,void 0,void 0,function(){return zs(this,function(t){return n.Ju.forEach(function(t,e){gC(n,t)}),[2]})})}.bind(null,n),Iu:function(e,n){return Ks(this,void 0,void 0,function(){return zs(this,function(t){return EC(e),_C(e)?(e.nh.ju(n),bC(e)):e.nh.set("Unknown"),[2]})})}.bind(null,n),pu:IC.bind(null,n)},(i=t).ku(),new $S(e,i.ou,i.credentials,i.serializer,r)),n.Zu.push(function(e){return Ks(o,void 0,void 0,function(){return zs(this,function(t){switch(t.label){case 0:return e?(n.uh.fu(),_C(n)?bC(n):n.nh.set("Unknown"),[3,3]):[3,1];case 1:return[4,n.uh.stop()];case 2:t.sent(),EC(n),t.label=3;case 3:return[2]}})})})),n.uh}function RC(n){var t,e,r,i,o=this;return n.hh||(n.hh=(t=n.zu,e=n.os,r={yu:function(e){return Ks(this,void 0,void 0,function(){return zs(this,function(t){return RC(e).xu(),[2]})})}.bind(null,n),Iu:function(e,n){return Ks(this,void 0,void 0,function(){return zs(this,function(t){switch(t.label){case 0:return n&&RC(e).Du?[4,function(r,i){return Ks(this,void 0,void 0,function(){var e,n;return zs(this,function(t){switch(t.label){case 0:return hb(n=i.code)&&n!==Ug.ABORTED?(e=r.Yu.shift(),RC(r).fu(),[4,SC(r,function(){return r.Hu.ah(e.batchId,i)})]):[3,3];case 1:return t.sent(),[4,CC(r)];case 2:t.sent(),t.label=3;case 3:return[2]}})})}(e,n)]:[3,2];case 1:t.sent(),t.label=2;case 2:return NC(e)&&AC(e),[2]}})})}.bind(null,n),Fu:function(o){return Ks(this,void 0,void 0,function(){var e,n,r,i;return zs(this,function(t){for(e=RC(o),n=0,r=o.Yu;n<r.length;n++)i=r[n],e.Cu(i.mutations);return[2]})})}.bind(null,n),Nu:function(r,i,o){return Ks(this,void 0,void 0,function(){var e,n;return zs(this,function(t){switch(t.label){case 0:return e=r.Yu.shift(),n=LI.from(e,i,o),[4,SC(r,function(){return r.Hu.oh(n)})];case 1:return t.sent(),[4,CC(r)];case 2:return t.sent(),[2]}})})}.bind(null,n)},(i=t).ku(),new JS(e,i.ou,i.credentials,i.serializer,r)),n.Zu.push(function(e){return Ks(o,void 0,void 0,function(){return zs(this,function(t){switch(t.label){case 0:return e?(n.hh.fu(),[4,CC(n)]):[3,2];case 1:return t.sent(),[3,4];case 2:return[4,n.hh.stop()];case 3:t.sent(),0<n.Yu.length&&(Wg("RemoteStore","Stopping write stream with "+n.Yu.length+" pending writes"),n.Yu=[]),t.label=4;case 4:return[2]}})})})),n.hh}var PC=function(t){this.key=t},DC=function(t){this.key=t},xC=(Object.defineProperty(jC.prototype,"mh",{get:function(){return this.lh},enumerable:!1,configurable:!0}),jC.prototype.Th=function(t,e){var a=this,u=e?e.Eh:new Ob,c=e?e.wh:this.wh,h=e?e.Qt:this.Qt,l=c,f=!1,p=Yw(this.query)&&c.size===this.query.limit?c.last():null,d=Xw(this.query)&&c.size===this.query.limit?c.first():null;if(t.ut(function(t,e){var n=c.get(t),r=(r=e instanceof Vw?e:null)&&(uE(a.query,r)?r:null),i=!!n&&a.Qt.has(n.key),o=!!r&&(r.Ye||a.Qt.has(r.key)&&r.hasCommittedMutations),s=!1;n&&r?n.data().isEqual(r.data())?i!==o&&(u.track({type:3,doc:r}),s=!0):a.Ih(n,r)||(u.track({type:2,doc:r}),s=!0,(p&&0<a.dh(r,p)||d&&a.dh(r,d)<0)&&(f=!0)):!n&&r?(u.track({type:0,doc:r}),s=!0):n&&!r&&(u.track({type:1,doc:n}),s=!0,(p||d)&&(f=!0)),s&&(h=r?(l=l.add(r),o?h.add(t):h.delete(t)):(l=l.delete(t),h.delete(t)))}),Yw(this.query)||Xw(this.query))for(;l.size>this.query.limit;){var n=Yw(this.query)?l.last():l.first(),l=l.delete(n.key),h=h.delete(n.key);u.track({type:1,doc:n})}return{wh:l,Eh:u,Ah:f,Qt:h}},jC.prototype.Ih=function(t,e){return t.Ye&&e.hasCommittedMutations&&!e.Ye},jC.prototype.gr=function(t,e,n){var o=this,r=this.wh;this.wh=t.wh,this.Qt=t.Qt;var i=t.Eh.qt();i.sort(function(t,e){return r=t.type,i=e.type,n(r)-n(i)||o.dh(t.doc,e.doc);function n(t){switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return zg()}}var r,i}),this.Rh(n);var s=e?this.Ph():[],a=0===this.fh.size&&this.Zt?1:0,u=a!==this._h;return this._h=a,0!==i.length||u?{snapshot:new Rb(this.query,t.wh,r,i,t.Qt,0==a,u,!1),gh:s}:{gh:s}},jC.prototype.Us=function(t){return this.Zt&&"Offline"===t?(this.Zt=!1,this.gr({wh:this.wh,Eh:new Ob,Qt:this.Qt,Ah:!1},!1)):{gh:[]}},jC.prototype.yh=function(t){return!this.lh.has(t)&&!!this.wh.has(t)&&!this.wh.get(t).Ye},jC.prototype.Rh=function(t){var e=this;t&&(t.te.forEach(function(t){return e.lh=e.lh.add(t)}),t.ee.forEach(function(t){}),t.ne.forEach(function(t){return e.lh=e.lh.delete(t)}),this.Zt=t.Zt)},jC.prototype.Ph=function(){var e=this;if(!this.Zt)return[];var n=this.fh;this.fh=Nb(),this.wh.forEach(function(t){e.yh(t.key)&&(e.fh=e.fh.add(t.key))});var r=[];return n.forEach(function(t){e.fh.has(t)||r.push(new DC(t))}),this.fh.forEach(function(t){n.has(t)||r.push(new PC(t))}),r},jC.prototype.Vh=function(t){this.lh=t.kc,this.fh=Nb();var e=this.Th(t.documents);return this.gr(e,!0)},jC.prototype.ph=function(){return Rb.Kt(this.query,this.wh,this.Qt,0===this._h)},jC),LC=function(t,e,n){this.query=t,this.targetId=e,this.view=n},MC=function(t){this.key=t,this.bh=!1},FC=(Object.defineProperty(UC.prototype,"Wh",{get:function(){return!0===this.Qh},enumerable:!1,configurable:!0}),UC);function UC(t,e,n,r,i,o){this.Gu=t,this.Sh=e,this.Dh=n,this.Ch=r,this.currentUser=i,this.Nh=o,this.Fh={},this.xh=new Wm(sE,oE),this.$h=new Map,this.kh=[],this.Mh=new fb(im.i),this.Oh=new Map,this.Lh=new GS,this.Bh={},this.qh=new Map,this.Uh=hS.Ta(),this.onlineState="Unknown",this.Qh=void 0}function jC(t,e){this.query=t,this.lh=e,this._h=null,this.Zt=!1,this.fh=Nb(),this.Qt=Nb(),this.dh=cE(t),this.wh=new kb(this.dh)}function VC(a,u,c,h){return Ks(this,void 0,void 0,function(){var e,n,r,i,o,s;return zs(this,function(t){switch(t.label){case 0:return a.jh=function(t,e,n){return function(i,o,s,a){return Ks(this,void 0,void 0,function(){var n,e,r;return zs(this,function(t){switch(t.label){case 0:return(n=o.view.Th(s)).Ah?[4,MS(i.Gu,o.query,!1).then(function(t){var e=t.documents;return o.view.Th(e,n)})]:[3,2];case 1:n=t.sent(),t.label=2;case 2:return e=a&&a.Gt.get(o.targetId),r=o.view.gr(n,i.Wh,e),[2,(QC(i,o.targetId,r.gh),r.snapshot)]}})})}(a,t,e,n)},[4,MS(a.Gu,u,!0)];case 1:return e=t.sent(),n=new xC(u,e.kc),r=n.Th(e.documents),i=Db.Xt(c,h&&"Offline"!==a.onlineState),o=n.gr(r,a.Wh,i),QC(a,c,o.gh),s=new LC(u,c,n),[2,(a.xh.set(u,s),a.$h.has(c)?a.$h.get(c).push(u):a.$h.set(c,[u]),o.snapshot)]}})})}function qC(n,i){return Ks(this,void 0,void 0,function(){var r,e;return zs(this,function(t){switch(t.label){case 0:r=n,t.label=1;case 1:return t.trys.push([1,4,,6]),[4,DS(r.Gu,i)];case 2:return e=t.sent(),i.Gt.forEach(function(t,e){var n=r.Oh.get(e);n&&(Qg(t.te.size+t.ee.size+t.ne.size<=1),0<t.te.size?n.bh=!0:0<t.ee.size?Qg(n.bh):0<t.ne.size&&(Qg(n.bh),n.bh=!1))}),[4,XC(r,e,i)];case 3:return t.sent(),[3,6];case 4:return[4,US(t.sent())];case 5:return t.sent(),[3,6];case 6:return[2]}})})}function BC(t,r,e){var i,n=t;(n.Wh&&0===e||!n.Wh&&1===e)&&(i=[],n.xh.forEach(function(t,e){var n=e.view.Us(r);n.snapshot&&i.push(n.snapshot)}),function(t,i){var e=t;e.onlineState=i;var o=!1;e.Ls.forEach(function(t,e){for(var n=0,r=e.listeners;n<r.length;n++)r[n].Us(i)&&(o=!0)}),o&&gI(e)}(n.Dh,r),i.length&&n.Fh.pu(i),n.onlineState=r,n.Wh&&n.Ch.ji(r))}function WC(s,a,u){return Ks(this,void 0,void 0,function(){var n,o;return zs(this,function(t){switch(t.label){case 0:n=s,t.label=1;case 1:return t.trys.push([1,4,,6]),[4,(e=n.Gu,r=a,(i=e).persistence.runTransaction("Reject batch","readwrite-primary",function(e){var n;return i.vr.Mo(e,r).next(function(t){return Qg(null!==t),n=t.keys(),i.vr.Qo(e,t)}).next(function(){return i.vr.Go(e)}).next(function(){return i.xc.$r(e,n)})}))];case 2:return o=t.sent(),HC(n,a,u),GC(n,a),n.Ch.$i(a,"rejected",u),[4,XC(n,o)];case 3:return t.sent(),[3,6];case 4:return[4,US(t.sent())];case 5:return t.sent(),[3,6];case 6:return[2]}var e,r,i})})}function GC(t,e){(t.qh.get(e)||[]).forEach(function(t){t.resolve()}),t.qh.delete(e)}function HC(t,e,n){var r,i=t,o=i.Bh[i.currentUser.Zs()];o&&((r=o.get(e))&&(n?r.reject(n):r.resolve(),o=o.remove(e)),i.Bh[i.currentUser.Zs()]=o)}function KC(e,t,n){void 0===n&&(n=null),e.Ch.Li(t);for(var r=0,i=e.$h.get(t);r<i.length;r++){var o=i[r];e.xh.delete(o),n&&e.Fh.Kh(o,n)}e.$h.delete(t),e.Wh&&e.Lh.Wc(t).forEach(function(t){e.Lh.zo(t)||zC(e,t)})}function zC(t,e){var n=t.Mh.get(e);null!==n&&(yC(t.Sh,n),t.Mh=t.Mh.remove(e),t.Oh.delete(n),YC(t))}function QC(t,e,n){for(var r,i,o=0,s=n;o<s.length;o++){var a=s[o];a instanceof PC?(t.Lh.Fa(a.key,e),r=t,i=void 0,i=a.key,r.Mh.get(i)||(Wg("SyncEngine","New document in limbo: "+i),r.kh.push(i),YC(r))):a instanceof DC?(Wg("SyncEngine","Document no longer in limbo: "+a.key),t.Lh.$a(a.key,e),t.Lh.zo(a.key)||zC(t,a.key)):zg()}}function YC(t){for(;0<t.kh.length&&t.Mh.size<t.Nh;){var e=t.kh.shift(),n=t.Uh.next();t.Oh.set(n,new MC(e)),t.Mh=t.Mh.rt(e,n),vC(t.Sh,new ub(eE(Qw(e.path)),n,2,EI.oi))}}function XC(n,s,a){return Ks(this,void 0,void 0,function(){var r,i,o,e;return zs(this,function(t){switch(t.label){case 0:return i=[],o=[],e=[],(r=n).xh.m()?[3,3]:(r.xh.forEach(function(t,n){e.push(r.jh(n,s,a).then(function(t){var e;t&&(r.Wh&&r.Ch.Ui(n.targetId,t.fromCache?"not-current":"current"),i.push(t),e=VI.Gr(n.targetId,t),o.push(e))}))}),[4,Promise.all(e)]);case 1:return t.sent(),r.Fh.pu(i),[4,function(h,l){return Ks(this,void 0,void 0,function(){var r,e,n,i,o,s,a,u,c;return zs(this,function(t){switch(t.label){case 0:r=h,t.label=1;case 1:return t.trys.push([1,3,,4]),[4,r.persistence.runTransaction("notifyLocalViewChanges","readwrite",function(n){return WE.forEach(l,function(e){return WE.forEach(e.jr,function(t){return r.persistence.Co.Fa(n,e.targetId,t)}).next(function(){return WE.forEach(e.Kr,function(t){return r.persistence.Co.$a(n,e.targetId,t)})})})})];case 2:return t.sent(),[3,4];case 3:if(!JE(e=t.sent()))throw e;return Wg("LocalStore","Failed to update sequence numbers: "+e),[3,4];case 4:for(n=0,i=l;n<i.length;n++)o=i[n],s=o.targetId,o.fromCache||(a=r.Dc.get(s),u=a.et,c=a.it(u),r.Dc=r.Dc.rt(s,c));return[2]}})})}(r.Gu,o)];case 2:t.sent(),t.label=3;case 3:return[2]}})})}function $C(i,o){return Ks(this,void 0,void 0,function(){var n,r;return zs(this,function(t){switch(t.label){case 0:return(n=i).currentUser.isEqual(o)?[3,3]:(Wg("SyncEngine","User change. New user:",o.Zs()),[4,function(i,o){return Ks(this,void 0,void 0,function(){var e,n,m,r;return zs(this,function(t){switch(t.label){case 0:return n=(e=i).vr,m=e.xc,[4,e.persistence.runTransaction("Handle user change","readonly",function(y){var g;return e.vr.qo(y).next(function(t){return g=t,n=e.persistence.Ic(o),m=new jI(e.Fc,n,e.persistence.Pc()),n.qo(y)}).next(function(t){for(var e=[],n=[],r=Nb(),i=0,o=g;i<o.length;i++){var s=o[i];e.push(s.batchId);for(var a=0,u=s.mutations;a<u.length;a++)var c=u[a],r=r.add(c.key)}for(var h=0,l=t;h<l.length;h++){var f=l[h];n.push(f.batchId);for(var p=0,d=f.mutations;p<d.length;p++){var v=d[p];r=r.add(v.key)}}return m.$r(y,r).next(function(t){return{Gh:t,zh:e,Hh:n}})})})];case 1:return r=t.sent(),[2,(e.vr=n,e.xc=m,e.Sc.$c(e.xc),r)]}})})}(n.Gu,o)]);case 1:return r=t.sent(),n.currentUser=o,(e=n).qh.forEach(function(t){t.forEach(function(t){t.reject(new jg(Ug.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),e.qh.clear(),n.Ch.Wi(o,r.zh,r.Hh),[4,XC(n,r.Gh)];case 2:t.sent(),t.label=3;case 3:return[2]}var e})})}function JC(a,u,c,h){return Ks(this,void 0,void 0,function(){var o,s;return zs(this,function(t){switch(t.label){case 0:return[4,(e=(o=a).Gu,n=u,i=(r=e).vr,r.persistence.runTransaction("Lookup mutation documents","readonly",function(e){return i.Oo(e,n).next(function(t){return t?r.xc.$r(e,t):WE.resolve(null)})}))];case 1:return null===(s=t.sent())?[3,6]:"pending"!==c?[3,3]:[4,CC(o.Sh)];case 2:return t.sent(),[3,4];case 3:"acknowledged"===c||"rejected"===c?(HC(o,u,h||null),GC(o,u),o.Gu.vr.jo(u)):zg(),t.label=4;case 4:return[4,XC(o,s)];case 5:return t.sent(),[3,7];case 6:Wg("SyncEngine","Cannot apply mutation batch with id: "+u),t.label=7;case 7:return[2]}var e,n,r,i})})}function ZC(h,l){return Ks(this,void 0,void 0,function(){var r,e,i,o,s,a,u,c;return zs(this,function(t){switch(t.label){case 0:return rN(r=h),iN(r),!0!==l||!0===r.Qh?[3,3]:(e=r.Ch.Di(),[4,tN(r,e.A())]);case 1:return i=t.sent(),r.Qh=!0,[4,kC(r.Sh,!0)];case 2:for(t.sent(),o=0,s=i;o<s.length;o++)a=s[o],vC(r.Sh,a);return[3,7];case 3:return!1!==l||!1===r.Qh?[3,7]:(u=[],c=Promise.resolve(),r.$h.forEach(function(t,e){r.Ch.Bi(e)?u.push(e):c=c.then(function(){return KC(r,e),LS(r.Gu,e,!0)}),yC(r.Sh,e)}),[4,c]);case 4:return t.sent(),[4,tN(r,u)];case 5:return t.sent(),(n=r).Oh.forEach(function(t,e){yC(n.Sh,e)}),n.Lh.jc(),n.Oh=new Map,n.Mh=new fb(im.i),r.Qh=!1,[4,kC(r.Sh,!1)];case 6:t.sent(),t.label=7;case 7:return[2]}var n})})}function tN(v,y){return Ks(this,void 0,void 0,function(){var e,n,r,i,o,s,a,u,c,h,l,f,p,d;return zs(this,function(t){switch(t.label){case 0:e=v,n=[],r=[],i=0,o=y,t.label=1;case 1:return i<o.length?(s=o[i],a=void 0,(u=e.$h.get(s))&&0!==u.length?[4,xS(e.Gu,eE(u[0]))]:[3,7]):[3,13];case 2:a=t.sent(),c=0,h=u,t.label=3;case 3:return c<h.length?(l=h[c],f=e.xh.get(l),[4,function(i,o){return Ks(this,void 0,void 0,function(){var e,n,r;return zs(this,function(t){switch(t.label){case 0:return[4,MS((e=i).Gu,o.query,!0)];case 1:return n=t.sent(),r=o.view.Vh(n),[2,(e.Wh&&QC(e,o.targetId,r.gh),r)]}})})}(e,f)]):[3,6];case 4:(p=t.sent()).snapshot&&r.push(p.snapshot),t.label=5;case 5:return c++,[3,3];case 6:return[3,11];case 7:return[4,FS(e.Gu,s)];case 8:return d=t.sent(),[4,xS(e.Gu,d)];case 9:return a=t.sent(),[4,VC(e,eN(d),s,!1)];case 10:t.sent(),t.label=11;case 11:n.push(a),t.label=12;case 12:return i++,[3,1];case 13:return[2,(e.Fh.pu(r),n)]}})})}function eN(t){return zw(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function nN(s,a,u,c){return Ks(this,void 0,void 0,function(){var n,i,o;return zs(this,function(t){switch(t.label){case 0:return(n=s).Qh?(Wg("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!n.$h.has(a))return[3,8];switch(u){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,(r=n.Gu,e=r.Fc,r.persistence.runTransaction("Get new document changes","readonly",function(t){return e.ia(t,r.Nc)}).then(function(t){var e=t.ra,n=t.readTime;return r.Nc=n,e}))];case 3:return i=t.sent(),o=Pb.Jt(a,"current"===u),[4,XC(n,i,o)];case 4:return t.sent(),[3,8];case 5:return[4,LS(n.Gu,a,!0)];case 6:return t.sent(),KC(n,a,c),[3,8];case 7:zg(),t.label=8;case 8:return[2]}var r,e})})}function rN(t){var e=t;return e.Sh.Hu.rh=qC.bind(null,e),e.Sh.Hu.Be=function(t,e){var n=t,r=n.Oh.get(e);if(r&&r.bh)return Nb().add(r.key);var i=Nb(),o=n.$h.get(e);if(!o)return i;for(var s=0,a=o;s<a.length;s++)var u=a[s],c=n.xh.get(u),i=i.$t(c.view.mh);return i}.bind(null,e),e.Sh.Hu.ih=function(a,u,c){return Ks(this,void 0,void 0,function(){var e,n,r,i,o,s;return zs(this,function(t){switch(t.label){case 0:return(e=a).Ch.Ui(u,"rejected",c),n=e.Oh.get(u),(r=n&&n.key)?(i=(i=new fb(im.i)).rt(r,new qw(r,Hm.min())),o=Nb().add(r),s=new Pb(Hm.min(),new Map,new bb(Om),i,o),[4,qC(e,s)]):[3,2];case 1:return t.sent(),e.Mh=e.Mh.remove(r),e.Oh.delete(u),YC(e),[3,4];case 2:return[4,LS(e.Gu,u,!1).then(function(){return KC(e,u,c)}).catch(US)];case 3:t.sent(),t.label=4;case 4:return[2]}})})}.bind(null,e),e.Fh.pu=function(t,e){for(var n=t,r=!1,i=0,o=e;i<o.length;i++){var s=o[i],a=s.query,u=n.Ls.get(a);if(u){for(var c=0,h=u.listeners;c<h.length;c++)h[c].Qs(s)&&(r=!0);u.Os=s}}r&&gI(n)}.bind(null,e.Dh),e.Fh.Kh=function(t,e,n){var r=t,i=r.Ls.get(e);if(i)for(var o=0,s=i.listeners;o<s.length;o++)s[o].onError(n);r.Ls.delete(e)}.bind(null,e.Dh),e}function iN(t){var e=t;return e.Sh.Hu.oh=function(i,o){return Ks(this,void 0,void 0,function(){var e,n,r;return zs(this,function(t){switch(t.label){case 0:e=i,n=o.batch.batchId,t.label=1;case 1:return t.trys.push([1,4,,6]),[4,RS(e.Gu,o)];case 2:return r=t.sent(),HC(e,n,null),GC(e,n),e.Ch.$i(n,"acknowledged"),[4,XC(e,r)];case 3:return t.sent(),[3,6];case 4:return[4,US(t.sent())];case 5:return t.sent(),[3,6];case 6:return[2]}})})}.bind(null,e),e.Sh.Hu.ah=WC.bind(null,e),e}var oN,sN=(lN.prototype.$c=function(t){this.Yh=t},lN.prototype.Or=function(e,r,i,o){var s=this;return 0===r.filters.length&&null===r.limit&&null==r.startAt&&null==r.endAt&&(0===r.rn.length||1===r.rn.length&&r.rn[0].field.p())||i.isEqual(Hm.min())?this.Jh(e,r):this.Yh.$r(e,o).next(function(t){var n=s.Xh(r,t);return(Yw(r)||Xw(r))&&s.Ah(r.on,n,o,i)?s.Jh(e,r):(Bg()<=eu.DEBUG&&Wg("IndexFreeQueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),aE(r)),s.Yh.Or(e,r,i).next(function(e){return n.forEach(function(t){e=e.rt(t.key,t)}),e}))})},lN.prototype.Xh=function(n,t){var r=new bb(cE(n));return t.forEach(function(t,e){e instanceof Vw&&uE(n,e)&&(r=r.add(e))}),r},lN.prototype.Ah=function(t,e,n,r){if(n.size!==e.size)return!0;var i="F"===t?e.last():e.first();return!!i&&(i.hasPendingWrites||0<i.version.L(r))},lN.prototype.Jh=function(t,e){return Bg()<=eu.DEBUG&&Wg("IndexFreeQueryEngine","Using full collection scan to execute query:",aE(e)),this.Yh.Or(t,e,Hm.min())},lN),aN=(hN.prototype.xo=function(t){return WE.resolve(0===this.vr.length)},hN.prototype.$o=function(t,e,n,r){var i=this.Zh;this.Zh++,0<this.vr.length&&this.vr[this.vr.length-1];var o=new xI(i,e,n,r);this.vr.push(o);for(var s=0,a=r;s<a.length;s++){var u=a[s];this.tl=this.tl.add(new HS(u.key,i)),this.Sr.ko(t,u.key.path.h())}return WE.resolve(o)},hN.prototype.Mo=function(t,e){return WE.resolve(this.el(e))},hN.prototype.Lo=function(t,e){var n=e+1,r=this.nl(n),i=r<0?0:r;return WE.resolve(this.vr.length>i?this.vr[i]:null)},hN.prototype.Bo=function(){return WE.resolve(0===this.vr.length?-1:this.Zh-1)},hN.prototype.qo=function(t){return WE.resolve(this.vr.slice())},hN.prototype.Cr=function(t,e){var n=this,r=new HS(e,0),i=new HS(e,Number.POSITIVE_INFINITY),o=[];return this.tl.Nt([r,i],function(t){var e=n.el(t.Gc);o.push(e)}),WE.resolve(o)},hN.prototype.Mr=function(t,e){var r=this,i=new bb(Om);return e.forEach(function(t){var e=new HS(t,0),n=new HS(t,Number.POSITIVE_INFINITY);r.tl.Nt([e,n],function(t){i=i.add(t.Gc)})}),WE.resolve(this.sl(i))},hN.prototype.Qr=function(t,e){var n=e.path,r=n.length+1,i=n;im.F(i)||(i=i.child(""));var o=new HS(new im(i),0),s=new bb(Om);return this.tl.Ft(function(t){var e=t.key.path;return!!n.T(e)&&(e.length===r&&(s=s.add(t.Gc)),!0)},o),WE.resolve(this.sl(s))},hN.prototype.sl=function(t){var n=this,r=[];return t.forEach(function(t){var e=n.el(t);null!==e&&r.push(e)}),r},hN.prototype.Qo=function(n,r){var i=this;Qg(0===this.il(r.batchId,"removed")),this.vr.shift();var o=this.tl;return WE.forEach(r.mutations,function(t){var e=new HS(t.key,r.batchId);return o=o.delete(e),i.Co.Ko(n,t.key)}).next(function(){i.tl=o})},hN.prototype.jo=function(t){},hN.prototype.zo=function(t,e){var n=new HS(e,0),r=this.tl.xt(n);return WE.resolve(e.isEqual(r&&r.key))},hN.prototype.Go=function(t){return this.vr.length,WE.resolve()},hN.prototype.il=function(t,e){return this.nl(t)},hN.prototype.nl=function(t){return 0===this.vr.length?0:t-this.vr[0].batchId},hN.prototype.el=function(t){var e=this.nl(t);return e<0||e>=this.vr.length?null:this.vr[e]},hN),uN=(cN.prototype.Tr=function(t,e,n){var r=e.key,i=this.docs.get(r),o=i?i.size:0,s=this.rl(e);return this.docs=this.docs.rt(r,{Zo:e,size:s,readTime:n}),this.size+=s-o,this.Sr.ko(t,r.path.h())},cN.prototype.Ir=function(t){var e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)},cN.prototype.Ar=function(t,e){var n=this.docs.get(e);return WE.resolve(n?n.Zo:null)},cN.prototype.getEntries=function(t,e){var n=this,r=wb;return e.forEach(function(t){var e=n.docs.get(t);r=r.rt(t,e?e.Zo:null)}),WE.resolve(r)},cN.prototype.Or=function(t,e,n){for(var r=Tb,i=new im(e.path.child("")),o=this.docs._t(i);o.It();){var s=o.Et(),a=s.key,u=s.value,c=u.Zo,h=u.readTime;if(!e.path.T(a.path))break;h.L(n)<=0||c instanceof Vw&&uE(e,c)&&(r=r.rt(c.key,c))}return WE.resolve(r)},cN.prototype.ol=function(t,e){return WE.forEach(this.docs,function(t){return e(t)})},cN.prototype.aa=function(t){return new cN.ca(this)},cN.prototype.ha=function(t){return WE.resolve(this.size)},cN);function cN(t,e){this.Sr=t,this.rl=e,this.docs=new fb(im.i),this.size=0}function hN(t,e){this.Sr=t,this.Co=e,this.vr=[],this.Zh=1,this.tl=new bb(HS.Oc)}function lN(){}function fN(t){var e=this;return(e=oN.call(this)||this).la=t,e}uN.ca=(Gs(fN,oN=MI),fN.prototype.gr=function(n){var r=this,i=[];return this.dr.forEach(function(t,e){e?i.push(r.la.Tr(n,e,r.readTime)):r.la.Ir(t)}),WE.xn(i)},fN.prototype.Rr=function(t,e){return this.la.Ar(t,e)},fN.prototype.Pr=function(t,e){return this.la.getEntries(t,e)},fN);var pN,dN,vN=(PN.prototype.De=function(t,n){return this.al.forEach(function(t,e){return n(e)}),WE.resolve()},PN.prototype.Ra=function(t){return WE.resolve(this.lastRemoteSnapshotVersion)},PN.prototype.Pa=function(t){return WE.resolve(this.cl)},PN.prototype.Ea=function(t){return this.highestTargetId=this.hl.next(),WE.resolve(this.highestTargetId)},PN.prototype.ga=function(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.cl&&(this.cl=e),WE.resolve()},PN.prototype.Va=function(t){this.al.set(t.target,t);var e=t.targetId;e>this.highestTargetId&&(this.hl=new hS(e),this.highestTargetId=e),t.sequenceNumber>this.cl&&(this.cl=t.sequenceNumber)},PN.prototype.ya=function(t,e){return this.Va(e),this.targetCount+=1,WE.resolve()},PN.prototype.ba=function(t,e){return this.Va(e),WE.resolve()},PN.prototype.va=function(t,e){return this.al.delete(e.target),this.ul.Wc(e.targetId),--this.targetCount,WE.resolve()},PN.prototype.Vo=function(n,r,i){var o=this,s=0,a=[];return this.al.forEach(function(t,e){e.sequenceNumber<=r&&null===i.get(e.targetId)&&(o.al.delete(t),a.push(o.Sa(n,e.targetId)),s++)}),WE.xn(a).next(function(){return s})},PN.prototype.Da=function(t){return WE.resolve(this.targetCount)},PN.prototype.Ca=function(t,e){var n=this.al.get(e)||null;return WE.resolve(n)},PN.prototype.Na=function(t,e,n){return this.ul.qc(e,n),WE.resolve()},PN.prototype.xa=function(e,t,n){this.ul.Qc(t,n);var r=this.persistence.Co,i=[];return r&&t.forEach(function(t){i.push(r.Ko(e,t))}),WE.xn(i)},PN.prototype.Sa=function(t,e){return this.ul.Wc(e),WE.resolve()},PN.prototype.ka=function(t,e){var n=this.ul.Kc(e);return WE.resolve(n)},PN.prototype.zo=function(t,e){return WE.resolve(this.ul.zo(e))},PN),yN=(RN.prototype.start=function(){return Promise.resolve()},RN.prototype.Si=function(){return this.qa=!1,Promise.resolve()},Object.defineProperty(RN.prototype,"Ti",{get:function(){return this.qa},enumerable:!1,configurable:!0}),RN.prototype.nc=function(){},RN.prototype.sc=function(){},RN.prototype.Pc=function(){return this.Sr},RN.prototype.Ic=function(t){var e=this.ll[t.Zs()];return e||(e=new aN(this.Sr,this.Co),this.ll[t.Zs()]=e),e},RN.prototype.Ac=function(){return this.Ha},RN.prototype.Rc=function(){return this.br},RN.prototype.runTransaction=function(t,e,n){var r=this;Wg("MemoryPersistence","Starting transaction:",t);var i=new gN(this.Ba.next());return this.Co.fl(),n(i).next(function(t){return r.Co.dl(i).next(function(){return t})}).Nn().then(function(t){return i.pr(),t})},RN.prototype.wl=function(e,n){return WE.$n(Object.values(this.ll).map(function(t){return function(){return t.zo(e,n)}}))},RN),gN=(Gs(ON,dN=UI),ON),mN=(kN.El=function(t){return new kN(t)},Object.defineProperty(kN.prototype,"Il",{get:function(){if(this.Tl)return this.Tl;throw zg()},enumerable:!1,configurable:!0}),kN.prototype.Fa=function(t,e,n){return this.ml.Fa(n,e),this.Il.delete(n.toString()),WE.resolve()},kN.prototype.$a=function(t,e,n){return this.ml.$a(n,e),this.Il.add(n.toString()),WE.resolve()},kN.prototype.Ko=function(t,e){return this.Il.add(e.toString()),WE.resolve()},kN.prototype.removeTarget=function(t,e){var n=this;this.ml.Wc(e.targetId).forEach(function(t){return n.Il.add(t.toString())});var r=this.persistence.Ac();return r.ka(t,e.targetId).next(function(t){t.forEach(function(t){return n.Il.add(t.toString())})}).next(function(){return r.va(t,e)})},kN.prototype.fl=function(){this.Tl=new Set},kN.prototype.dl=function(n){var r=this,i=this.persistence.Rc().aa();return WE.forEach(this.Il,function(t){var e=im.D(t);return r.Al(n,e).next(function(t){t||i.Ir(e)})}).next(function(){return r.Tl=null,i.apply(n)})},kN.prototype.vc=function(t,e){var n=this;return this.Al(t,e).next(function(t){t?n.Il.delete(e.toString()):n.Il.add(e.toString())})},kN.prototype._l=function(t){return 0},kN.prototype.Al=function(t,e){var n=this;return WE.$n([function(){return WE.resolve(n.ml.zo(e))},function(){return n.persistence.Ac().zo(t,e)},function(){return n.persistence.wl(t,e)}])},kN),bN=(AN.prototype.yu=function(t){this.gl=t},AN.prototype.Iu=function(t){this.yl=t},AN.prototype.onMessage=function(t){this.Vl=t},AN.prototype.close=function(){this.Pl()},AN.prototype.send=function(t){this.Rl(t)},AN.prototype.pl=function(){this.gl()},AN.prototype.bl=function(t){this.yl(t)},AN.prototype.vl=function(t){this.Vl(t)},AN),_N={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},wN=(NN.prototype.Mu=function(e,t,n,r){var i=this.Nl(e,t);Wg("RestConnection","Sending: ",i,n);var o={};return this.Fl(o,r),this.xl(e,i,o,n).then(function(t){return Wg("RestConnection","Received: ",t),t},function(t){throw Hg("RestConnection",e+" failed with error: ",t,"url: ",i,"request:",n),t})},NN.prototype.Ou=function(t,e,n,r){return this.Mu(t,e,n,r)},NN.prototype.Fl=function(t,e){if(t["X-Goog-Api-Client"]="gl-js/ fire/7.21.1",t["Content-Type"]="text/plain",e)for(var n in e.zc)e.zc.hasOwnProperty(n)&&(t[n]=e.zc[n])},NN.prototype.Nl=function(t,e){var n=_N[t];return this.Dl+"/v1/"+e+":"+n},Gs(CN,pN=NN),CN.prototype.xl=function(u,e,n,r){return new Promise(function(o,s){var a=new Fg;a.listenOnce(Lg.COMPLETE,function(){try{switch(a.getLastErrorCode()){case xg.NO_ERROR:var t=a.getResponseJson();Wg("Connection","XHR received:",JSON.stringify(t)),o(t);break;case xg.TIMEOUT:Wg("Connection",'RPC "'+u+'" timed out'),s(new jg(Ug.DEADLINE_EXCEEDED,"Request time out"));break;case xg.HTTP_ERROR:var e,n,r=a.getStatus();Wg("Connection",'RPC "'+u+'" failed with status:',r,"response text:",a.getResponseText()),0<r?(e=a.getResponseJson().error)&&e.status&&e.message?(i=e.status.toLowerCase().replace("_","-"),n=0<=Object.values(Ug).indexOf(i)?i:Ug.UNKNOWN,s(new jg(n,e.message))):s(new jg(Ug.UNKNOWN,"Server responded with status "+a.getStatus())):s(new jg(Ug.UNAVAILABLE,"Connection failed."));break;default:zg()}}finally{Wg("Connection",'RPC "'+u+'" completed.')}var i});var t=JSON.stringify(r);a.send(e,"POST",t,n,15)})},CN.prototype.Vu=function(t,e){var n,r=[this.Dl,"/","google.firestore.v1.Firestore","/",t,"/channel"],i=Dg(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.U.projectId+"/databases/"+this.U.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling};this.Fl(o.initMessageHeaders,e),ca()||la()||0<=ua().indexOf("Electron/")||(0<=(n=ua()).indexOf("MSIE ")||0<=n.indexOf("Trident/"))||0<=ua().indexOf("MSAppHost/")||ha()||(o.httpHeadersOverwriteParam="$httpHeaders");var s=r.join("");Wg("Connection","Creating WebChannel: "+s,o);function a(t,e){u.listen(t,function(t){try{e(t)}catch(t){setTimeout(function(){throw t},0)}})}var u=i.createWebChannel(s,o),c=!1,h=!1,l=new bN({Rl:function(t){h?Wg("Connection","Not sending because WebChannel is closed:",t):(c||(Wg("Connection","Opening WebChannel transport."),u.open(),c=!0),Wg("Connection","WebChannel sending:",t),u.send(t))},Pl:function(){return u.close()}});return a(Mg.EventType.OPEN,function(){h||Wg("Connection","WebChannel transport opened.")}),a(Mg.EventType.CLOSE,function(){h||(h=!0,Wg("Connection","WebChannel transport closed"),l.bl())}),a(Mg.EventType.ERROR,function(t){h||(h=!0,Hg("Connection","WebChannel transport errored:",t),l.bl(new jg(Ug.UNAVAILABLE,"The operation could not be completed")))}),a(Mg.EventType.MESSAGE,function(t){var e,n,r,i,o,s;h||(Qg(!!(n=t.data[0])),(r=n.error||(null===(e=n[0])||void 0===e?void 0:e.error))?(Wg("Connection","WebChannel received error:",r),i=r.status,o=function(){var t=sb[i];if(void 0!==t)return lb(t)}(),s=r.message,void 0===o&&(o=Ug.INTERNAL,s="Unknown error status: "+i+" with message "+r.message),h=!0,l.bl(new jg(o,s)),u.close()):(Wg("Connection","WebChannel received:",n),l.vl(n)))}),setTimeout(function(){l.pl()},0),l},CN),EN=(SN.prototype.eh=function(t){this.Ll.push(t)},SN.prototype.Si=function(){window.removeEventListener("online",this.$l),window.removeEventListener("offline",this.Ml)},SN.prototype.Bl=function(){window.addEventListener("online",this.$l),window.addEventListener("offline",this.Ml)},SN.prototype.kl=function(){Wg("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var t=0,e=this.Ll;t<e.length;t++)(0,e[t])(0)},SN.prototype.Ol=function(){Wg("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var t=0,e=this.Ll;t<e.length;t++)(0,e[t])(1)},SN.On=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},SN),IN=(TN.prototype.eh=function(t){},TN.prototype.Si=function(){},TN);function TN(){}function SN(){var t=this;this.$l=function(){return t.kl()},this.Ml=function(){return t.Ol()},this.Ll=[],this.Bl()}function CN(t){var e=this;return(e=pN.call(this,t)||this).forceLongPolling=t.forceLongPolling,e}function NN(t){this.Sl=t,this.U=t.U;var e=t.ssl?"https":"http";this.Dl=e+"://"+t.host,this.Cl="projects/"+this.U.projectId+"/databases/"+this.U.database+"/documents"}function AN(t){this.Rl=t.Rl,this.Pl=t.Pl}function kN(t){this.persistence=t,this.ml=new GS,this.Tl=null}function ON(t){var e=this;return(e=dN.call(this)||this).Ma=t,e}function RN(t){var e=this;this.ll={},this.Ba=new EI(0),this.qa=!1,this.qa=!0,this.Co=t(this),this.Ha=new vN(this),this.Sr=new UT,this.br=new uN(this.Sr,function(t){return e.Co._l(t)})}function PN(t){this.persistence=t,this.al=new Wm(nb,rb),this.lastRemoteSnapshotVersion=Hm.min(),this.highestTargetId=0,this.cl=0,this.ul=new GS,this.targetCount=0,this.hl=hS.ma()}function DN(t){return new d_(t,!0)}var xN,LN,MN,FN,UN="You are using the memory-only build of Firestore. Persistence support is only available via the @firebase/firestore bundle or the firebase-firestore.js build.",jN=(tA.prototype.initialize=function(e){return Ks(this,void 0,void 0,function(){return zs(this,function(t){switch(t.label){case 0:return this.Ch=this.ql(e),this.persistence=this.Ul(e),[4,this.persistence.start()];case 1:return t.sent(),this.Ql=this.Wl(e),this.Gu=this.jl(e),[2]}})})},tA.prototype.Wl=function(t){return null},tA.prototype.jl=function(t){return e=this.persistence,n=new sN,r=t.Kl,new kS(e,n,r);var e,n,r},tA.prototype.Ul=function(t){if(t.persistenceSettings.Gl)throw new jg(Ug.FAILED_PRECONDITION,UN);return new yN(mN.El)},tA.prototype.ql=function(t){return new DI},tA.prototype.terminate=function(){return Ks(this,void 0,void 0,function(){return zs(this,function(t){switch(t.label){case 0:return this.Ql&&this.Ql.stop(),[4,this.Ch.Si()];case 1:return t.sent(),[4,this.persistence.Si()];case 2:return t.sent(),[2]}})})},tA.prototype.clearPersistence=function(t,e){throw new jg(Ug.FAILED_PRECONDITION,UN)},tA),VN=(Gs(ZN,FN=jN),ZN.prototype.initialize=function(e){return Ks(this,void 0,void 0,function(){return zs(this,function(t){switch(t.label){case 0:return[4,FN.prototype.initialize.call(this,e)];case 1:return t.sent(),[4,function(r){return Ks(this,void 0,void 0,function(){var e,n;return zs(this,function(t){return n=(e=r).Fc,[2,e.persistence.runTransaction("Synchronize last document change read time","readonly",function(t){return n.oa(t)}).then(function(t){e.Nc=t})]})})}(this.Gu)];case 2:return t.sent(),[4,this.zl.initialize(this,e)];case 3:return t.sent(),[4,iN(this.zl._i)];case 4:return t.sent(),[4,CC(this.zl.Sh)];case 5:return t.sent(),[2]}})})},ZN.prototype.Wl=function(t){var e=this.persistence.Co.do;return new sT(e,t.os)},ZN.prototype.Ul=function(t){var e=AS(t.Sl.U,t.Sl.persistenceKey),n=DN(t.Sl.U);return new _S(t.persistenceSettings.synchronizeTabs,e,t.clientId,rT.oo(t.persistenceSettings.cacheSizeBytes),t.os,sI(),aI(),n,this.Ch,t.persistenceSettings.La)},ZN.prototype.ql=function(t){return new DI},ZN.prototype.clearPersistence=function(t,e){return function(n){return Ks(this,void 0,void 0,function(){var e;return zs(this,function(t){switch(t.label){case 0:return GE.On()?(e=n+"main",[4,GE.delete(e)]):[2,Promise.resolve()];case 1:return t.sent(),[2]}})})}(AS(t,e))},Gs(JN,MN=ZN),JN.prototype.initialize=function(r){return Ks(this,void 0,void 0,function(){var e,n=this;return zs(this,function(t){switch(t.label){case 0:return[4,MN.prototype.initialize.call(this,r)];case 1:return t.sent(),e=this.zl._i,this.Ch instanceof PI?(this.Ch._i={tr:JC.bind(null,e),er:nN.bind(null,e),nr:function(l,f,p){return Ks(this,void 0,void 0,function(){var n,e,r,i,o,s,a,u,c,h;return zs(this,function(t){switch(t.label){case 0:if(!(n=rN(l)).Qh)return[3,10];e=0,r=f,t.label=1;case 1:return e<r.length?(i=r[e],n.$h.has(i)?(Wg("SyncEngine","Adding an already active target "+i),[3,5]):[4,FS(n.Gu,i)]):[3,6];case 2:return o=t.sent(),[4,xS(n.Gu,o)];case 3:return s=t.sent(),[4,VC(n,eN(o),s.targetId,!1)];case 4:t.sent(),vC(n.Sh,s),t.label=5;case 5:return e++,[3,1];case 6:a=function(e){return zs(this,function(t){switch(t.label){case 0:return n.$h.has(e)?[4,LS(n.Gu,e,!1).then(function(){yC(n.Sh,e),KC(n,e)}).catch(US)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})},u=0,c=p,t.label=7;case 7:return u<c.length?(h=c[u],[5,a(h)]):[3,10];case 8:t.sent(),t.label=9;case 9:return u++,[3,7];case 10:return[2]}})})}.bind(null,e),Vi:function(t){return t.Gu.persistence.Vi()}.bind(null,e)},[4,this.Ch.start()]):[3,3];case 2:t.sent(),t.label=3;case 3:return[4,this.persistence.ec(function(e){return Ks(n,void 0,void 0,function(){return zs(this,function(t){switch(t.label){case 0:return[4,ZC(this.zl._i,e)];case 1:return t.sent(),this.Ql&&(e&&!this.Ql.Ti?this.Ql.start(this.Gu):e||this.Ql.stop()),[2]}})})})];case 4:return t.sent(),[2]}})})},JN.prototype.ql=function(t){if(t.persistenceSettings.Gl&&t.persistenceSettings.synchronizeTabs){var e=sI();if(!PI.On(e))throw new jg(Ug.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=AS(t.Sl.U,t.Sl.persistenceKey);return new PI(e,t.os,n,t.clientId,t.Kl)}return new DI},JN),qN=($N.prototype.initialize=function(n,r){return Ks(this,void 0,void 0,function(){var e=this;return zs(this,function(t){switch(t.label){case 0:return this.Gu?[3,2]:(this.Gu=n.Gu,this.Ch=n.Ch,this.zu=this.Hl(r),this.Sh=this.Yl(r),this.Dh=this.Jl(r),this._i=this.Xl(r),this.Ch.fi=function(t){return BC(e._i,t,1)},this.Sh.Hu.Zl=$C.bind(null,this._i),[4,kC(this.Sh,this._i.Wh)]);case 1:t.sent(),t.label=2;case 2:return[2]}})})},$N.prototype.Jl=function(t){return new dI},$N.prototype.Hl=function(t){var e,n,r=DN(t.Sl.U),i=(e=t.Sl,new wN(e));return n=t.credentials,new ZS(n,i,r)},$N.prototype.Yl=function(t){var e=this,n=this.Gu,r=this.zu,i=t.os,o=function(t){return BC(e._i,t,0)},s=new(EN.On()?EN:IN);return new VS(n,r,i,o,s)},$N.prototype.Xl=function(t){return e=this.Gu,n=this.Sh,r=this.Dh,i=this.Ch,o=t.Kl,s=t.Nh,a=!t.persistenceSettings.Gl||!t.persistenceSettings.synchronizeTabs,u=new FC(e,n,r,i,o,s),a&&(u.Qh=!0),u;var e,n,r,i,o,s,a,u},$N.prototype.terminate=function(){return dC(this.Sh)},$N),BN=(XN.prototype.next=function(t){this.observer.next&&this.t_(this.observer.next,t)},XN.prototype.error=function(t){this.observer.error?this.t_(this.observer.error,t):console.error("Uncaught Error in snapshot listener:",t)},XN.prototype.e_=function(){this.muted=!0},XN.prototype.t_=function(t,e){var n=this;this.muted||setTimeout(function(){n.muted||t(e)},0)},XN),WN=function(t){!function(){if(!(t instanceof Array)||t.length<1)throw new jg(Ug.INVALID_ARGUMENT,"Function FieldPath() requires its fieldNames argument to be an array with at least 1 element.")}();for(var e=0;e<t.length;++e)if(pm("FieldPath","string",e,t[e]),0===t[e].length)throw new jg(Ug.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this.n_=new rm(t)},GN=(Gs(YN,LN=WN),YN.documentId=function(){return new YN(rm.v().R())},YN.prototype.isEqual=function(t){if(!(t instanceof YN))throw Tm("isEqual","FieldPath",1,t);return this.n_.isEqual(t.n_)},YN),HN=new RegExp("[~\\*/\\[\\]]"),KN=function(){this.s_=this},zN=(Gs(QN,xN=KN),QN.prototype.r_=function(t){if(2!==t.o_)throw 1===t.o_?t.a_(this.i_+"() can only appear at the top level of your update data"):t.a_(this.i_+"() cannot be used with set() unless you pass {merge:true}");return t.Qe.push(t.path),null},QN.prototype.isEqual=function(t){return t instanceof QN},QN);function QN(t){var e=this;return(e=xN.call(this)||this).i_=t,e}function YN(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return LN.call(this,t)||this}function XN(t){this.observer=t,this.muted=!1}function $N(){}function JN(){return null!==MN&&MN.apply(this,arguments)||this}function ZN(t){var e=this;return(e=FN.call(this)||this).zl=t,e}function tA(){}function eA(t,e,n){return new kA({o_:3,c_:e.settings.c_,methodName:t.i_,u_:n},e.U,e.serializer,e.ignoreUndefinedProperties)}var nA,rA,iA,oA,sA,aA,uA=(Gs(NA,aA=KN),NA.prototype.r_=function(t){return new iw(t.path,new W_)},NA.prototype.isEqual=function(t){return t instanceof NA},NA),cA=(Gs(CA,sA=KN),CA.prototype.r_=function(t){var e=eA(this,t,!0),n=this.h_.map(function(t){return FA(t,e)}),r=new G_(n);return new iw(t.path,r)},CA.prototype.isEqual=function(t){return this===t},CA),hA=(Gs(SA,oA=KN),SA.prototype.r_=function(t){var e=eA(this,t,!0),n=this.h_.map(function(t){return FA(t,e)}),r=new Y_(n);return new iw(t.path,r)},SA.prototype.isEqual=function(t){return this===t},SA),lA=(Gs(TA,iA=KN),TA.prototype.r_=function(t){var e=new Z_(t.serializer,g_(t.serializer,this.l_));return new iw(t.path,e)},TA.prototype.isEqual=function(t){return this===t},TA),fA=(Gs(IA,rA=KN),IA.delete=function(){return cm("FieldValue.delete",arguments),new pA(new zN("FieldValue.delete"))},IA.serverTimestamp=function(){return cm("FieldValue.serverTimestamp",arguments),new pA(new uA("FieldValue.serverTimestamp"))},IA.arrayUnion=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return lm("FieldValue.arrayUnion",arguments,1),new pA(new cA("FieldValue.arrayUnion",t))},IA.arrayRemove=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return lm("FieldValue.arrayRemove",arguments,1),new pA(new hA("FieldValue.arrayRemove",t))},IA.increment=function(t){return pm("FieldValue.increment","number",1,t),hm("FieldValue.increment",arguments,1),new pA(new lA("FieldValue.increment",t))},IA),pA=(Gs(EA,nA=fA),EA.prototype.r_=function(t){return this.s_.r_(t)},EA.prototype.isEqual=function(t){return t instanceof EA&&this.s_.isEqual(t.s_)},EA),dA=(Object.defineProperty(wA.prototype,"latitude",{get:function(){return this.__},enumerable:!1,configurable:!0}),Object.defineProperty(wA.prototype,"longitude",{get:function(){return this.f_},enumerable:!1,configurable:!0}),wA.prototype.isEqual=function(t){return this.__===t.__&&this.f_===t.f_},wA.prototype.toJSON=function(){return{latitude:this.__,longitude:this.f_}},wA.prototype.H=function(t){return Om(this.__,t.__)||Om(this.f_,t.f_)},wA),vA=/^__.*__$/,yA=function(t,e,n){this.d_=t,this.w_=e,this.m_=n},gA=(_A.prototype.T_=function(t,e){var n=[];return null!==this.Qe?n.push(new mw(t,this.data,this.Qe,e)):n.push(new gw(t,this.data,e)),0<this.fieldTransforms.length&&n.push(new Iw(t,this.fieldTransforms)),n},_A),mA=(bA.prototype.T_=function(t,e){var n=[new mw(t,this.data,this.Qe,e)];return 0<this.fieldTransforms.length&&n.push(new Iw(t,this.fieldTransforms)),n},bA);function bA(t,e,n){this.data=t,this.Qe=e,this.fieldTransforms=n}function _A(t,e,n){this.data=t,this.Qe=e,this.fieldTransforms=n}function wA(t,e){if(hm("GeoPoint",arguments,2),pm("GeoPoint","number",1,t),pm("GeoPoint","number",2,e),!isFinite(t)||t<-90||90<t)throw new jg(Ug.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||180<e)throw new jg(Ug.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this.__=t,this.f_=e}function EA(t){var e=this;return(e=nA.call(this)||this).s_=t,e.i_=t.i_,e}function IA(){return rA.call(this)||this}function TA(t,e){var n=this;return(n=iA.call(this)||this).i_=t,n.l_=e,n}function SA(t,e){var n=this;return(n=oA.call(this)||this).i_=t,n.h_=e,n}function CA(t,e){var n=this;return(n=sA.call(this)||this).i_=t,n.h_=e,n}function NA(t){var e=this;return(e=aA.call(this)||this).i_=t,e}function AA(t){switch(t){case 0:case 2:case 1:return 1;case 3:case 4:return;default:throw zg()}}var kA=(Object.defineProperty(PA.prototype,"path",{get:function(){return this.settings.path},enumerable:!1,configurable:!0}),Object.defineProperty(PA.prototype,"o_",{get:function(){return this.settings.o_},enumerable:!1,configurable:!0}),PA.prototype.I_=function(t){return new PA(Object.assign(Object.assign({},this.settings),t),this.U,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.Qe)},PA.prototype.A_=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.I_({path:n,u_:!1});return r.R_(t),r},PA.prototype.P_=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.I_({path:n,u_:!1});return r.E_(),r},PA.prototype.g_=function(t){return this.I_({path:void 0,u_:!0})},PA.prototype.a_=function(t){return WA(t,this.settings.methodName,this.settings.y_||!1,this.path,this.settings.c_)},PA.prototype.contains=function(e){return void 0!==this.Qe.find(function(t){return e.T(t)})||void 0!==this.fieldTransforms.find(function(t){return e.T(t.field)})},PA.prototype.E_=function(){if(this.path)for(var t=0;t<this.path.length;t++)this.R_(this.path.get(t))},PA.prototype.R_=function(t){if(0===t.length)throw this.a_("Document fields must not be empty");if(AA(this.o_)&&vA.test(t))throw this.a_('Document fields cannot begin and end with "__"')},PA),OA=(RA.prototype.V_=function(t,e,n,r){return void 0===r&&(r=!1),new kA({o_:t,methodName:e,c_:n,path:rm.g(),u_:!1,y_:r},this.U,this.serializer,this.ignoreUndefinedProperties)},RA);function RA(t,e,n){this.U=t,this.ignoreUndefinedProperties=e,this.serializer=n||DN(t)}function PA(t,e,n,r,i,o){this.settings=t,this.U=e,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===i&&this.E_(),this.fieldTransforms=i||[],this.Qe=o||[]}function DA(t,e,n,r,i,o){void 0===o&&(o={});var s=t.V_(o.merge||o.mergeFields?2:0,e,n,i);VA("Data must be an object, but it was:",s,r);var a,u,c=UA(r,s);if(o.merge)a=new rw(s.Qe),u=s.fieldTransforms;else if(o.mergeFields){for(var h=[],l=0,f=o.mergeFields;l<f.length;l++){var p=f[l],d=void 0;if(p instanceof WN)d=p.n_;else{if("string"!=typeof p)throw zg();d=BA(e,p,n)}if(!s.contains(d))throw new jg(Ug.INVALID_ARGUMENT,"Field '"+d+"' is specified in your field mask but missing from your input data.");GA(h,d)||h.push(d)}a=new rw(h),u=s.fieldTransforms.filter(function(t){return a.He(t.field)})}else a=null,u=s.fieldTransforms;return new gA(new Ow(c),a,u)}function xA(t,o,s,e){var a=t.V_(1,o,s);VA("Data must be an object, but it was:",a,e);var u=[],c=new Rw;Xg(e,function(t,e){var n,r=BA(o,t,s),i=a.P_(r);e instanceof KN&&e.s_ instanceof zN?u.push(r):null!=(n=FA(e,i))&&(u.push(r),c.set(r,n))});var n=new rw(u);return new mA(c.Je(),n,a.fieldTransforms)}function LA(t,e,n,r,i,o){var s=t.V_(1,e,n),a=[qA(e,r,n)],u=[i];if(o.length%2!=0)throw new jg(Ug.INVALID_ARGUMENT,"Function "+e+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var c=0;c<o.length;c+=2)a.push(qA(e,o[c])),u.push(o[c+1]);for(var h,l,f,p,d=[],v=new Rw,y=a.length-1;0<=y;--y){GA(d,a[y])||(h=a[y],l=u[y],f=s.P_(h),l instanceof KN&&l.s_ instanceof zN?d.push(h):null!=(p=FA(l,f))&&(d.push(h),v.set(h,p)))}var g=new rw(d);return new mA(v.Je(),g,s.fieldTransforms)}function MA(t,e,n,r){return void 0===r&&(r=!1),FA(n,t.V_(r?4:3,e))}function FA(s,t){if(jA(s))return VA("Unsupported field value:",t,s),UA(s,t);if(s instanceof KN)return function(t,e){if(!AA(e.o_))throw e.a_(t.i_+"() can only be used with update() and set()");if(!e.path)throw e.a_(t.i_+"() is not currently supported inside arrays");var n=t.r_(e);n&&e.fieldTransforms.push(n)}(s,t),null;if(t.path&&t.Qe.push(t.path),s instanceof Array){if(t.settings.u_&&4!==t.o_)throw t.a_("Nested arrays are not supported");return function(t){for(var e=[],n=0,r=0,i=s;r<i.length;r++){var o=FA(i[r],t.g_(n));null==o&&(o={nullValue:"NULL_VALUE"}),e.push(o),n++}return{arrayValue:{values:e}}}(t)}return function(t,e){if(null===t)return{nullValue:"NULL_VALUE"};if("number"==typeof t)return g_(e.serializer,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){var n=Gm.fromDate(t);return{timestampValue:m_(e.serializer,n)}}if(t instanceof Gm){var r=new Gm(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:m_(e.serializer,r)}}if(t instanceof dA)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Lm)return{bytesValue:b_(e.serializer,t.q)};if(t instanceof yA){var i=e.U,o=t.d_;if(!o.isEqual(i))throw e.a_("Document reference is for database "+o.projectId+"/"+o.database+" but should be for database "+i.projectId+"/"+i.database);return{referenceValue:w_(t.d_||e.U,t.w_.path)}}if(void 0===t&&e.ignoreUndefinedProperties)return null;throw e.a_("Unsupported field value: "+wm(t))}(s,t)}function UA(t,r){var i={};return $g(t)?r.path&&0<r.path.length&&r.Qe.push(r.path):Xg(t,function(t,e){var n=FA(e,r.A_(t));null!=n&&(i[t]=n)}),{mapValue:{fields:i}}}function jA(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof Gm||t instanceof dA||t instanceof Lm||t instanceof yA||t instanceof KN)}function VA(t,e,n){if(!jA(n)||!_m(n)){var r=wm(n);throw"an object"===r?e.a_(t+" a custom object"):e.a_(t+" "+r)}}function qA(t,e,n){if(e instanceof WN)return e.n_;if("string"==typeof e)return BA(t,e);throw WA("Field path arguments must be of type string or FieldPath.",t,!1,void 0,n)}function BA(t,e,n){try{return function(e){if(0<=e.search(HN))throw new jg(Ug.INVALID_ARGUMENT,"Invalid field path ("+e+"). Paths must not contain '~', '*', '/', '[', or ']'");try{return new(GN.bind.apply(GN,$s([void 0],e.split("."))))}catch(t){throw new jg(Ug.INVALID_ARGUMENT,"Invalid field path ("+e+"). Paths must not be empty, begin with '.', end with '.', or contain '..'")}}(e).n_}catch(e){throw WA(e instanceof Error?e.message:e.toString(),t,!1,void 0,n)}}function WA(t,e,n,r,i){var o=r&&!r.m(),s=void 0!==i,a="Function "+e+"() called with invalid data";n&&(a+=" (via `toFirestore()`)");var u="";return(o||s)&&(u+=" (found",o&&(u+=" in field "+r),s&&(u+=" in document "+i),u+=")"),new jg(Ug.INVALID_ARGUMENT,(a+=". ")+t+u)}function GA(t,e){return t.some(function(t){return t.isEqual(e)})}var HA=(XA.prototype.D_=function(r){return Ks(this,void 0,void 0,function(){var e,n=this;return zs(this,function(t){switch(t.label){case 0:if(this.C_(),0<this.mutations.length)throw new jg(Ug.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(a,u){return Ks(this,void 0,void 0,function(){var i,e,n,r,o,s;return zs(this,function(t){switch(t.label){case 0:return e=N_((i=a).serializer)+"/documents",n={documents:u.map(function(t){return I_(i.serializer,t)})},[4,i.Ou("BatchGetDocuments",e,n)];case 1:return r=t.sent(),o=new Map,r.forEach(function(t){var e,n,r=(e=i.serializer,"found"in(n=t)?function(t,e){Qg(!!e.found),e.found.name,e.found.updateTime;var n=T_(t,e.found.name),r=__(e.found.updateTime),i=new Ow({mapValue:{fields:e.found.fields}});return new Vw(n,r,i,{})}(e,n):"missing"in n?function(t,e){Qg(!!e.missing),Qg(!!e.readTime);var n=T_(t,e.missing),r=__(e.readTime);return new qw(n,r)}(e,n):zg());o.set(r.key.toString(),r)}),s=[],[2,(u.forEach(function(t){var e=o.get(t.toString());Qg(!!e),s.push(e)}),s)]}})})}(this.zu,r)];case 1:return[2,((e=t.sent()).forEach(function(t){t instanceof qw||t instanceof Vw?n.N_(t):zg()}),e)]}})})},XA.prototype.set=function(t,e){this.write(e.T_(t,this.Ke(t))),this.S_.add(t.toString())},XA.prototype.update=function(t,e){try{this.write(e.T_(t,this.F_(t)))}catch(t){this.v_=t}this.S_.add(t.toString())},XA.prototype.delete=function(t){this.write([new Aw(t,this.Ke(t))]),this.S_.add(t.toString())},XA.prototype.commit=function(){return Ks(this,void 0,void 0,function(){var e,r=this;return zs(this,function(t){switch(t.label){case 0:if(this.C_(),this.v_)throw this.v_;return e=this.p_,this.mutations.forEach(function(t){e.delete(t.key.toString())}),e.forEach(function(t,e){var n=im.D(e);r.mutations.push(new kw(n,r.Ke(n)))}),[4,function(i,o){return Ks(this,void 0,void 0,function(){var e,n,r;return zs(this,function(t){switch(t.label){case 0:return n=N_((e=i).serializer)+"/documents",r={writes:o.map(function(t){return O_(e.serializer,t)})},[4,e.Mu("Commit",n,r)];case 1:return t.sent(),[2]}})})}(this.zu,this.mutations)];case 1:return t.sent(),this.b_=!0,[2]}})})},XA.prototype.N_=function(t){var e;if(t instanceof Vw)e=t.version;else{if(!(t instanceof qw))throw zg();e=Hm.min()}var n=this.p_.get(t.key.toString());if(n){if(!e.isEqual(n))throw new jg(Ug.ABORTED,"Document version changed between two reads.")}else this.p_.set(t.key.toString(),e)},XA.prototype.Ke=function(t){var e=this.p_.get(t.toString());return!this.S_.has(t.toString())&&e?aw.updateTime(e):aw.Ge()},XA.prototype.F_=function(t){var e=this.p_.get(t.toString());if(this.S_.has(t.toString())||!e)return aw.exists(!0);if(e.isEqual(Hm.min()))throw new jg(Ug.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return aw.updateTime(e)},XA.prototype.write=function(t){this.C_(),this.mutations=this.mutations.concat(t)},XA.prototype.C_=function(){},XA),KA=(YA.prototype.run=function(){this.k_()},YA.prototype.k_=function(){var t=this;this.gs.Rn(function(){return Ks(t,void 0,void 0,function(){var e,n,r=this;return zs(this,function(t){return e=new HA(this.zu),(n=this.M_(e))&&n.then(function(t){r.os.ds(function(){return e.commit().then(function(){r.hs.resolve(t)}).catch(function(t){r.O_(t)})})}).catch(function(t){r.O_(t)}),[2]})})})},YA.prototype.M_=function(t){try{var e=this.updateFunction(t);return!$m(e)&&e.catch&&e.then?e:(this.hs.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.hs.reject(t),null}},YA.prototype.O_=function(t){var e=this;0<this.x_&&this.L_(t)?(--this.x_,this.os.ds(function(){return e.k_(),Promise.resolve()})):this.hs.reject(t)},YA.prototype.L_=function(t){if("FirebaseError"!==t.name)return!1;var e=t.code;return"aborted"===e||"failed-precondition"===e||!hb(e)},YA),zA=(QA.prototype.start=function(t,e,n,r){var i=this;this.q_(),this.Sl=t;var o=new VE,s=!1;return this.credentials.Jc(function(t){return s?void i.os.Ds(function(){return function(r,i){return Ks(this,void 0,void 0,function(){var e,n;return zs(this,function(t){switch(t.label){case 0:return(e=r).os.Fs(),Wg("RemoteStore","RemoteStore received new credentials"),n=wC(e),e.Xu.add(3),[4,pC(e)];case 1:return t.sent(),n&&e.nh.set("Unknown"),[4,e.Hu.Zl(i)];case 2:return t.sent(),e.Xu.delete(3),[4,fC(e)];case 3:return t.sent(),[2]}})})}(i.Sh,t)}):(s=!0,Wg("FirestoreClient","Initializing. user=",t.uid),i.U_(e,n,r,t,o).then(i.B_.resolve,i.B_.reject))}),this.os.ds(function(){return i.B_.promise}),o.promise},QA.prototype.enableNetwork=function(){var e=this;return this.q_(),this.os.enqueue(function(){return e.persistence.sc(!0),(t=e.Sh).Xu.delete(0),fC(t);var t})},QA.prototype.U_=function(i,o,s,a,u){return Ks(this,void 0,void 0,function(){var e,n,r=this;return zs(this,function(t){switch(t.label){case 0:return t.trys.push([0,3,,4]),e={os:this.os,Sl:this.Sl,clientId:this.clientId,credentials:this.credentials,Kl:a,Nh:100,persistenceSettings:s},[4,i.initialize(e)];case 1:return t.sent(),[4,o.initialize(i,e)];case 2:return t.sent(),this.persistence=i.persistence,this.Ch=i.Ch,this.Gu=i.Gu,this.Ql=i.Ql,this.zu=o.zu,this.Sh=o.Sh,this._i=o._i,this.Q_=o.Dh,this.Q_.qs=function(a,u){return Ks(this,void 0,void 0,function(){var e,n,r,i,o,s;return zs(this,function(t){switch(t.label){case 0:return e=rN(a),(i=e.xh.get(u))?(n=i.targetId,e.Ch.Mi(n),r=i.view.ph(),[3,4]):[3,1];case 1:return[4,xS(e.Gu,eE(u))];case 2:return o=t.sent(),s=e.Ch.Mi(o.targetId),n=o.targetId,[4,VC(e,u,n,"current"===s)];case 3:r=t.sent(),e.Wh&&vC(e.Sh,o),t.label=4;case 4:return[2,r]}})})}.bind(null,this._i),this.Q_.Ws=function(i,o){return Ks(this,void 0,void 0,function(){var e,n,r;return zs(this,function(t){switch(t.label){case 0:return n=(e=i).xh.get(o),1<(r=e.$h.get(n.targetId)).length?[2,(e.$h.set(n.targetId,r.filter(function(t){return!oE(t,o)})),void e.xh.delete(o))]:e.Wh?(e.Ch.Li(n.targetId),e.Ch.Ni(n.targetId)?[3,2]:[4,LS(e.Gu,n.targetId,!1).then(function(){e.Ch.qi(n.targetId),yC(e.Sh,n.targetId),KC(e,n.targetId)}).catch(US)]):[3,3];case 1:t.sent(),t.label=2;case 2:return[3,5];case 3:return KC(e,n.targetId),[4,LS(e.Gu,n.targetId,!0)];case 4:t.sent(),t.label=5;case 5:return[2]}})})}.bind(null,this._i),this.persistence.nc(function(){return Ks(r,void 0,void 0,function(){return zs(this,function(t){switch(t.label){case 0:return[4,this.terminate()];case 1:return t.sent(),[2]}})})}),u.resolve(),[3,4];case 3:if(n=t.sent(),u.reject(n),!this.W_(n))throw n;return[2,(console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+n),this.U_(new jN,new qN,{Gl:!1},a,u))];case 4:return[2]}})})},QA.prototype.W_=function(t){return"FirebaseError"===t.name?t.code===Ug.FAILED_PRECONDITION||t.code===Ug.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code},QA.prototype.q_=function(){if(this.os.Vs)throw new jg(Ug.FAILED_PRECONDITION,"The client has already been terminated.")},QA.prototype.disableNetwork=function(){var t=this;return this.q_(),this.os.enqueue(function(){return t.persistence.sc(!1),function(n){return Ks(this,void 0,void 0,function(){var e;return zs(this,function(t){switch(t.label){case 0:return(e=n).Xu.add(0),[4,pC(e)];case 1:return t.sent(),e.nh.set("Offline"),[2]}})})}(t.Sh)})},QA.prototype.terminate=function(){var t=this;this.os.Ss();var r=new VE;return this.os.ps(function(){return Ks(t,void 0,void 0,function(){var e,n;return zs(this,function(t){switch(t.label){case 0:return t.trys.push([0,4,,5]),this.Ql&&this.Ql.stop(),[4,dC(this.Sh)];case 1:return t.sent(),[4,this.Ch.Si()];case 2:return t.sent(),[4,this.persistence.Si()];case 3:return t.sent(),this.credentials.Xc(),r.resolve(),[3,5];case 4:return e=t.sent(),n=fI(e,"Failed to shutdown persistence"),r.reject(n),[3,5];case 5:return[2]}})})}),r.promise},QA.prototype.waitForPendingWrites=function(){var t=this;this.q_();var e=new VE;return this.os.ds(function(){return function(a,u){return Ks(this,void 0,void 0,function(){var n,r,i,o,s;return zs(this,function(t){switch(t.label){case 0:wC((n=a).Sh)||Wg("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),t.label=1;case 1:return t.trys.push([1,3,,4]),[4,(e=n.Gu).persistence.runTransaction("Get highest unacknowledged batch id","readonly",function(t){return e.vr.Bo(t)})];case 2:return-1===(r=t.sent())?[2,void u.resolve()]:((i=n.qh.get(r)||[]).push(u),n.qh.set(r,i),[3,4]);case 3:return o=t.sent(),s=fI(o,"Initialization of waitForPendingWrites() operation failed"),u.reject(s),[3,4];case 4:return[2]}var e})})}(t._i,e)}),e.promise},QA.prototype.listen=function(t,e,n){var r=this;this.q_();var i=new BN(n),o=new mI(t,i,e);return this.os.ds(function(){return vI(r.Q_,o)}),function(){i.e_(),r.os.ds(function(){return yI(r.Q_,o)})}},QA.prototype.j_=function(r){return Ks(this,void 0,void 0,function(){var e,n=this;return zs(this,function(t){switch(t.label){case 0:return this.q_(),[4,this.B_.promise];case 1:return t.sent(),e=new VE,[2,(this.os.ds(function(){return function(s,a,u){return Ks(this,void 0,void 0,function(){var r,i,o;return zs(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,(e=a,(n=s).persistence.runTransaction("read document","readonly",function(t){return n.xc.Dr(t,e)}))];case 1:return(r=t.sent())instanceof Vw?u.resolve(r):r instanceof qw?u.resolve(null):u.reject(new jg(Ug.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return i=t.sent(),o=fI(i,"Failed to get document '"+a+" from cache"),u.reject(o),[3,3];case 3:return[2]}var e,n})})}(n.Gu,r,e)}),e.promise)]}})})},QA.prototype.K_=function(c,h){return void 0===h&&(h={}),Ks(this,void 0,void 0,function(){var e,u=this;return zs(this,function(t){switch(t.label){case 0:return this.q_(),[4,this.B_.promise];case 1:return t.sent(),e=new VE,[2,(this.os.ds(function(){return n=u.Q_,r=u.os,i=c,o=h,s=e,t=new BN({next:function(t){r.ds(function(){return yI(n,a)});var e=t.docs.has(i);!e&&t.fromCache?s.reject(new jg(Ug.UNAVAILABLE,"Failed to get document because the client is offline.")):e&&t.fromCache&&o&&"server"===o.source?s.reject(new jg(Ug.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):s.resolve(t)},error:function(t){return s.reject(t)}}),a=new mI(Qw(i.path),t,{includeMetadataChanges:!0,Js:!0}),vI(n,a);var n,r,i,o,s,t,a}),e.promise)]}})})},QA.prototype.G_=function(r){return Ks(this,void 0,void 0,function(){var e,n=this;return zs(this,function(t){switch(t.label){case 0:return this.q_(),[4,this.B_.promise];case 1:return t.sent(),e=new VE,[2,(this.os.ds(function(){return function(a,u,c){return Ks(this,void 0,void 0,function(){var e,n,r,i,o,s;return zs(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,MS(a,u,!0)];case 1:return e=t.sent(),n=new xC(u,e.kc),r=n.Th(e.documents),i=n.gr(r,!1),c.resolve(i.snapshot),[3,3];case 2:return o=t.sent(),s=fI(o,"Failed to execute query '"+u+" against cache"),c.reject(s),[3,3];case 3:return[2]}})})}(n.Gu,r,e)}),e.promise)]}})})},QA.prototype.z_=function(c,h){return void 0===h&&(h={}),Ks(this,void 0,void 0,function(){var a,u=this;return zs(this,function(t){switch(t.label){case 0:return this.q_(),[4,this.B_.promise];case 1:return t.sent(),a=new VE,[2,(this.os.ds(function(){return e=u.Q_,n=u.os,t=c,r=h,i=a,o=new BN({next:function(t){n.ds(function(){return yI(e,s)}),t.fromCache&&"server"===r.source?i.reject(new jg(Ug.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(t)},error:function(t){return i.reject(t)}}),s=new mI(t,o,{includeMetadataChanges:!0,Js:!0}),vI(e,s);var e,n,t,r,i,o,s}),a.promise)]}})})},QA.prototype.write=function(t){var e=this;this.q_();var n=new VE;return this.os.ds(function(){return function(v,y,g){return Ks(this,void 0,void 0,function(){var a,u,p,d;return zs(this,function(t){switch(t.label){case 0:a=iN(v),t.label=1;case 1:return t.trys.push([1,5,,6]),[4,(o=a.Gu,c=y,l=o,f=Gm.now(),s=c.reduce(function(t,e){return t.add(e.key)},Nb()),l.persistence.runTransaction("Locally write mutations","readwrite",function(u){return l.xc.$r(u,s).next(function(t){h=t;for(var a,e,n=[],r=0,i=c;r<i.length;r++){var o=i[r],s=(a=o,e=h.get(o.key),a instanceof Iw?function(t){for(var e=null,n=0,r=a.fieldTransforms;n<r.length;n++){var i=r[n],o=t instanceof Vw?t.field(i.field):void 0,s=V_(i.transform,o||null);null!=s&&(e=null==e?(new Rw).set(i.field,s):e.set(i.field,s))}return e?e.Je():null}(e):null);null!=s&&n.push(new mw(o.key,s,function a(t){var u=[];return Xg(t.fields||{},function(t,e){var n=new rm([t]);if(l_(e)){var r=a(e.mapValue).fields;if(0===r.length)u.push(n);else for(var i=0,o=r;i<o.length;i++){var s=o[i];u.push(n.child(s))}}else u.push(n)}),new rw(u)}(s.proto.mapValue),aw.exists(!0)))}return l.vr.$o(u,f,n,c)})}).then(function(t){var e=t.hr(h);return{batchId:t.batchId,dr:e}}))];case 2:return u=t.sent(),a.Ch.Fi(u.batchId),e=a,n=u.batchId,r=g,i=(i=(i=e.Bh[e.currentUser.Zs()])||new fb(Om)).rt(n,r),e.Bh[e.currentUser.Zs()]=i,[4,XC(a,u.dr)];case 3:return t.sent(),[4,CC(a.Sh)];case 4:return t.sent(),[3,6];case 5:return p=t.sent(),d=fI(p,"Failed to persist write"),g.reject(d),[3,6];case 6:return[2]}var e,n,r,i,o,c,h,l,f,s})})}(e._i,t,n)}),n.promise},QA.prototype.U=function(){return this.Sl.U},QA.prototype.H_=function(t){var e=this;this.q_();var r=new BN(t);return this.os.ds(function(){return Ks(e,void 0,void 0,function(){return zs(this,function(t){return[2,(e=this.Q_,n=r,e.Bs.add(n),void n.next())];var e,n})})}),function(){r.e_(),e.os.ds(function(){return Ks(e,void 0,void 0,function(){return zs(this,function(t){return[2,void this.Q_.Bs.delete(r)]})})})}},Object.defineProperty(QA.prototype,"Y_",{get:function(){return this.os.Vs},enumerable:!1,configurable:!0}),QA.prototype.transaction=function(t){var e=this;this.q_();var n=new VE;return this.os.ds(function(){return new KA(e.os,e.zu,t,n).run(),Promise.resolve()}),n.promise},QA);function QA(t,e){this.credentials=t,this.os=e,this.clientId=Am.k(),this.B_=new VE}function YA(t,e,n,r){this.os=t,this.zu=e,this.updateFunction=n,this.hs=r,this.x_=5,this.gs=new BE(this.os,"transaction_retry")}function XA(t){this.zu=t,this.p_=new Map,this.mutations=[],this.b_=!1,this.v_=null,this.S_=new Set}function $A(i){return function(){if("object"==typeof i&&null!==i)for(var t=i,e=0,n=["next","error","complete"];e<n.length;e++){var r=n[e];if(r in t&&"function"==typeof t[r])return 1}}()}var JA,ZA,tk=(mk.prototype.tf=function(t){switch($b(t)){case 0:return null;case 1:return t.booleanValue;case 2:return i_(t.integerValue||t.doubleValue);case 3:return this.ef(t.timestampValue);case 4:return this.nf(t);case 5:return t.stringValue;case 6:return this.Z_(o_(t.bytesValue));case 7:return this.sf(t.referenceValue);case 8:return this.if(t.geoPointValue);case 9:return this.rf(t.arrayValue);case 10:return this.af(t.mapValue);default:throw zg()}},mk.prototype.af=function(t){var n=this,r={};return Xg(t.fields||{},function(t,e){r[t]=n.tf(e)}),r},mk.prototype.if=function(t){return new dA(i_(t.latitude),i_(t.longitude))},mk.prototype.rf=function(t){var e=this;return(t.values||[]).map(function(t){return e.tf(t)})},mk.prototype.nf=function(t){switch(this.J_){case"previous":var e=function t(e){var n=e.mapValue.fields.__previous_value__;return Qb(n)?t(n):n}(t);return null==e?null:this.tf(e);case"estimate":return this.ef(Yb(t));default:return null}},mk.prototype.ef=function(t){var e=r_(t),n=new Gm(e.seconds,e.nanos);return this.timestampsInSnapshots?n:n.toDate()},mk.prototype.sf=function(t){var e=em.P(t);Qg(U_(e));var n=new Bm(e.get(1),e.get(3)),r=new im(e.u(5));return n.isEqual(this.U)||Gg("Document "+r+" contains a document reference within a different database ("+n.projectId+"/"+n.database+") which is not supported. It will be treated as a reference in the current database ("+this.U.projectId+"/"+this.U.database+") instead."),this.X_(r)},mk),ek=rT.uo,nk=(gk.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.timestampsInSnapshots===t.timestampsInSnapshots&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties},gk),rk=(Object.defineProperty(yk.prototype,"Ef",{get:function(){return this.If||(this.If=new OA(this.d_,this.Tf.ignoreUndefinedProperties)),this.If},enumerable:!1,configurable:!0}),yk.prototype.settings=function(t){hm("Firestore.settings",arguments,1),pm("Firestore.settings","object",1,t),t.merge&&delete(t=Object.assign(Object.assign({},this.Tf),t)).merge;var e=new nk(t);if(this.ff&&!this.Tf.isEqual(e))throw new jg(Ug.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only call settings() before calling any other methods on a Firestore object.");void 0!==(this.Tf=e).credentials&&(this.mf=function(t){if(!t)return new KS;switch(t.type){case"gapi":var e=t.client;return Qg(!("object"!=typeof e||null===e||!e.auth||!e.auth.getAuthHeaderValueForFirstParty)),new YS(e,t.sessionIndex||"0");case"provider":return t.client;default:throw new jg(Ug.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(e.credentials))},yk.prototype.enableNetwork=function(){return this._f(),this.ff.enableNetwork()},yk.prototype.disableNetwork=function(){return this._f(),this.ff.disableNetwork()},yk.prototype.enablePersistence=function(t){var e,n;if(this.ff)throw new jg(Ug.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only call enablePersistence() before calling any other methods on a Firestore object.");var r=!1,i=!1;if(t&&(void 0!==t.experimentalTabSynchronization&&Gg("The 'experimentalTabSynchronization' setting will be removed. Use 'synchronizeTabs' instead."),r=null!==(n=null!==(e=t.synchronizeTabs)&&void 0!==e?e:t.experimentalTabSynchronization)&&void 0!==n&&n,i=!!t.experimentalForceOwningTab&&t.experimentalForceOwningTab,r&&i))throw new jg(Ug.INVALID_ARGUMENT,"The 'experimentalForceOwningTab' setting cannot be used with 'synchronizeTabs'.");return this.Af(this.cf,this.uf,{Gl:!0,cacheSizeBytes:this.Tf.cacheSizeBytes,synchronizeTabs:r,La:i})},yk.prototype.clearPersistence=function(){return Ks(this,void 0,void 0,function(){var n,e=this;return zs(this,function(t){if(void 0!==this.ff&&!this.ff.Y_)throw new jg(Ug.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");return n=new VE,[2,(this.lf.ps(function(){return Ks(e,void 0,void 0,function(){var e;return zs(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,this.cf.clearPersistence(this.d_,this.wf)];case 1:return t.sent(),n.resolve(),[3,3];case 2:return e=t.sent(),n.reject(e),[3,3];case 3:return[2]}})})}),n.promise)]})})},yk.prototype.terminate=function(){return this.app._removeServiceInstance("firestore"),this.INTERNAL.delete()},Object.defineProperty(yk.prototype,"Rf",{get:function(){return this._f(),this.ff.Y_},enumerable:!1,configurable:!0}),yk.prototype.waitForPendingWrites=function(){return this._f(),this.ff.waitForPendingWrites()},yk.prototype.onSnapshotsInSync=function(t){if(this._f(),$A(t))return this.ff.H_(t);pm("Firestore.onSnapshotsInSync","function",1,t);var e={next:t};return this.ff.H_(e)},yk.prototype._f=function(){return this.ff||this.Af(new jN,new qN,{Gl:!1}),this.ff},yk.prototype.Pf=function(){return new jm(this.d_,this.wf,this.Tf.host,this.Tf.ssl,this.Tf.experimentalForceLongPolling)},yk.prototype.Af=function(t,e,n){var r=this.Pf();return this.ff=new zA(this.mf,this.lf),this.ff.start(r,t,e,n)},yk.df=function(t){if(e=t.options,!Object.prototype.hasOwnProperty.call(e,"projectId"))throw new jg(Ug.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');var e,n=t.options.projectId;if(!n||"string"!=typeof n)throw new jg(Ug.INVALID_ARGUMENT,"projectId must be a string in FirebaseApp.options");return new Bm(n)},Object.defineProperty(yk.prototype,"app",{get:function(){if(!this.hf)throw new jg(Ug.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.hf},enumerable:!1,configurable:!0}),yk.prototype.collection=function(t){return hm("Firestore.collection",arguments,1),pm("Firestore.collection","non-empty string",1,t),this._f(),new Ck(em.P(t),this,null)},yk.prototype.doc=function(t){return hm("Firestore.doc",arguments,1),pm("Firestore.doc","non-empty string",1,t),this._f(),sk.gf(em.P(t),this,null)},yk.prototype.collectionGroup=function(t){if(hm("Firestore.collectionGroup",arguments,1),pm("Firestore.collectionGroup","non-empty string",1,t),0<=t.indexOf("/"))throw new jg(Ug.INVALID_ARGUMENT,"Invalid collection ID '"+t+"' passed to function Firestore.collectionGroup(). Collection IDs must not contain '/'.");return this._f(),new Tk((e=t,new Ww(em.g(),e)),this,null);var e},yk.prototype.runTransaction=function(e){var n=this;return hm("Firestore.runTransaction",arguments,1),pm("Firestore.runTransaction","function",1,e),this._f().transaction(function(t){return e(new ik(n,t))})},yk.prototype.batch=function(){return this._f(),new ok(this)},Object.defineProperty(yk,"logLevel",{get:function(){switch(Bg()){case eu.DEBUG:return"debug";case eu.ERROR:return"error";case eu.SILENT:return"silent";case eu.WARN:return"warn";case eu.INFO:return"info";case eu.VERBOSE:return"verbose";default:return"error"}},enumerable:!1,configurable:!0}),yk.setLogLevel=function(t){hm("Firestore.setLogLevel",arguments,1),mm("setLogLevel",["debug","error","silent","warn","info","verbose"],1,t),Vg.setLogLevel(t)},yk.prototype.yf=function(){return this.Tf.timestampsInSnapshots},yk.prototype.Vf=function(){return this.Tf},yk),ik=(vk.prototype.get=function(t){var n=this;hm("Transaction.get",arguments,1);var r=Dk("Transaction.get",t,this.pf);return this.bf.D_([r.w_]).then(function(t){if(!t||1!==t.length)return zg();var e=t[0];if(e instanceof qw)return new uk(n.pf,r.w_,null,!1,!1,r.m_);if(e instanceof Vw)return new uk(n.pf,r.w_,e,!1,!1,r.m_);throw zg()})},vk.prototype.set=function(t,e,n){fm("Transaction.set",arguments,2,3);var r=Dk("Transaction.set",t,this.pf);n=Ok("Transaction.set",n);var i=xk(r.m_,e,n),o=DA(this.pf.Ef,"Transaction.set",r.w_,i,null!==r.m_,n);return this.bf.set(r.w_,o),this},vk.prototype.update=function(t,e,n){for(var r,i,o=[],s=3;s<arguments.length;s++)o[s-3]=arguments[s];return i="string"==typeof e||e instanceof GN?(lm("Transaction.update",arguments,3),r=Dk("Transaction.update",t,this.pf),LA(this.pf.Ef,"Transaction.update",r.w_,e,n,o)):(hm("Transaction.update",arguments,2),r=Dk("Transaction.update",t,this.pf),xA(this.pf.Ef,"Transaction.update",r.w_,e)),this.bf.update(r.w_,i),this},vk.prototype.delete=function(t){hm("Transaction.delete",arguments,1);var e=Dk("Transaction.delete",t,this.pf);return this.bf.delete(e.w_),this},vk),ok=(dk.prototype.set=function(t,e,n){fm("WriteBatch.set",arguments,2,3),this.Df();var r=Dk("WriteBatch.set",t,this.pf);n=Ok("WriteBatch.set",n);var i=xk(r.m_,e,n),o=DA(this.pf.Ef,"WriteBatch.set",r.w_,i,null!==r.m_,n);return this.vf=this.vf.concat(o.T_(r.w_,aw.Ge())),this},dk.prototype.update=function(t,e,n){for(var r,i,o=[],s=3;s<arguments.length;s++)o[s-3]=arguments[s];return this.Df(),i="string"==typeof e||e instanceof GN?(lm("WriteBatch.update",arguments,3),r=Dk("WriteBatch.update",t,this.pf),LA(this.pf.Ef,"WriteBatch.update",r.w_,e,n,o)):(hm("WriteBatch.update",arguments,2),r=Dk("WriteBatch.update",t,this.pf),xA(this.pf.Ef,"WriteBatch.update",r.w_,e)),this.vf=this.vf.concat(i.T_(r.w_,aw.exists(!0))),this},dk.prototype.delete=function(t){hm("WriteBatch.delete",arguments,1),this.Df();var e=Dk("WriteBatch.delete",t,this.pf);return this.vf=this.vf.concat(new Aw(e.w_,aw.Ge())),this},dk.prototype.commit=function(){return this.Df(),this.Sf=!0,0<this.vf.length?this.pf._f().write(this.vf):Promise.resolve()},dk.prototype.Df=function(){if(this.Sf)throw new jg(Ug.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},dk),sk=(Gs(pk,ZA=yA),pk.gf=function(t,e,n){if(t.length%2!=0)throw new jg(Ug.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t.R()+" has "+t.length);return new pk(new im(t),e,n)},Object.defineProperty(pk.prototype,"id",{get:function(){return this.w_.path._()},enumerable:!1,configurable:!0}),Object.defineProperty(pk.prototype,"parent",{get:function(){return new Ck(this.w_.path.h(),this.firestore,this.m_)},enumerable:!1,configurable:!0}),Object.defineProperty(pk.prototype,"path",{get:function(){return this.w_.path.R()},enumerable:!1,configurable:!0}),pk.prototype.collection=function(t){if(hm("DocumentReference.collection",arguments,1),pm("DocumentReference.collection","non-empty string",1,t),!t)throw new jg(Ug.INVALID_ARGUMENT,"Must provide a non-empty collection name to collection()");var e=em.P(t);return new Ck(this.w_.path.child(e),this.firestore,null)},pk.prototype.isEqual=function(t){if(!(t instanceof pk))throw Tm("isEqual","DocumentReference",1,t);return this.firestore===t.firestore&&this.w_.isEqual(t.w_)&&this.m_===t.m_},pk.prototype.set=function(t,e){fm("DocumentReference.set",arguments,1,2),e=Ok("DocumentReference.set",e);var n=xk(this.m_,t,e),r=DA(this.firestore.Ef,"DocumentReference.set",this.w_,n,null!==this.m_,e);return this.ff.write(r.T_(this.w_,aw.Ge()))},pk.prototype.update=function(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];return n="string"==typeof t||t instanceof GN?(lm("DocumentReference.update",arguments,2),LA(this.firestore.Ef,"DocumentReference.update",this.w_,t,e,r)):(hm("DocumentReference.update",arguments,1),xA(this.firestore.Ef,"DocumentReference.update",this.w_,t)),this.ff.write(n.T_(this.w_,aw.exists(!0)))},pk.prototype.delete=function(){return hm("DocumentReference.delete",arguments,0),this.ff.write([new Aw(this.w_,aw.Ge())])},pk.prototype.onSnapshot=function(){for(var t,e,n,r=this,i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];fm("DocumentReference.onSnapshot",arguments,1,4);var s={includeMetadataChanges:!1},a=0;"object"!=typeof i[a]||$A(i[a])||(Im("DocumentReference.onSnapshot",s=i[a],["includeMetadataChanges"]),ym("DocumentReference.onSnapshot","boolean","includeMetadataChanges",s.includeMetadataChanges),a++);var u,c={includeMetadataChanges:s.includeMetadataChanges};$A(i[a])?(u=i[a],i[a]=null===(t=u.next)||void 0===t?void 0:t.bind(u),i[a+1]=null===(e=u.error)||void 0===e?void 0:e.bind(u),i[a+2]=null===(n=u.complete)||void 0===n?void 0:n.bind(u)):(pm("DocumentReference.onSnapshot","function",a,i[a]),dm("DocumentReference.onSnapshot","function",a+1,i[a+1]),dm("DocumentReference.onSnapshot","function",a+2,i[a+2]));var h={next:function(t){i[a]&&i[a](r.Cf(t))},error:i[a+1],complete:i[a+2]};return this.ff.listen(Qw(this.w_.path),c,h)},pk.prototype.get=function(t){var e=this;fm("DocumentReference.get",arguments,0,1),Pk("DocumentReference.get",t);var n=this.firestore._f();return t&&"cache"===t.source?n.j_(this.w_).then(function(t){return new uk(e.firestore,e.w_,t,!0,t instanceof Vw&&t.Ye,e.m_)}):n.K_(this.w_,t).then(function(t){return e.Cf(t)})},pk.prototype.withConverter=function(t){return new pk(this.w_,this.firestore,t)},pk.prototype.Cf=function(t){var e=t.docs.get(this.w_);return new uk(this.firestore,this.w_,e,t.fromCache,t.hasPendingWrites,this.m_)},pk),ak=(fk.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},fk),uk=(lk.prototype.data=function(t){var e=this;if(fm("DocumentSnapshot.data",arguments,0,1),t=Rk("DocumentSnapshot.data",t),this.Nf){if(this.m_){var n=new ck(this.pf,this.w_,this.Nf,this.Ff,this.xf,null);return this.m_.fromFirestore(n,t)}return new tk(this.pf.d_,this.pf.yf(),t.serverTimestamps||"none",function(t){return new sk(t,e.pf,null)},function(t){return new qm(t)}).tf(this.Nf.sn())}},lk.prototype.get=function(t,e){var n=this;if(fm("DocumentSnapshot.get",arguments,1,2),e=Rk("DocumentSnapshot.get",e),this.Nf){var r=this.Nf.data().field(qA("DocumentSnapshot.get",t,this.w_));if(null!==r)return new tk(this.pf.d_,this.pf.yf(),e.serverTimestamps||"none",function(t){return new sk(t,n.pf,n.m_)},function(t){return new qm(t)}).tf(r)}},Object.defineProperty(lk.prototype,"id",{get:function(){return this.w_.path._()},enumerable:!1,configurable:!0}),Object.defineProperty(lk.prototype,"ref",{get:function(){return new sk(this.w_,this.pf,this.m_)},enumerable:!1,configurable:!0}),Object.defineProperty(lk.prototype,"exists",{get:function(){return null!==this.Nf},enumerable:!1,configurable:!0}),Object.defineProperty(lk.prototype,"metadata",{get:function(){return new ak(this.xf,this.Ff)},enumerable:!1,configurable:!0}),lk.prototype.isEqual=function(t){if(!(t instanceof lk))throw Tm("isEqual","DocumentSnapshot",1,t);return this.pf===t.pf&&this.Ff===t.Ff&&this.w_.isEqual(t.w_)&&(null===this.Nf?null===t.Nf:this.Nf.isEqual(t.Nf))&&this.m_===t.m_},lk),ck=(Gs(hk,JA=uk),hk.prototype.data=function(t){return JA.prototype.data.call(this,t)},hk);function hk(){return null!==JA&&JA.apply(this,arguments)||this}function lk(t,e,n,r,i,o){this.pf=t,this.w_=e,this.Nf=n,this.Ff=r,this.xf=i,this.m_=o}function fk(t,e){this.hasPendingWrites=t,this.fromCache=e}function pk(t,e,n){var r=this;return(r=ZA.call(this,e.d_,t,n)||this).w_=t,r.firestore=e,r.m_=n,r.ff=r.firestore._f(),r}function dk(t){this.pf=t,this.vf=[],this.Sf=!1}function vk(t,e){this.pf=t,this.bf=e}function yk(t,e,n,r){var i=this;if(void 0===n&&(n=new jN),void 0===r&&(r=new qN),this.cf=n,this.uf=r,this.hf=null,this.lf=new cI,this.INTERNAL={delete:function(){return Ks(i,void 0,void 0,function(){return zs(this,function(t){switch(t.label){case 0:return this._f(),[4,this.ff.terminate()];case 1:return t.sent(),[2]}})})}},"object"==typeof t.options){var o=t;this.hf=o,this.d_=yk.df(o),this.wf=o.name,this.mf=new zS(e)}else{var s=t;if(!s.projectId)throw new jg(Ug.INVALID_ARGUMENT,"Must provide projectId");this.d_=new Bm(s.projectId,s.database),this.wf="[DEFAULT]",this.mf=new KS}this.Tf=new nk({})}function gk(t){var e,n,r,i;if(void 0===t.host){if(void 0!==t.ssl)throw new jg(Ug.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else vm("settings","non-empty string","host",t.host),this.host=t.host,ym("settings","boolean","ssl",t.ssl),this.ssl=null===(e=t.ssl)||void 0===e||e;if(Im("settings",t,["host","ssl","credentials","timestampsInSnapshots","cacheSizeBytes","experimentalForceLongPolling","ignoreUndefinedProperties"]),ym("settings","object","credentials",t.credentials),this.credentials=t.credentials,ym("settings","boolean","timestampsInSnapshots",t.timestampsInSnapshots),ym("settings","boolean","ignoreUndefinedProperties",t.ignoreUndefinedProperties),!0===t.timestampsInSnapshots?Gg("The setting 'timestampsInSnapshots: true' is no longer required and should be removed."):!1===t.timestampsInSnapshots&&Gg("Support for 'timestampsInSnapshots: false' will be removed soon. You must update your code to handle Timestamp objects."),this.timestampsInSnapshots=null===(n=t.timestampsInSnapshots)||void 0===n||n,this.ignoreUndefinedProperties=null!==(r=t.ignoreUndefinedProperties)&&void 0!==r&&r,ym("settings","number","cacheSizeBytes",t.cacheSizeBytes),void 0===t.cacheSizeBytes)this.cacheSizeBytes=rT.lo;else{if(t.cacheSizeBytes!==ek&&t.cacheSizeBytes<rT.ho)throw new jg(Ug.INVALID_ARGUMENT,"cacheSizeBytes must be at least "+rT.ho);this.cacheSizeBytes=t.cacheSizeBytes}ym("settings","boolean","experimentalForceLongPolling",t.experimentalForceLongPolling),this.experimentalForceLongPolling=null!==(i=t.experimentalForceLongPolling)&&void 0!==i&&i}function mk(t,e,n,r,i){this.U=t,this.timestampsInSnapshots=e,this.J_=n,this.X_=r,this.Z_=i}function bk(t,e,n){if("string"==typeof n){if(""===n)throw new jg(Ug.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!Zw(e)&&-1!==n.indexOf("/"))throw new jg(Ug.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+n+"' contains a '/' character.");var r=e.path.child(em.P(n));if(!im.F(r))throw new jg(Ug.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+r+"' is not because it has an odd number of segments ("+r.length+").");return s_(t,new im(r))}if(n instanceof yA)return s_(t,n.w_);throw new jg(Ug.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+wm(n)+".")}function _k(t,e){if(!Array.isArray(t)||0===t.length)throw new jg(Ug.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+e.toString()+"' filters.");if(10<t.length)throw new jg(Ug.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters support a maximum of 10 elements in the value array.");if("in"===e||"array-contains-any"===e){if(0<=t.indexOf(null))throw new jg(Ug.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters cannot contain 'null' in the value array.");if(0<t.filter(function(t){return Number.isNaN(t)}).length)throw new jg(Ug.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters cannot contain 'NaN' in the value array.")}}function wk(t,e,n){if(!n.isEqual(e))throw new jg(Ug.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, >, or >=) on field '"+e.toString()+"' and so you must also use '"+e.toString()+"' as your first orderBy(), but your first orderBy() is on field '"+n.toString()+"' instead.")}function Ek(t){if(Xw(t)&&0===t.rn.length)throw new jg(Ug.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Ik,Tk=(kk.prototype.where=function(t,e,n){hm("Query.where",arguments,3),Em("Query.where",3,n);var r,i,o=mm("Query.where",["<","<=","==","!=",">=",">","array-contains","in","array-contains-any","not-in"],2,e),s=qA("Query.where",t),a=function(t,e,n,r,i,o,s){var a;if(i.p()){if("array-contains"===o||"array-contains-any"===o)throw new jg(Ug.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+o+"' queries on FieldPath.documentId().");if("in"===o||"not-in"===o){_k(s,o);for(var u=[],c=0,h=s;c<h.length;c++){var l=h[c];u.push(bk(r,t,l))}a={arrayValue:{values:u}}}else a=bk(r,t,s)}else"in"!==o&&"not-in"!==o&&"array-contains-any"!==o||_k(s,o),a=MA(n,e,s,"in"===o||"not-in"===o);var f=lE.create(i,o,a);return function(t,e){if(e.un()){var n=Jw(t);if(null!==n&&!n.isEqual(e.field))throw new jg(Ug.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, >, or >=) must be on the same field. But you have inequality filters on '"+n.toString()+"' and '"+e.field.toString()+"'");var r=$w(t);null!==r&&wk(0,e.field,r)}var i=function(t,e){for(var n=0,r=t.filters;n<r.length;n++){var i=r[n];if(0<=e.indexOf(i.op))return i.op}return null}(t,function(){switch(e.op){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}());if(null!==i)throw i===e.op?new jg(Ug.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '"+e.op.toString()+"' filter."):new jg(Ug.INVALID_ARGUMENT,"Invalid query. You cannot use '"+e.op.toString()+"' filters with '"+i.toString()+"' filters.")}(t,f),f}(this.$f,"Query.where",this.firestore.Ef,this.firestore.d_,s,o,n);return new kk((r=this.$f,i=r.filters.concat([a]),new Ww(r.path,r.collectionGroup,r.rn.slice(),i,r.limit,r.on,r.startAt,r.endAt)),this.firestore,this.m_)},kk.prototype.orderBy=function(t,e){var n;if(fm("Query.orderBy",arguments,1,2),dm("Query.orderBy","non-empty string",2,e),void 0===e||"asc"===e)n="asc";else{if("desc"!==e)throw new jg(Ug.INVALID_ARGUMENT,"Function Query.orderBy() has unknown direction '"+e+"', expected 'asc' or 'desc'.");n="desc"}var r,i,o=qA("Query.orderBy",t),s=function(t,e,n){if(null!==t.startAt)throw new jg(Ug.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==t.endAt)throw new jg(Ug.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r,i,o,s=new jE(e,n);return i=s,null!==$w(r=t)||null!==(o=Jw(r))&&wk(0,o,i.field),s}(this.$f,o,n);return new kk((r=this.$f,i=r.rn.concat([s]),new Ww(r.path,r.collectionGroup,i,r.filters.slice(),r.limit,r.on,r.startAt,r.endAt)),this.firestore,this.m_)},kk.prototype.limit=function(t){return hm("Query.limit",arguments,1),pm("Query.limit","number",1,t),Sm("Query.limit",1,t),new kk(nE(this.$f,t,"F"),this.firestore,this.m_)},kk.prototype.limitToLast=function(t){return hm("Query.limitToLast",arguments,1),pm("Query.limitToLast","number",1,t),Sm("Query.limitToLast",1,t),new kk(nE(this.$f,t,"L"),this.firestore,this.m_)},kk.prototype.startAt=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];lm("Query.startAt",arguments,1);var r=this.kf("Query.startAt",t,e,!0);return new kk(rE(this.$f,r),this.firestore,this.m_)},kk.prototype.startAfter=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];lm("Query.startAfter",arguments,1);var r=this.kf("Query.startAfter",t,e,!1);return new kk(rE(this.$f,r),this.firestore,this.m_)},kk.prototype.endBefore=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];lm("Query.endBefore",arguments,1);var r=this.kf("Query.endBefore",t,e,!0);return new kk(iE(this.$f,r),this.firestore,this.m_)},kk.prototype.endAt=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];lm("Query.endAt",arguments,1);var r=this.kf("Query.endAt",t,e,!1);return new kk(iE(this.$f,r),this.firestore,this.m_)},kk.prototype.isEqual=function(t){if(!(t instanceof kk))throw Tm("isEqual","Query",1,t);return this.firestore===t.firestore&&oE(this.$f,t.$f)&&this.m_===t.m_},kk.prototype.withConverter=function(t){return new kk(this.$f,this.firestore,t)},kk.prototype.kf=function(h,t,e,n){if(Em(h,1,t),t instanceof uk)return hm(h,$s([t],e),1),function(t,e,n,r){if(!n)throw new jg(Ug.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+h+"().");for(var i=[],o=0,s=tE(t);o<s.length;o++){var a=s[o];if(a.field.p())i.push(s_(e,n.key));else{var u=n.field(a.field);if(Qb(u))throw new jg(Ug.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+a.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===u){var c=a.field.R();throw new jg(Ug.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+c+"' (used as the orderBy) does not exist.")}i.push(u)}}return new RE(i,r)}(this.$f,this.firestore.d_,t.Nf,n);var r=[t].concat(e);return function(t,e,n,r,i,o){var s=t.rn;if(i.length>s.length)throw new jg(Ug.INVALID_ARGUMENT,"Too many arguments provided to "+r+"(). The number of arguments must be less than or equal to the number of orderBy() clauses");for(var a=[],u=0;u<i.length;u++){var c=i[u];if(s[u].field.p()){if("string"!=typeof c)throw new jg(Ug.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+r+"(), but got a "+typeof c);if(!Zw(t)&&-1!==c.indexOf("/"))throw new jg(Ug.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+r+"() must be a plain document ID, but '"+c+"' contains a slash.");var h=t.path.child(em.P(c));if(!im.F(h))throw new jg(Ug.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+r+"() must result in a valid document path, but '"+h+"' is not because it contains an odd number of segments.");var l=new im(h);a.push(s_(e,l))}else{var f=MA(n,r,c);a.push(f)}}return new RE(a,o)}(this.$f,this.firestore.d_,this.firestore.Ef,h,r,n)},kk.prototype.onSnapshot=function(){for(var t,e,n,r=this,i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];fm("Query.onSnapshot",arguments,1,4);var s,a={},u=0;"object"!=typeof i[u]||$A(i[u])||(Im("Query.onSnapshot",a=i[u],["includeMetadataChanges"]),ym("Query.onSnapshot","boolean","includeMetadataChanges",a.includeMetadataChanges),u++),$A(i[u])?(s=i[u],i[u]=null===(t=s.next)||void 0===t?void 0:t.bind(s),i[u+1]=null===(e=s.error)||void 0===e?void 0:e.bind(s),i[u+2]=null===(n=s.complete)||void 0===n?void 0:n.bind(s)):(pm("Query.onSnapshot","function",u,i[u]),dm("Query.onSnapshot","function",u+1,i[u+1]),dm("Query.onSnapshot","function",u+2,i[u+2]));var c={next:function(t){i[u]&&i[u](new Sk(r.firestore,r.$f,t,r.m_))},error:i[u+1],complete:i[u+2]};return Ek(this.$f),this.firestore._f().listen(this.$f,a,c)},kk.prototype.get=function(t){var e=this;fm("Query.get",arguments,0,1),Pk("Query.get",t),Ek(this.$f);var n=this.firestore._f();return(t&&"cache"===t.source?n.G_(this.$f):n.z_(this.$f,t)).then(function(t){return new Sk(e.firestore,e.$f,t,e.m_)})},kk),Sk=(Object.defineProperty(Ak.prototype,"docs",{get:function(){var e=[];return this.forEach(function(t){return e.push(t)}),e},enumerable:!1,configurable:!0}),Object.defineProperty(Ak.prototype,"empty",{get:function(){return this.Of.docs.m()},enumerable:!1,configurable:!0}),Object.defineProperty(Ak.prototype,"size",{get:function(){return this.Of.docs.size},enumerable:!1,configurable:!0}),Ak.prototype.forEach=function(e,n){var r=this;fm("QuerySnapshot.forEach",arguments,1,2),pm("QuerySnapshot.forEach","function",1,e),this.Of.docs.forEach(function(t){e.call(n,r.qf(t,r.metadata.fromCache,r.Of.Qt.has(t.key)))})},Object.defineProperty(Ak.prototype,"query",{get:function(){return new Tk(this.Mf,this.pf,this.m_)},enumerable:!1,configurable:!0}),Ak.prototype.docChanges=function(t){t&&(Im("QuerySnapshot.docChanges",t,["includeMetadataChanges"]),ym("QuerySnapshot.docChanges","boolean","includeMetadataChanges",t.includeMetadataChanges));var e=!(!t||!t.includeMetadataChanges);if(e&&this.Of.jt)throw new jg(Ug.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this.Lf&&this.Bf===e||(this.Lf=function(i,e,o){if(i.Ut.m()){var n=0;return i.docChanges.map(function(t){var e=o(t.doc,i.fromCache,i.Qt.has(t.doc.key));return t.doc,{type:"added",doc:e,oldIndex:-1,newIndex:n++}})}var s=i.Ut;return i.docChanges.filter(function(t){return e||3!==t.type}).map(function(t){var e=o(t.doc,i.fromCache,i.Qt.has(t.doc.key)),n=-1,r=-1;return 0!==t.type&&(n=s.indexOf(t.doc.key),s=s.delete(t.doc.key)),1!==t.type&&(r=(s=s.add(t.doc)).indexOf(t.doc.key)),{type:function(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return zg()}}(t.type),doc:e,oldIndex:n,newIndex:r}})}(this.Of,e,this.qf.bind(this)),this.Bf=e),this.Lf},Ak.prototype.isEqual=function(t){if(!(t instanceof Ak))throw Tm("isEqual","QuerySnapshot",1,t);return this.pf===t.pf&&oE(this.Mf,t.Mf)&&this.Of.isEqual(t.Of)&&this.m_===t.m_},Ak.prototype.qf=function(t,e,n){return new ck(this.pf,t.key,t,e,n,this.m_)},Ak),Ck=(Gs(Nk,Ik=Tk),Object.defineProperty(Nk.prototype,"id",{get:function(){return this.$f.path._()},enumerable:!1,configurable:!0}),Object.defineProperty(Nk.prototype,"parent",{get:function(){var t=this.$f.path.h();return t.m()?null:new sk(new im(t),this.firestore,null)},enumerable:!1,configurable:!0}),Object.defineProperty(Nk.prototype,"path",{get:function(){return this.$f.path.R()},enumerable:!1,configurable:!0}),Nk.prototype.doc=function(t){fm("CollectionReference.doc",arguments,0,1),0===arguments.length&&(t=Am.k()),pm("CollectionReference.doc","non-empty string",1,t);var e=em.P(t);return sk.gf(this.$f.path.child(e),this.firestore,this.m_)},Nk.prototype.add=function(t){hm("CollectionReference.add",arguments,1);var e=this.m_?this.m_.toFirestore(t):t;pm("CollectionReference.add","object",1,e);var n=this.doc();return new sk(n.w_,this.firestore,null).set(e).then(function(){return n})},Nk.prototype.withConverter=function(t){return new Nk(this.Uf,this.firestore,t)},Nk);function Nk(t,e,n){var r=this;if(((r=Ik.call(this,Qw(t),e,n)||this).Uf=t).length%2!=1)throw new jg(Ug.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+t.R()+" has "+t.length);return r}function Ak(t,e,n,r){this.pf=t,this.Mf=e,this.Of=n,this.m_=r,this.Lf=null,this.Bf=null,this.metadata=new ak(n.hasPendingWrites,n.fromCache)}function kk(t,e,n){this.$f=t,this.firestore=e,this.m_=n}function Ok(t,e){if(void 0===e)return{merge:!1};if(Im(t,e,["merge","mergeFields"]),ym(t,"boolean","merge",e.merge),void 0!==(n=e.mergeFields)&&function(t,e,n,r){if(!(n instanceof Array))throw new jg(Ug.INVALID_ARGUMENT,"Function "+t+"() requires its "+e+" option to be an array, but it was: "+wm(n));for(var i=0;i<n.length;++i)if(!r(n[i]))throw new jg(Ug.INVALID_ARGUMENT,"Function "+t+"() requires all "+e+" elements to be a string or a FieldPath, but the value at index "+i+" was: "+wm(n[i]))}(t,"mergeFields",n,function(t){return"string"==typeof t||t instanceof GN}),void 0!==e.mergeFields&&void 0!==e.merge)throw new jg(Ug.INVALID_ARGUMENT,"Invalid options passed to function "+t+'(): You cannot specify both "merge" and "mergeFields".');var n;return e}function Rk(t,e){return void 0===e?{}:(Im(t,e,["serverTimestamps"]),gm(t,0,"serverTimestamps",e.serverTimestamps,["estimate","previous","none"]),e)}function Pk(t,e){dm(t,"object",1,e),e&&(Im(t,e,["source"]),gm(t,0,"source",e.source,["default","server","cache"]))}function Dk(t,e,n){if(e instanceof yA){if(e.firestore!==n)throw new jg(Ug.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}throw Tm(t,"DocumentReference",1,e)}function xk(t,e,n){return t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e}var Lk,Mk={Firestore:rk,GeoPoint:dA,Timestamp:Gm,Blob:qm,Transaction:ik,WriteBatch:ok,DocumentReference:sk,DocumentSnapshot:uk,Query:Tk,QueryDocumentSnapshot:ck,QuerySnapshot:Sk,CollectionReference:Ck,FieldPath:GN,FieldValue:fA,setLogLevel:rk.setLogLevel,CACHE_SIZE_UNLIMITED:ek};(Lk=Hl).INTERNAL.registerComponent(new Ka("firestore",function(t){return e=t.getProvider("app").getImmediate(),n=t.getProvider("auth-internal"),r=new qN,i=new VN(r),new rk(e,n,i,r);var e,n,r,i},"PUBLIC").setServiceProps(Object.assign({},Mk))),Lk.registerVersion("@firebase/firestore","1.17.1");var Fk,Uk={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},jk=(Gs(Vk,Fk=Error),Vk);function Vk(t,e,n){var r=Fk.call(this,e)||this;return Object.setPrototypeOf(r,Vk.prototype),r.code=t,r.details=n,r}function qk(t,e,n){var r=function(t){if(200<=t&&t<300)return"ok";switch(t){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}(t),i=r,o=void 0;try{var s=e&&e.error;if(s){var a=s.status;if("string"==typeof a){if(!Uk[a])return new jk("internal","internal");r=Uk[a],i=a}var u=s.message;"string"==typeof u&&(i=u),void 0!==(o=s.details)&&(o=n.decode(o))}}catch(t){}return"ok"===r?null:new jk(r,i,o)}var Bk=(Wk.prototype.getAuthToken=function(){return Ks(this,void 0,void 0,function(){var e;return zs(this,function(t){switch(t.label){case 0:if(!this.auth)return[2,void 0];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,this.auth.getToken()];case 2:return(e=t.sent())?[2,e.accessToken]:[2,void 0];case 3:return t.sent(),[2,void 0];case 4:return[2]}})})},Wk.prototype.getInstanceIdToken=function(){return Ks(this,void 0,void 0,function(){return zs(this,function(t){if(!(this.messaging&&"Notification"in self&&"granted"===Notification.permission))return[2,void 0];try{return[2,this.messaging.getToken()]}catch(t){return[2,void 0]}return[2]})})},Wk.prototype.getContext=function(){return Ks(this,void 0,void 0,function(){var e,n;return zs(this,function(t){switch(t.label){case 0:return[4,this.getAuthToken()];case 1:return e=t.sent(),[4,this.getInstanceIdToken()];case 2:return n=t.sent(),[2,{authToken:e,instanceIdToken:n}]}})})},Wk);function Wk(t,e){var n=this;this.auth=null,this.messaging=null,this.auth=t.getImmediate({optional:!0}),this.messaging=e.getImmediate({optional:!0}),this.auth||t.get().then(function(t){return n.auth=t},function(){}),this.messaging||e.get().then(function(t){return n.messaging=t},function(){})}function Gk(t,e){var n,r={};for(n in t)t.hasOwnProperty(n)&&(r[n]=e(t[n]));return r}var Hk=(Kk.prototype.encode=function(t){var e=this;if(null==t)return null;if(t instanceof Number&&(t=t.valueOf()),"number"==typeof t&&isFinite(t))return t;if(!0===t||!1===t)return t;if("[object String]"===Object.prototype.toString.call(t))return t;if(Array.isArray(t))return t.map(function(t){return e.encode(t)});if("function"==typeof t||"object"==typeof t)return Gk(t,function(t){return e.encode(t)});throw new Error("Data cannot be encoded in JSON: "+t)},Kk.prototype.decode=function(t){var e=this;if(null==t)return t;if(t["@type"])switch(t["@type"]){case"type.googleapis.com/google.protobuf.Int64Value":case"type.googleapis.com/google.protobuf.UInt64Value":var n=Number(t.value);if(isNaN(n))throw new Error("Data cannot be decoded from JSON: "+t);return n;default:throw new Error("Data cannot be decoded from JSON: "+t)}return Array.isArray(t)?t.map(function(t){return e.decode(t)}):"function"==typeof t||"object"==typeof t?Gk(t,function(t){return e.decode(t)}):t},Kk);function Kk(){}var zk=(Object.defineProperty(Qk.prototype,"app",{get:function(){return this.app_},enumerable:!1,configurable:!0}),Qk.prototype._url=function(t){var e=this.app_.options.projectId,n=this.region_;return null===this.emulatorOrigin?"https://"+n+"-"+e+".cloudfunctions.net/"+t:this.emulatorOrigin+"/"+e+"/"+n+"/"+t},Qk.prototype.useFunctionsEmulator=function(t){this.emulatorOrigin=t},Qk.prototype.httpsCallable=function(e,n){var r=this;return function(t){return r.call(e,t,n||{})}},Qk.prototype.postJSON=function(r,i,o){return Ks(this,void 0,void 0,function(){var e,n;return zs(this,function(t){switch(t.label){case 0:o["Content-Type"]="application/json",t.label=1;case 1:return t.trys.push([1,3,,4]),[4,this.fetchImpl(r,{method:"POST",body:JSON.stringify(i),headers:o})];case 2:return e=t.sent(),[3,4];case 3:return t.sent(),[2,{status:0,json:null}];case 4:n=null,t.label=5;case 5:return t.trys.push([5,7,,8]),[4,e.json()];case 6:return n=t.sent(),[3,8];case 7:return t.sent(),[3,8];case 8:return[2,{status:e.status,json:n}]}})})},Qk.prototype.call=function(v,y,g){return Ks(this,void 0,void 0,function(){var i,o,s,a,u,c,h,l,f,p,d;return zs(this,function(t){switch(t.label){case 0:return i=this._url(v),y=this.serializer.encode(y),o={data:y},s={},[4,this.contextProvider.getContext()];case 1:return(a=t.sent()).authToken&&(s.Authorization="Bearer "+a.authToken),a.instanceIdToken&&(s["Firebase-Instance-ID-Token"]=a.instanceIdToken),u=g.timeout||7e4,n=u,e=new Promise(function(t,e){r=setTimeout(function(){e(new jk("deadline-exceeded","deadline-exceeded"))},n)}),h=(c={timer:r,promise:e}).timer,l=c.promise,[4,Promise.race([Yk(h,this.postJSON(i,o,s)),l,Yk(h,this.cancelAllRequests)])];case 2:if(!(f=t.sent()))throw new jk("cancelled","Firebase Functions instance was deleted.");if(p=qk(f.status,f.json,this.serializer))throw p;if(!f.json)throw new jk("internal","Response is not valid JSON object.");if(void 0===(d=f.json.data)&&(d=f.json.result),void 0===d)throw new jk("internal","Response is missing data field.");return[2,{data:this.serializer.decode(d)}]}var n,r,e})})},Qk);function Qk(t,e,n,r,i){var o=this;void 0===r&&(r="us-central1"),this.app_=t,this.region_=r,this.fetchImpl=i,this.serializer=new Hk,this.emulatorOrigin=null,this.INTERNAL={delete:function(){return Promise.resolve(o.deleteService())}},this.contextProvider=new Bk(e,n),this.cancelAllRequests=new Promise(function(t){o.deleteService=function(){return t()}})}function Yk(n,r){return Ks(this,void 0,void 0,function(){var e;return zs(this,function(t){switch(t.label){case 0:return[4,r];case 1:return e=t.sent(),clearTimeout(n),[2,e]}})})}var Xk,$k;function Jk(n){return new Promise(function(t,e){n.onsuccess=function(){t(n.result)},n.onerror=function(){e(n.error)}})}function Zk(n,r,i){var o,t=new Promise(function(t,e){Jk(o=n[r].apply(n,i)).then(t,e)});return t.request=o,t}function tO(t,n,e){e.forEach(function(e){Object.defineProperty(t.prototype,e,{get:function(){return this[n][e]},set:function(t){this[n][e]=t}})})}function eO(e,n,r,t){t.forEach(function(t){t in r.prototype&&(e.prototype[t]=function(){return Zk(this[n],t,arguments)})})}function nO(e,n,r,t){t.forEach(function(t){t in r.prototype&&(e.prototype[t]=function(){return this[n][t].apply(this[n],arguments)})})}function rO(t,r,e,n){n.forEach(function(n){n in e.prototype&&(t.prototype[n]=function(){return t=this[r],(e=Zk(t,n,arguments)).then(function(t){if(t)return new oO(t,e.request)});var t,e})})}function iO(t){this._index=t}function oO(t,e){this._cursor=t,this._request=e}function sO(t){this._store=t}function aO(n){this._tx=n,this.complete=new Promise(function(t,e){n.oncomplete=function(){t()},n.onerror=function(){e(n.error)},n.onabort=function(){e(n.error)}})}function uO(t,e,n){this._db=t,this.oldVersion=e,this.transaction=new aO(n)}function cO(t){this._db=t}function hO(t,e,n){var r=Zk(indexedDB,"open",[t,e]),i=r.request;return i&&(i.onupgradeneeded=function(t){n&&n(new uO(i.result,t.oldVersion,i.transaction))}),r.then(function(t){return new cO(t)})}function lO(t){return Zk(indexedDB,"deleteDatabase",[t])}Xk=fetch,$k={Functions:zk},Hl.INTERNAL.registerComponent(new Ka("functions",function(t,e){var n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),i=t.getProvider("messaging");return new zk(n,r,i,e,Xk)},"PUBLIC").setServiceProps($k).setMultipleInstances(!0)),Hl.registerVersion("@firebase/functions","0.4.51"),tO(iO,"_index",["name","keyPath","multiEntry","unique"]),eO(iO,"_index",IDBIndex,["get","getKey","getAll","getAllKeys","count"]),rO(iO,"_index",IDBIndex,["openCursor","openKeyCursor"]),tO(oO,"_cursor",["direction","key","primaryKey","value"]),eO(oO,"_cursor",IDBCursor,["update","delete"]),["advance","continue","continuePrimaryKey"].forEach(function(n){n in IDBCursor.prototype&&(oO.prototype[n]=function(){var e=this,t=arguments;return Promise.resolve().then(function(){return e._cursor[n].apply(e._cursor,t),Jk(e._request).then(function(t){if(t)return new oO(t,e._request)})})})}),sO.prototype.createIndex=function(){return new iO(this._store.createIndex.apply(this._store,arguments))},sO.prototype.index=function(){return new iO(this._store.index.apply(this._store,arguments))},tO(sO,"_store",["name","keyPath","indexNames","autoIncrement"]),eO(sO,"_store",IDBObjectStore,["put","add","delete","clear","get","getAll","getKey","getAllKeys","count"]),rO(sO,"_store",IDBObjectStore,["openCursor","openKeyCursor"]),nO(sO,"_store",IDBObjectStore,["deleteIndex"]),aO.prototype.objectStore=function(){return new sO(this._tx.objectStore.apply(this._tx,arguments))},tO(aO,"_tx",["objectStoreNames","mode"]),nO(aO,"_tx",IDBTransaction,["abort"]),uO.prototype.createObjectStore=function(){return new sO(this._db.createObjectStore.apply(this._db,arguments))},tO(uO,"_db",["name","version","objectStoreNames"]),nO(uO,"_db",IDBDatabase,["deleteObjectStore","close"]),cO.prototype.transaction=function(){return new aO(this._db.transaction.apply(this._db,arguments))},tO(cO,"_db",["name","version","objectStoreNames"]),nO(cO,"_db",IDBDatabase,["close"]),["openCursor","openKeyCursor"].forEach(function(o){[sO,iO].forEach(function(t){o in t.prototype&&(t.prototype[o.replace("open","iterate")]=function(){var t,e=(t=arguments,Array.prototype.slice.call(t)),n=e[e.length-1],r=this._store||this._index,i=r[o].apply(r,e.slice(0,-1));i.onsuccess=function(){n(i.result)}})})}),[iO,sO].forEach(function(t){t.prototype.getAll||(t.prototype.getAll=function(t,n){var r=this,i=[];return new Promise(function(e){r.iterateCursor(t,function(t){t?(i.push(t.value),void 0===n||i.length!=n?t.continue():e(i)):e(i)})})})});var fO,pO=1e4,dO="w:0.4.17",vO="FIS_v2",yO="https://firebaseinstallations.googleapis.com/v1",gO=36e5,mO=((fO={})["missing-app-config-values"]='Missing App configuration value: "{$valueName}"',fO["not-registered"]="Firebase Installation is not registered.",fO["installation-not-found"]="Firebase Installation not found.",fO["request-failed"]='{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',fO["app-offline"]="Could not process request. Application offline.",fO["delete-pending-registration"]="Can't delete installation while there is a pending registration request.",fO),bO=new _a("installations","Installations",mO);function _O(t){return t instanceof ma&&t.code.includes("request-failed")}function wO(t){var e=t.projectId;return yO+"/projects/"+e+"/installations"}function EO(t){return{token:t.token,requestStatus:2,expiresIn:(e=t.expiresIn,Number(e.replace("s","000"))),creationTime:Date.now()};var e}function IO(r,i){return Ks(this,void 0,void 0,function(){var e,n;return zs(this,function(t){switch(t.label){case 0:return[4,i.json()];case 1:return e=t.sent(),n=e.error,[2,bO.create("request-failed",{requestName:r,serverCode:n.code,serverMessage:n.message,serverStatus:n.status})]}})})}function TO(t){var e=t.apiKey;return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":e})}function SO(t,e){var n=e.refreshToken,r=TO(t);return r.append("Authorization",vO+" "+n),r}function CO(n){return Ks(this,void 0,void 0,function(){var e;return zs(this,function(t){switch(t.label){case 0:return[4,n()];case 1:return 500<=(e=t.sent()).status&&e.status<600?[2,n()]:[2,e]}})})}function NO(e){return new Promise(function(t){setTimeout(t,e)})}var AO=/^[cdef][\w-]{21}$/,kO="";function OO(){try{var t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;var e=function(t){return btoa(String.fromCharCode.apply(String,Xs(t))).replace(/\+/g,"-").replace(/\//g,"_")}(t).substr(0,22);return AO.test(e)?e:kO}catch(t){return kO}}function RO(t){return t.appName+"!"+t.appId}var PO=new Map;function DO(t,e){var n=RO(t);xO(n,e),function(t,e){var n=MO();n&&n.postMessage({key:t,fid:e});FO()}(n,e)}function xO(t,e){var n,r,i=PO.get(t);if(i)try{for(var o=Qs(i),s=o.next();!s.done;s=o.next()){(0,s.value)(e)}}catch(t){n={error:t}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}}var LO=null;function MO(){return!LO&&"BroadcastChannel"in self&&((LO=new BroadcastChannel("[Firebase] FID Change")).onmessage=function(t){xO(t.data.key,t.data.fid)}),LO}function FO(){0===PO.size&&LO&&(LO.close(),LO=null)}var UO,jO,VO="firebase-installations-database",qO=1,BO="firebase-installations-store",WO=null;function GO(){return WO=WO||hO(VO,qO,function(t){0===t.oldVersion&&t.createObjectStore(BO)})}function HO(s,a){return Ks(this,void 0,void 0,function(){var e,n,r,i,o;return zs(this,function(t){switch(t.label){case 0:return e=RO(s),[4,GO()];case 1:return n=t.sent(),r=n.transaction(BO,"readwrite"),[4,(i=r.objectStore(BO)).get(e)];case 2:return o=t.sent(),[4,i.put(a,e)];case 3:return t.sent(),[4,r.complete];case 4:return t.sent(),o&&o.fid===a.fid||DO(s,a.fid),[2,a]}})})}function KO(i){return Ks(this,void 0,void 0,function(){var e,n,r;return zs(this,function(t){switch(t.label){case 0:return e=RO(i),[4,GO()];case 1:return n=t.sent(),[4,(r=n.transaction(BO,"readwrite")).objectStore(BO).delete(e)];case 2:return t.sent(),[4,r.complete];case 3:return t.sent(),[2]}})})}function zO(a,u){return Ks(this,void 0,void 0,function(){var e,n,r,i,o,s;return zs(this,function(t){switch(t.label){case 0:return e=RO(a),[4,GO()];case 1:return n=t.sent(),r=n.transaction(BO,"readwrite"),[4,(i=r.objectStore(BO)).get(e)];case 2:return o=t.sent(),void 0!==(s=u(o))?[3,4]:[4,i.delete(e)];case 3:return t.sent(),[3,6];case 4:return[4,i.put(s,e)];case 5:t.sent(),t.label=6;case 6:return[4,r.complete];case 7:return t.sent(),!s||o&&o.fid===s.fid||DO(a,s.fid),[2,s]}})})}function QO(i){return Ks(this,void 0,void 0,function(){var r,e,n;return zs(this,function(t){switch(t.label){case 0:return[4,zO(i,function(t){var e=XO(t||{fid:OO(),registrationStatus:0}),n=function(t,e){{if(0!==e.registrationStatus)return 1===e.registrationStatus?{installationEntry:e,registrationPromise:function(o){return Ks(this,void 0,void 0,function(){var e,n,r,i;return zs(this,function(t){switch(t.label){case 0:return[4,YO(o)];case 1:e=t.sent(),t.label=2;case 2:return 1!==e.registrationStatus?[3,5]:[4,NO(100)];case 3:return t.sent(),[4,YO(o)];case 4:return e=t.sent(),[3,2];case 5:return 0!==e.registrationStatus?[3,7]:[4,QO(o)];case 6:return n=t.sent(),r=n.installationEntry,(i=n.registrationPromise)?[2,i]:[2,r];case 7:return[2,e]}})})}(t)}:{installationEntry:e};if(!navigator.onLine){var n=Promise.reject(bO.create("app-offline"));return{installationEntry:e,registrationPromise:n}}var r={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},i=function(r,i){return Ks(this,void 0,void 0,function(){var e,n;return zs(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,7]),[4,function(a,t){var u=t.fid;return Ks(this,void 0,void 0,function(){var e,n,r,i,o,s;return zs(this,function(t){switch(t.label){case 0:return e=wO(a),n=TO(a),r={fid:u,authVersion:vO,appId:a.appId,sdkVersion:dO},i={method:"POST",headers:n,body:JSON.stringify(r)},[4,CO(function(){return fetch(e,i)})];case 1:return(o=t.sent()).ok?[4,o.json()]:[3,3];case 2:return s=t.sent(),[2,{fid:s.fid||u,registrationStatus:2,refreshToken:s.refreshToken,authToken:EO(s.authToken)}];case 3:return[4,IO("Create Installation",o)];case 4:throw t.sent()}})})}(r,i)];case 1:return e=t.sent(),[2,HO(r,e)];case 2:return _O(n=t.sent())&&409===n.serverCode?[4,KO(r)]:[3,4];case 3:return t.sent(),[3,6];case 4:return[4,HO(r,{fid:i.fid,registrationStatus:0})];case 5:t.sent(),t.label=6;case 6:throw n;case 7:return[2]}})})}(t,r);return{installationEntry:r,registrationPromise:i}}}(i,e);return r=n.registrationPromise,n.installationEntry})];case 1:return(e=t.sent()).fid!==kO?[3,3]:(n={},[4,r]);case 2:return[2,(n.installationEntry=t.sent(),n)];case 3:return[2,{installationEntry:e,registrationPromise:r}]}})})}function YO(t){return zO(t,function(t){if(!t)throw bO.create("installation-not-found");return XO(t)})}function XO(t){return 1===(e=t).registrationStatus&&e.registrationTime+pO<Date.now()?{fid:t.fid,registrationStatus:0}:t;var e}function $O(t,h){var l=t.appConfig,f=t.platformLoggerProvider;return Ks(this,void 0,void 0,function(){var r,i,o,s,a,u,c;return zs(this,function(t){switch(t.label){case 0:return e=l,n=h.fid,r=wO(e)+"/"+n+"/authTokens:generate",i=SO(l,h),(o=f.getImmediate({optional:!0}))&&i.append("x-firebase-client",o.getPlatformInfoString()),s={installation:{sdkVersion:dO}},a={method:"POST",headers:i,body:JSON.stringify(s)},[4,CO(function(){return fetch(r,a)})];case 1:return(u=t.sent()).ok?[4,u.json()]:[3,3];case 2:return c=t.sent(),[2,EO(c)];case 3:return[4,IO("Generate Auth Token",u)];case 4:throw t.sent()}var e,n})})}function JO(a,u){return void 0===u&&(u=!1),Ks(this,void 0,void 0,function(){var s,e,n;return zs(this,function(t){switch(t.label){case 0:return[4,zO(a.appConfig,function(t){if(!tR(t))throw bO.create("not-registered");var e,n,r,i=t.authToken;if(u||2!==(r=i).requestStatus||function(t){var e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+gO}(r)){if(1===i.requestStatus)return s=function(r,i){return Ks(this,void 0,void 0,function(){var e,n;return zs(this,function(t){switch(t.label){case 0:return[4,ZO(r.appConfig)];case 1:e=t.sent(),t.label=2;case 2:return 1!==e.authToken.requestStatus?[3,5]:[4,NO(100)];case 3:return t.sent(),[4,ZO(r.appConfig)];case 4:return e=t.sent(),[3,2];case 5:return 0===(n=e.authToken).requestStatus?[2,JO(r,i)]:[2,n]}})})}(a,u),t;if(!navigator.onLine)throw bO.create("app-offline");var o=(e=t,n={requestStatus:1,requestTime:Date.now()},Hs(Hs({},e),{authToken:n}));return s=function(i,o){return Ks(this,void 0,void 0,function(){var e,n,r;return zs(this,function(t){switch(t.label){case 0:return t.trys.push([0,3,,8]),[4,$O(i,o)];case 1:return e=t.sent(),r=Hs(Hs({},o),{authToken:e}),[4,HO(i.appConfig,r)];case 2:return t.sent(),[2,e];case 3:return!_O(n=t.sent())||401!==n.serverCode&&404!==n.serverCode?[3,5]:[4,KO(i.appConfig)];case 4:return t.sent(),[3,7];case 5:return r=Hs(Hs({},o),{authToken:{requestStatus:0}}),[4,HO(i.appConfig,r)];case 6:t.sent(),t.label=7;case 7:throw n;case 8:return[2]}})})}(a,o),o}return t})];case 1:return e=t.sent(),s?[4,s]:[3,3];case 2:return n=t.sent(),[3,4];case 3:n=e.authToken,t.label=4;case 4:return[2,n]}})})}function ZO(t){return zO(t,function(t){if(!tR(t))throw bO.create("not-registered");var e,n=t.authToken;return 1===(e=n).requestStatus&&e.requestTime+pO<Date.now()?Hs(Hs({},t),{authToken:{requestStatus:0}}):t})}function tR(t){return void 0!==t&&2===t.registrationStatus}function eR(e,n){return void 0===n&&(n=!1),Ks(this,void 0,void 0,function(){return zs(this,function(t){switch(t.label){case 0:return[4,function(n){return Ks(this,void 0,void 0,function(){var e;return zs(this,function(t){switch(t.label){case 0:return[4,QO(n)];case 1:return(e=t.sent().registrationPromise)?[4,e]:[3,3];case 2:t.sent(),t.label=3;case 3:return[2]}})})}(e.appConfig)];case 1:return t.sent(),[4,JO(e,n)];case 2:return[2,t.sent().token]}})})}function nR(a,u){return Ks(this,void 0,void 0,function(){var r,i,o,s;return zs(this,function(t){switch(t.label){case 0:return e=a,n=u.fid,r=wO(e)+"/"+n,i=SO(a,u),o={method:"DELETE",headers:i},[4,CO(function(){return fetch(r,o)})];case 1:return(s=t.sent()).ok?[3,3]:[4,IO("Delete Installation",s)];case 2:throw t.sent();case 3:return[2]}var e,n})})}function rR(t,r){var i=t.appConfig;return function(t,e){MO();var n=RO(t),r=PO.get(n);r||(r=new Set,PO.set(n,r)),r.add(e)}(i,r),function(){var t,e,n;t=r,e=RO(i),(n=PO.get(e))&&(n.delete(t),0===n.size&&PO.delete(e),FO())}}function iR(t){return bO.create("missing-app-config-values",{valueName:t})}(UO=Hl).INTERNAL.registerComponent(new Ka("installations",function(t){var e=t.getProvider("app").getImmediate(),n={appConfig:function(t){var e,n;if(!t||!t.options)throw iR("App Configuration");if(!t.name)throw iR("App Name");try{for(var r=Qs(["projectId","apiKey","appId"]),i=r.next();!i.done;i=r.next()){var o=i.value;if(!t.options[o])throw iR(o)}}catch(t){e={error:t}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}(e),platformLoggerProvider:t.getProvider("platform-logger")};return{app:e,getId:function(){return function(i){return Ks(this,void 0,void 0,function(){var e,n,r;return zs(this,function(t){switch(t.label){case 0:return[4,QO(i.appConfig)];case 1:return e=t.sent(),n=e.installationEntry,(r=e.registrationPromise)?r.catch(console.error):JO(i).catch(console.error),[2,n.fid]}})})}(n)},getToken:function(t){return eR(n,t)},delete:function(){return function(r){return Ks(this,void 0,void 0,function(){var e,n;return zs(this,function(t){switch(t.label){case 0:return[4,zO(e=r.appConfig,function(t){if(!t||0!==t.registrationStatus)return t})];case 1:if(!(n=t.sent()))return[3,6];if(1!==n.registrationStatus)return[3,2];throw bO.create("delete-pending-registration");case 2:if(2!==n.registrationStatus)return[3,6];if(navigator.onLine)return[3,3];throw bO.create("app-offline");case 3:return[4,nR(e,n)];case 4:return t.sent(),[4,KO(e)];case 5:t.sent(),t.label=6;case 6:return[2]}})})}(n)},onIdChange:function(t){return rR(n,t)}}},"PUBLIC")),UO.registerVersion("@firebase/installations","0.4.17");var oR,sR,aR=((jO={})["missing-app-config-values"]='Missing App configuration value: "{$valueName}"',jO["only-available-in-window"]="This method is available in a Window context.",jO["only-available-in-sw"]="This method is available in a service worker context.",jO["permission-default"]="The notification permission was not granted and dismissed instead.",jO["permission-blocked"]="The notification permission was not granted and blocked instead.",jO["unsupported-browser"]="This browser doesn't support the API's required to use the firebase SDK.",jO["failed-service-worker-registration"]="We are unable to register the default service worker. {$browserErrorMessage}",jO["token-subscribe-failed"]="A problem occurred while subscribing the user to FCM: {$errorInfo}",jO["token-subscribe-no-token"]="FCM returned no token when subscribing the user to push.",jO["token-unsubscribe-failed"]="A problem occurred while unsubscribing the user from FCM: {$errorInfo}",jO["token-update-failed"]="A problem occurred while updating the user from FCM: {$errorInfo}",jO["token-update-no-token"]="FCM returned no token when updating the user to push.",jO["use-sw-after-get-token"]="The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.",jO["invalid-sw-registration"]="The input to useServiceWorker() must be a ServiceWorkerRegistration.",jO["invalid-bg-handler"]="The input to setBackgroundMessageHandler() must be a function.",jO["invalid-vapid-key"]="The public VAPID key must be a string.",jO["use-vapid-key-after-get-token"]="The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used.",jO),uR=new _a("messaging","Messaging",aR),cR="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",hR="https://fcmregistrations.googleapis.com/v1",lR="FCM_MSG",fR="google.c.a.c_id";function pR(t){var e=new Uint8Array(t);return btoa(String.fromCharCode.apply(String,Xs(e))).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}(sR=oR=oR||{}).PUSH_RECEIVED="push-received",sR.NOTIFICATION_CLICKED="notification-clicked";var dR="fcm_token_details_db",vR=5,yR="fcm_token_object_Store";function gR(a){return Ks(this,void 0,void 0,function(){var e,s,n=this;return zs(this,function(t){switch(t.label){case 0:return"databases"in indexedDB?[4,indexedDB.databases()]:[3,2];case 1:if(e=t.sent(),!e.map(function(t){return t.name}).includes(dR))return[2,null];t.label=2;case 2:return s=null,[4,hO(dR,vR,function(o){return Ks(n,void 0,void 0,function(){var e,n,r,i;return zs(this,function(t){switch(t.label){case 0:return o.oldVersion<2?[2]:o.objectStoreNames.contains(yR)?[4,(e=o.transaction.objectStore(yR)).index("fcmSenderId").get(a)]:[2];case 1:return n=t.sent(),[4,e.clear()];case 2:if(t.sent(),!n)return[2];if(2===o.oldVersion){if(!(r=n).auth||!r.p256dh||!r.endpoint)return[2];s={token:r.fcmToken,createTime:null!==(i=r.createTime)&&void 0!==i?i:Date.now(),subscriptionOptions:{auth:r.auth,p256dh:r.p256dh,endpoint:r.endpoint,swScope:r.swScope,vapidKey:"string"==typeof r.vapidKey?r.vapidKey:pR(r.vapidKey)}}}else(3===o.oldVersion||4===o.oldVersion)&&(s={token:(r=n).fcmToken,createTime:r.createTime,subscriptionOptions:{auth:pR(r.auth),p256dh:pR(r.p256dh),endpoint:r.endpoint,swScope:r.swScope,vapidKey:pR(r.vapidKey)}});return[2]}})})})];case 3:return t.sent().close(),[4,lO(dR)];case 4:return t.sent(),[4,lO("fcm_vapid_details_db")];case 5:return t.sent(),[4,lO("undefined")];case 6:return t.sent(),[2,function(t){if(!t||!t.subscriptionOptions)return!1;var e=t.subscriptionOptions;return"number"==typeof t.createTime&&0<t.createTime&&"string"==typeof t.token&&0<t.token.length&&"string"==typeof e.auth&&0<e.auth.length&&"string"==typeof e.p256dh&&0<e.p256dh.length&&"string"==typeof e.endpoint&&0<e.endpoint.length&&"string"==typeof e.swScope&&0<e.swScope.length&&"string"==typeof e.vapidKey&&0<e.vapidKey.length}(s)?s:null]}})})}var mR="firebase-messaging-database",bR=1,_R="firebase-messaging-store",wR=null;function ER(){return wR=wR||hO(mR,bR,function(t){0===t.oldVersion&&t.createObjectStore(_R)})}function IR(i){return Ks(this,void 0,void 0,function(){var e,n,r;return zs(this,function(t){switch(t.label){case 0:return e=SR(i),[4,ER()];case 1:return[4,t.sent().transaction(_R).objectStore(_R).get(e)];case 2:return(n=t.sent())?[2,n]:[3,3];case 3:return[4,gR(i.appConfig.senderId)];case 4:return(r=t.sent())?[4,TR(i,r)]:[3,6];case 5:return t.sent(),[2,r];case 6:return[2]}})})}function TR(i,o){return Ks(this,void 0,void 0,function(){var e,n,r;return zs(this,function(t){switch(t.label){case 0:return e=SR(i),[4,ER()];case 1:return n=t.sent(),[4,(r=n.transaction(_R,"readwrite")).objectStore(_R).put(o,e)];case 2:return t.sent(),[4,r.complete];case 3:return t.sent(),[2,o]}})})}function SR(t){return t.appConfig.appId}function CR(s,a){return Ks(this,void 0,void 0,function(){var e,n,r,i,o;return zs(this,function(t){switch(t.label){case 0:return[4,AR(s)];case 1:e=t.sent(),n={method:"DELETE",headers:e},t.label=2;case 2:return t.trys.push([2,5,,6]),[4,fetch(NR(s.appConfig)+"/"+a,n)];case 3:return[4,t.sent().json()];case 4:if((r=t.sent()).error)throw i=r.error.message,uR.create("token-unsubscribe-failed",{errorInfo:i});return[3,6];case 5:throw o=t.sent(),uR.create("token-unsubscribe-failed",{errorInfo:o});case 6:return[2]}})})}function NR(t){var e=t.projectId;return hR+"/projects/"+e+"/registrations"}function AR(t){var n=t.appConfig,r=t.installations;return Ks(this,void 0,void 0,function(){var e;return zs(this,function(t){switch(t.label){case 0:return[4,r.getToken()];case 1:return e=t.sent(),[2,new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n.apiKey,"x-goog-firebase-installations-auth":"FIS "+e})]}})})}function kR(t){var e=t.p256dh,n=t.auth,r=t.endpoint,i=t.vapidKey,o={web:{endpoint:r,auth:n,p256dh:e}};return i!==cR&&(o.web.applicationPubKey=i),o}function OR(l,f,p){return Ks(this,void 0,void 0,function(){var a,u,c,h;return zs(this,function(t){switch(t.label){case 0:if("granted"!==Notification.permission)throw uR.create("permission-blocked");return[4,function(n,r){return Ks(this,void 0,void 0,function(){var e;return zs(this,function(t){switch(t.label){case 0:return[4,n.pushManager.getSubscription()];case 1:return(e=t.sent())?[2,e]:[2,n.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:function(t){for(var e=(t+"=".repeat((4-t.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),n=atob(e),r=new Uint8Array(n.length),i=0;i<n.length;++i)r[i]=n.charCodeAt(i);return r}(r)})]}})})}(f,p)];case 1:return a=t.sent(),[4,IR(l)];case 2:return u=t.sent(),c={vapidKey:p,swScope:f.scope,endpoint:a.endpoint,auth:pR(a.getKey("auth")),p256dh:pR(a.getKey("p256dh"))},u?[3,3]:[2,PR(l,c)];case 3:if(e=u.subscriptionOptions,r=(n=c).vapidKey===e.vapidKey,i=n.endpoint===e.endpoint,o=n.auth===e.auth,s=n.p256dh===e.p256dh,r&&i&&o&&s)return[3,8];t.label=4;case 4:return t.trys.push([4,6,,7]),[4,CR(l,u.token)];case 5:return t.sent(),[3,7];case 6:return h=t.sent(),console.warn(h),[3,7];case 7:return[2,PR(l,c)];case 8:return Date.now()>=u.createTime+6048e5?[2,function(i,o,s){return Ks(this,void 0,void 0,function(){var e,n,r;return zs(this,function(t){switch(t.label){case 0:return t.trys.push([0,3,,5]),[4,function(a,u){return Ks(this,void 0,void 0,function(){var e,n,r,i,o,s;return zs(this,function(t){switch(t.label){case 0:return[4,AR(a)];case 1:e=t.sent(),n=kR(u.subscriptionOptions),r={method:"PATCH",headers:e,body:JSON.stringify(n)},t.label=2;case 2:return t.trys.push([2,5,,6]),[4,fetch(NR(a.appConfig)+"/"+u.token,r)];case 3:return[4,t.sent().json()];case 4:return i=t.sent(),[3,6];case 5:throw o=t.sent(),uR.create("token-update-failed",{errorInfo:o});case 6:if(i.error)throw s=i.error.message,uR.create("token-update-failed",{errorInfo:s});if(!i.token)throw uR.create("token-update-no-token");return[2,i.token]}})})}(o,i)];case 1:return e=t.sent(),n=Hs(Hs({},i),{token:e,createTime:Date.now()}),[4,TR(o,n)];case 2:return t.sent(),[2,e];case 3:return r=t.sent(),[4,RR(o,s)];case 4:throw t.sent(),r;case 5:return[2]}})})}({token:u.token,createTime:Date.now(),subscriptionOptions:c},l,f)]:[2,u.token];case 9:return[2]}var e,n,r,i,o,s})})}function RR(r,i){return Ks(this,void 0,void 0,function(){var e,n;return zs(this,function(t){switch(t.label){case 0:return[4,IR(r)];case 1:return(e=t.sent())?[4,CR(r,e.token)]:[3,4];case 2:return t.sent(),[4,function(i){return Ks(this,void 0,void 0,function(){var e,n,r;return zs(this,function(t){switch(t.label){case 0:return e=SR(i),[4,ER()];case 1:return n=t.sent(),[4,(r=n.transaction(_R,"readwrite")).objectStore(_R).delete(e)];case 2:return t.sent(),[4,r.complete];case 3:return t.sent(),[2]}})})}(r)];case 3:t.sent(),t.label=4;case 4:return[4,i.pushManager.getSubscription()];case 5:return(n=t.sent())?[2,n.unsubscribe()]:[2,!0]}})})}function PR(r,i){return Ks(this,void 0,void 0,function(){var e,n;return zs(this,function(t){switch(t.label){case 0:return[4,function(a,u){return Ks(this,void 0,void 0,function(){var e,n,r,i,o,s;return zs(this,function(t){switch(t.label){case 0:return[4,AR(a)];case 1:e=t.sent(),n=kR(u),r={method:"POST",headers:e,body:JSON.stringify(n)},t.label=2;case 2:return t.trys.push([2,5,,6]),[4,fetch(NR(a.appConfig),r)];case 3:return[4,t.sent().json()];case 4:return i=t.sent(),[3,6];case 5:throw o=t.sent(),uR.create("token-subscribe-failed",{errorInfo:o});case 6:if(i.error)throw s=i.error.message,uR.create("token-subscribe-failed",{errorInfo:s});if(!i.token)throw uR.create("token-subscribe-no-token");return[2,i.token]}})})}(r,i)];case 1:return e=t.sent(),n={token:e,createTime:Date.now(),subscriptionOptions:i},[4,TR(r,n)];case 2:return t.sent(),[2,n.token]}})})}function DR(t){var e={from:t.from,collapseKey:t.collapse_key};return function(t,e){if(!e.notification)return;t.notification={};var n=e.notification.title;n&&(t.notification.title=n);var r=e.notification.body;r&&(t.notification.body=r);var i=e.notification.image;i&&(t.notification.image=i)}(e,t),function(t,e){if(!e.data)return;t.data=e.data}(e,t),function(t,e){if(!e.fcmOptions)return;t.fcmOptions={};var n=e.fcmOptions.link;n&&(t.fcmOptions.link=n);var r=e.fcmOptions.analytics_label;r&&(t.fcmOptions.analyticsLabel=r)}(e,t),e}function xR(t){return"object"==typeof t&&t&&fR in t}var LR=(Object.defineProperty(MR.prototype,"app",{get:function(){return this.firebaseDependencies.app},enumerable:!1,configurable:!0}),MR.prototype.setBackgroundMessageHandler=function(t){if(this.isOnBackgroundMessageUsed=!1,!t||"function"!=typeof t)throw uR.create("invalid-bg-handler");this.bgMessageHandler=t},MR.prototype.onBackgroundMessage=function(t){var e=this;return this.isOnBackgroundMessageUsed=!0,this.bgMessageHandler=t,function(){e.bgMessageHandler=null}},MR.prototype.getToken=function(){var n,r;return Ks(this,void 0,void 0,function(){var e;return zs(this,function(t){switch(t.label){case 0:return this.vapidKey?[3,2]:[4,IR(this.firebaseDependencies)];case 1:e=t.sent(),this.vapidKey=null!==(r=null===(n=null==e?void 0:e.subscriptionOptions)||void 0===n?void 0:n.vapidKey)&&void 0!==r?r:cR,t.label=2;case 2:return[2,OR(this.firebaseDependencies,self.registration,this.vapidKey)]}})})},MR.prototype.deleteToken=function(){return RR(this.firebaseDependencies,self.registration)},MR.prototype.requestPermission=function(){throw uR.create("only-available-in-window")},MR.prototype.usePublicVapidKey=function(t){if(null!==this.vapidKey)throw uR.create("use-vapid-key-after-get-token");if("string"!=typeof t||0===t.length)throw uR.create("invalid-vapid-key");this.vapidKey=t},MR.prototype.useServiceWorker=function(){throw uR.create("only-available-in-window")},MR.prototype.onMessage=function(){throw uR.create("only-available-in-window")},MR.prototype.onTokenRefresh=function(){throw uR.create("only-available-in-window")},MR.prototype.onPush=function(u){return Ks(this,void 0,void 0,function(){var i,o,s,a;return zs(this,function(t){switch(t.label){case 0:return(i=function(t){var e=t.data;if(!e)return null;try{return e.json()}catch(t){return null}}(u))?[4,FR()]:(console.debug("FirebaseMessaging: failed to get parsed MessagePayload from the PushEvent. Skip handling the push."),[2]);case 1:return(o=t.sent(),o.some(function(t){return"visible"===t.visibilityState&&!t.url.startsWith("chrome-extension://")}))?[2,function(t,e){var n,r;e.isFirebaseMessaging=!0,e.messageType=oR.PUSH_RECEIVED;try{for(var i=Qs(t),o=i.next();!o.done;o=i.next()){o.value.postMessage(e)}}catch(t){n={error:t}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}}(o,i)]:(s=!1,i.notification?[4,function(t){var e,n=t.actions,r=Notification.maxActions;n&&r&&n.length>r&&console.warn("This browser only supports "+r+" actions. The remaining actions will not be displayed.");return self.registration.showNotification(null!==(e=t.title)&&void 0!==e?e:"",t)}(((r=Hs({},(e=i).notification)).data=((n={})[lR]=e,n),r))]:[3,3]);case 2:t.sent(),s=!0,t.label=3;case 3:return!0===s&&!1===this.isOnBackgroundMessageUsed?[2]:(this.bgMessageHandler&&(a=DR(i),"function"==typeof this.bgMessageHandler?this.bgMessageHandler(a):this.bgMessageHandler.next(a)),[2])}var e,n,r})})},MR.prototype.onSubChange=function(n){var r,i;return Ks(this,void 0,void 0,function(){var e;return zs(this,function(t){switch(t.label){case 0:return n.newSubscription?[3,2]:[4,RR(this.firebaseDependencies,self.registration)];case 1:return t.sent(),[2];case 2:return[4,IR(this.firebaseDependencies)];case 3:return e=t.sent(),[4,RR(this.firebaseDependencies,self.registration)];case 4:return t.sent(),[4,OR(this.firebaseDependencies,self.registration,null!==(i=null===(r=null==e?void 0:e.subscriptionOptions)||void 0===r?void 0:r.vapidKey)&&void 0!==i?i:cR)];case 5:return t.sent(),[2]}})})},MR.prototype.onNotificationClick=function(a){var u,c;return Ks(this,void 0,void 0,function(){var n,r,i,o,s;return zs(this,function(t){switch(t.label){case 0:return(n=null===(c=null===(u=a.notification)||void 0===u?void 0:u.data)||void 0===c?void 0:c[lR])?a.action?[2]:(a.stopImmediatePropagation(),a.notification.close(),(r=function(t){var e,n,r,i=null!==(n=null===(e=t.fcmOptions)||void 0===e?void 0:e.link)&&void 0!==n?n:null===(r=t.notification)||void 0===r?void 0:r.click_action;if(i)return i;return xR(t.data)?self.location.origin:null}(n))?(i=new URL(r,self.location.href),o=new URL(self.location.origin),i.host!==o.host?[2]:[4,function(u){return Ks(this,void 0,void 0,function(){var e,n,r,i,o,s,a;return zs(this,function(t){switch(t.label){case 0:return[4,FR()];case 1:e=t.sent();try{for(n=Qs(e),r=n.next();!r.done;r=n.next())if(i=r.value,o=new URL(i.url,self.location.href),u.host===o.host)return[2,i]}catch(t){s={error:t}}finally{try{r&&!r.done&&(a=n.return)&&a.call(n)}finally{if(s)throw s.error}}return[2,null]}})})}(i)]):[2]):[2];case 1:return(s=t.sent())?[3,4]:[4,self.clients.openWindow(r)];case 2:return s=t.sent(),[4,(e=3e3,new Promise(function(t){setTimeout(t,e)}))];case 3:return t.sent(),[3,6];case 4:return[4,s.focus()];case 5:s=t.sent(),t.label=6;case 6:return s?(n.messageType=oR.NOTIFICATION_CLICKED,n.isFirebaseMessaging=!0,[2,s.postMessage(n)]):[2]}var e})})},MR);function MR(t){var e=this;this.firebaseDependencies=t,this.isOnBackgroundMessageUsed=null,this.vapidKey=null,this.bgMessageHandler=null,self.addEventListener("push",function(t){t.waitUntil(e.onPush(t))}),self.addEventListener("pushsubscriptionchange",function(t){t.waitUntil(e.onSubChange(t))}),self.addEventListener("notificationclick",function(t){t.waitUntil(e.onNotificationClick(t))})}function FR(){return self.clients.matchAll({type:"window",includeUncontrolled:!0})}var UR=(Object.defineProperty(jR.prototype,"app",{get:function(){return this.firebaseDependencies.app},enumerable:!1,configurable:!0}),jR.prototype.messageEventListener=function(i){return Ks(this,void 0,void 0,function(){var n,r;return zs(this,function(t){switch(t.label){case 0:return(n=i.data).isFirebaseMessaging?(this.onMessageCallback&&n.messageType===oR.PUSH_RECEIVED&&("function"==typeof this.onMessageCallback?this.onMessageCallback((delete(e=Object.assign({},n)).messageType,delete e.isFirebaseMessaging,e)):this.onMessageCallback.next(Object.assign({},n))),xR(r=n.data)&&"1"===r["google.c.a.e"]?[4,this.logEvent(n.messageType,r)]:[3,2]):[2];case 1:t.sent(),t.label=2;case 2:return[2]}var e})})},jR.prototype.getVapidKey=function(){return this.vapidKey},jR.prototype.getSwReg=function(){return this.swRegistration},jR.prototype.getToken=function(e){return Ks(this,void 0,void 0,function(){return zs(this,function(t){switch(t.label){case 0:return"default"!==Notification.permission?[3,2]:[4,Notification.requestPermission()];case 1:t.sent(),t.label=2;case 2:if("granted"!==Notification.permission)throw uR.create("permission-blocked");return[4,this.updateVapidKey(null==e?void 0:e.vapidKey)];case 3:return t.sent(),[4,this.updateSwReg(null==e?void 0:e.serviceWorkerRegistration)];case 4:return t.sent(),[2,OR(this.firebaseDependencies,this.swRegistration,this.vapidKey)]}})})},jR.prototype.updateVapidKey=function(e){return Ks(this,void 0,void 0,function(){return zs(this,function(t){return e?this.vapidKey=e:this.vapidKey||(this.vapidKey=cR),[2]})})},jR.prototype.updateSwReg=function(e){return Ks(this,void 0,void 0,function(){return zs(this,function(t){switch(t.label){case 0:return e||this.swRegistration?[3,2]:[4,this.registerDefaultSw()];case 1:t.sent(),t.label=2;case 2:if(!e&&this.swRegistration)return[2];if(!(e instanceof ServiceWorkerRegistration))throw uR.create("invalid-sw-registration");return this.swRegistration=e,[2]}})})},jR.prototype.registerDefaultSw=function(){return Ks(this,void 0,void 0,function(){var e,n;return zs(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),e=this,[4,navigator.serviceWorker.register("/firebase-messaging-sw.js",{scope:"/firebase-cloud-messaging-push-scope"})];case 1:return e.swRegistration=t.sent(),this.swRegistration.update().catch(function(){}),[3,3];case 2:throw n=t.sent(),uR.create("failed-service-worker-registration",{browserErrorMessage:n.message});case 3:return[2]}})})},jR.prototype.deleteToken=function(){return Ks(this,void 0,void 0,function(){return zs(this,function(t){switch(t.label){case 0:return this.swRegistration?[3,2]:[4,this.registerDefaultSw()];case 1:t.sent(),t.label=2;case 2:return[2,RR(this.firebaseDependencies,this.swRegistration)]}})})},jR.prototype.requestPermission=function(){return Ks(this,void 0,void 0,function(){var e;return zs(this,function(t){switch(t.label){case 0:return"granted"===Notification.permission?[2]:[4,Notification.requestPermission()];case 1:if("granted"===(e=t.sent()))return[2];throw"denied"===e?uR.create("permission-blocked"):uR.create("permission-default")}})})},jR.prototype.usePublicVapidKey=function(t){if(null!==this.vapidKey)throw uR.create("use-vapid-key-after-get-token");if("string"!=typeof t||0===t.length)throw uR.create("invalid-vapid-key");this.vapidKey=t},jR.prototype.useServiceWorker=function(t){if(!(t instanceof ServiceWorkerRegistration))throw uR.create("invalid-sw-registration");if(this.swRegistration)throw uR.create("use-sw-after-get-token");this.swRegistration=t},jR.prototype.onMessage=function(t){var e=this;return this.onMessageCallback=t,function(){e.onMessageCallback=null}},jR.prototype.setBackgroundMessageHandler=function(){throw uR.create("only-available-in-sw")},jR.prototype.onBackgroundMessage=function(){throw uR.create("only-available-in-sw")},jR.prototype.onTokenRefresh=function(){return function(){}},jR.prototype.logEvent=function(n,r){return Ks(this,void 0,void 0,function(){var e;return zs(this,function(t){switch(t.label){case 0:return e=function(t){switch(t){case oR.NOTIFICATION_CLICKED:return"notification_open";case oR.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}(n),[4,this.firebaseDependencies.analyticsProvider.get()];case 1:return t.sent().logEvent(e,{message_id:r[fR],message_name:r["google.c.a.c_l"],message_time:r["google.c.a.ts"],message_device_time:Math.floor(Date.now()/1e3)}),[2]}})})},jR);function jR(t){var e=this;this.firebaseDependencies=t,this.vapidKey=null,this.onMessageCallback=null,navigator.serviceWorker.addEventListener("message",function(t){return e.messageEventListener(t)})}function VR(t){return uR.create("missing-app-config-values",{valueName:t})}var qR={isSupported:BR};function BR(){return self&&"ServiceWorkerGlobalScope"in self?"indexedDB"in self&&null!==indexedDB&&"PushManager"in self&&"Notification"in self&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey"):"indexedDB"in window&&null!==indexedDB&&navigator.cookieEnabled&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}Hl.INTERNAL.registerComponent(new Ka("messaging",function(t){var e=t.getProvider("app").getImmediate(),n={app:e,appConfig:function(t){var e,n;if(!t||!t.options)throw VR("App Configuration Object");if(!t.name)throw VR("App Name");var r=t.options;try{for(var i=Qs(["projectId","apiKey","appId","messagingSenderId"]),o=i.next();!o.done;o=i.next()){var s=o.value;if(!r[s])throw VR(s)}}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return{appName:t.name,projectId:r.projectId,apiKey:r.apiKey,appId:r.appId,senderId:r.messagingSenderId}}(e),installations:t.getProvider("installations").getImmediate(),analyticsProvider:t.getProvider("analytics-internal")};if(!BR())throw uR.create("unsupported-browser");return new(self&&"ServiceWorkerGlobalScope"in self?LR:UR)(n)},"PUBLIC").setServiceProps(qR));var WR="firebasestorage.googleapis.com",GR=12e4,HR=6e5,KR=(zR.prototype.codeProp=function(){return this.code},zR.prototype.codeEquals=function(t){return YR(t)===this.codeProp()},zR.prototype.serverResponseProp=function(){return this.serverResponse_},zR.prototype.setServerResponseProp=function(t){this.serverResponse_=t},Object.defineProperty(zR.prototype,"name",{get:function(){return this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(zR.prototype,"code",{get:function(){return this.code_},enumerable:!1,configurable:!0}),Object.defineProperty(zR.prototype,"message",{get:function(){return this.serverResponse_?this.message_+"\n"+this.serverResponse_:this.message_},enumerable:!1,configurable:!0}),Object.defineProperty(zR.prototype,"serverResponse",{get:function(){return this.serverResponse_},enumerable:!1,configurable:!0}),zR);function zR(t,e){this.code_=YR(t),this.message_="Firebase Storage: "+e,this.serverResponse_=null,this.name_="FirebaseError"}var QR={UNKNOWN:"unknown",OBJECT_NOT_FOUND:"object-not-found",BUCKET_NOT_FOUND:"bucket-not-found",PROJECT_NOT_FOUND:"project-not-found",QUOTA_EXCEEDED:"quota-exceeded",UNAUTHENTICATED:"unauthenticated",UNAUTHORIZED:"unauthorized",RETRY_LIMIT_EXCEEDED:"retry-limit-exceeded",INVALID_CHECKSUM:"invalid-checksum",CANCELED:"canceled",INVALID_EVENT_NAME:"invalid-event-name",INVALID_URL:"invalid-url",INVALID_DEFAULT_BUCKET:"invalid-default-bucket",NO_DEFAULT_BUCKET:"no-default-bucket",CANNOT_SLICE_BLOB:"cannot-slice-blob",SERVER_FILE_WRONG_SIZE:"server-file-wrong-size",NO_DOWNLOAD_URL:"no-download-url",INVALID_ARGUMENT:"invalid-argument",INVALID_ARGUMENT_COUNT:"invalid-argument-count",APP_DELETED:"app-deleted",INVALID_ROOT_OPERATION:"invalid-root-operation",INVALID_FORMAT:"invalid-format",INTERNAL_ERROR:"internal-error"};function YR(t){return"storage/"+t}function XR(){return new KR(QR.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function $R(){return new KR(QR.CANCELED,"User canceled the upload/download.")}function JR(){return new KR(QR.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function ZR(t,e,n){return new KR(QR.INVALID_ARGUMENT,"Invalid argument in `"+e+"` at index "+t+": "+n)}function tP(){return new KR(QR.APP_DELETED,"The Firebase app was deleted.")}function eP(t,e){return new KR(QR.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function nP(t){throw new KR(QR.INTERNAL_ERROR,"Internal error: "+t)}var rP={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};function iP(t){switch(t){case rP.RAW:case rP.BASE64:case rP.BASE64URL:case rP.DATA_URL:return;default:throw"Expected one of the event types: ["+rP.RAW+", "+rP.BASE64+", "+rP.BASE64URL+", "+rP.DATA_URL+"]."}}var oP=function(t,e){this.data=t,this.contentType=e||null};function sP(t,e){switch(t){case rP.RAW:return new oP(aP(e));case rP.BASE64:case rP.BASE64URL:return new oP(uP(t,e));case rP.DATA_URL:return new oP((n=new cP(e)).base64?uP(rP.BASE64,n.rest):function(t){var e;try{e=decodeURIComponent(t)}catch(t){throw eP(rP.DATA_URL,"Malformed data URL.")}return aP(e)}(n.rest),new cP(e).contentType)}var n;throw XR()}function aP(t){for(var e=[],n=0;n<t.length;n++){var r=t.charCodeAt(n);r<=127?e.push(r):r<=2047?e.push(192|r>>6,128|63&r):55296==(64512&r)?n<t.length-1&&56320==(64512&t.charCodeAt(n+1))?(r=65536|(1023&r)<<10|1023&t.charCodeAt(++n),e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)):e.push(239,191,189):56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function uP(e,t){switch(e){case rP.BASE64:var n=-1!==t.indexOf("-"),r=-1!==t.indexOf("_");if(n||r)throw eP(e,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?");break;case rP.BASE64URL:var i=-1!==t.indexOf("+"),o=-1!==t.indexOf("/");if(i||o)throw eP(e,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/")}var s;try{s=atob(t)}catch(t){throw eP(e,"Invalid character found")}for(var a=new Uint8Array(s.length),u=0;u<s.length;u++)a[u]=s.charCodeAt(u);return a}var cP=function(t){this.base64=!1,this.contentType=null;var e=t.match(/^data:([^,]+)?,/);if(null===e)throw eP(rP.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");var n,r,i=e[1]||null;null!=i&&(this.base64=(r=";base64",(n=i).length>=r.length&&n.substring(n.length-r.length)===r),this.contentType=this.base64?i.substring(0,i.length-";base64".length):i),this.rest=t.substring(t.indexOf(",")+1)};var hP,lP,fP={STATE_CHANGED:"state_changed"},pP="running",dP="pausing",vP="paused",yP="success",gP="canceling",mP="canceled",bP="error",_P={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function wP(t){switch(t){case pP:case dP:case gP:return _P.RUNNING;case vP:return _P.PAUSED;case yP:return _P.SUCCESS;case mP:return _P.CANCELED;case bP:default:return _P.ERROR}}function EP(t){return null!=t}function IP(t){return void 0!==t}function TP(t){return"function"==typeof t}function SP(t){return"object"==typeof t}function CP(t){return"string"==typeof t||t instanceof String}function NP(t){return"number"==typeof t||t instanceof Number}function AP(t){return kP()&&t instanceof Blob}function kP(){return"undefined"!=typeof Blob}(lP=hP=hP||{})[lP.NO_ERROR=0]="NO_ERROR",lP[lP.NETWORK_ERROR=1]="NETWORK_ERROR",lP[lP.ABORT=2]="ABORT";var OP=(RP.prototype.send=function(t,e,n,r){if(this.sent_)throw nP("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(e,t,!0),EP(r))for(var i in r)r.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,r[i].toString());return EP(n)?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_},RP.prototype.getErrorCode=function(){if(!this.sent_)throw nP("cannot .getErrorCode() before sending");return this.errorCode_},RP.prototype.getStatus=function(){if(!this.sent_)throw nP("cannot .getStatus() before sending");try{return this.xhr_.status}catch(t){return-1}},RP.prototype.getResponseText=function(){if(!this.sent_)throw nP("cannot .getResponseText() before sending");return this.xhr_.responseText},RP.prototype.abort=function(){this.xhr_.abort()},RP.prototype.getResponseHeader=function(t){return this.xhr_.getResponseHeader(t)},RP.prototype.addUploadProgressListener=function(t){EP(this.xhr_.upload)&&this.xhr_.upload.addEventListener("progress",t)},RP.prototype.removeUploadProgressListener=function(t){EP(this.xhr_.upload)&&this.xhr_.upload.removeEventListener("progress",t)},RP);function RP(){var e=this;this.sent_=!1,this.xhr_=new XMLHttpRequest,this.errorCode_=hP.NO_ERROR,this.sendPromise_=new Promise(function(t){e.xhr_.addEventListener("abort",function(){e.errorCode_=hP.ABORT,t(e)}),e.xhr_.addEventListener("error",function(){e.errorCode_=hP.NETWORK_ERROR,t(e)}),e.xhr_.addEventListener("load",function(){t(e)})})}var PP=(DP.prototype.createXhrIo=function(){return new OP},DP);function DP(){}function xP(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0;if(void 0!==n){for(var r=new n,i=0;i<t.length;i++)r.append(t[i]);return r.getBlob()}if(kP())return new Blob(t);throw Error("This browser doesn't seem to support creating Blobs")}var LP=(MP.prototype.size=function(){return this.size_},MP.prototype.type=function(){return this.type_},MP.prototype.slice=function(t,e){if(AP(this.data_)){var n=this.data_,r=(o=t,s=e,(i=n).webkitSlice?i.webkitSlice(o,s):i.mozSlice?i.mozSlice(o,s):i.slice?i.slice(o,s):null);return null===r?null:new MP(r)}var i,o,s;return new MP(new Uint8Array(this.data_.buffer,t,e-t),!0)},MP.getBlob=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(kP()){var n=t.map(function(t){return t instanceof MP?t.data_:t});return new MP(xP.apply(null,n))}var r=t.map(function(t){return CP(t)?sP(rP.RAW,t).data:t.data_}),i=0;r.forEach(function(t){i+=t.byteLength});var o=new Uint8Array(i),s=0;return r.forEach(function(t){for(var e=0;e<t.length;e++)o[s++]=t[e]}),new MP(o,!0)},MP.prototype.uploadData=function(){return this.data_},MP);function MP(t,e){var n=0,r="";AP(t)?(n=(this.data_=t).size,r=t.type):t instanceof ArrayBuffer?(e?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),n=this.data_.length):t instanceof Uint8Array&&(e?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),n=t.length),this.size_=n,this.type_=r}var FP=(Object.defineProperty(UP.prototype,"path",{get:function(){return this.path_},enumerable:!1,configurable:!0}),Object.defineProperty(UP.prototype,"isRoot",{get:function(){return 0===this.path.length},enumerable:!1,configurable:!0}),UP.prototype.fullServerUrl=function(){var t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)},UP.prototype.bucketOnlyServerUrl=function(){return"/b/"+encodeURIComponent(this.bucket)+"/o"},UP.makeFromBucketSpec=function(e){var t,n;try{t=UP.makeFromUrl(e)}catch(t){return new UP(e,"")}if(""===t.path)return t;throw n=e,new KR(QR.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")},UP.makeFromUrl=function(t){var e=null,n="([A-Za-z0-9.\\-_]+)";var r=new RegExp("^gs://"+n+"(/(.*))?$","i");function i(t){t.path_=decodeURIComponent(t.path)}for(var o,s=WR.replace(/[.]/g,"\\."),a=[{regex:r,indices:{bucket:1,path:3},postModify:function(t){"/"===t.path.charAt(t.path.length-1)&&(t.path_=t.path_.slice(0,-1))}},{regex:new RegExp("^https?://"+s+"/v[A-Za-z0-9_]+/b/"+n+"/o(/([^?#]*).*)?$","i"),indices:{bucket:1,path:3},postModify:i},{regex:new RegExp("^https?://(?:storage.googleapis.com|storage.cloud.google.com)/"+n+"/([^?#]*)","i"),indices:{bucket:1,path:2},postModify:i}],u=0;u<a.length;u++){var c=a[u],h=c.regex.exec(t);if(h){e=new UP(h[c.indices.bucket],h[c.indices.path]||"");c.postModify(e);break}}if(null==e)throw o=t,new KR(QR.INVALID_URL,"Invalid URL '"+o+"'.");return e},UP);function UP(t,e){this.bucket=t,this.path_=e}function jP(t){var e,n;try{e=JSON.parse(t)}catch(t){return null}return SP(n=e)&&!Array.isArray(n)?e:null}function VP(t){var e=t.lastIndexOf("/",t.length-2);return-1===e?t:t.slice(e+1)}function qP(t){return"https://"+WR+"/v0"+t}function BP(t){var e,n=encodeURIComponent,r="?";for(e in t){t.hasOwnProperty(e)&&(r=r+(n(e)+"="+n(t[e]))+"&")}return r=r.slice(0,-1)}function WP(t,e){return e}var GP=function(t,e,n,r){this.server=t,this.local=e||t,this.writable=!!n,this.xform=r||WP},HP=null;function KP(){if(HP)return HP;var t=[];t.push(new GP("bucket")),t.push(new GP("generation")),t.push(new GP("metageneration")),t.push(new GP("name","fullPath",!0));var e=new GP("name");e.xform=function(t,e){return!CP(n=e)||n.length<2?n:VP(n);var n},t.push(e);var n=new GP("size");return n.xform=function(t,e){return EP(e)?Number(e):e},t.push(n),t.push(new GP("timeCreated")),t.push(new GP("updated")),t.push(new GP("md5Hash",null,!0)),t.push(new GP("cacheControl",null,!0)),t.push(new GP("contentDisposition",null,!0)),t.push(new GP("contentEncoding",null,!0)),t.push(new GP("contentLanguage",null,!0)),t.push(new GP("contentType",null,!0)),t.push(new GP("metadata","customMetadata",!0)),HP=t}function zP(r,i){Object.defineProperty(r,"ref",{get:function(){var t=r.bucket,e=r.fullPath,n=new FP(t,e);return i.makeStorageReference(n)}})}function QP(t,e,n){var r=jP(e);if(null===r)return null;return function(t,e,n){for(var r={type:"file"},i=n.length,o=0;o<i;o++){var s=n[o];r[s.local]=s.xform(r,e[s.server])}return zP(r,t),r}(t,r,n)}function YP(t,e){for(var n={},r=e.length,i=0;i<r;i++){var o=e[i];o.writable&&(n[o.server]=t[o.local])}return JSON.stringify(n)}function XP(t){if(!SP(t)||!t)throw"Expected Metadata object.";for(var e in t)if(t.hasOwnProperty(e)){var n=t[e];if("customMetadata"===e){if(!SP(n))throw"Expected object for 'customMetadata' mapping."}else if(SP(r=n)&&null!==r)throw"Mapping for '"+e+"' cannot be an object."}var r}var $P="maxResults",JP=1e3,ZP="pageToken",tD="prefixes",eD="items";function nD(t,e,n){var r=jP(n);if(null===r)return null;return function(t,e,n){var r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n[tD])for(var i=0,o=n[tD];i<o.length;i++){var s=o[i].replace(/\/$/,""),a=t.makeStorageReference(new FP(e,s));r.prefixes.push(a)}if(n[eD])for(var u=0,c=n[eD];u<c.length;u++){var h=c[u],a=t.makeStorageReference(new FP(e,h.name));r.items.push(a)}return r}(t,e,r)}function rD(t){if(!SP(t)||!t)throw"Expected ListOptions object.";for(var e in t)if(e===$P){if(!NP(n=t[$P])||!Number.isInteger(n)||t[$P]<=0)throw"Expected maxResults to be a positive number.";if(1e3<t[$P])throw"Expected maxResults to be less than or equal to "+JP+"."}else{if(e!==ZP)throw"Unknown option: "+e;if(t[ZP]&&!CP(t[ZP]))throw"Expected pageToken to be string."}var n}var iD=function(t,e,n,r){this.url=t,this.method=e,this.handler=n,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]};function oD(t){if(!t)throw XR()}function sD(r,i){return function(t,e){var n=QP(r,e,i);return oD(null!==n),n}}function aD(r,i){return function(t,e){var n=nD(r,i,e);return oD(null!==n),n}}function uD(r,i){return function(t,e){var n=QP(r,e,i);return oD(null!==n),function(r,t){var e=jP(t);if(null===e)return null;if(!CP(e.downloadTokens))return null;var n=e.downloadTokens;if(0===n.length)return null;var i=encodeURIComponent;return n.split(",").map(function(t){var e=r.bucket,n=r.fullPath;return qP("/b/"+i(e)+"/o/"+i(n))+BP({alt:"media",token:t})})[0]}(n,e)}}function cD(o){return function(t,e){var n,r,i=401===t.getStatus()?new KR(QR.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again."):402===t.getStatus()?(r=o.bucket,new KR(QR.QUOTA_EXCEEDED,"Quota for bucket '"+r+"' exceeded, please view quota on https://firebase.google.com/pricing/.")):403===t.getStatus()?(n=o.path,new KR(QR.UNAUTHORIZED,"User does not have permission to access '"+n+"'.")):e;return i.setServerResponseProp(e.serverResponseProp()),i}}function hD(i){var o=cD(i);return function(t,e){var n,r=o(t,e);return 404===t.getStatus()&&(n=i.path,r=new KR(QR.OBJECT_NOT_FOUND,"Object '"+n+"' does not exist.")),r.setServerResponseProp(e.serverResponseProp()),r}}function lD(t,e,n){var r=qP(e.fullServerUrl()),i=t.maxOperationRetryTime,o=new iD(r,"GET",sD(t,n),i);return o.errorHandler=hD(e),o}function fD(t,e,n){var r,i,o=Object.assign({},n);return o.fullPath=t.path,o.size=e.size(),o.contentType||(o.contentType=(i=e,(r=null)&&r.contentType||i&&i.type()||"application/octet-stream")),o}function pD(t,e,n,r,i){var o=e.bucketOnlyServerUrl(),s={"X-Goog-Upload-Protocol":"multipart"};var a=function(){for(var t="",e=0;e<2;e++)t+=Math.random().toString().slice(2);return t}();s["Content-Type"]="multipart/related; boundary="+a;var u=fD(e,r,i),c="--"+a+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+YP(u,n)+"\r\n--"+a+"\r\nContent-Type: "+u.contentType+"\r\n\r\n",h="\r\n--"+a+"--",l=LP.getBlob(c,r,h);if(null===l)throw JR();var f={name:u.fullPath},p=qP(o),d=t.maxUploadRetryTime,v=new iD(p,"POST",sD(t,n),d);return v.urlParams=f,v.headers=s,v.body=l.uploadData(),v.errorHandler=cD(e),v}var dD=function(t,e,n,r){this.current=t,this.total=e,this.finalized=!!n,this.metadata=r||null};function vD(t,e){var n=null;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch(t){oD(!1)}return oD(!!n&&-1!==(e||["active"]).indexOf(n)),n}function yD(t,e,n,r,i){var o=e.bucketOnlyServerUrl(),s=fD(e,r,i),a={name:s.fullPath},u=qP(o),c={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":r.size(),"X-Goog-Upload-Header-Content-Type":s.contentType,"Content-Type":"application/json; charset=utf-8"},h=YP(s,n),l=t.maxUploadRetryTime;var f=new iD(u,"POST",function(t){var e;vD(t);try{e=t.getResponseHeader("X-Goog-Upload-URL")}catch(t){oD(!1)}return oD(CP(e)),e},l);return f.urlParams=a,f.headers=c,f.body=h,f.errorHandler=cD(e),f}function gD(t,e,n,i){var r=t.maxUploadRetryTime,o=new iD(n,"POST",function(t){var e=vD(t,["active","final"]),n=null;try{n=t.getResponseHeader("X-Goog-Upload-Size-Received")}catch(t){oD(!1)}n||oD(!1);var r=Number(n);return oD(!isNaN(r)),new dD(r,i.size(),"final"===e)},r);return o.headers={"X-Goog-Upload-Command":"query"},o.errorHandler=cD(e),o}function mD(t,s,e,a,n,u,r,i){var c=new dD(0,0);if(r?(c.current=r.current,c.total=r.total):(c.current=0,c.total=a.size()),a.size()!==c.total)throw new KR(QR.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.");var o=c.total-c.current,h=o;0<n&&(h=Math.min(h,n));var l=c.current,f=l+h,p={"X-Goog-Upload-Command":h===o?"upload, finalize":"upload","X-Goog-Upload-Offset":c.current},d=a.slice(l,f);if(null===d)throw JR();var v=s.maxUploadRetryTime,y=new iD(e,"POST",function(t,e){var n=vD(t,["active","final"]),r=c.current+h,i=a.size(),o="final"===n?sD(s,u)(t,e):null;return new dD(r,i,"final"===n,o)},v);return y.headers=p,y.body=d.uploadData(),y.progressCallback=i||null,y.errorHandler=cD(t),y}var bD=function(t,e,n){var r;TP(t)||EP(e)||EP(n)?(this.next=t,this.error=e||null,this.complete=n||null):(r=t,this.next=r.next||null,this.error=r.error||null,this.complete=r.complete||null)},_D=function(t,e,n,r,i,o){this.bytesTransferred=t,this.totalBytes=e,this.state=n,this.metadata=r,this.task=i,this.ref=o};function wD(e,t,n){for(var r,i,o,s,a,u,c=t.length,h=t.length,l=0;l<t.length;l++)if(t[l].optional){c=l;break}if(!(c<=n.length&&n.length<=h))throw r=c,i=h,o=e,s=n.length,u=r===i?1===(a=r)?"argument":"arguments":(a="between "+r+" and "+i,"arguments"),new KR(QR.INVALID_ARGUMENT_COUNT,"Invalid argument count in `"+o+"`: Expected "+a+" "+u+", received "+s+".");for(l=0;l<n.length;l++)try{t[l].validator(n[l])}catch(t){throw t instanceof Error?ZR(l,e,t.message):ZR(l,e,t)}}var ED=function(e,t){var n=this;this.validator=function(t){n.optional&&!IP(t)||e(t)},this.optional=!!t};function ID(t,e){function n(t){if(!CP(t))throw"Expected string."}var r,i,o=t?(r=n,i=t,function(t){r(t),i(t)}):n;return new ED(o,e)}function TD(){return new ED(function(t){if(!(t instanceof Uint8Array||t instanceof ArrayBuffer||kP()&&t instanceof Blob))throw"Expected Blob or File."})}function SD(t){return new ED(XP,t)}function CD(){return new ED(function(t){if(!(NP(t)&&0<=t))throw"Expected a number 0 or greater."})}function ND(e,t){return new ED(function(t){if(!(null===t||EP(t)&&t instanceof Object))throw"Expected an Object.";null!=e&&e(t)},t)}function AD(t){return new ED(function(t){if(!(null===t||TP(t)))throw"Expected a Function."},t)}function kD(n){return function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];Promise.resolve().then(function(){return n.apply(void 0,t)})}}var OD=(RD.prototype.makeProgressCallback_=function(){var e=this,n=this.transferred_;return function(t){return e.updateProgress_(n+t)}},RD.prototype.shouldDoResumable_=function(t){return 262144<t.size()},RD.prototype.start_=function(){this.state_===pP&&null===this.request_&&(this.resumable_?null===this.uploadUrl_?this.createResumable_():this.needToFetchStatus_?this.fetchStatus_():this.needToFetchMetadata_?this.fetchMetadata_():this.continueUpload_():this.oneShotUpload_())},RD.prototype.resolveToken_=function(e){var n=this;this.service_.getAuthToken().then(function(t){switch(n.state_){case pP:e(t);break;case gP:n.transition_(mP);break;case dP:n.transition_(vP)}})},RD.prototype.createResumable_=function(){var r=this;this.resolveToken_(function(t){var e=yD(r.service_,r.location_,r.mappings_,r.blob_,r.metadata_),n=r.service_.makeRequest(e,t);(r.request_=n).getPromise().then(function(t){r.request_=null,r.uploadUrl_=t,r.needToFetchStatus_=!1,r.completeTransitions_()},r.errorHandler_)})},RD.prototype.fetchStatus_=function(){var r=this,i=this.uploadUrl_;this.resolveToken_(function(t){var e=gD(r.service_,r.location_,i,r.blob_),n=r.service_.makeRequest(e,t);(r.request_=n).getPromise().then(function(t){r.request_=null,r.updateProgress_(t.current),r.needToFetchStatus_=!1,t.finalized&&(r.needToFetchMetadata_=!0),r.completeTransitions_()},r.errorHandler_)})},RD.prototype.continueUpload_=function(){var r=this,i=262144*this.chunkMultiplier_,o=new dD(this.transferred_,this.blob_.size()),s=this.uploadUrl_;this.resolveToken_(function(t){var e;try{e=mD(r.location_,r.service_,s,r.blob_,i,r.mappings_,o,r.makeProgressCallback_())}catch(t){return r.error_=t,void r.transition_(bP)}var n=r.service_.makeRequest(e,t);(r.request_=n).getPromise().then(function(t){r.increaseMultiplier_(),r.request_=null,r.updateProgress_(t.current),t.finalized?(r.metadata_=t.metadata,r.transition_(yP)):r.completeTransitions_()},r.errorHandler_)})},RD.prototype.increaseMultiplier_=function(){262144*this.chunkMultiplier_<33554432&&(this.chunkMultiplier_*=2)},RD.prototype.fetchMetadata_=function(){var r=this;this.resolveToken_(function(t){var e=lD(r.service_,r.location_,r.mappings_),n=r.service_.makeRequest(e,t);(r.request_=n).getPromise().then(function(t){r.request_=null,r.metadata_=t,r.transition_(yP)},r.metadataErrorHandler_)})},RD.prototype.oneShotUpload_=function(){var r=this;this.resolveToken_(function(t){var e=pD(r.service_,r.location_,r.mappings_,r.blob_,r.metadata_),n=r.service_.makeRequest(e,t);(r.request_=n).getPromise().then(function(t){r.request_=null,r.metadata_=t,r.updateProgress_(r.blob_.size()),r.transition_(yP)},r.errorHandler_)})},RD.prototype.updateProgress_=function(t){var e=this.transferred_;this.transferred_=t,this.transferred_!==e&&this.notifyObservers_()},RD.prototype.transition_=function(t){if(this.state_!==t)switch(t){case gP:case dP:this.state_=t,null!==this.request_&&this.request_.cancel();break;case pP:var e=this.state_===vP;this.state_=t,e&&(this.notifyObservers_(),this.start_());break;case vP:this.state_=t,this.notifyObservers_();break;case mP:this.error_=$R(),this.state_=t,this.notifyObservers_();break;case bP:case yP:this.state_=t,this.notifyObservers_()}},RD.prototype.completeTransitions_=function(){switch(this.state_){case dP:this.transition_(vP);break;case gP:this.transition_(mP);break;case pP:this.start_()}},Object.defineProperty(RD.prototype,"snapshot",{get:function(){var t=wP(this.state_);return new _D(this.transferred_,this.blob_.size(),t,this.metadata_,this,this.ref_)},enumerable:!1,configurable:!0}),RD.prototype.on=function(t,e,n,o){var r="Expected a function or an Object with one of `next`, `error`, `complete` properties.",i=AD(!0).validator,s=ND(null,!0).validator;function a(t){try{return void i(t)}catch(t){}try{if(s(t),!(IP(t.next)||IP(t.error)||IP(t.complete)))throw"";return}catch(t){throw r}}wD("on",[ID(function(){if(t!==fP.STATE_CHANGED)throw"Expected one of the event types: ["+fP.STATE_CHANGED+"]."}),ND(a,!0),AD(!0),AD(!0)],arguments);var u=this;function c(i){return function(t,e,n){null!==i&&wD("on",i,arguments);var r=new bD(t,e,o);return u.addObserver_(r),function(){u.removeObserver_(r)}}}var h=[ND(function(t){if(null===t)throw r;a(t)}),AD(!0),AD(!0)];return!(IP(e)||IP(n)||IP(o))?c(h):c(null)(e,n,o)},RD.prototype.then=function(t,e){return this.promise_.then(t,e)},RD.prototype.catch=function(t){return this.then(null,t)},RD.prototype.addObserver_=function(t){this.observers_.push(t),this.notifyObserver_(t)},RD.prototype.removeObserver_=function(t){var e=this.observers_.indexOf(t);-1!==e&&this.observers_.splice(e,1)},RD.prototype.notifyObservers_=function(){var e=this;this.finishPromise_(),this.observers_.slice().forEach(function(t){e.notifyObserver_(t)})},RD.prototype.finishPromise_=function(){if(null!==this.resolve_){var t=!0;switch(wP(this.state_)){case _P.SUCCESS:kD(this.resolve_.bind(null,this.snapshot))();break;case _P.CANCELED:case _P.ERROR:kD(this.reject_.bind(null,this.error_))();break;default:t=!1}t&&(this.resolve_=null,this.reject_=null)}},RD.prototype.notifyObserver_=function(t){switch(wP(this.state_)){case _P.RUNNING:case _P.PAUSED:t.next&&kD(t.next.bind(t,this.snapshot))();break;case _P.SUCCESS:t.complete&&kD(t.complete.bind(t))();break;case _P.CANCELED:case _P.ERROR:t.error&&kD(t.error.bind(t,this.error_))();break;default:t.error&&kD(t.error.bind(t,this.error_))()}},RD.prototype.resume=function(){wD("resume",[],arguments);var t=this.state_===vP||this.state_===dP;return t&&this.transition_(pP),t},RD.prototype.pause=function(){wD("pause",[],arguments);var t=this.state_===pP;return t&&this.transition_(dP),t},RD.prototype.cancel=function(){wD("cancel",[],arguments);var t=this.state_===pP||this.state_===dP;return t&&this.transition_(gP),t},RD);function RD(t,e,n,r,i,o){var s=this;void 0===o&&(o=null),this.transferred_=0,this.needToFetchStatus_=!1,this.needToFetchMetadata_=!1,this.observers_=[],this.error_=null,this.uploadUrl_=null,this.request_=null,this.chunkMultiplier_=1,this.resolve_=null,this.reject_=null,this.ref_=t,this.service_=e,this.location_=n,this.blob_=i,this.metadata_=o,this.mappings_=r,this.resumable_=this.shouldDoResumable_(this.blob_),this.state_=pP,this.errorHandler_=function(t){s.request_=null,s.chunkMultiplier_=1,t.codeEquals(QR.CANCELED)?(s.needToFetchStatus_=!0,s.completeTransitions_()):(s.error_=t,s.transition_(bP))},this.metadataErrorHandler_=function(t){s.request_=null,t.codeEquals(QR.CANCELED)?s.completeTransitions_():(s.error_=t,s.transition_(bP))},this.promise_=new Promise(function(t,e){s.resolve_=t,s.reject_=e,s.start_()}),this.promise_.then(null,function(){})}var PD=(DD.prototype.toString=function(){return wD("toString",[],arguments),"gs://"+this.location.bucket+"/"+this.location.path},DD.prototype.newRef=function(t,e){return new DD(t,e)},DD.prototype.mappings=KP,DD.prototype.child=function(t){wD("child",[ID()],arguments);var e,n,r=(e=this.location.path,n=t.split("/").filter(function(t){return 0<t.length}).join("/"),0===e.length?n:e+"/"+n),i=new FP(this.location.bucket,r);return this.newRef(this.service,i)},Object.defineProperty(DD.prototype,"parent",{get:function(){var t=function(t){if(0===t.length)return null;var e=t.lastIndexOf("/");return-1===e?"":t.slice(0,e)}(this.location.path);if(null===t)return null;var e=new FP(this.location.bucket,t);return this.newRef(this.service,e)},enumerable:!1,configurable:!0}),Object.defineProperty(DD.prototype,"root",{get:function(){var t=new FP(this.location.bucket,"");return this.newRef(this.service,t)},enumerable:!1,configurable:!0}),Object.defineProperty(DD.prototype,"bucket",{get:function(){return this.location.bucket},enumerable:!1,configurable:!0}),Object.defineProperty(DD.prototype,"fullPath",{get:function(){return this.location.path},enumerable:!1,configurable:!0}),Object.defineProperty(DD.prototype,"name",{get:function(){return VP(this.location.path)},enumerable:!1,configurable:!0}),Object.defineProperty(DD.prototype,"storage",{get:function(){return this.service},enumerable:!1,configurable:!0}),DD.prototype.put=function(t,e){return void 0===e&&(e=null),wD("put",[TD(),SD(!0)],arguments),this.throwIfRoot_("put"),new OD(this,this.service,this.location,this.mappings(),new LP(t),e)},DD.prototype.putString=function(t,e,n){void 0===e&&(e=rP.RAW),wD("putString",[ID(),ID(iP,!0),SD(!0)],arguments),this.throwIfRoot_("putString");var r=sP(e,t),i=Object.assign({},n);return!EP(i.contentType)&&EP(r.contentType)&&(i.contentType=r.contentType),new OD(this,this.service,this.location,this.mappings(),new LP(r.data,!0),i)},DD.prototype.delete=function(){var a=this;return wD("delete",[],arguments),this.throwIfRoot_("delete"),this.service.getAuthToken().then(function(t){var e,n,r,i,o,s=(e=a.service,n=a.location,r=qP(n.fullServerUrl()),i=e.maxOperationRetryTime,(o=new iD(r,"DELETE",function(t,e){},i)).successCodes=[200,204],o.errorHandler=hD(n),o);return a.service.makeRequest(s,t).getPromise()})},DD.prototype.listAll=function(){wD("listAll",[],arguments);var t={prefixes:[],items:[]};return this.listAllHelper(t).then(function(){return t})},DD.prototype.listAllHelper=function(o,s){return Ks(this,void 0,void 0,function(){var e,n,r,i;return zs(this,function(t){switch(t.label){case 0:return e={pageToken:s},[4,this.list(e)];case 1:return n=t.sent(),(r=o.prefixes).push.apply(r,n.prefixes),(i=o.items).push.apply(i,n.items),null==n.nextPageToken?[3,3]:[4,this.listAllHelper(o,n.nextPageToken)];case 2:t.sent(),t.label=3;case 3:return[2]}})})},DD.prototype.list=function(r){wD("list",[new ED(rD,!0)],arguments);var i=this;return this.service.getAuthToken().then(function(t){var e=r||{},n=function(t,e,n,r,i){var o={};e.isRoot?o.prefix="":o.prefix=e.path+"/",n&&0<n.length&&(o.delimiter=n),r&&(o.pageToken=r),i&&(o.maxResults=i);var s=qP(e.bucketOnlyServerUrl()),a=t.maxOperationRetryTime,u=new iD(s,"GET",aD(t,e.bucket),a);return u.urlParams=o,u.errorHandler=cD(e),u}(i.service,i.location,"/",e.pageToken,e.maxResults);return i.service.makeRequest(n,t).getPromise()})},DD.prototype.getMetadata=function(){var n=this;return wD("getMetadata",[],arguments),this.throwIfRoot_("getMetadata"),this.service.getAuthToken().then(function(t){var e=lD(n.service,n.location,n.mappings());return n.service.makeRequest(e,t).getPromise()})},DD.prototype.updateMetadata=function(h){var l=this;return wD("updateMetadata",[SD()],arguments),this.throwIfRoot_("updateMetadata"),this.service.getAuthToken().then(function(t){var e,n,r,i,o,s,a,u,c=(e=l.service,n=l.location,r=h,i=l.mappings(),o=qP(n.fullServerUrl()),s=YP(r,i),a=e.maxOperationRetryTime,(u=new iD(o,"PATCH",sD(e,i),a)).headers={"Content-Type":"application/json; charset=utf-8"},u.body=s,u.errorHandler=hD(n),u);return l.service.makeRequest(c,t).getPromise()})},DD.prototype.getDownloadURL=function(){var u=this;return wD("getDownloadURL",[],arguments),this.throwIfRoot_("getDownloadURL"),this.service.getAuthToken().then(function(t){var e,n,r,i,o,s,a=(e=u.service,n=u.location,r=u.mappings(),i=qP(n.fullServerUrl()),o=e.maxOperationRetryTime,(s=new iD(i,"GET",uD(e,r),o)).errorHandler=hD(n),s);return u.service.makeRequest(a,t).getPromise().then(function(t){if(null===t)throw new KR(QR.NO_DOWNLOAD_URL,"The given file does not have any download URLs.");return t})})},DD.prototype.throwIfRoot_=function(t){if(""===this.location.path)throw e=t,new KR(QR.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').");var e},DD);function DD(t,e){this.service=t,this.location=e instanceof FP?e:FP.makeFromUrl(e)}var xD=(LD.prototype.getPromise=function(){return this.promise_},LD.prototype.cancel=function(t){},LD);function LD(t){this.promise_=Promise.reject(t)}var MD=(FD.prototype.start_=function(){var e,n,t,r,i,o,s,a,u,c=this;function h(t,e){var n,r=c.resolve_,i=c.reject_,o=e.xhr;if(e.wasSuccessCode)try{var s=c.callback_(o,o.getResponseText());IP(s)?r(s):r()}catch(t){i(t)}else null!==o?((n=XR()).setServerResponseProp(o.getResponseText()),c.errorCallback_?i(c.errorCallback_(o,n)):i(n)):e.canceled?i(n=(c.appDelete_?tP:$R)()):i(n=new KR(QR.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again."))}function l(){return 2===s}function f(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];a||(a=!0,n.apply(null,t))}function p(t){i=setTimeout(function(){i=null,e(d,l())},t)}function d(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];a||(t||l()||o?f.call.apply(f,$s([null,t],e)):(r<64&&(r*=2),p(1===s?(s=2,0):1e3*(r+Math.random()))))}function v(t){u||(u=!0,a||(null!==i?(t||(s=2),clearTimeout(i),p(0)):t||(s=1)))}this.canceled_?h(0,new UD(!1,null,!0)):this.backoffId_=(e=function(o,t){var e;function s(t){var e=t.loaded,n=t.lengthComputable?t.total:-1;null!==c.progressCallback_&&c.progressCallback_(e,n)}t?o(!1,new UD(!1,null,!0)):(e=c.pool_.createXhrIo(),c.pendingXhr_=e,null!==c.progressCallback_&&e.addUploadProgressListener(s),e.send(c.url_,c.method_,c.body_,c.headers_).then(function(t){null!==c.progressCallback_&&t.removeUploadProgressListener(s),c.pendingXhr_=null;var e,n,r=t.getErrorCode()===hP.NO_ERROR,i=t.getStatus();r&&!c.isRetryStatusCode_(i)?(e=-1!==c.successCodes_.indexOf(i),o(!0,new UD(e,t))):(n=t.getErrorCode()===hP.ABORT,o(!1,new UD(!1,null,n)))}))},n=h,t=this.timeout_,i=null,u=a=o=!(r=1),p(s=0),setTimeout(function(){v(o=!0)},t),v)},FD.prototype.getPromise=function(){return this.promise_},FD.prototype.cancel=function(t){this.canceled_=!0,this.appDelete_=t||!1,null!==this.backoffId_&&(0,this.backoffId_)(!1),null!==this.pendingXhr_&&this.pendingXhr_.abort()},FD.prototype.isRetryStatusCode_=function(t){var e=500<=t&&t<600,n=-1!==[408,429].indexOf(t),r=-1!==this.additionalRetryCodes_.indexOf(t);return e||n||r},FD);function FD(t,e,n,r,i,o,s,a,u,c,h){var l=this;this.pendingXhr_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.url_=t,this.method_=e,this.headers_=n,this.body_=r,this.successCodes_=i.slice(),this.additionalRetryCodes_=o.slice(),this.callback_=s,this.errorCallback_=a,this.progressCallback_=c,this.timeout_=u,this.pool_=h,this.promise_=new Promise(function(t,e){l.resolve_=t,l.reject_=e,l.start_()})}var UD=function(t,e,n){this.wasSuccessCode=t,this.xhr=e,this.canceled=!!n};function jD(t,e,n,r){var i,o,s,a,u,c,h=BP(t.urlParams),l=t.url+h,f=Object.assign({},t.headers);return i=f,(o=e)&&(i["X-Firebase-GMPID"]=o),s=f,null!==(a=n)&&0<a.length&&(s.Authorization="Firebase "+a),u=f,c=void 0!==Hl?Hl.SDK_VERSION:"AppManager",u["X-Firebase-Storage-Version"]="webjs/"+c,new MD(l,t.method,f,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,r)}var VD=(qD.extractBucket_=function(t){var e=null==t?void 0:t.storageBucket;return null==e?null:FP.makeFromBucketSpec(e)},qD.prototype.getAuthToken=function(){return Ks(this,void 0,void 0,function(){var e,n;return zs(this,function(t){switch(t.label){case 0:return(e=this.authProvider_.getImmediate({optional:!0}))?[4,e.getToken()]:[3,2];case 1:if(null!==(n=t.sent()))return[2,n.accessToken];t.label=2;case 2:return[2,null]}})})},qD.prototype.deleteApp=function(){this.deleted_=!0,this.app_=null,this.requests_.forEach(function(t){return t.cancel()}),this.requests_.clear()},qD.prototype.makeStorageReference=function(t){return new PD(this,t)},qD.prototype.makeRequest=function(t,e){var n=this;if(this.deleted_)return new xD(tP());var r=jD(t,this.appId_,e,this.pool_);return this.requests_.add(r),r.getPromise().then(function(){return n.requests_.delete(r)},function(){return n.requests_.delete(r)}),r},qD.prototype.ref=function(t){if(wD("ref",[ID(function(t){if("string"!=typeof t)throw"Path is not a string.";if(/^[A-Za-z]+:\/\//.test(t))throw"Expected child path but got a URL, use refFromURL instead."},!0)],arguments),null==this.bucket_)throw new Error("No Storage Bucket defined in Firebase Options.");var e=new PD(this,this.bucket_);return null!=t?e.child(t):e},qD.prototype.refFromURL=function(t){return wD("refFromURL",[ID(function(t){if("string"!=typeof t)throw"Path is not a string.";if(!/^[A-Za-z]+:\/\//.test(t))throw"Expected full URL but got a child path, use ref instead.";try{FP.makeFromUrl(t)}catch(t){throw"Expected valid full URL but got an invalid one."}},!1)],arguments),new PD(this,t)},Object.defineProperty(qD.prototype,"maxUploadRetryTime",{get:function(){return this.maxUploadRetryTime_},enumerable:!1,configurable:!0}),qD.prototype.setMaxUploadRetryTime=function(t){wD("setMaxUploadRetryTime",[CD()],arguments),this.maxUploadRetryTime_=t},Object.defineProperty(qD.prototype,"maxOperationRetryTime",{get:function(){return this.maxOperationRetryTime_},enumerable:!1,configurable:!0}),qD.prototype.setMaxOperationRetryTime=function(t){wD("setMaxOperationRetryTime",[CD()],arguments),this.maxOperationRetryTime_=t},Object.defineProperty(qD.prototype,"app",{get:function(){return this.app_},enumerable:!1,configurable:!0}),Object.defineProperty(qD.prototype,"INTERNAL",{get:function(){return this.internals_},enumerable:!1,configurable:!0}),qD);function qD(t,e,n,r){var i;this.bucket_=null,this.appId_=null,this.deleted_=!1,this.app_=t,this.authProvider_=e,this.maxOperationRetryTime_=GR,this.maxUploadRetryTime_=HR,this.requests_=new Set,this.pool_=n,this.bucket_=null!=r?FP.makeFromBucketSpec(r):qD.extractBucket_(null===(i=this.app_)||void 0===i?void 0:i.options),this.internals_=new BD(this)}var BD=(WD.prototype.delete=function(){return this.service_.deleteApp(),Promise.resolve()},WD);function WD(t){this.service_=t}var GD,HD;function KD(t,e){var n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal");return new VD(n,r,new PP,e)}HD={TaskState:_P,TaskEvent:fP,StringFormat:rP,Storage:VD,Reference:PD},(GD=Hl).INTERNAL.registerComponent(new Ka("storage",KD,"PUBLIC").setServiceProps(HD).setMultipleInstances(!0)),GD.registerVersion("@firebase/storage","0.3.43");var zD,QD,YD,XD="0.4.1",$D="FB-PERF-TRACE-MEASURE",JD="@firebase/performance/config",ZD="@firebase/performance/configexpire",tx="Performance",ex=((zD={})["trace started"]="Trace {$traceName} was started before.",zD["trace stopped"]="Trace {$traceName} is not running.",zD["no window"]="Window is not available.",zD["no app id"]="App id is not available.",zD["no project id"]="Project id is not available.",zD["no api key"]="Api key is not available.",zD["invalid cc log"]="Attempted to queue invalid cc event",zD["FB not default"]="Performance can only start when Firebase app instance is the default one.",zD["RC response not ok"]="RC response is not ok",zD["invalid attribute name"]="Attribute name {$attributeName} is invalid.",zD["invalid attribute value"]="Attribute value {$attributeValue} is invalid.",zD["invalid custom metric name"]="Custom metric name {$customMetricName} is invalid",zD["invalid String merger input"]="Input for String merger is invalid, contact support team to resolve.",zD),nx=new _a("performance",tx,ex),rx=new cu(tx);rx.logLevel=eu.INFO;var ix,ox=(sx.prototype.getUrl=function(){return this.windowLocation.href.split("?")[0]},sx.prototype.mark=function(t){this.performance&&this.performance.mark&&this.performance.mark(t)},sx.prototype.measure=function(t,e,n){this.performance&&this.performance.measure&&this.performance.measure(t,e,n)},sx.prototype.getEntriesByType=function(t){return this.performance&&this.performance.getEntriesByType?this.performance.getEntriesByType(t):[]},sx.prototype.getEntriesByName=function(t){return this.performance&&this.performance.getEntriesByName?this.performance.getEntriesByName(t):[]},sx.prototype.getTimeOrigin=function(){return this.performance&&(this.performance.timeOrigin||this.performance.timing.navigationStart)},sx.prototype.requiredApisAvailable=function(){return fetch&&Promise&&this.navigator&&this.navigator.cookieEnabled?!!pa()||(rx.info("IndexedDB is not supported by current browswer"),!1):(rx.info("Firebase Performance cannot start if browser does not support fetch and Promise or cookie is disabled."),!1)},sx.prototype.setupObserver=function(t,i){this.PerformanceObserver&&new this.PerformanceObserver(function(t){for(var e=0,n=t.getEntries();e<n.length;e++){var r=n[e];i(r)}}).observe({entryTypes:[t]})},sx.getInstance=function(){return void 0===QD&&(QD=new sx(YD)),QD},sx);function sx(t){if(!(this.window=t))throw nx.create("no window");this.performance=t.performance,this.PerformanceObserver=t.PerformanceObserver,this.windowLocation=t.location,this.navigator=t.navigator,this.document=t.document,this.navigator&&this.navigator.cookieEnabled&&(this.localStorage=t.localStorage),t.perfMetrics&&t.perfMetrics.onFirstInputDelay&&(this.onFirstInputDelay=t.perfMetrics.onFirstInputDelay)}function ax(t,e){var n=t.length-e.length;if(n<0||1<n)throw nx.create("invalid String merger input");for(var r=[],i=0;i<t.length;i++)r.push(t.charAt(i)),e.length>i&&r.push(e.charAt(i));return r.join("")}var ux,cx,hx,lx=(fx.prototype.getAppId=function(){var t=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.appId;if(!t)throw nx.create("no app id");return t},fx.prototype.getProjectId=function(){var t=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.projectId;if(!t)throw nx.create("no project id");return t},fx.prototype.getApiKey=function(){var t=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.apiKey;if(!t)throw nx.create("no api key");return t},fx.prototype.getFlTransportFullUrl=function(){return this.flTransportEndpointUrl.concat("?key=",this.transportKey)},fx.getInstance=function(){return void 0===ix&&(ix=new fx),ix},fx);function fx(){this.instrumentationEnabled=!0,this.dataCollectionEnabled=!0,this.loggingEnabled=!1,this.tracesSamplingRate=1,this.networkRequestsSamplingRate=1,this.logEndPointUrl="https://firebaselogging.googleapis.com/v0cc/log?format=json_proto",this.flTransportEndpointUrl=ax("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),this.transportKey=ax("AzSC8r6ReiGqFMyfvgow","Iayx0u-XT3vksVM-pIV"),this.logSource=462,this.logTraceAfterSampling=!1,this.logNetworkAfterSampling=!1,this.configTimeToLive=12}(hx=cx=cx||{})[hx.UNKNOWN=0]="UNKNOWN",hx[hx.VISIBLE=1]="VISIBLE",hx[hx.HIDDEN=2]="HIDDEN";var px=["firebase_","google_","ga_"],dx=new RegExp("^[a-zA-Z]\\w*$");function vx(){switch(ox.getInstance().document.visibilityState){case"visible":return cx.VISIBLE;case"hidden":return cx.HIDDEN;default:return cx.UNKNOWN}}var yx="0.0.1",gx={loggingEnabled:!0},mx="FIREBASE_INSTALLATIONS_AUTH";function bx(t){var r,e=function(){var t=ox.getInstance().localStorage;if(!t)return;var e=t.getItem(ZD);if(!e||!function(t){return Number(t)>Date.now()}(e))return;var n=t.getItem(JD);if(!n)return;try{return JSON.parse(n)}catch(t){return}}();return e?(wx(e),Promise.resolve()):(r=t,function(){var t=lx.getInstance().installationsService.getToken();return t.then(function(t){}),t}().then(function(t){var e="https://firebaseremoteconfig.googleapis.com/v1/projects/"+lx.getInstance().getProjectId()+"/namespaces/fireperf:fetch?key="+lx.getInstance().getApiKey(),n=new Request(e,{method:"POST",headers:{Authorization:mx+" "+t},body:JSON.stringify({app_instance_id:r,app_instance_id_token:t,app_id:lx.getInstance().getAppId(),app_version:XD,sdk_version:yx})});return fetch(n).then(function(t){if(t.ok)return t.json();throw nx.create("RC response not ok")})}).catch(function(){rx.info(_x)}).then(wx).then(function(t){var e=ox.getInstance().localStorage;if(!t||!e)return;e.setItem(JD,JSON.stringify(t)),e.setItem(ZD,String(Date.now()+60*lx.getInstance().configTimeToLive*60*1e3))},function(){}))}var _x="Could not fetch config, will use default configs";function wx(t){if(!t)return t;var e=lx.getInstance(),n=t.entries||{};return e.loggingEnabled=void 0!==n.fpr_enabled?"true"===String(n.fpr_enabled):gx.loggingEnabled,n.fpr_log_source&&(e.logSource=Number(n.fpr_log_source)),n.fpr_log_endpoint_url&&(e.logEndPointUrl=n.fpr_log_endpoint_url),n.fpr_log_transport_key&&(e.transportKey=n.fpr_log_transport_key),void 0!==n.fpr_vc_network_request_sampling_rate&&(e.networkRequestsSamplingRate=Number(n.fpr_vc_network_request_sampling_rate)),void 0!==n.fpr_vc_trace_sampling_rate&&(e.tracesSamplingRate=Number(n.fpr_vc_trace_sampling_rate)),e.logTraceAfterSampling=Ex(e.tracesSamplingRate),e.logNetworkAfterSampling=Ex(e.networkRequestsSamplingRate),t}function Ex(t){return Math.random()<=t}var Ix,Tx=1;function Sx(){return Tx=2,Ix=Ix||function(){var n=ox.getInstance().document;return new Promise(function(t){var e;n&&"complete"!==n.readyState?(e=function(){"complete"===n.readyState&&(n.removeEventListener("readystatechange",e),t())},n.addEventListener("readystatechange",e)):t()})}().then(function(){return(t=lx.getInstance().installationsService.getId()).then(function(t){ux=t}),t;var t}).then(bx).then(Cx,Cx)}function Cx(){Tx=3}var Nx,Ax=1e4,kx=5500,Ox=3,Rx=Ox,Px=[],Dx=!1;function xx(t){setTimeout(function(){if(0!==Rx)return Px.length?void function(){var t=$s(Px);Px=[];var e=t.map(function(t){return{source_extension_json_proto3:t.message,event_time_ms:String(t.eventTime)}});(function(t,i){return function(t){var e=lx.getInstance().getFlTransportFullUrl();return fetch(e,{method:"POST",body:JSON.stringify(t)})}(t).then(function(t){return t.ok||rx.info("Call to Firebase backend failed."),t.json()}).then(function(t){var e=Number(t.nextRequestWaitMillis),n=Ax;isNaN(e)||(n=Math.max(e,n));var r=t.logResponseDetails;Array.isArray(r)&&0<r.length&&"RETRY_REQUEST_LATER"===r[0].responseAction&&(Px=$s(i,Px),rx.info("Retry transport request later.")),Rx=Ox,xx(n)})})({request_time_ms:String(Date.now()),client_info:{client_type:1,js_client_info:{}},log_source:lx.getInstance().logSource,log_event:e},t).catch(function(){Px=$s(t,Px),Rx--,rx.info("Tries left: "+Rx+"."),xx(Ax)})}():xx(Ax)},t)}function Lx(n){return function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];!function(t){if(!t.eventTime||!t.message)throw nx.create("invalid cc log");Px=$s(Px,[t])}({message:n.apply(void 0,t),eventTime:Date.now()})}}function Mx(t,e){(Nx=Nx||Lx(jx))(t,e)}function Fx(t){var e=lx.getInstance();!e.instrumentationEnabled&&t.isAuto||(e.dataCollectionEnabled||t.isAuto)&&ox.getInstance().requiredApisAvailable()&&(t.isAuto&&vx()!==cx.VISIBLE||e.loggingEnabled&&e.logTraceAfterSampling&&(3===Tx?Ux(t):Sx().then(function(){return Ux(t)},function(){return Ux(t)})))}function Ux(t){ux&&setTimeout(function(){return Mx(t,1)},0)}function jx(t,e){return 0===e?(r={url:(n=t).url,http_method:n.httpMethod||0,http_response_code:200,response_payload_bytes:n.responsePayloadBytes,client_start_time_us:n.startTimeUs,time_to_response_initiated_us:n.timeToResponseInitiatedUs,time_to_response_completed_us:n.timeToResponseCompletedUs},i={application_info:Vx(),network_request_metric:r},JSON.stringify(i)):function(t){var e={name:t.name,is_auto:t.isAuto,client_start_time_us:t.startTimeUs,duration_us:t.durationUs};0!==Object.keys(t.counters).length&&(e.counters=t.counters);var n=t.getAttributes();0!==Object.keys(n).length&&(e.custom_attributes=n);var r={application_info:Vx(),trace_metric:e};return JSON.stringify(r)}(t);var n,r,i}function Vx(){return{google_app_id:lx.getInstance().getAppId(),app_instance_id:ux,web_app_info:{sdk_version:XD,page_url:ox.getInstance().getUrl(),service_worker_status:"serviceWorker"in(t=ox.getInstance().navigator)?t.serviceWorker.controller?2:3:1,visibility_state:vx(),effective_connection_type:function(){var t=ox.getInstance().navigator.connection;switch(t&&t.effectiveType){case"slow-2g":return 1;case"2g":return 2;case"3g":return 3;case"4g":return 4;default:return 0}}()},application_process_state:0};var t}var qx=["_fp","_fcp","_fid"];var Bx=(Wx.prototype.start=function(){if(1!==this.state)throw nx.create("trace started",{traceName:this.name});this.api.mark(this.traceStartMark),this.state=2},Wx.prototype.stop=function(){if(2!==this.state)throw nx.create("trace stopped",{traceName:this.name});this.state=3,this.api.mark(this.traceStopMark),this.api.measure(this.traceMeasure,this.traceStartMark,this.traceStopMark),this.calculateTraceMetrics(),Fx(this)},Wx.prototype.record=function(t,e,n){if(this.durationUs=Math.floor(1e3*e),this.startTimeUs=Math.floor(1e3*t),n&&n.attributes&&(this.customAttributes=Hs({},n.attributes)),n&&n.metrics)for(var r=0,i=Object.keys(n.metrics);r<i.length;r++){var o=i[r];isNaN(Number(n.metrics[o]))||(this.counters[o]=Number(Math.floor(n.metrics[o])))}Fx(this)},Wx.prototype.incrementMetric=function(t,e){void 0===e&&(e=1),void 0===this.counters[t]?this.putMetric(t,e):this.putMetric(t,this.counters[t]+e)},Wx.prototype.putMetric=function(t,e){if(i=t,o=this.name,0===i.length||100<i.length||!(o&&o.startsWith("_wt_")&&-1<qx.indexOf(i))&&i.startsWith("_"))throw nx.create("invalid custom metric name",{customMetricName:t});var n,r,i,o;this.counters[t]=(n=e,(r=Math.floor(n))<n&&rx.info("Metric value should be an Integer, setting the value as : "+r+"."),r)},Wx.prototype.getMetric=function(t){return this.counters[t]||0},Wx.prototype.putAttribute=function(t,e){var n,r,i=!(0===(n=t).length||40<n.length)&&(!px.some(function(t){return n.startsWith(t)})&&!!n.match(dx)),o=0!==(r=e).length&&r.length<=100;if(i&&o)this.customAttributes[t]=e;else{if(!i)throw nx.create("invalid attribute name",{attributeName:t});if(!o)throw nx.create("invalid attribute value",{attributeValue:e})}},Wx.prototype.getAttribute=function(t){return this.customAttributes[t]},Wx.prototype.removeAttribute=function(t){void 0!==this.customAttributes[t]&&delete this.customAttributes[t]},Wx.prototype.getAttributes=function(){return Hs({},this.customAttributes)},Wx.prototype.setStartTime=function(t){this.startTimeUs=t},Wx.prototype.setDuration=function(t){this.durationUs=t},Wx.prototype.calculateTraceMetrics=function(){var t=this.api.getEntriesByName(this.traceMeasure),e=t&&t[0];e&&(this.durationUs=Math.floor(1e3*e.duration),this.startTimeUs=Math.floor(1e3*(e.startTime+this.api.getTimeOrigin())))},Wx.createOobTrace=function(t,e,n){var r,i,o,s,a=ox.getInstance().getUrl();a&&(r=new Wx("_wt_"+a,!0),i=Math.floor(1e3*ox.getInstance().getTimeOrigin()),r.setStartTime(i),t&&t[0]&&(r.setDuration(Math.floor(1e3*t[0].duration)),r.putMetric("domInteractive",Math.floor(1e3*t[0].domInteractive)),r.putMetric("domContentLoadedEventEnd",Math.floor(1e3*t[0].domContentLoadedEventEnd)),r.putMetric("loadEventEnd",Math.floor(1e3*t[0].loadEventEnd))),e&&((o=e.find(function(t){return"first-paint"===t.name}))&&o.startTime&&r.putMetric("_fp",Math.floor(1e3*o.startTime)),(s=e.find(function(t){return"first-contentful-paint"===t.name}))&&s.startTime&&r.putMetric("_fcp",Math.floor(1e3*s.startTime)),n&&r.putMetric("_fid",Math.floor(1e3*n))),Fx(r))},Wx.createUserTimingTrace=function(t){Fx(new Wx(t,!1,t))},Wx);function Wx(t,e,n){void 0===e&&(e=!1),this.name=t,this.isAuto=e,this.state=1,this.customAttributes={},this.counters={},this.api=ox.getInstance(),this.randomId=Math.floor(1e6*Math.random()),this.isAuto||(this.traceStartMark="FB-PERF-TRACE-START-"+this.randomId+"-"+this.name,this.traceStopMark="FB-PERF-TRACE-STOP-"+this.randomId+"-"+this.name,this.traceMeasure=n||$D+"-"+this.randomId+"-"+this.name,n&&this.calculateTraceMetrics())}function Gx(t){var e,n,r,i,o,s,a,u,c,h,l=t;l&&void 0!==l.responseStart&&(e=ox.getInstance().getTimeOrigin(),n=Math.floor(1e3*(l.startTime+e)),r=l.responseStart?Math.floor(1e3*(l.responseStart-l.startTime)):void 0,i=Math.floor(1e3*(l.responseEnd-l.startTime)),o={url:l.name&&l.name.split("?")[0],responsePayloadBytes:l.transferSize,startTimeUs:n,timeToResponseInitiatedUs:r,timeToResponseCompletedUs:i},s=o,(h=lx.getInstance()).instrumentationEnabled&&(a=s.url,u=h.logEndPointUrl.split("?")[0],c=h.flTransportEndpointUrl.split("?")[0],a!==u&&a!==c&&h.loggingEnabled&&h.logNetworkAfterSampling&&setTimeout(function(){return Mx(s,0)},0)))}var Hx=5e3;function Kx(){ux&&(setTimeout(function(){var t=ox.getInstance(),e=t.getEntriesByType("navigation"),n=t.getEntriesByType("paint");{var r;t.onFirstInputDelay?(r=setTimeout(function(){Bx.createOobTrace(e,n),r=void 0},Hx),t.onFirstInputDelay(function(t){r&&(clearTimeout(r),Bx.createOobTrace(e,n,t))})):Bx.createOobTrace(e,n)}},0),setTimeout(function(){for(var t=ox.getInstance(),e=t.getEntriesByType("resource"),n=0,r=e;n<r.length;n++){Gx(r[n])}t.setupObserver("resource",Gx)},0),setTimeout(function(){for(var t=ox.getInstance(),e=t.getEntriesByType("measure"),n=0,r=e;n<r.length;n++){zx(r[n])}t.setupObserver("measure",zx)},0))}function zx(t){var e=t.name;e.substring(0,$D.length)!==$D&&Bx.createUserTimingTrace(e)}var Qx=(Yx.prototype.trace=function(t){return new Bx(t)},Object.defineProperty(Yx.prototype,"instrumentationEnabled",{get:function(){return lx.getInstance().instrumentationEnabled},set:function(t){lx.getInstance().instrumentationEnabled=t},enumerable:!1,configurable:!0}),Object.defineProperty(Yx.prototype,"dataCollectionEnabled",{get:function(){return lx.getInstance().dataCollectionEnabled},set:function(t){lx.getInstance().dataCollectionEnabled=t},enumerable:!1,configurable:!0}),Yx);function Yx(t){this.app=t,ox.getInstance().requiredApisAvailable()&&da().then(function(t){t&&(Dx||(xx(kx),Dx=!0),Sx().then(Kx,Kx))}).catch(function(t){rx.info("Environment doesn't support IndexedDB: "+t)})}var Xx;function $x(t,e){if("[DEFAULT]"!==t.name)throw nx.create("FB not default");if("undefined"==typeof window)throw nx.create("no window");return YD=window,lx.getInstance().firebaseAppInstance=t,lx.getInstance().installationsService=e,new Qx(t)}(Xx=Hl).INTERNAL.registerComponent(new Ka("performance",function(t){var e=t.getProvider("app").getImmediate(),n=t.getProvider("installations").getImmediate();return $x(e,n)},"PUBLIC")),Xx.registerVersion("@firebase/performance","0.4.1");var Jx,Zx,tL,eL,nL="firebase_id",rL="origin",iL=6e4,oL="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",sL="https://www.googletagmanager.com/gtag/js";(Zx=Jx=Jx||{}).EVENT="event",Zx.SET="set",Zx.CONFIG="config",(eL=tL=tL||{}).ADD_SHIPPING_INFO="add_shipping_info",eL.ADD_PAYMENT_INFO="add_payment_info",eL.ADD_TO_CART="add_to_cart",eL.ADD_TO_WISHLIST="add_to_wishlist",eL.BEGIN_CHECKOUT="begin_checkout",eL.CHECKOUT_PROGRESS="checkout_progress",eL.EXCEPTION="exception",eL.GENERATE_LEAD="generate_lead",eL.LOGIN="login",eL.PAGE_VIEW="page_view",eL.PURCHASE="purchase",eL.REFUND="refund",eL.REMOVE_FROM_CART="remove_from_cart",eL.SCREEN_VIEW="screen_view",eL.SEARCH="search",eL.SELECT_CONTENT="select_content",eL.SELECT_ITEM="select_item",eL.SELECT_PROMOTION="select_promotion",eL.SET_CHECKOUT_OPTION="set_checkout_option",eL.SHARE="share",eL.SIGN_UP="sign_up",eL.TIMING_COMPLETE="timing_complete",eL.VIEW_CART="view_cart",eL.VIEW_ITEM="view_item",eL.VIEW_ITEM_LIST="view_item_list",eL.VIEW_PROMOTION="view_promotion",eL.VIEW_SEARCH_RESULTS="view_search_results";var aL,uL=new cu("@firebase/analytics");function cL(o,s,a,u){return function(n,r,i){return Ks(this,void 0,void 0,function(){var e;return zs(this,function(t){switch(t.label){case 0:return t.trys.push([0,6,,7]),n!==Jx.EVENT?[3,2]:[4,function(c,h,l,f,p){return Ks(this,void 0,void 0,function(){var r,e,i,n,o,s,a,u;return zs(this,function(t){switch(t.label){case 0:return(t.trys.push([0,4,,5]),r=[],p&&p.send_to)?(e=p.send_to,Array.isArray(e)||(e=[e]),[4,Promise.all(l)]):[3,2];case 1:for(i=t.sent(),n=function(e){var t=i.find(function(t){return t.measurementId===e}),n=t&&h[t.appId];if(!n)return r=[],"break";r.push(n)},o=0,s=e;o<s.length&&(a=s[o],"break"!==n(a));o++);t.label=2;case 2:return 0===r.length&&(r=Object.values(h)),[4,Promise.all(r)];case 3:return t.sent(),c(Jx.EVENT,f,p||{}),[3,5];case 4:return u=t.sent(),uL.error(u),[3,5];case 5:return[2]}})})}(o,s,a,r,i)];case 1:return t.sent(),[3,5];case 2:return n!==Jx.CONFIG?[3,4]:[4,function(o,s,a,u,c,h){return Ks(this,void 0,void 0,function(){var e,n,r,i;return zs(this,function(t){switch(t.label){case 0:e=u[c],t.label=1;case 1:return t.trys.push([1,7,,8]),e?[4,s[e]]:[3,3];case 2:return t.sent(),[3,6];case 3:return[4,Promise.all(a)];case 4:return n=t.sent(),(r=n.find(function(t){return t.measurementId===c}))?[4,s[r.appId]]:[3,6];case 5:t.sent(),t.label=6;case 6:return[3,8];case 7:return i=t.sent(),uL.error(i),[3,8];case 8:return o(Jx.CONFIG,c,h),[2]}})})}(o,s,a,u,r,i)];case 3:return t.sent(),[3,5];case 4:o(Jx.SET,r),t.label=5;case 5:return[3,7];case 6:return e=t.sent(),uL.error(e),[3,7];case 7:return[2]}})})}}var hL=((aL={})["already-exists"]="A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.",aL["already-initialized"]="Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.",aL["interop-component-reg-failed"]="Firebase Analytics Interop Component failed to instantiate: {$reason}",aL["indexedDB-unsupported"]="IndexedDB is not supported by current browswer",aL["invalid-indexedDB-context"]="Environment doesn't support IndexedDB: {$errorInfo}. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments",aL["cookies-not-enabled"]="Cookies are not enabled in this browser environment. Analytics requires cookies to be enabled.",aL["invalid-analytics-context"]="Firebase Analytics is not supported in browser extensions.",aL["fetch-throttle"]="The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.",aL["config-fetch-failed"]="Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}",aL["no-api-key"]='The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',aL["no-app-id"]='The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',aL["indexedDB-unsupported"]="IndexedDB is not supported by current browswer",aL["invalid-indexedDB-context"]="Environment doesn't support IndexedDB: {$errorInfo}. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments",aL["cookies-not-enabled"]="Cookies are not enabled in this browser environment. Analytics requires cookies to be enabled.",aL),lL=new _a("analytics","Analytics",hL),fL=30;function pL(t,e){void 0===t&&(t={}),void 0===e&&(e=1e3),this.throttleMetadata=t,this.intervalMillis=e}var dL=new(pL.prototype.getThrottleMetadata=function(t){return this.throttleMetadata[t]},pL.prototype.setThrottleMetadata=function(t,e){this.throttleMetadata[t]=e},pL.prototype.deleteThrottleMetadata=function(t){delete this.throttleMetadata[t]},pL);function vL(u){var c;return Ks(this,void 0,void 0,function(){var e,n,r,i,o,s,a;return zs(this,function(t){switch(t.label){case 0:return e=u.appId,n=u.apiKey,r={method:"GET",headers:new Headers({Accept:"application/json","x-goog-api-key":n})},i=oL.replace("{app-id}",e),[4,fetch(i,r)];case 1:if(200===(o=t.sent()).status||304===o.status)return[3,6];s="",t.label=2;case 2:return t.trys.push([2,4,,5]),[4,o.json()];case 3:return a=t.sent(),null!==(c=a.error)&&void 0!==c&&c.message&&(s=a.error.message),[3,5];case 4:return t.sent(),[3,5];case 5:throw lL.create("config-fetch-failed",{httpStatus:o.status,responseMessage:s});case 6:return[2,o.json()]}})})}function yL(u,c,h){return void 0===c&&(c=dL),Ks(this,void 0,void 0,function(){var e,n,r,i,o,s,a=this;return zs(this,function(t){if(e=u.options,n=e.appId,r=e.apiKey,i=e.measurementId,!n)throw lL.create("no-app-id");if(r)return o=c.getThrottleMetadata(n)||{backoffCount:0,throttleEndTimeMillis:Date.now()},s=new mL,setTimeout(function(){return Ks(a,void 0,void 0,function(){return zs(this,function(t){return s.abort(),[2]})})},void 0!==h?h:iL),[2,function h(l,t,f,p){var d=t.throttleEndTimeMillis,v=t.backoffCount;void 0===p&&(p=dL);return Ks(this,void 0,void 0,function(){var e,n,r,s,a,u,c;return zs(this,function(t){switch(t.label){case 0:e=l.appId,n=l.measurementId,t.label=1;case 1:return t.trys.push([1,3,,4]),[4,(i=f,o=d,new Promise(function(t,e){var n=Math.max(o-Date.now(),0),r=setTimeout(t,n);i.addEventListener(function(){clearTimeout(r),e(lL.create("fetch-throttle",{throttleEndTimeMillis:o}))})}))];case 2:return t.sent(),[3,4];case 3:if(r=t.sent(),n)return uL.warn("Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID "+n+' provided in the "measurementId" field in the local Firebase config. ['+r.message+"]"),[2,{appId:e,measurementId:n}];throw r;case 4:return t.trys.push([4,6,,7]),[4,vL(l)];case 5:return s=t.sent(),p.deleteThrottleMetadata(e),[2,s];case 6:if(gL(a=t.sent()))return u=503===Number(a.httpStatus)?Ha(v,p.intervalMillis,fL):Ha(v,p.intervalMillis),c={throttleEndTimeMillis:Date.now()+u,backoffCount:v+1},p.setThrottleMetadata(e,c),uL.debug("Calling attemptFetch again in "+u+" millis"),[2,h(l,c,f,p)];if(p.deleteThrottleMetadata(e),n)return uL.warn("Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID "+n+' provided in the "measurementId" field in the local Firebase config. ['+a.message+"]"),[2,{appId:e,measurementId:n}];throw a;case 7:return[2]}var i,o})})}({appId:n,apiKey:r,measurementId:i},o,s,c)];if(i)return[2,{measurementId:i,appId:n}];throw lL.create("no-api-key")})})}function gL(t){if(t instanceof ma){var e=Number(t.httpStatus);return 429===e||500===e||503===e||504===e}}var mL=(bL.prototype.addEventListener=function(t){this.listeners.push(t)},bL.prototype.abort=function(){this.listeners.forEach(function(t){return t()})},bL);function bL(){this.listeners=[]}var _L,wL,EL={},IL=[],TL={},SL="dataLayer",CL="gtag",NL=!1;function AL(t){if(NL)throw lL.create("already-initialized");t.dataLayerName&&(SL=t.dataLayerName),t.gtagName&&(CL=t.gtagName)}function kL(t,e){if(ha())throw lL.create("invalid-analytics-context");if(!va())throw lL.create("cookies-not-enabled");if(!pa())throw lL.create("indexedDB-unsupported");da().catch(function(t){var e=lL.create("invalid-indexedDB-context",{errorInfo:t});uL.warn(e.message)});var n,r,i,o,s,a,u,c,h,l,f,p=t.options.appId;if(!p)throw lL.create("no-app-id");if(!t.options.apiKey){if(!t.options.measurementId)throw lL.create("no-api-key");uL.warn('The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID '+t.options.measurementId+' provided in the "measurementId" field in the local Firebase config.')}if(null!=EL[p])throw lL.create("already-exists",{id:p});return NL||(function(){for(var t=window.document.getElementsByTagName("script"),e=0,n=Object.values(t);e<n.length;e++){var r=n[e];if(r.src&&r.src.includes(sL))return r}}()||(l=SL,(f=document.createElement("script")).src=sL+"?l="+l,f.async=!0,document.head.appendChild(f)),c=SL,h=[],Array.isArray(window[c])?h=window[c]:window[c]=h,r=EL,i=IL,o=TL,s=SL,a=CL,u=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];window[s].push(arguments)},window[a]&&"function"==typeof window[a]&&(u=window[a]),window[a]=cL(u,r,i,o),n={gtagCore:u,wrappedGtag:window[a]},wL=n.wrappedGtag,_L=n.gtagCore,NL=!0),EL[p]=function(s,a,u,c,h){return Ks(this,void 0,void 0,function(){var e,n,r,i,o;return zs(this,function(t){switch(t.label){case 0:return(e=yL(s)).then(function(t){u[t.measurementId]=t.appId,s.options.measurementId&&t.measurementId!==s.options.measurementId&&uL.warn("The measurement ID in the local Firebase config ("+s.options.measurementId+") does not match the measurement ID fetched from the server ("+t.measurementId+"). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.")}).catch(function(t){return uL.error(t)}),a.push(e),[4,Promise.all([e,c.getId()])];case 1:return n=t.sent(),r=n[0],i=n[1],h("js",new Date),h(Jx.CONFIG,r.measurementId,((o={})[nL]=i,o[rL]="firebase",o.update=!0,o)),[2,r.measurementId]}})})}(t,IL,TL,e,_L),{app:t,logEvent:function(t,e,n){(function(r,i,o,s,a){return Ks(this,void 0,void 0,function(){var e,n;return zs(this,function(t){switch(t.label){case 0:return a&&a.global?(r(Jx.EVENT,o,s),[2]):[3,1];case 1:return[4,i];case 2:e=t.sent(),n=Hs(Hs({},s),{send_to:e}),r(Jx.EVENT,o,n),t.label=3;case 3:return[2]}})})})(wL,EL[p],t,e,n).catch(function(t){return uL.error(t)})},setCurrentScreen:function(t,e){(function(n,r,i,o){return Ks(this,void 0,void 0,function(){var e;return zs(this,function(t){switch(t.label){case 0:return o&&o.global?(n(Jx.SET,{screen_name:i}),[2,Promise.resolve()]):[3,1];case 1:return[4,r];case 2:e=t.sent(),n(Jx.CONFIG,e,{update:!0,screen_name:i}),t.label=3;case 3:return[2]}})})})(wL,EL[p],t,e).catch(function(t){return uL.error(t)})},setUserId:function(t,e){(function(n,r,i,o){return Ks(this,void 0,void 0,function(){var e;return zs(this,function(t){switch(t.label){case 0:return o&&o.global?(n(Jx.SET,{user_id:i}),[2,Promise.resolve()]):[3,1];case 1:return[4,r];case 2:e=t.sent(),n(Jx.CONFIG,e,{update:!0,user_id:i}),t.label=3;case 3:return[2]}})})})(wL,EL[p],t,e).catch(function(t){return uL.error(t)})},setUserProperties:function(t,e){(function(s,a,u,c){return Ks(this,void 0,void 0,function(){var e,n,r,i,o;return zs(this,function(t){switch(t.label){case 0:if(!c||!c.global)return[3,1];for(e={},n=0,r=Object.keys(u);n<r.length;n++)i=r[n],e["user_properties."+i]=u[i];return s(Jx.SET,e),[2,Promise.resolve()];case 1:return[4,a];case 2:o=t.sent(),s(Jx.CONFIG,o,{update:!0,user_properties:u}),t.label=3;case 3:return[2]}})})})(wL,EL[p],t,e).catch(function(t){return uL.error(t)})},setAnalyticsCollectionEnabled:function(t){(function(n,r){return Ks(this,void 0,void 0,function(){var e;return zs(this,function(t){switch(t.label){case 0:return[4,n];case 1:return e=t.sent(),window["ga-disable-"+e]=!r,[2]}})})})(EL[p],t).catch(function(t){return uL.error(t)})},INTERNAL:{delete:function(){return delete EL[p],Promise.resolve()}}}}var OL,RL="analytics";function PL(){return Ks(this,void 0,void 0,function(){return zs(this,function(t){switch(t.label){case 0:if(ha())return[2,!1];if(!va())return[2,!1];if(!pa())return[2,!1];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,da()];case 2:return[2,t.sent()];case 3:return t.sent(),[2,!1];case 4:return[2]}})})}(OL=Hl).INTERNAL.registerComponent(new Ka(RL,function(t){return kL(t.getProvider("app").getImmediate(),t.getProvider("installations").getImmediate())},"PUBLIC").setServiceProps({settings:AL,EventName:tL,isSupported:PL})),OL.INTERNAL.registerComponent(new Ka("analytics-internal",function(t){try{return{logEvent:t.getProvider(RL).getImmediate().logEvent}}catch(t){throw lL.create("interop-component-reg-failed",{reason:t})}},"PRIVATE")),OL.registerVersion("@firebase/analytics","0.5.0");var DL,xL=(LL.prototype.isCachedDataFresh=function(t,e){if(!e)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;var n=Date.now()-e,r=n<=t;return this.logger.debug("Config fetch cache check. Cache age millis: "+n+". Cache max age millis (minimumFetchIntervalMillis setting): "+t+". Is cache hit: "+r+"."),r},LL.prototype.fetch=function(s){return Ks(this,void 0,void 0,function(){var e,n,r,i,o;return zs(this,function(t){switch(t.label){case 0:return[4,Promise.all([this.storage.getLastSuccessfulFetchTimestampMillis(),this.storage.getLastSuccessfulFetchResponse()])];case 1:return(e=t.sent(),n=e[0],(r=e[1])&&this.isCachedDataFresh(s.cacheMaxAgeMillis,n))?[2,r]:(s.eTag=r&&r.eTag,[4,this.client.fetch(s)]);case 2:return i=t.sent(),o=[this.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())],200===i.status&&o.push(this.storage.setLastSuccessfulFetchResponse(i)),[4,Promise.all(o)];case 3:return t.sent(),[2,i]}})})},LL);function LL(t,e,n,r){this.client=t,this.storage=e,this.storageCache=n,this.logger=r}var ML=((DL={})["registration-window"]="Undefined window object. This SDK only supports usage in a browser environment.",DL["registration-project-id"]="Undefined project identifier. Check Firebase app initialization.",DL["registration-api-key"]="Undefined API key. Check Firebase app initialization.",DL["registration-app-id"]="Undefined app identifier. Check Firebase app initialization.",DL["storage-open"]="Error thrown when opening storage. Original error: {$originalErrorMessage}.",DL["storage-get"]="Error thrown when reading from storage. Original error: {$originalErrorMessage}.",DL["storage-set"]="Error thrown when writing to storage. Original error: {$originalErrorMessage}.",DL["storage-delete"]="Error thrown when deleting from storage. Original error: {$originalErrorMessage}.",DL["fetch-client-network"]="Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.",DL["fetch-timeout"]='The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',DL["fetch-throttle"]='The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',DL["fetch-client-parse"]="Fetch client could not parse response. Original error: {$originalErrorMessage}.",DL["fetch-status"]="Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.",DL),FL=new _a("remoteconfig","Remote Config",ML);var UL=(jL.prototype.fetch=function(w){return Ks(this,void 0,void 0,function(){var n,r,i,o,s,a,u,c,h,l,f,p,d,v,y,g,m,b,_;return zs(this,function(t){switch(t.label){case 0:return[4,Promise.all([this.firebaseInstallations.getId(),this.firebaseInstallations.getToken()])];case 1:n=t.sent(),r=n[0],i=n[1],o=window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com",s=o+"/v1/projects/"+this.projectId+"/namespaces/"+this.namespace+":fetch?key="+this.apiKey,a={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":w.eTag||"*"},u={sdk_version:this.sdkVersion,app_instance_id:r,app_instance_id_token:i,app_id:this.appId,language_code:(void 0===e&&(e=navigator),e.languages&&e.languages[0]||e.language)},c={method:"POST",headers:a,body:JSON.stringify(u)},h=fetch(s,c),l=new Promise(function(t,e){w.signal.addEventListener(function(){var t=new Error("The operation was aborted.");t.name="AbortError",e(t)})}),t.label=2;case 2:return t.trys.push([2,5,,6]),[4,Promise.race([h,l])];case 3:return t.sent(),[4,h];case 4:return f=t.sent(),[3,6];case 5:throw p=t.sent(),d="fetch-client-network","AbortError"===p.name&&(d="fetch-timeout"),FL.create(d,{originalErrorMessage:p.message});case 6:if(v=f.status,y=f.headers.get("ETag")||void 0,200!==f.status)return[3,11];b=void 0,t.label=7;case 7:return t.trys.push([7,9,,10]),[4,f.json()];case 8:return b=t.sent(),[3,10];case 9:throw _=t.sent(),FL.create("fetch-client-parse",{originalErrorMessage:_.message});case 10:g=b.entries,m=b.state,t.label=11;case 11:if("INSTANCE_STATE_UNSPECIFIED"===m?v=500:"NO_CHANGE"===m?v=304:"NO_TEMPLATE"!==m&&"EMPTY_CONFIG"!==m||(g={}),304!==v&&200!==v)throw FL.create("fetch-status",{httpStatus:v});return[2,{status:v,eTag:y,config:g}]}var e})})},jL);function jL(t,e,n,r,i,o){this.firebaseInstallations=t,this.sdkVersion=e,this.namespace=n,this.projectId=r,this.apiKey=i,this.appId=o}var VL=(qL.prototype.addEventListener=function(t){this.listeners.push(t)},qL.prototype.abort=function(){this.listeners.forEach(function(t){return t()})},qL);function qL(){this.listeners=[]}var BL=["1","true","t","yes","y","on"],WL=(GL.prototype.asString=function(){return this._value},GL.prototype.asBoolean=function(){return"static"!==this._source&&0<=BL.indexOf(this._value.toLowerCase())},GL.prototype.asNumber=function(){if("static"===this._source)return 0;var t=Number(this._value);return isNaN(t)&&(t=0),t},GL.prototype.getSource=function(){return this._source},GL);function GL(t,e){void 0===e&&(e=""),this._source=t,this._value=e}var HL=(KL.prototype.setLogLevel=function(t){switch(t){case"debug":this._logger.logLevel=eu.DEBUG;break;case"silent":this._logger.logLevel=eu.SILENT;break;default:this._logger.logLevel=eu.ERROR}},Object.defineProperty(KL.prototype,"fetchTimeMillis",{get:function(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1},enumerable:!1,configurable:!0}),Object.defineProperty(KL.prototype,"lastFetchStatus",{get:function(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"},enumerable:!1,configurable:!0}),KL.prototype.activate=function(){return Ks(this,void 0,void 0,function(){var e,n,r;return zs(this,function(t){switch(t.label){case 0:return[4,Promise.all([this._storage.getLastSuccessfulFetchResponse(),this._storage.getActiveConfigEtag()])];case 1:return e=t.sent(),n=e[0],r=e[1],n&&n.config&&n.eTag&&n.eTag!==r?[4,Promise.all([this._storageCache.setActiveConfig(n.config),this._storage.setActiveConfigEtag(n.eTag)])]:[2,!1];case 2:return t.sent(),[2,!0]}})})},KL.prototype.ensureInitialized=function(){var t=this;return this._initializePromise||(this._initializePromise=this._storageCache.loadFromStorage().then(function(){t._isInitializationComplete=!0})),this._initializePromise},KL.prototype.fetch=function(){return Ks(this,void 0,void 0,function(){var r,i,o,s=this;return zs(this,function(t){switch(t.label){case 0:r=new VL,setTimeout(function(){return Ks(s,void 0,void 0,function(){return zs(this,function(t){return r.abort(),[2]})})},this.settings.fetchTimeoutMillis),t.label=1;case 1:return t.trys.push([1,4,,6]),[4,this._client.fetch({cacheMaxAgeMillis:this.settings.minimumFetchIntervalMillis,signal:r})];case 2:return t.sent(),[4,this._storageCache.setLastFetchStatus("success")];case 3:return t.sent(),[3,6];case 4:return i=t.sent(),n="fetch-throttle",o=(e=i)instanceof ma&&-1!==e.code.indexOf(n)?"throttle":"failure",[4,this._storageCache.setLastFetchStatus(o)];case 5:throw t.sent(),i;case 6:return[2]}var e,n})})},KL.prototype.fetchAndActivate=function(){return Ks(this,void 0,void 0,function(){return zs(this,function(t){switch(t.label){case 0:return[4,this.fetch()];case 1:return t.sent(),[2,this.activate()]}})})},KL.prototype.getAll=function(){var n=this;return function(t,e){void 0===t&&(t={});void 0===e&&(e={});return Object.keys(Hs(Hs({},t),e))}(this._storageCache.getActiveConfig(),this.defaultConfig).reduce(function(t,e){return t[e]=n.getValue(e),t},{})},KL.prototype.getBoolean=function(t){return this.getValue(t).asBoolean()},KL.prototype.getNumber=function(t){return this.getValue(t).asNumber()},KL.prototype.getString=function(t){return this.getValue(t).asString()},KL.prototype.getValue=function(t){this._isInitializationComplete||this._logger.debug('A value was requested for key "'+t+'" before SDK initialization completed. Await on ensureInitialized if the intent was to get a previously activated value.');var e=this._storageCache.getActiveConfig();return e&&void 0!==e[t]?new WL("remote",e[t]):this.defaultConfig&&void 0!==this.defaultConfig[t]?new WL("default",String(this.defaultConfig[t])):(this._logger.debug('Returning static value for key "'+t+'". Define a default or remote value if this is unintentional.'),new WL("static"))},KL);function KL(t,e,n,r,i){this.app=t,this._client=e,this._storageCache=n,this._storage=r,this._logger=i,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}function zL(t,e){var n=t.target.error||void 0;return FL.create(e,{originalErrorMessage:n&&n.message})}var QL="app_namespace_store",YL="firebase_remote_config",XL=1;var $L=(JL.prototype.getLastFetchStatus=function(){return this.get("last_fetch_status")},JL.prototype.setLastFetchStatus=function(t){return this.set("last_fetch_status",t)},JL.prototype.getLastSuccessfulFetchTimestampMillis=function(){return this.get("last_successful_fetch_timestamp_millis")},JL.prototype.setLastSuccessfulFetchTimestampMillis=function(t){return this.set("last_successful_fetch_timestamp_millis",t)},JL.prototype.getLastSuccessfulFetchResponse=function(){return this.get("last_successful_fetch_response")},JL.prototype.setLastSuccessfulFetchResponse=function(t){return this.set("last_successful_fetch_response",t)},JL.prototype.getActiveConfig=function(){return this.get("active_config")},JL.prototype.setActiveConfig=function(t){return this.set("active_config",t)},JL.prototype.getActiveConfigEtag=function(){return this.get("active_config_etag")},JL.prototype.setActiveConfigEtag=function(t){return this.set("active_config_etag",t)},JL.prototype.getThrottleMetadata=function(){return this.get("throttle_metadata")},JL.prototype.setThrottleMetadata=function(t){return this.set("throttle_metadata",t)},JL.prototype.deleteThrottleMetadata=function(){return this.delete("throttle_metadata")},JL.prototype.get=function(a){return Ks(this,void 0,void 0,function(){var o,s=this;return zs(this,function(t){switch(t.label){case 0:return[4,this.openDbPromise];case 1:return o=t.sent(),[2,new Promise(function(n,e){var t=o.transaction([QL],"readonly").objectStore(QL),r=s.createCompositeKey(a);try{var i=t.get(r);i.onerror=function(t){e(zL(t,"storage-get"))},i.onsuccess=function(t){var e=t.target.result;n(e?e.value:void 0)}}catch(t){e(FL.create("storage-get",{originalErrorMessage:t&&t.message}))}})]}})})},JL.prototype.set=function(a,u){return Ks(this,void 0,void 0,function(){var o,s=this;return zs(this,function(t){switch(t.label){case 0:return[4,this.openDbPromise];case 1:return o=t.sent(),[2,new Promise(function(t,e){var n=o.transaction([QL],"readwrite").objectStore(QL),r=s.createCompositeKey(a);try{var i=n.put({compositeKey:r,value:u});i.onerror=function(t){e(zL(t,"storage-set"))},i.onsuccess=function(){t()}}catch(t){e(FL.create("storage-set",{originalErrorMessage:t&&t.message}))}})]}})})},JL.prototype.delete=function(a){return Ks(this,void 0,void 0,function(){var o,s=this;return zs(this,function(t){switch(t.label){case 0:return[4,this.openDbPromise];case 1:return o=t.sent(),[2,new Promise(function(t,e){var n=o.transaction([QL],"readwrite").objectStore(QL),r=s.createCompositeKey(a);try{var i=n.delete(r);i.onerror=function(t){e(zL(t,"storage-delete"))},i.onsuccess=function(){t()}}catch(t){e(FL.create("storage-delete",{originalErrorMessage:t&&t.message}))}})]}})})},JL.prototype.createCompositeKey=function(t){return[this.appId,this.appName,this.namespace,t].join()},JL);function JL(t,e,n,r){void 0===r&&(r=new Promise(function(e,n){var t=indexedDB.open(YL,XL);t.onerror=function(t){n(zL(t,"storage-open"))},t.onsuccess=function(t){e(t.target.result)},t.onupgradeneeded=function(t){var e=t.target.result;0===t.oldVersion&&e.createObjectStore(QL,{keyPath:"compositeKey"})}})),this.appId=t,this.appName=e,this.namespace=n,this.openDbPromise=r}var ZL=(tM.prototype.getLastFetchStatus=function(){return this.lastFetchStatus},tM.prototype.getLastSuccessfulFetchTimestampMillis=function(){return this.lastSuccessfulFetchTimestampMillis},tM.prototype.getActiveConfig=function(){return this.activeConfig},tM.prototype.loadFromStorage=function(){return Ks(this,void 0,void 0,function(){var e,n,r,i,o,s;return zs(this,function(t){switch(t.label){case 0:return e=this.storage.getLastFetchStatus(),n=this.storage.getLastSuccessfulFetchTimestampMillis(),r=this.storage.getActiveConfig(),[4,e];case 1:return(i=t.sent())&&(this.lastFetchStatus=i),[4,n];case 2:return(o=t.sent())&&(this.lastSuccessfulFetchTimestampMillis=o),[4,r];case 3:return(s=t.sent())&&(this.activeConfig=s),[2]}})})},tM.prototype.setLastFetchStatus=function(t){return this.lastFetchStatus=t,this.storage.setLastFetchStatus(t)},tM.prototype.setLastSuccessfulFetchTimestampMillis=function(t){return this.lastSuccessfulFetchTimestampMillis=t,this.storage.setLastSuccessfulFetchTimestampMillis(t)},tM.prototype.setActiveConfig=function(t){return this.activeConfig=t,this.storage.setActiveConfig(t)},tM);function tM(t){this.storage=t}var eM=(nM.prototype.fetch=function(n){return Ks(this,void 0,void 0,function(){var e;return zs(this,function(t){switch(t.label){case 0:return[4,this.storage.getThrottleMetadata()];case 1:return e=t.sent()||{backoffCount:0,throttleEndTimeMillis:Date.now()},[2,this.attemptFetch(n,e)]}})})},nM.prototype.attemptFetch=function(s,t){var a=t.throttleEndTimeMillis,u=t.backoffCount;return Ks(this,void 0,void 0,function(){var e,n,r;return zs(this,function(t){switch(t.label){case 0:return[4,(i=s.signal,o=a,new Promise(function(t,e){var n=Math.max(o-Date.now(),0),r=setTimeout(t,n);i.addEventListener(function(){clearTimeout(r),e(FL.create("fetch-throttle",{throttleEndTimeMillis:o}))})}))];case 1:t.sent(),t.label=2;case 2:return t.trys.push([2,5,,7]),[4,this.client.fetch(s)];case 3:return e=t.sent(),[4,this.storage.deleteThrottleMetadata()];case 4:return t.sent(),[2,e];case 5:if(!function(t){if(t instanceof ma){var e=Number(t.httpStatus);return 429===e||500===e||503===e||504===e}}(n=t.sent()))throw n;return r={throttleEndTimeMillis:Date.now()+Ha(u),backoffCount:u+1},[4,this.storage.setThrottleMetadata(r)];case 6:return t.sent(),[2,this.attemptFetch(s,r)];case 7:return[2]}var i,o})})},nM);function nM(t,e){this.client=t,this.storage=e}var rM,iM="@firebase/remote-config";return(rM=Hl).INTERNAL.registerComponent(new Ka("remoteConfig",function(t,e){var n=t.getProvider("app").getImmediate(),r=t.getProvider("installations").getImmediate();if("undefined"==typeof window)throw FL.create("registration-window");var i=n.options,o=i.projectId,s=i.apiKey,a=i.appId;if(!o)throw FL.create("registration-project-id");if(!s)throw FL.create("registration-api-key");if(!a)throw FL.create("registration-app-id");e=e||"firebase";var u=new $L(a,n.name,e),c=new ZL(u),h=new cu(iM);h.logLevel=eu.ERROR;var l=new UL(r,rM.SDK_VERSION,e,o,s,a),f=new eM(l,u),p=new xL(f,u,c,h),d=new HL(n,p,c,u,h);return d.ensureInitialized(),d},"PUBLIC").setMultipleInstances(!0)),rM.registerVersion(iM,"0.1.28"),console.warn("\nIt looks like you're using the development build of the Firebase JS SDK.\nWhen deploying Firebase apps to production, it is advisable to only import\nthe individual SDK components you intend to use.\n\nFor the CDN builds, these are available in the following manner\n(replace <PACKAGE> with the name of a component - i.e. auth, database, etc):\n\nhttps://www.gstatic.com/firebasejs/5.0.0/firebase-<PACKAGE>.js\n"),Hl.registerVersion("firebase","7.21.1","cdn"),Hl});
//# sourceMappingURL=firebase.js.map
